var Oc=Object.defineProperty;var o=(Po,Ja)=>Oc(Po,"name",{value:Ja,configurable:!0});(()=>{var Po={850:(ot,l,C)=>{"use strict";C.r(l),C.d(l,{AppInsightsCore:()=>Ye,BaseCore:()=>Mn,BaseTelemetryPlugin:()=>Ur.i,CoreUtils:()=>B.Tr,DiagnosticLogger:()=>me.AQ,ESPromise:()=>mr,ESPromiseScheduler:()=>zn,EventHelper:()=>Fr.zB,EventLatency:()=>N,EventPersistence:()=>w,EventPropertyType:()=>m,EventsDiscardedReason:()=>Dr.h,FullVersionString:()=>B.vs,InternalAppInsightsCore:()=>nt.F,InternalBaseCore:()=>jt.A,LoggingSeverity:()=>y.X,MinChannelPriorty:()=>er,NotificationManager:()=>Ar.f,PerfEvent:()=>Le.zn,PerfManager:()=>Le.Jk,ProcessTelemetryContext:()=>Sr.Vi,TraceLevel:()=>O,Undefined:()=>Cr.jA,Utils:()=>B.cQ,ValueKind:()=>W,ValueSanitizer:()=>vr,Version:()=>B.Gf,_ExtendedInternalMessageId:()=>H,_InternalLogMessage:()=>me.lQ,_InternalMessageId:()=>y.v,__getRegisteredEvents:()=>Ln.um,_logInternalMessage:()=>me.L4,_throwInternal:()=>me.kP,_warnToConsole:()=>me.jV,addEventHandler:()=>Ln.Ib,addEventListeners:()=>Ln.yw,addPageHideEventListener:()=>Ln.TJ,addPageShowEventListener:()=>Ln.nD,addPageUnloadEventListener:()=>Ln.c9,areCookiesSupported:()=>Wr.p7,arrForEach:()=>P.tO,arrIndexOf:()=>P.UA,arrMap:()=>P.Mr,arrReduce:()=>P.Xz,attachEvent:()=>Ln.pZ,cookieAvailable:()=>Wr.p7,createCookieMgr:()=>Wr.Nz,createEnumStyle:()=>v.By,createGuid:()=>B.cm,createProcessTelemetryContext:()=>Sr.CD,createTraceParent:()=>br.SU,createUniqueNamespace:()=>Rr.J,createUnloadHandlerContainer:()=>vi.Y,dateNow:()=>P.m6,deleteCookie:()=>B.kT,detachEvent:()=>Ln.pD,disableCookies:()=>B.oF,disallowsSameSiteNone:()=>Wr.UY,doPerf:()=>Le.Lm,dumpObj:()=>Ze.eU,eventOff:()=>Ln.QY,eventOn:()=>Ln.XO,extend:()=>B.l7,findW3cTraceParent:()=>br.lq,formatTraceParent:()=>br.aR,generateW3CId:()=>Fr.DO,getCommonSchemaMetaData:()=>B.Vv,getConsole:()=>Ze.dr,getCookie:()=>B.ej,getCookieValue:()=>B.Do,getCrypto:()=>Ze.MX,getDocument:()=>Ze.Me,getExceptionName:()=>P.jj,getFieldValueType:()=>B.Sy,getGlobal:()=>cr.Rd,getGlobalInst:()=>Ze.a8,getHistory:()=>Ze.s1,getIEVersion:()=>Ze.sA,getISOString:()=>P.Y6,getJSON:()=>Ze.xA,getLocation:()=>Ze.k$,getMsCrypto:()=>Ze.gz,getNavigator:()=>Ze.jW,getPerformance:()=>Ze.r,getSetValue:()=>P.qK,getTenantId:()=>B.jM,getTime:()=>B.hK,getWindow:()=>Ze.Jj,hasDocument:()=>Ze.Nv,hasHistory:()=>Ze.fE,hasJSON:()=>Ze.nS,hasNavigator:()=>Ze.d6,hasOwnProperty:()=>P.nr,hasWindow:()=>Ze.Ym,isArray:()=>P.kJ,isArrayValid:()=>B.JT,isBeaconsSupported:()=>Ze.MF,isBoolean:()=>P.jn,isChromium:()=>B.mJ,isDate:()=>P.J_,isDocumentObjectAvailable:()=>B.x9,isError:()=>P.VZ,isFetchSupported:()=>Ze.JO,isFunction:()=>P.mf,isIE:()=>Ze.w1,isLatency:()=>B.r7,isNotTruthy:()=>P.F,isNullOrUndefined:()=>P.le,isNumber:()=>P.hj,isObject:()=>P.Kn,isReactNative:()=>Ze.b$,isSampledFlag:()=>br.Pn,isString:()=>P.HD,isTruthy:()=>P.fQ,isTypeof:()=>P.Ym,isUint8ArrayAvailable:()=>B.IZ,isUndefined:()=>P.o8,isValidSpanId:()=>br.Lc,isValidTraceId:()=>br.jN,isValidTraceParent:()=>br.J6,isValueAssigned:()=>B.Sn,isValueKind:()=>B.oS,isWindowObjectAvailable:()=>B.dH,isXhrSupported:()=>Ze.Z3,mergeEvtNamespace:()=>Ln.jU,newGuid:()=>Fr.GW,newId:()=>Nn.pZ,normalizeJsName:()=>P.Gf,objCreate:()=>cr.pu,objDefineAccessors:()=>P.l_,objForEachKey:()=>P.rW,objFreeze:()=>P.FL,objKeys:()=>P.FY,objSeal:()=>P.Xi,openXhr:()=>B.ot,optimizeObject:()=>P.Ax,parseTraceParent:()=>br.j_,perfNow:()=>Fr.Jj,proxyAssign:()=>P.cf,proxyFunctionAs:()=>P.Oi,proxyFunctions:()=>P.Vb,random32:()=>Nn._l,randomValue:()=>Nn.az,removeEventHandler:()=>Ln.C1,removeEventListeners:()=>Ln.nJ,removePageHideEventListener:()=>Ln.C9,removePageShowEventListener:()=>Ln.Yl,removePageUnloadEventListener:()=>Ln.JA,safeGetCookieMgr:()=>Wr.JP,safeGetLogger:()=>me.vH,sanitizeProperty:()=>B.yj,setCookie:()=>B.d8,setEnableEnvMocks:()=>Ze.dI,setProcessTelemetryTimings:()=>B.if,setValue:()=>P.sO,strContains:()=>P._Q,strEndsWith:()=>P.Id,strFunction:()=>Cr.cb,strObject:()=>Cr.fK,strPrototype:()=>Cr.hB,strStartsWith:()=>P.xe,strTrim:()=>P.nd,strUndefined:()=>Cr.jA,throwError:()=>P._y,toISOString:()=>P.Y6,useXDomainRequest:()=>Ze.cp});var R=C(1088),v=C(4873),P=C(6708),y=C(7310),W=(0,v.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),N=(0,v.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),m=(0,v.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),w=(0,v.By)({Normal:1,Critical:2}),O=(0,v.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),H=(0,P.FL)((0,R.uc)((0,R.uc)({},y.v),(0,v.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520})));/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var E,$="undefined",F="constructor",j="prototype",Q="function",Ee="_dynInstFuncs",z="_isDynProxy",ee="_dynClass",te="_dynCls$",T="_dynInstChk",q=T,k="_dfOpts",le="_unknown_",V="__proto__",fe="_dyn"+V,De="__dynProto$Gbl",Fe="_dynInstProto",ae="useBaseInst",we="setInstFuncs",D=Object,Je=D.getPrototypeOf,ye=D.getOwnPropertyNames;function ve(){var M;return typeof globalThis!==$&&(M=globalThis),!M&&typeof self!==$&&(M=self),!M&&typeof window!==$&&(M=window),!M&&typeof C.g!==$&&(M=C.g),M||{}}o(ve,"_getGlobal");var G=ve(),se=G[De]||(G[De]={o:(E={},E[we]=!0,E[ae]=!0,E),n:1e3});function Re(M,ue){return M&&D[j].hasOwnProperty.call(M,ue)}o(Re,"_hasOwnProperty");function Ge(M){return M&&(M===D[j]||M===Array[j])}o(Ge,"_isObjectOrArrayPrototype");function ie(M){return Ge(M)||M===Function[j]}o(ie,"_isObjectArrayOrFunctionPrototype");function Xe(M){var ue;if(M){if(Je)return Je(M);var Ae=M[V]||M[j]||(M[F]?M[F][j]:null);ue=M[fe]||Ae,Re(M,fe)||(delete M[Fe],ue=M[fe]=M[Fe]||M[fe],M[Fe]=Ae)}return ue}o(Xe,"_getObjProto");function lt(M,ue){var Ae=[];if(ye)Ae=ye(M);else for(var Pe in M)typeof Pe=="string"&&Re(M,Pe)&&Ae.push(Pe);if(Ae&&Ae.length>0)for(var et=0;et<Ae.length;et++)ue(Ae[et])}o(lt,"_forEachProp");function wt(M,ue,Ae){return ue!==F&&typeof M[ue]===Q&&(Ae||Re(M,ue))}o(wt,"_isDynamicCandidate");function L(M){throw new TypeError("DynamicProto: "+M)}o(L,"_throwTypeError");function U(M){var ue={};return lt(M,function(Ae){!ue[Ae]&&wt(M,Ae,!1)&&(ue[Ae]=M[Ae])}),ue}o(U,"_getInstanceFuncs");function re(M,ue){for(var Ae=M.length-1;Ae>=0;Ae--)if(M[Ae]===ue)return!0;return!1}o(re,"_hasVisited");function de(M,ue,Ae,Pe){function et(Dt,bt,Ct){var Bt=bt[Ct];if(Bt[z]&&Pe){var xt=Dt[Ee]||{};xt[q]!==!1&&(Bt=(xt[bt[ee]]||{})[Ct]||Bt)}return function(){return Bt.apply(Dt,arguments)}}o(et,"_instFuncProxy");var je={};lt(Ae,function(Dt){je[Dt]=et(ue,Ae,Dt)});for(var ct=Xe(M),Et=[];ct&&!ie(ct)&&!re(Et,ct);)lt(ct,function(Dt){!je[Dt]&&wt(ct,Dt,!Je)&&(je[Dt]=et(ue,ct,Dt))}),Et.push(ct),ct=Xe(ct);return je}o(de,"_getBaseFuncs");function He(M,ue,Ae,Pe){var et=null;if(M&&Re(Ae,ee)){var je=M[Ee]||{};if(et=(je[Ae[ee]]||{})[ue],et||L("Missing ["+ue+"] "+Q),!et[T]&&je[q]!==!1){for(var ct=!Re(M,ue),Et=Xe(M),Dt=[];ct&&Et&&!ie(Et)&&!re(Dt,Et);){var bt=Et[ue];if(bt){ct=bt===Pe;break}Dt.push(Et),Et=Xe(Et)}try{ct&&(M[ue]=et),et[T]=1}catch(Ct){je[q]=!1}}}return et}o(He,"_getInstFunc");function Ie(M,ue,Ae){var Pe=ue[M];return Pe===Ae&&(Pe=Xe(ue)[M]),typeof Pe!==Q&&L("["+M+"] is not a "+Q),Pe}o(Ie,"_getProtoFunc");function ce(M,ue,Ae,Pe,et){function je(Dt,bt){var Ct=o(function(){var Bt=He(this,bt,Dt,Ct)||Ie(bt,Dt,Ct);return Bt.apply(this,arguments)},"dynProtoProxy");return Ct[z]=1,Ct}if(o(je,"_createDynamicPrototype"),!Ge(M)){var ct=Ae[Ee]=Ae[Ee]||{},Et=ct[ue]=ct[ue]||{};ct[q]!==!1&&(ct[q]=!!et),lt(Ae,function(Dt){wt(Ae,Dt,!1)&&Ae[Dt]!==Pe[Dt]&&(Et[Dt]=Ae[Dt],delete Ae[Dt],(!Re(M,Dt)||M[Dt]&&!M[Dt][z])&&(M[Dt]=je(M,Dt)))})}}o(ce,"_populatePrototype");function Ce(M,ue){if(Je){for(var Ae=[],Pe=Xe(ue);Pe&&!ie(Pe)&&!re(Ae,Pe);){if(Pe===M)return!0;Ae.push(Pe),Pe=Xe(Pe)}return!1}return!0}o(Ce,"_checkPrototype");function Te(M,ue){return Re(M,j)?M.name||ue||le:((M||{})[F]||{}).name||ue||le}o(Te,"_getObjName");function Ve(M,ue,Ae,Pe){Re(M,j)||L("theClass is an invalid class definition.");var et=M[j];Ce(et,ue)||L("["+Te(M)+"] not in hierarchy of ["+Te(ue)+"]");var je=null;Re(et,ee)?je=et[ee]:(je=te+Te(M,"_")+"$"+se.n,se.n++,et[ee]=je);var ct=Ve[k],Et=!!ct[ae];Et&&Pe&&Pe[ae]!==void 0&&(Et=!!Pe[ae]);var Dt=U(ue),bt=de(et,ue,Dt,Et);Ae(ue,bt);var Ct=!!Je&&!!ct[we];Ct&&Pe&&(Ct=!!Pe[we]),ce(et,je,ue,Dt,Ct!==!1)}o(Ve,"dynamicProto"),Ve[k]=se.o;var me=C(5018),Le=C(9288),Ze=C(7630),nt=C(5121),be=C(7984),B=C(3599),K=function(M){(0,R.ne)(ue,M);function ue(){var Ae=M.call(this)||this;return Ae.pluginVersionStringArr=[],Ve(ue,Ae,function(Pe,et){(!Pe.logger||!Pe.logger.queue)&&(Pe.logger=new me.AQ({loggingLevelConsole:1})),Pe.initialize=function(je,ct,Et,Dt){(0,Le.Lm)(Pe,function(){return"AppInsightsCore.initialize"},function(){var bt=Pe.pluginVersionStringArr;if(je){je.endpointUrl||(je.endpointUrl=be.YT);var Ct=je.propertyStorageOverride;Ct&&(!Ct.getProperty||!Ct.setProperty)&&(0,P._y)("Invalid property storage override passed."),je.channels&&(0,P.tO)(je.channels,function(Wt){Wt&&(0,P.tO)(Wt,function(Ft){if(Ft.identifier&&Ft.version){var Wn=Ft.identifier+"="+Ft.version;bt.push(Wn)}})})}Pe.getWParam=function(){return typeof document!="undefined"||!!je.enableWParam?0:-1},ct&&(0,P.tO)(ct,function(Wt){if(Wt&&Wt.identifier&&Wt.version){var Ft=Wt.identifier+"="+Wt.version;bt.push(Ft)}}),Pe.pluginVersionString=bt.join(";"),Pe.pluginVersionStringArr=bt;try{et.initialize(je,ct,Et,Dt),Pe.pollInternalLogs("InternalLog")}catch(Wt){var Bt=Pe.logger,xt=(0,Ze.eU)(Wt);xt.indexOf("channels")!==-1&&(xt+=`
 - Channels must be provided through config.channels only!`),(0,me.kP)(Bt,1,514,"SDK Initialization Failed - no telemetry will be sent: "+xt)}},function(){return{config:je,extensions:ct,logger:Et,notificationManager:Dt}})},Pe.track=function(je){(0,Le.Lm)(Pe,function(){return"AppInsightsCore.track"},function(){var ct=je;if(ct){ct.timings=ct.timings||{},ct.timings.trackStart=(0,B.hK)(),(0,B.r7)(ct.latency)||(ct.latency=1);var Et=ct.ext=ct.ext||{};Et.sdk=Et.sdk||{},Et.sdk.ver=B.vs;var Dt=ct.baseData=ct.baseData||{};Dt[be.o6]=Dt[be.o6]||{};var bt=Dt[be.o6];bt[be.p8]=bt[be.p8]||Pe.pluginVersionString||be.qS}et.track(ct)},function(){return{item:je}},!je.sync)}}),Ae}return o(ue,"AppInsightsCore"),ue.__ieDyn=1,ue}(nt.F);const Ye=K;var jt=C(6900),An=function(M){(0,R.ne)(ue,M);function ue(){var Ae=M.call(this)||this;return Ve(ue,Ae,function(Pe,et){Pe.initialize=function(je,ct,Et,Dt){je&&!je.endpointUrl&&(je.endpointUrl=be.YT),Pe.getWParam=function(){return B.x9||!!je.enableWParam?0:-1};try{et.initialize(je,ct,Et,Dt)}catch(bt){(0,me.kP)(Pe.logger,1,514,"Initialization Failed: "+(0,Ze.eU)(bt)+`
 - Note: Channels must be provided through config.channels only`)}},Pe.track=function(je){var ct=je;if(ct){var Et=ct.ext=ct.ext||{};Et.sdk=Et.sdk||{},Et.sdk.ver=B.vs}et.track(ct)}}),Ae}return o(ue,"BaseCore"),ue.__ieDyn=1,ue}(jt.A);const Mn=An;var Cn=P.mf;function lr(M,ue,Ae){return function(Pe){M[ue]=Pe,Ae()}}o(lr,"_createPromiseAllOnResolvedFunction");var ar=function(){function M(ue){var Ae=0,Pe=null,et=[];Ve(M,this,function(bt){bt.then=function(Ct,Bt){return new M(function(xt,Wt){je(Ct,Bt,xt,Wt)})},bt.catch=function(Ct){return bt.then(null,Ct)}});function je(bt,Ct,Bt,xt){et.push(function(){var Wt;try{Ae===1?Wt=Cn(bt)?bt(Pe):Pe:Wt=Cn(Ct)?Ct(Pe):Pe,Wt instanceof M?Wt.then(Bt,xt):Ae===2&&!Cn(Ct)?xt(Wt):Bt(Wt)}catch(Ft){xt(Ft);return}}),Ae!==0&&ct()}o(je,"_enqueue");function ct(){if(et.length>0){var bt=et.slice();et=[],setTimeout(function(){for(var Ct=0,Bt=bt.length;Ct<Bt;++Ct)try{bt[Ct]()}catch(xt){}},0)}}o(ct,"_processQueue");function Et(bt){Ae===0&&(Pe=bt,Ae=1,ct())}o(Et,"_resolve");function Dt(bt){Ae===0&&(Pe=bt,Ae=2,ct())}o(Dt,"_reject"),o(function(){if(!Cn(ue))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{ue(Et,Dt)}catch(Ct){Dt(Ct)}},"_initialize")()}return o(M,"ESPromise"),M.resolve=function(ue){return ue instanceof M?ue:ue&&Cn(ue.then)?new M(function(Ae,Pe){try{ue.then(Ae,Pe)}catch(et){Pe(et)}}):new M(function(Ae){Ae(ue)})},M.reject=function(ue){return new M(function(Ae,Pe){Pe(ue)})},M.all=function(ue){if(!(!ue||!ue.length))return new M(function(Ae,Pe){try{for(var et=[],je=0,ct=0;ct<ue.length;ct++){var Et=ue[ct];Et&&Cn(Et.then)?(je++,Et.then(lr(et,ct,function(){--je==0&&Ae(et)}),Pe)):et[ct]=Et}je===0&&setTimeout(function(){Ae(et)},0)}catch(Dt){Pe(Dt)}})},M.race=function(ue){return new M(function(Ae,Pe){if(!(!ue||!ue.length))try{for(var et=o(function(ct){var Et=ue[ct];Et&&Cn(Et.then)?Et.then(Ae,Pe):setTimeout(function(){Ae(Et)},0)},"_loop_1"),je=0;je<ue.length;je++)et(je)}catch(ct){Pe(ct)}})},M}();const mr=ar;var cr=C(2091),yr=6e5,dt=0,zt=[],an=[],on=[];function Yt(){return new Date().getTime()}o(Yt,"_getTime");var _n=function(){function M(ue,Ae){var Pe=0,et=(ue||"<unnamed>")+"."+dt;dt++,Ve(M,this,function(Et){var Dt=null,bt=0;Et.scheduleEvent=function(Bt,xt,Wt){var Ft=et+"."+bt;bt++,xt&&(Ft+="-("+xt+")");var Wn=Ft+"{"+Pe+"}";Pe++;var bn={evt:null,tm:Yt(),id:Wn,isRunning:!1,isAborted:!1};return Dt?bn.evt=pi(bn,Dt):bn.evt=qn(bn),Dt=bn,Dt.evt._schId=Wn,bn.evt;function ur(Jt){for(var Jn=Yt(),xn=Jn-yr,en=Jt.length,$n=0;$n<en;){var kn=Jt[$n];if(kn&&kn.tm<xn){var wr=null;kn.abort?(wr="Aborting ["+kn.id+"] due to Excessive runtime ("+(Jn-kn.tm)+" ms)",kn.abort(wr)):wr="Removing ["+kn.id+"] due to Excessive runtime ("+(Jn-kn.tm)+" ms)",ct(wr),Jt.splice($n,1),en--}else $n++}}o(ur,"_abortAndRemoveOldEvents");function ir(Jt,Jn){var xn=!1,en=Ct(zt,Jt);if(en||(en=Ct(on,Jt),xn=!0),en){en.to&&(clearTimeout(en.to),en.to=null);var $n=Yt()-en.tm;Jn?xn?ct("Timed out event ["+Jt+"] finally complete -- "+$n+" ms"):je("Promise ["+Jt+"] Complete -- "+$n+" ms"):(on.push(en),ct("Event ["+Jt+"] Timed out and removed -- "+$n+" ms"))}else je("Failed to remove ["+Jt+"] from running queue");Dt&&Dt.id===Jt&&(Dt=null),ur(zt),ur(an),ur(on)}o(ir,"_cleanup");function or(Jt,Jn){return function(xn){return ir(Jt,!0),Jn&&Jn(xn),xn}}o(or,"_removeScheduledEvent");function $r(Jt,Jn,xn,en){Jn.then(function($n){return $n instanceof mr?(je("Event ["+Jt+"] returned a promise -- waiting"),$r(Jt,$n,xn,en),$n):or(Jt,xn)($n)},or(Jt,en))}o($r,"_waitForFinalResult");function Lr(Jt,Jn){var xn=Jt.id;return new mr(function(en,$n){je("Event ["+xn+"] Starting -- waited for "+(Jt.wTm||"--")+" ms"),Jt.isRunning=!0,Jt.abort=function(wr){Jt.abort=null,Jt.isAborted=!0,ir(xn,!1),$n(new Error(wr))};var kn=Jn(xn);kn instanceof mr?(Wt&&(Jt.to=setTimeout(function(){ir(xn,!1),$n(new Error("Timed out after ["+Wt+"] ms"))},Wt)),$r(xn,kn,function(wr){je("Event ["+xn+"] Resolving after "+(Yt()-Jt.tm)+" ms"),en(wr)},$n)):(je("Promise ["+xn+"] Auto completed as the start action did not return a promise"),en())})}o(Lr,"_createScheduledEvent");function qn(Jt){var Jn=Yt();return Jt.wTm=Jn-Jt.tm,Jt.tm=Jn,Jt.isAborted?mr.reject(new Error("["+Ft+"] was aborted")):(zt.push(Jt),Lr(Jt,Bt))}o(qn,"_startWaitingEvent");function pi(Jt,Jn){var xn=new mr(function(en,$n){var kn=Yt()-Jn.tm,wr=Jn.id;je("["+Ft+"] is waiting for ["+wr+":"+kn+" ms] to complete before starting -- ["+an.length+"] waiting and ["+zt.length+"] running"),Jt.abort=function(Kr){Jt.abort=null,Ct(an,Ft),Jt.isAborted=!0,$n(new Error(Kr))},Jn.evt.then(function(Kr){Ct(an,Ft),qn(Jt).then(en,$n)},function(Kr){Ct(an,Ft),qn(Jt).then(en,$n)})});return an.push(Jt),xn}o(pi,"_waitForPreviousEvent")};function Ct(Bt,xt){for(var Wt=0;Wt<Bt.length;Wt++)if(Bt[Wt].id===xt)return Bt.splice(Wt,1)[0];return null}o(Ct,"_removeQueuedEvent")});function je(Et){var Dt=(0,cr.Rd)();Dt&&Dt.QUnit&&console&&console.log("ESPromiseScheduler["+et+"] "+Et)}o(je,"_debugLog");function ct(Et){(0,me.jV)(Ae,"ESPromiseScheduler["+et+"] "+Et)}o(ct,"_warnLog")}return o(M,"ESPromiseScheduler"),M.incomplete=function(){return zt},M.waitingToStart=function(){return an},M}();const zn=_n;var vr=function(){function M(ue){var Ae=this,Pe={},et=[],je=[];ue&&je.push(ue);function ct(Ct,Bt){var xt,Wt=Pe[Ct];if(Wt&&(xt=Wt[Bt]),!xt&&xt!==null){if((0,P.HD)(Ct)&&(0,P.HD)(Bt))if(je.length>0){for(var Ft=0;Ft<je.length;Ft++)if(je[Ft].handleField(Ct,Bt)){xt={canHandle:!0,fieldHandler:je[Ft]};break}}else et.length===0&&(xt={canHandle:!0});if(!xt&&xt!==null){xt=null;for(var Ft=0;Ft<et.length;Ft++)if(et[Ft].handleField(Ct,Bt)){xt={canHandle:!0,handler:et[Ft],fieldHandler:null};break}}Wt||(Wt=Pe[Ct]={}),Wt[Bt]=xt}return xt}o(ct,"_getFieldSanitizer"),Ae.addSanitizer=function(Ct){Ct&&(et.push(Ct),Pe={})},Ae.addFieldSanitizer=function(Ct){Ct&&(je.push(Ct),Pe={})},Ae.handleField=function(Ct,Bt){var xt=ct(Ct,Bt);return xt?xt.canHandle:!1},Ae.value=function(Ct,Bt,xt,Wt){var Ft=ct(Ct,Bt);if(Ft&&Ft.canHandle){if(!Ft||!Ft.canHandle)return null;if(Ft.handler)return Ft.handler.value(Ct,Bt,xt,Wt);if(!(0,P.HD)(Bt)||(0,P.le)(xt)||xt===be.qS)return null;var Wn=null,bn=(0,B.Sy)(xt);if((bn&8192)==8192){var ur=bn&~8192;if(Wn=xt,!(0,B.Sn)(Wn.value)||ur!==1&&ur!==2&&ur!==3&&(ur&4096)!=4096)return null}else bn===1||bn===2||bn===3||(bn&4096)==4096?Wn=Dt(Ct,Bt,xt):bn===4&&(Wn=Dt(Ct,Bt,Wt?JSON.stringify(xt):xt));if(Wn)return Et(Ft,Ct,Bt,bn,Wn,Wt)}return null},Ae.property=function(Ct,Bt,xt,Wt){var Ft=ct(Ct,Bt);if(!Ft||!Ft.canHandle||!(0,P.HD)(Bt)||(0,P.le)(xt)||!(0,B.Sn)(xt.value))return null;var Wn=(0,B.Sy)(xt.value);return Wn===0?null:Et(Ft,Ct,Bt,Wn,xt,Wt)};function Et(Ct,Bt,xt,Wt,Ft,Wn){if(Ct.handler)return Ct.handler.property(Bt,xt,Ft,Wn);if(!(0,P.le)(Ft.kind)){if((Wt&4096)==4096||!(0,B.oS)(Ft.kind))return null;Ft.value=Ft.value.toString()}return bt(Ct.fieldHandler,Bt,xt,Wt,Ft)}o(Et,"_handleProperty");function Dt(Ct,Bt,xt){return(0,B.Sn)(xt)?{value:xt}:null}o(Dt,"_convertToProperty");function bt(Ct,Bt,xt,Wt,Ft){if(Ft&&Ct){var Wn=Ct.getSanitizer(Bt,xt,Wt,Ft.kind,Ft.propertyType);if(Wn)if(Wt===4){var bn={},ur=Ft.value;(0,P.rW)(ur,function(or,$r){var Lr=Bt+"."+xt;if((0,B.Sn)($r)){var qn=Dt(Lr,or,$r);qn=bt(Ct,Lr,or,(0,B.Sy)($r),qn),qn&&(bn[or]=qn.value)}}),Ft.value=bn}else{var ir={path:Bt,name:xt,type:Wt,prop:Ft,sanitizer:Ae};Ft=Wn.call(Ae,ir)}}return Ft}o(bt,"_callFieldSanitizer")}return o(M,"ValueSanitizer"),M.getFieldType=B.Sy,M}(),er=100,Ar=C(1880),Ur=C(4063),Sr=C(1589),Dr=C(5928),Fr=C(5843),Ln=C(4869),Nn=C(4878),Cr=C(4392),Wr=C(3242),Rr=C(5883),vi=C(310),br=C(4206)},7984:(ot,l,C)=>{"use strict";C.d(l,{qS:()=>R,YT:()=>v,p8:()=>W,o6:()=>N});var R="",v="https://browser.events.data.microsoft.com/OneCollector/1.0/",P="pluginVersionString",y=P+"Arr",W="version",N="properties"},3599:(ot,l,C)=>{"use strict";C.d(l,{Gf:()=>E,vs:()=>$,x9:()=>ee,dH:()=>te,Sn:()=>T,jM:()=>q,IZ:()=>k,r7:()=>le,yj:()=>V,Vv:()=>fe,oF:()=>De,d8:()=>Fe,kT:()=>ae,ej:()=>we,Do:()=>D,cm:()=>Je,l7:()=>ye,hK:()=>ve,oS:()=>G,JT:()=>Ge,if:()=>ie,Sy:()=>Xe,cQ:()=>lt,Tr:()=>wt,mJ:()=>L,ot:()=>U});var R=C(7630),v=C(6708),P=C(3242),y=C(5843),W=C(4392),N=C(4869),m=C(4878),w=C(2091),O=C(7984),H,E="3.2.10",$="1DS-Web-JS-"+E,F="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",j="withCredentials",Q="timeout",Ee=(H={},H[0]=0,H[2]=6,H[1]=1,H[3]=7,H[4096|2]=6,H[4096|1]=1,H[4096|3]=7,H),z=null,ee=Boolean((0,R.Me)()),te=Boolean((0,R.Jj)());function T(re){return!(re===O.qS||(0,v.le)(re))}o(T,"isValueAssigned");function q(re){if(re){var de=re.indexOf("-");if(de>-1)return re.substring(0,de)}return O.qS}o(q,"getTenantId");function k(){return z===null&&(z=!(0,v.o8)(Uint8Array)&&!Re()&&!(0,R.b$)()),z}o(k,"isUint8ArrayAvailable");function le(re){return!!(re&&(0,v.hj)(re)&&re>=1&&re<=4)}o(le,"isLatency");function V(re,de,He){if(!de&&!T(de)||typeof re!="string")return null;var Ie=typeof de;if(Ie==="string"||Ie==="number"||Ie==="boolean"||(0,v.kJ)(de))de={value:de};else if(Ie==="object"&&!W.CY.call(de,"value"))de={value:He?JSON.stringify(de):de};else if((0,v.le)(de.value)||de.value===O.qS||!(0,v.HD)(de.value)&&!(0,v.hj)(de.value)&&!(0,v.jn)(de.value)&&!(0,v.kJ)(de.value))return null;if((0,v.kJ)(de.value)&&!Ge(de.value))return null;if(!(0,v.le)(de.kind)){if((0,v.kJ)(de.value)||!G(de.kind))return null;de.value=de.value.toString()}return de}o(V,"sanitizeProperty");function fe(re,de,He){var Ie=-1;if(!(0,v.o8)(re))if(de>0&&(de===32?Ie=1<<13:de<=13&&(Ie=de<<5)),se(He))Ie===-1&&(Ie=0),Ie|=He;else{var ce=Ee[Xe(re)]||-1;Ie!==-1&&ce!==-1?Ie|=ce:ce===6&&(Ie=ce)}return Ie}o(fe,"getCommonSchemaMetaData");function De(){(0,P.JP)(null).setEnabled(!1)}o(De,"disableCookies");function Fe(re,de,He){(0,P.p7)(null)&&(0,P.JP)(null).set(re,de,He*86400,null,"/")}o(Fe,"setCookie");function ae(re){(0,P.p7)(null)&&(0,P.JP)(null).del(re)}o(ae,"deleteCookie");function we(re){return(0,P.p7)(null)?D((0,P.JP)(null),re):O.qS}o(we,"getCookie");function D(re,de,He){He===void 0&&(He=!0);var Ie;return re&&(Ie=re.get(de),He&&Ie&&decodeURIComponent&&(Ie=decodeURIComponent(Ie))),Ie||O.qS}o(D,"getCookieValue");function Je(re){re===void 0&&(re="D");var de=(0,y.GW)();return re==="B"?de="{"+de+"}":re==="P"?de="("+de+")":re==="N"&&(de=de.replace(/-/g,O.qS)),de}o(Je,"createGuid");function ye(re,de,He,Ie,ce){var Ce={},Te=!1,Ve=0,me=arguments.length,Le=Object[W.hB],Ze=arguments;for(Le.toString.call(Ze[0])==="[object Boolean]"&&(Te=Ze[0],Ve++);Ve<me;Ve++){var re=Ze[Ve];(0,v.rW)(re,function(be,B){Te&&B&&(0,v.Kn)(B)?(0,v.kJ)(B)?(Ce[be]=Ce[be]||[],(0,v.tO)(B,function(K,Ye){K&&(0,v.Kn)(K)?Ce[be][Ye]=ye(!0,Ce[be][Ye],K):Ce[be][Ye]=K})):Ce[be]=ye(!0,Ce[be],B):Ce[be]=B})}return Ce}o(ye,"extend");var ve=y.Jj;function G(re){return re===0||re>0&&re<=13||re===32}o(G,"isValueKind");function se(re){return re>=0&&re<=9}o(se,"isDataType");function Re(){var re=(0,R.jW)();if(!(0,v.o8)(re)&&re.userAgent){var de=re.userAgent.toLowerCase();if((de.indexOf("safari")>=0||de.indexOf("firefox")>=0)&&de.indexOf("chrome")<0)return!0}return!1}o(Re,"isSafariOrFirefox");function Ge(re){return re.length>0}o(Ge,"isArrayValid");function ie(re,de){var He=re;He.timings=He.timings||{},He.timings.processTelemetryStart=He.timings.processTelemetryStart||{},He.timings.processTelemetryStart[de]=ve()}o(ie,"setProcessTelemetryTimings");function Xe(re){var de=0;if(re!=null){var He=typeof re;He==="string"?de=1:He==="number"?de=2:He==="boolean"?de=3:He===W.fK&&(de=4,(0,v.kJ)(re)?(de=4096,re.length>0&&(de|=Xe(re[0]))):W.CY.call(re,"value")&&(de=8192|Xe(re.value)))}return de}o(Xe,"getFieldValueType");var lt={Version:E,FullVersionString:$,strUndefined:W.jA,strObject:W.fK,Undefined:W.jA,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,objKeys:v.FY,toISOString:v.Y6,isReactNative:R.b$,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,isFunction:v.mf,isArray:v.kJ,isObject:v.Kn,strTrim:v.nd,isDocumentObjectAvailable:ee,isWindowObjectAvailable:te,isValueAssigned:T,getTenantId:q,isBeaconsSupported:R.MF,isUint8ArrayAvailable:k,isLatency:le,sanitizeProperty:V,getISOString:v.Y6,useXDomainRequest:R.cp,getCommonSchemaMetaData:fe,cookieAvailable:P.p7,disallowsSameSiteNone:P.UY,setCookie:Fe,deleteCookie:ae,getCookie:we,createGuid:Je,extend:ye,getTime:ve,isValueKind:G,isArrayValid:Ge,objDefineAccessors:v.l_,addPageUnloadEventListener:N.c9,setProcessTelemetryTimings:ie,addEventHandler:N.Ib,getFieldValueType:Xe,strEndsWith:v.Id,objForEachKey:v.rW},wt={_canUseCookies:void 0,isTypeof:v.Ym,isUndefined:v.o8,isNullOrUndefined:v.le,hasOwnProperty:v.nr,isFunction:v.mf,isObject:v.Kn,isDate:v.J_,isArray:v.kJ,isError:v.VZ,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,toISOString:v.Y6,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,strTrim:v.nd,objCreate:w.pu,objKeys:v.FY,objDefineAccessors:v.l_,addEventHandler:N.Ib,dateNow:v.m6,isIE:R.w1,disableCookies:De,newGuid:y.GW,perfNow:y.Jj,newId:m.pZ,randomValue:m.az,random32:m._l,mwcRandomSeed:m.CN,mwcRandom32:m.F6,generateW3CId:y.DO};function L(){return!!(0,R.a8)("chrome")}o(L,"isChromium");function U(re,de,He,Ie,ce,Ce){Ie===void 0&&(Ie=!1),ce===void 0&&(ce=!1);function Te(me,Le,Ze){try{me[Le]=Ze}catch(nt){}}o(Te,"_wrapSetXhrProp");var Ve=new XMLHttpRequest;return Ie&&Te(Ve,F,Ie),He&&Te(Ve,j,He),Ve.open(re,de,!ce),He&&Te(Ve,j,He),!ce&&Ce&&Te(Ve,Q,Ce),Ve}o(U,"openXhr")},5229:(ot,l,C)=>{"use strict";C.r(l),C.d(l,{BE_PROFILE:()=>Ze,NRT_PROFILE:()=>Le,PostChannel:()=>Vi,RT_PROFILE:()=>me});var R=C(1088);/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var v,P="undefined",y="constructor",W="prototype",N="function",m="_dynInstFuncs",w="_isDynProxy",O="_dynClass",H="_dynCls$",E="_dynInstChk",$=E,F="_dfOpts",j="_unknown_",Q="__proto__",Ee="_dyn"+Q,z="__dynProto$Gbl",ee="_dynInstProto",te="useBaseInst",T="setInstFuncs",q=Object,k=q.getPrototypeOf,le=q.getOwnPropertyNames;function V(){var ke;return typeof globalThis!==P&&(ke=globalThis),!ke&&typeof self!==P&&(ke=self),!ke&&typeof window!==P&&(ke=window),!ke&&typeof C.g!==P&&(ke=C.g),ke||{}}o(V,"_getGlobal");var fe=V(),De=fe[z]||(fe[z]={o:(v={},v[T]=!0,v[te]=!0,v),n:1e3});function Fe(ke,rt){return ke&&q[W].hasOwnProperty.call(ke,rt)}o(Fe,"_hasOwnProperty");function ae(ke){return ke&&(ke===q[W]||ke===Array[W])}o(ae,"_isObjectOrArrayPrototype");function we(ke){return ae(ke)||ke===Function[W]}o(we,"_isObjectArrayOrFunctionPrototype");function D(ke){var rt;if(ke){if(k)return k(ke);var vt=ke[Q]||ke[W]||(ke[y]?ke[y][W]:null);rt=ke[Ee]||vt,Fe(ke,Ee)||(delete ke[ee],rt=ke[Ee]=ke[ee]||ke[Ee],ke[ee]=vt)}return rt}o(D,"_getObjProto");function Je(ke,rt){var vt=[];if(le)vt=le(ke);else for(var it in ke)typeof it=="string"&&Fe(ke,it)&&vt.push(it);if(vt&&vt.length>0)for(var Lt=0;Lt<vt.length;Lt++)rt(vt[Lt])}o(Je,"_forEachProp");function ye(ke,rt,vt){return rt!==y&&typeof ke[rt]===N&&(vt||Fe(ke,rt))}o(ye,"_isDynamicCandidate");function ve(ke){throw new TypeError("DynamicProto: "+ke)}o(ve,"_throwTypeError");function G(ke){var rt={};return Je(ke,function(vt){!rt[vt]&&ye(ke,vt,!1)&&(rt[vt]=ke[vt])}),rt}o(G,"_getInstanceFuncs");function se(ke,rt){for(var vt=ke.length-1;vt>=0;vt--)if(ke[vt]===rt)return!0;return!1}o(se,"_hasVisited");function Re(ke,rt,vt,it){function Lt(Ut,fn,In){var Kn=fn[In];if(Kn[w]&&it){var Qn=Ut[m]||{};Qn[$]!==!1&&(Kn=(Qn[fn[O]]||{})[In]||Kn)}return function(){return Kn.apply(Ut,arguments)}}o(Lt,"_instFuncProxy");var Gt={};Je(vt,function(Ut){Gt[Ut]=Lt(rt,vt,Ut)});for(var St=D(ke),Zt=[];St&&!we(St)&&!se(Zt,St);)Je(St,function(Ut){!Gt[Ut]&&ye(St,Ut,!k)&&(Gt[Ut]=Lt(rt,St,Ut))}),Zt.push(St),St=D(St);return Gt}o(Re,"_getBaseFuncs");function Ge(ke,rt,vt,it){var Lt=null;if(ke&&Fe(vt,O)){var Gt=ke[m]||{};if(Lt=(Gt[vt[O]]||{})[rt],Lt||ve("Missing ["+rt+"] "+N),!Lt[E]&&Gt[$]!==!1){for(var St=!Fe(ke,rt),Zt=D(ke),Ut=[];St&&Zt&&!we(Zt)&&!se(Ut,Zt);){var fn=Zt[rt];if(fn){St=fn===it;break}Ut.push(Zt),Zt=D(Zt)}try{St&&(ke[rt]=Lt),Lt[E]=1}catch(In){Gt[$]=!1}}}return Lt}o(Ge,"_getInstFunc");function ie(ke,rt,vt){var it=rt[ke];return it===vt&&(it=D(rt)[ke]),typeof it!==N&&ve("["+ke+"] is not a "+N),it}o(ie,"_getProtoFunc");function Xe(ke,rt,vt,it,Lt){function Gt(Ut,fn){var In=o(function(){var Kn=Ge(this,fn,Ut,In)||ie(fn,Ut,In);return Kn.apply(this,arguments)},"dynProtoProxy");return In[w]=1,In}if(o(Gt,"_createDynamicPrototype"),!ae(ke)){var St=vt[m]=vt[m]||{},Zt=St[rt]=St[rt]||{};St[$]!==!1&&(St[$]=!!Lt),Je(vt,function(Ut){ye(vt,Ut,!1)&&vt[Ut]!==it[Ut]&&(Zt[Ut]=vt[Ut],delete vt[Ut],(!Fe(ke,Ut)||ke[Ut]&&!ke[Ut][w])&&(ke[Ut]=Gt(ke,Ut)))})}}o(Xe,"_populatePrototype");function lt(ke,rt){if(k){for(var vt=[],it=D(rt);it&&!we(it)&&!se(vt,it);){if(it===ke)return!0;vt.push(it),it=D(it)}return!1}return!0}o(lt,"_checkPrototype");function wt(ke,rt){return Fe(ke,W)?ke.name||rt||j:((ke||{})[y]||{}).name||rt||j}o(wt,"_getObjName");function L(ke,rt,vt,it){Fe(ke,W)||ve("theClass is an invalid class definition.");var Lt=ke[W];lt(Lt,rt)||ve("["+wt(ke)+"] not in hierarchy of ["+wt(rt)+"]");var Gt=null;Fe(Lt,O)?Gt=Lt[O]:(Gt=H+wt(ke,"_")+"$"+De.n,De.n++,Lt[O]=Gt);var St=L[F],Zt=!!St[te];Zt&&it&&it[te]!==void 0&&(Zt=!!it[te]);var Ut=G(rt),fn=Re(Lt,rt,Ut,Zt);vt(rt,fn);var In=!!k&&!!St[T];In&&it&&(In=!!it[T]),Xe(Lt,Gt,rt,Ut,In!==!1)}o(L,"dynamicProto"),L[F]=De.o;var U=C(9288),re=C(4869),de=C(5883),He=C(3599),Ie=C(6708),ce=C(7630),Ce=C(5928),Te=C(5018),Ve=C(4063),me="REAL_TIME",Le="NEAR_REAL_TIME",Ze="BEST_EFFORT",nt="",be="POST",B="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",K="drop",Ye="send",jt="requeue",An="rspFail",Mn="oth",Cn="no-cache, no-store",lr="application/x-json-stream",ar="cache-control",mr="content-type",cr="kill-tokens",yr="kill-duration",dt="kill-duration-seconds",zt="time-delta-millis",an="client-version",on="client-id",Yt="time-delta-to-apply-millis",_n="upload-time",zn="apikey",vr="AuthMsaDeviceTicket",er="AuthXToken",Ar="sdk-version",Ur="NoResponseBody",Sr="msfpc",Dr="trace",Fr="user";function Ln(ke){var rt=(ke.ext||{}).intweb;return rt&&(0,He.Sn)(rt[Sr])?rt[Sr]:null}o(Ln,"_getEventMsfpc");function Nn(ke){for(var rt=null,vt=0;rt===null&&vt<ke.length;vt++)rt=Ln(ke[vt]);return rt}o(Nn,"_getMsfpc");var Cr=function(){function ke(rt,vt){var it=vt?[].concat(vt):[],Lt=this,Gt=Nn(it);Lt.iKey=function(){return rt},Lt.Msfpc=function(){return Gt||nt},Lt.count=function(){return it.length},Lt.events=function(){return it},Lt.addEvent=function(St){return St?(it.push(St),Gt||(Gt=Ln(St)),!0):!1},Lt.split=function(St,Zt){var Ut;if(St<it.length){var fn=it.length-St;(0,Ie.le)(Zt)||(fn=Zt<fn?Zt:fn),Ut=it.splice(St,fn),Gt=Nn(it)}return new ke(rt,Ut)}}return o(ke,"EventBatch"),ke.create=function(rt,vt){return new ke(rt,vt)},ke}(),Wr=function(){function ke(){var rt=!0,vt=!0,it=!0,Lt="use-collector-delta",Gt=!1;L(ke,this,function(St){St.allowRequestSending=function(){return rt},St.firstRequestSent=function(){it&&(it=!1,Gt||(rt=!1))},St.shouldAddClockSkewHeaders=function(){return vt},St.getClockSkewHeaderValue=function(){return Lt},St.setClockSkew=function(Zt){Gt||(Zt?(Lt=Zt,vt=!0,Gt=!0):vt=!1,rt=!0)}})}return o(ke,"ClockSkewManager"),ke.__ieDyn=1,ke}();const Rr=Wr;var vi=1e3,br=function(){function ke(){var rt={};function vt(it){var Lt=[];return it&&(0,Ie.tO)(it,function(Gt){Lt.push((0,Ie.nd)(Gt))}),Lt}o(vt,"_normalizeTenants"),L(ke,this,function(it){it.setKillSwitchTenants=function(Lt,Gt){if(Lt&&Gt)try{var St=vt(Lt.split(","));if(Gt==="this-request-only")return St;for(var Zt=parseInt(Gt,10)*vi,Ut=0;Ut<St.length;++Ut)rt[St[Ut]]=(0,Ie.m6)()+Zt}catch(fn){return[]}return[]},it.isTenantKilled=function(Lt){var Gt=rt,St=(0,Ie.nd)(Lt);return Gt[St]!==void 0&&Gt[St]>(0,Ie.m6)()?!0:(delete Gt[St],!1)}})}return o(ke,"KillSwitch"),ke.__ieDyn=1,ke}();const M=br;var ue=C(4392),Ae=.8,Pe=1.2,et=3e3,je=6e5;function ct(ke){return!(ke>=300&&ke<500&&ke!=408&&ke!=429||ke==501||ke==505)}o(ct,"retryPolicyShouldRetryForStatus");function Et(ke){var rt=0,vt=et*Ae,it=et*Pe,Lt=Math.floor(Math.random()*(it-vt))+vt;return rt=Math.pow(2,ke)*Lt,Math.min(rt,je)}o(Et,"retryPolicyGetMillisToBackoffForRetry");var Dt=20,bt=3984588,Ct=65e3,Bt=2e6,xt=Math.min(Bt,Ct),Wt="metadata",Ft="f",Wn=/\./,bn=function(){function ke(rt,vt,it,Lt){var Gt="data",St="baseData",Zt="ext",Ut=!!Lt,fn=!0,In=vt,Kn={};L(ke,this,function(Qn){Qn.createPayload=function(qt,sn,tn,mn,I,Y){return{apiKeys:[],payloadBlob:nt,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:qt,isTeardown:sn,isSync:tn,isBeacon:mn,sendType:Y,sendReason:I}},Qn.appendPayload=function(qt,sn,tn){var mn=qt&&sn&&!qt.overflow;return mn&&(0,U.Lm)(rt,function(){return"Serializer:appendPayload"},function(){for(var I=sn.events(),Y=qt.payloadBlob,We=qt.numEvents,tt=!1,Rt=[],Nt=[],vn=qt.isBeacon,pn=vn?Ct:bt,$t=vn?xt:Bt,hn=0,yn=0;hn<I.length;){var Ht=I[hn];if(Ht){if(We>=tn){qt.overflow=sn.split(hn);break}var pt=Qn.getEventBlob(Ht);if(pt&&pt.length<=$t){var On=pt.length,Dn=Y.length;if(Dn+On>pn){qt.overflow=sn.split(hn);break}Y&&(Y+=`
`),Y+=pt,yn++,yn>Dt&&(Y.substr(0,1),yn=0),tt=!0,We++}else pt?Rt.push(Ht):Nt.push(Ht),I.splice(hn,1),hn--}hn++}if(Rt&&Rt.length>0&&qt.sizeExceed.push(Cr.create(sn.iKey(),Rt)),Nt&&Nt.length>0&&qt.failedEvts.push(Cr.create(sn.iKey(),Nt)),tt){qt.batches.push(sn),qt.payloadBlob=Y,qt.numEvents=We;var wn=sn.iKey();(0,Ie.UA)(qt.apiKeys,wn)===-1&&qt.apiKeys.push(wn)}},function(){return{payload:qt,theBatch:{iKey:sn.iKey(),evts:sn.events()},max:tn}}),mn},Qn.getEventBlob=function(qt){try{return(0,U.Lm)(rt,function(){return"Serializer.getEventBlob"},function(){var sn={};sn.name=qt.name,sn.time=qt.time,sn.ver=qt.ver,sn.iKey="o:"+(0,He.jM)(qt.iKey);var tn={},mn=qt[Zt];mn&&(sn[Zt]=tn,(0,Ie.rW)(mn,function(We,tt){var Rt=tn[We]={};Hn(tt,Rt,"ext."+We,!0,null,null,!0)}));var I=sn[Gt]={};I.baseType=qt.baseType;var Y=I[St]={};return Hn(qt.baseData,Y,St,!1,[St],function(We,tt,Rt){ur(tn,We,tt,Rt)},fn),Hn(qt.data,I,Gt,!1,[],function(We,tt,Rt){ur(tn,We,tt,Rt)},fn),JSON.stringify(sn)},function(){return{item:qt}})}catch(sn){return null}};function tr(qt,sn){var tn=Kn[qt];return tn===void 0&&(qt.length>=7&&(tn=(0,Ie.xe)(qt,"ext.metadata")||(0,Ie.xe)(qt,"ext.web")),Kn[qt]=tn),tn}o(tr,"_isReservedField");function Hn(qt,sn,tn,mn,I,Y,We){(0,Ie.rW)(qt,function(tt,Rt){var Nt=null;if(Rt||(0,He.Sn)(Rt)){var vn=tn,pn=tt,$t=I,hn=sn;if(Ut&&!mn&&Wn.test(tt)){var yn=tt.split("."),Ht=yn.length;if(Ht>1){$t&&($t=$t.slice());for(var pt=0;pt<Ht-1;pt++){var On=yn[pt];hn=hn[On]=hn[On]||{},vn+="."+On,$t&&$t.push(On)}pn=yn[Ht-1]}}var Dn=mn&&tr(vn,pn);if(!Dn&&In&&In.handleField(vn,pn)?Nt=In.value(vn,pn,Rt,it):Nt=(0,He.yj)(pn,Rt,it),Nt){var wn=Nt.value;if(hn[pn]=wn,Y&&Y($t,pn,Nt),We&&typeof wn=="object"&&!(0,Ie.kJ)(wn)){var sr=$t;sr&&(sr=sr.slice(),sr.push(pn)),Hn(Rt,wn,vn+"."+pn,mn,sr,Y,We)}}}})}o(Hn,"_processPathKeys")})}return o(ke,"Serializer"),ke.__ieDyn=1,ke}();function ur(ke,rt,vt,it){if(it&&ke){var Lt=(0,He.Vv)(it.value,it.kind,it.propertyType);if(Lt>-1){var Gt=ke[Wt];Gt||(Gt=ke[Wt]={f:{}});var St=Gt[Ft];if(St||(St=Gt[Ft]={}),rt)for(var Zt=0;Zt<rt.length;Zt++){var Ut=rt[Zt];St[Ut]||(St[Ut]={f:{}});var fn=St[Ut][Ft];fn||(fn=St[Ut][Ft]={}),St=fn}St=St[vt]={},(0,Ie.kJ)(it.value)?St.a={t:Lt}:St.t=Lt}}}o(ur,"_addJSONPropertyMetaData");var ir,or="sendAttempt",$r="&"+Ur+"=true",Lr=(ir={},ir[1]=jt,ir[100]=jt,ir[200]="sent",ir[8004]=K,ir[8003]=K,ir),qn={},pi={};function Jt(ke,rt,vt){qn[ke]=rt,vt!==!1&&(pi[rt]=ke)}o(Jt,"_addCollectorHeaderQsMapping"),Jt(vr,vr,!1),Jt(an,an),Jt(on,"Client-Id"),Jt(zn,zn),Jt(Yt,Yt),Jt(_n,_n),Jt(er,er);function Jn(ke){try{return ke.responseText}catch(rt){}return nt}o(Jn,"_getResponseText");function xn(ke,rt){var vt=!1;if(ke&&rt){var it=(0,Ie.FY)(ke);if(it&&it.length>0)for(var Lt=rt.toLowerCase(),Gt=0;Gt<it.length;Gt++){var St=it[Gt];if(St&&(0,Ie.nr)(rt,St)&&St.toLowerCase()===Lt){vt=!0;break}}}return vt}o(xn,"_hasHeader");function en(ke,rt,vt,it){rt&&vt&&vt.length>0&&(it&&qn[rt]?(ke.hdrs[qn[rt]]=vt,ke.useHdrs=!0):ke.url+="&"+rt+"="+vt)}o(en,"_addRequestDetails");function $n(ke,rt){return rt&&((0,Ie.hj)(rt)?ke=[rt].concat(ke):(0,Ie.kJ)(rt)&&(ke=rt.concat(ke))),ke}o($n,"_prependTransports");var kn=function(){function ke(rt,vt,it,Lt,Gt){this._responseHandlers=[];var St="?cors=true&"+mr.toLowerCase()+"="+lr,Zt=new M,Ut=!1,fn=new Rr,In=!1,Kn=0,Qn,tr,Hn,qt,sn=!0,tn=[],mn={},I=[],Y=null,We=!1,tt,Rt=!1,Nt=!1,vn,pn,$t,hn,yn;L(ke,this,function(Ht){var pt=!0;Ht.initialize=function(he,qe,at,mt,Tt){var Ot;Tt||(Tt={}),St=he+St,Nt=(0,Ie.o8)(Tt.avoidOptions)?!0:!Tt.avoidOptions,qt=qe,tt=qe.getCookieMgr(),We=!qt.config.disableEventTimings;var cn=!!qt.config.enableCompoundKey;Qn=at,tr=Qn.diagLog();var ge=Tt.valueSanitizer,$e=Tt.stringifyObjects;(0,Ie.o8)(Tt.enableCompoundKey)||(cn=!!Tt.enableCompoundKey),vn=Tt.xhrTimeout,pn=!!Tt.disableXhrSync,$t=!!Tt.disableFetchKeepAlive,yn=Tt.addNoResponse!==!1,In=!(0,ce.b$)(),Y=new bn(qt,ge,$e,cn),(0,Ie.le)(Tt.useSendBeacon)||(In=!!Tt.useSendBeacon);var Ke=mt,ut=Tt.alwaysUseXhrOverride?mt:null,At=Tt.alwaysUseXhrOverride?mt:null,It=[3,2];if(!mt){sn=!1;var En=(0,ce.k$)();En&&En.protocol&&En.protocol.toLowerCase()==="file:"&&(pt=!1);var Rn=[];(0,ce.b$)()?(Rn=[2,1],It=[2,1,3]):Rn=[1,2,3],Rn=$n(Rn,Tt.transports),mt=On(Rn,!1),mt||(0,Te.jV)(tr,"No available transport to send events"),Ke=On(Rn,!0)}ut||(It=$n(It,Tt.unloadTransports),ut=On(It,!0)),hn=!sn&&(In&&(0,ce.MF)()||!$t&&(0,ce.JO)(!0)),Hn=(Ot={},Ot[0]=mt,Ot[1]=Ke||On([1,2,3],!0),Ot[2]=ut||Ke||On([1],!0),Ot[3]=At||On([2,3],!0)||Ke||On([1],!0),Ot)};function On(he,qe){for(var at=0,mt=null,Tt=0;mt==null&&Tt<he.length;)at=he[Tt],at===1?(0,ce.cp)()?mt=Dn:(0,ce.Z3)()&&(mt=sr):at===2&&(0,ce.JO)(qe)&&(!qe||qe&&!$t)?mt=wn:In&&at===3&&(0,ce.MF)()&&(mt=Nr),Tt++;return mt?{_transport:at,_isSync:qe,sendPOST:mt}:null}o(On,"_getSenderInterface"),Ht._getDbgPlgTargets=function(){return[Hn[0],Zt,Y,Hn]};function Dn(he,qe,at){var mt=new XDomainRequest;mt.open(be,he.urlString),he.timeout&&(mt.timeout=he.timeout),mt.onload=function(){var Tt=Jn(mt);Vt(qe,200,{},Tt),qr(Tt)},mt.onerror=function(){Vt(qe,400,{})},mt.ontimeout=function(){Vt(qe,500,{})},mt.onprogress=function(){},at?mt.send(he.data):Gt.set(function(){mt.send(he.data)},0)}o(Dn,"_xdrSendPost");function wn(he,qe,at){var mt,Tt=he.urlString,Ot=!1,cn=!1,ge=(mt={body:he.data,method:be},mt[B]=!0,mt);at&&(ge.keepalive=!0,he._sendReason===2&&(Ot=!0,yn&&(Tt+=$r))),pt&&(ge.credentials="include"),he.headers&&(0,Ie.FY)(he.headers).length>0&&(ge.headers=he.headers),fetch(Tt,ge).then(function($e){var Ke={},ut=nt,At=$e.headers;At&&At.forEach(function(It,En){Ke[En]=It}),$e.body&&$e.text().then(function(It){ut=It}),cn||(cn=!0,Vt(qe,$e.status,Ke,ut),qr(ut))}).catch(function($e){cn||(cn=!0,Vt(qe,0,{}))}),Ot&&!cn&&(cn=!0,Vt(qe,200,{})),!cn&&he.timeout>0&&Gt.set(function(){cn||(cn=!0,Vt(qe,500,{}))},he.timeout)}o(wn,"_fetchSendPost");function sr(he,qe,at){var mt=he.urlString;function Tt($e,Ke,ut){if(!$e[ut]&&Ke&&Ke.getResponseHeader){var At=Ke.getResponseHeader(ut);At&&($e[ut]=(0,Ie.nd)(At))}return $e}o(Tt,"_appendHeader");function Ot($e){var Ke={};return $e.getAllResponseHeaders?Ke=bi($e.getAllResponseHeaders()):(Ke=Tt(Ke,$e,zt),Ke=Tt(Ke,$e,yr),Ke=Tt(Ke,$e,dt)),Ke}o(Ot,"_getAllResponseHeaders");function cn($e,Ke){Vt(qe,$e.status,Ot($e),Ke)}o(cn,"xhrComplete"),at&&he.disableXhrSync&&(at=!1);var ge=(0,He.ot)(be,mt,pt,!0,at,he.timeout);(0,Ie.rW)(he.headers,function($e,Ke){ge.setRequestHeader($e,Ke)}),ge.onload=function(){var $e=Jn(ge);cn(ge,$e),qr($e)},ge.onerror=function(){cn(ge)},ge.ontimeout=function(){cn(ge)},ge.send(he.data)}o(sr,"_xhrSendPost");function Vt(he,qe,at,mt){try{he(qe,at,mt)}catch(Tt){(0,Te.kP)(tr,2,518,(0,ce.eU)(Tt))}}o(Vt,"_doOnComplete");function Nr(he,qe,at){var mt=he,Tt=200,Ot=mt._thePayload,cn=he.urlString+(yn?$r:nt);try{var ge=(0,ce.jW)();if(!ge.sendBeacon(cn,he.data))if(Ot){var $e=[];(0,Ie.tO)(Ot.batches,function(Ke){if($e&&Ke&&Ke.count()>0){for(var ut=Ke.events(),At=0;At<ut.length;At++)if(!ge.sendBeacon(cn,Y.getEventBlob(ut[At]))){$e.push(Ke.split(At));break}}else $e.push(Ke.split(0))}),rr($e,8003,Ot.sendType,!0)}else Tt=0}catch(Ke){(0,Te.jV)(tr,"Failed to send telemetry using sendBeacon API. Ex:"+(0,ce.eU)(Ke)),Tt=0}finally{Vt(qe,Tt,{},nt)}}o(Nr,"_beaconSendPost");function _r(he){return he===2||he===3}o(_r,"_isBeaconPayload");function dn(he){return Rt&&_r(he)&&(he=2),he}o(dn,"_adjustSendType"),Ht.addQueryStringParameter=function(he,qe){for(var at=0;at<tn.length;at++)if(tn[at].name===he){tn[at].value=qe;return}tn.push({name:he,value:qe})},Ht.addHeader=function(he,qe){mn[he]=qe},Ht.canSendRequest=function(){return Xn()&&fn.allowRequestSending()},Ht.sendQueuedRequests=function(he,qe){(0,Ie.o8)(he)&&(he=0),Rt&&(he=dn(he),qe=2),nr(I,he,0)&&jr(Or(),0,!1,he,qe||0)},Ht.isCompletelyIdle=function(){return!Ut&&Kn===0&&I.length===0},Ht.setUnloading=function(he){Rt=he},Ht.addBatch=function(he){if(he&&he.count()>0){if(Zt.isTenantKilled(he.iKey()))return!1;I.push(he)}return!0},Ht.teardown=function(){I.length>0&&jr(Or(),0,!0,2,2)},Ht.pause=function(){Ut=!0},Ht.resume=function(){Ut=!1,Ht.sendQueuedRequests(0,4)},Ht.sendSynchronousBatch=function(he,qe,at){he&&he.count()>0&&((0,Ie.le)(qe)&&(qe=1),Rt&&(qe=dn(qe),at=2),jr([he],0,!1,qe,at||0))};function Xn(){return!Ut&&Kn<vt}o(Xn,"_hasIdleConnection");function Or(){var he=I;return I=[],he}o(Or,"_clearQueue");function nr(he,qe,at){var mt=!1;return he&&he.length>0&&!Ut&&Hn[qe]&&Y&&(mt=qe!==0||Xn()&&(at>0||fn.allowRequestSending())),mt}o(nr,"_canSendPayload");function ri(he){var qe={};return he&&(0,Ie.tO)(he,function(at,mt){qe[mt]={iKey:at.iKey(),evts:at.events()}}),qe}o(ri,"_createDebugBatches");function jr(he,qe,at,mt,Tt){if(!(!he||he.length===0)){if(Ut){rr(he,1,mt);return}mt=dn(mt);try{var Ot=he,cn=mt!==0;(0,U.Lm)(qt,function(){return"HttpManager:_sendBatches"},function(ge){ge&&(he=he.slice(0));for(var $e=[],Ke=null,ut=(0,He.hK)(),At=Hn[mt]||(cn?Hn[1]:Hn[0]),It=At&&At._transport,En=hn&&(Rt||_r(mt)||It===3||At._isSync&&It===2);nr(he,mt,qe);){var Rn=he.shift();Rn&&Rn.count()>0&&(Zt.isTenantKilled(Rn.iKey())?$e.push(Rn):(Ke=Ke||Y.createPayload(qe,at,cn,En,Tt,mt),Y.appendPayload(Ke,Rn,rt)?Ke.overflow!==null&&(he=[Ke.overflow].concat(he),Ke.overflow=null,ci(Ke,ut,(0,He.hK)(),Tt),ut=(0,He.hK)(),Ke=null):(ci(Ke,ut,(0,He.hK)(),Tt),ut=(0,He.hK)(),he=[Rn].concat(he),Ke=null)))}Ke&&ci(Ke,ut,(0,He.hK)(),Tt),he.length>0&&(I=he.concat(I)),rr($e,8004,mt)},function(){return{batches:ri(Ot),retryCount:qe,isTeardown:at,isSynchronous:cn,sendReason:Tt,useSendBeacon:_r(mt),sendType:mt}},!cn)}catch(ge){(0,Te.kP)(tr,2,48,"Unexpected Exception sending batch: "+(0,ce.eU)(ge))}}}o(jr,"_sendBatches");function li(he,qe){var at={url:St,hdrs:{},useHdrs:!1};qe?(at.hdrs=(0,He.l7)(at.hdrs,mn),at.useHdrs=(0,Ie.FY)(at.hdrs).length>0):(0,Ie.rW)(mn,function(ge,$e){pi[ge]?en(at,pi[ge],$e,!1):(at.hdrs[ge]=$e,at.useHdrs=!0)}),en(at,on,"NO_AUTH",qe),en(at,an,He.vs,qe);var mt=nt;(0,Ie.tO)(he.apiKeys,function(ge){mt.length>0&&(mt+=","),mt+=ge}),en(at,zn,mt,qe),en(at,_n,(0,Ie.m6)().toString(),qe);var Tt=ai(he);if((0,He.Sn)(Tt)&&(at.url+="&ext.intweb.msfpc="+Tt),fn.shouldAddClockSkewHeaders()&&en(at,Yt,fn.getClockSkewHeaderValue(),qe),qt.getWParam){var Ot=qt.getWParam();Ot>=0&&(at.url+="&w="+Ot)}for(var cn=0;cn<tn.length;cn++)at.url+="&"+tn[cn].name+"="+tn[cn].value;return at}o(li,"_buildRequestDetails");function Yr(he,qe,at){he[qe]=he[qe]||{},he[qe][Qn.identifier]=at}o(Yr,"_setTimingValue");function ci(he,qe,at,mt){if(he&&he.payloadBlob&&he.payloadBlob.length>0){var Tt=!!Ht.sendHook,Ot=Hn[he.sendType];!_r(he.sendType)&&he.isBeacon&&he.sendReason===2&&(Ot=Hn[2]||Hn[3]||Ot);var cn=Nt;(he.isBeacon||Ot._transport===3)&&(cn=!1);var ge=li(he,cn);cn=cn||ge.useHdrs;var $e=(0,He.hK)();(0,U.Lm)(qt,function(){return"HttpManager:_doPayloadSend"},function(){for(var Ke=0;Ke<he.batches.length;Ke++)for(var ut=he.batches[Ke],At=ut.events(),It=0;It<At.length;It++){var En=At[It];if(We){var Rn=En.timings=En.timings||{};Yr(Rn,"sendEventStart",$e),Yr(Rn,"serializationStart",qe),Yr(Rn,"serializationCompleted",at)}En[or]>0?En[or]++:En[or]=1}rr(he.batches,1e3+(mt||0),he.sendType,!0);var Gn={data:he.payloadBlob,urlString:ge.url,headers:ge.hdrs,_thePayload:he,_sendReason:mt,timeout:vn,disableXhrSync:pn,disableFetchKeepAlive:$t};cn&&(xn(Gn.headers,ar)||(Gn.headers[ar]=Cn),xn(Gn.headers,mr)||(Gn.headers[mr]=lr));var ui=null;Ot&&(ui=o(function(Bi){fn.firstRequestSent();var di=o(function(Pi,fi){Si(Pi,fi,he,mt)},"onComplete"),dr=he.isTeardown||he.isSync;try{Ot.sendPOST(Bi,di,dr),Ht.sendListener&&Ht.sendListener(Gn,Bi,dr,he.isBeacon)}catch(Pi){(0,Te.jV)(tr,"Unexpected exception sending payload. Ex:"+(0,ce.eU)(Pi)),Vt(di,0,{})}},"sender")),(0,U.Lm)(qt,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(ui)if(he.sendType===0&&Kn++,Tt&&!he.isBeacon&&Ot._transport!==3){var Bi={data:Gn.data,urlString:Gn.urlString,headers:(0,He.l7)({},Gn.headers),timeout:Gn.timeout,disableXhrSync:Gn.disableXhrSync,disableFetchKeepAlive:Gn.disableFetchKeepAlive},di=!1;(0,U.Lm)(qt,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Ht.sendHook(Bi,function(dr){di=!0,!sn&&!dr._thePayload&&(dr._thePayload=dr._thePayload||Gn._thePayload,dr._sendReason=dr._sendReason||Gn._sendReason),ui(dr)},he.isSync||he.isTeardown)}catch(dr){di||ui(Gn)}})}else ui(Gn)})},function(){return{thePayload:he,serializationStart:qe,serializationCompleted:at,sendReason:mt}},he.isSync)}he.sizeExceed&&he.sizeExceed.length>0&&rr(he.sizeExceed,8003,he.sendType),he.failedEvts&&he.failedEvts.length>0&&rr(he.failedEvts,8002,he.sendType)}o(ci,"_doPayloadSend");function wi(he,qe){We&&(0,Ie.tO)(he,function(at){var mt=at.timings=at.timings||{};Yr(mt,"sendEventCompleted",qe)})}o(wi,"_addEventCompletedTimings");function Si(he,qe,at,mt){var Tt=9e3,Ot=null,cn=!1,ge=!1;try{var $e=!0;if(typeof he!==ue.jA){if(qe){fn.setClockSkew(qe[zt]);var Ke=qe[yr]||qe["kill-duration-seconds"];(0,Ie.tO)(Zt.setKillSwitchTenants(qe[cr],Ke),function(At){(0,Ie.tO)(at.batches,function(It){if(It.iKey()===At){Ot=Ot||[];var En=It.split(0);at.numEvents-=En.count(),Ot.push(En)}})})}if(he==200||he==204){Tt=200;return}(!ct(he)||at.numEvents<=0)&&($e=!1),Tt=9e3+he%1e3}if($e){Tt=100;var ut=at.retryCnt;at.sendType===0&&(ut<it?(cn=!0,Ci(function(){at.sendType===0&&Kn--,jr(at.batches,ut+1,at.isTeardown,Rt?2:at.sendType,5)},Rt,Et(ut))):(ge=!0,Rt&&(Tt=8001)))}}finally{cn||(fn.setClockSkew(),ii(at,Tt,mt,ge)),rr(Ot,8004,at.sendType)}}o(Si,"_retryRequestIfNeeded");function ii(he,qe,at,mt){try{mt&&Qn._backOffTransmission(),qe===200&&(!mt&&!he.isSync&&Qn._clearBackOff(),Ir(he.batches)),rr(he.batches,qe,he.sendType,!0)}finally{he.sendType===0&&(Kn--,at!==5&&Ht.sendQueuedRequests(he.sendType,at))}}o(ii,"_handleRequestFinished");function Ir(he){if(We){var qe=(0,He.hK)();(0,Ie.tO)(he,function(at){at&&at.count()>0&&wi(at.events(),qe)})}}o(Ir,"_addCompleteTimings");function Ci(he,qe,at){qe?he():Gt.set(he,at)}o(Ci,"_doAction");function bi(he){var qe={};if((0,Ie.HD)(he)){var at=(0,Ie.nd)(he).split(/[\r\n]+/);(0,Ie.tO)(at,function(mt){if(mt){var Tt=mt.indexOf(": ");if(Tt!==-1){var Ot=(0,Ie.nd)(mt.substring(0,Tt)).toLowerCase(),cn=(0,Ie.nd)(mt.substring(Tt+1));qe[Ot]=cn}else qe[(0,Ie.nd)(mt)]=1}})}return qe}o(bi,"_convertAllHeadersToMap");function ai(he){for(var qe=0;qe<he.batches.length;qe++){var at=he.batches[qe].Msfpc();if(at)return encodeURIComponent(at)}return nt}o(ai,"_getMsfpc");function qr(he){var qe=Ht._responseHandlers;try{for(var at=0;at<qe.length;at++)try{qe[at](he)}catch(Tt){(0,Te.kP)(tr,1,519,"Response handler failed: "+Tt)}if(he){var mt=JSON.parse(he);(0,He.Sn)(mt.webResult)&&(0,He.Sn)(mt.webResult[Sr])&&tt.set("MSFPC",mt.webResult[Sr],365*86400)}}catch(Tt){}}o(qr,"_handleCollectorResponse");function rr(he,qe,at,mt){if(he&&he.length>0&&Lt){var Tt=Lt[zr(qe)];if(Tt){var Ot=at!==0;(0,U.Lm)(qt,function(){return"HttpManager:_sendBatchesNotification"},function(){Ci(function(){try{Tt.call(Lt,he,qe,Ot,at)}catch(cn){(0,Te.kP)(tr,1,74,"send request notification failed: "+cn)}},mt||Ot,0)},function(){return{batches:ri(he),reason:qe,isSync:Ot,sendSync:mt,sendType:at}},!Ot)}}}o(rr,"_sendBatchesNotification");function zr(he){var qe=Lr[he];return(0,He.Sn)(qe)||(qe=Mn,he>=9e3&&he<=9999?qe=An:he>=8e3&&he<=8999?qe=K:he>=1e3&&he<=1999&&(qe=Ye)),qe}o(zr,"_getNotificationAction")})}return o(ke,"HttpManager"),ke.__ieDyn=1,ke}();function wr(ke,rt){for(var vt=[],it=2;it<arguments.length;it++)vt[it-2]=arguments[it];return setTimeout(ke,rt,vt)}o(wr,"defaultSetTimeout");function Kr(ke){clearTimeout(ke)}o(Kr,"defaultClearTimeout");function mi(ke,rt){return{set:ke||wr,clear:rt||Kr}}o(mi,"createTimeoutWrapper");var yi=.25,si=500,Gr=20,na=6,Mi=2,ra=4,Ii=2,ia=1,Zr="eventsDiscarded",ei="overrideInstrumentationKey",ti="maxEventRetryAttempts",sa="maxUnloadEventRetryAttempts",Oi="addUnloadCb",ni=function(ke){(0,R.ne)(rt,ke);function rt(){var vt=ke.call(this)||this;vt.identifier="PostChannel",vt.priority=1011,vt.version="3.2.10";var it,Lt=!1,Gt=[],St=null,Zt=!1,Ut=0,fn=500,In=0,Kn=1e4,Qn={},tr=me,Hn=null,qt=null,sn=0,tn=0,mn,I,Y={},We,tt,Rt=-1,Nt,vn=!0,pn=!1,$t=na,hn=Mi,yn,Ht;return L(rt,vt,function(pt,On){Xn(),pt._getDbgPlgTargets=function(){return[I]},pt.initialize=function(ge,$e,Ke){(0,U.Lm)($e,function(){return"PostChannel:initialize"},function(){var ut=$e;On.initialize(ge,$e,Ke);try{var At=!!$e[Oi];yn=(0,re.jU)((0,de.J)(pt.identifier),$e.evtNamespace&&$e.evtNamespace());var It=pt._getTelCtx();ge.extensionConfig[pt.identifier]=ge.extensionConfig[pt.identifier]||{},it=It.getExtCfg(pt.identifier),Ht=mi(it.setTimeoutOverride,it.clearTimeoutOverride),vn=!it.disableOptimizeObj&&(0,He.mJ)(),Dn(ut),it.eventsLimitInMem>0&&(Kn=it.eventsLimitInMem),it.immediateEventLimit>0&&(fn=it.immediateEventLimit),it.autoFlushEventsLimit>0&&(We=it.autoFlushEventsLimit),(0,Ie.hj)(it[ti])&&($t=it[ti]),(0,Ie.hj)(it[sa])&&(hn=it[sa]),cn(),it.httpXHROverride&&it.httpXHROverride.sendPOST&&(mn=it.httpXHROverride),(0,He.Sn)(ge.anonCookieName)&&I.addQueryStringParameter("anoncknm",ge.anonCookieName),I.sendHook=it.payloadPreprocessor,I.sendListener=it.payloadListener;var En=it.overrideEndpointUrl?it.overrideEndpointUrl:ge.endpointUrl;pt._notificationManager=$e.getNotifyMgr(),I.initialize(En,pt.core,pt,mn,it);var Rn=ge.disablePageUnloadEvents||[];(0,re.c9)(wn,Rn,yn),(0,re.TJ)(wn,Rn,yn),(0,re.nD)(sr,ge.disablePageShowEvents,yn)}catch(Gn){throw pt.setInitialized(!1),Gn}},function(){return{coreConfig:ge,core:$e,extensions:Ke}})},pt.processTelemetry=function(ge,$e){(0,He.if)(ge,pt.identifier),$e=pt._getTelCtx($e);var Ke=$e.getExtCfg(pt.identifier),ut=!!it.disableTelemetry;Ke&&(ut=ut||!!Ke.disableTelemetry);var At=ge;!ut&&!Lt&&(it[ei]&&(At.iKey=it[ei]),Ke&&Ke[ei]&&(At.iKey=Ke[ei]),Vt(At,!0),pn?ri(2,2):dn()),pt.processNext(At,$e)},pt._doTeardown=function(ge,$e){ri(2,2),Lt=!0,I.teardown(),(0,re.JA)(null,yn),(0,re.C9)(null,yn),(0,re.Yl)(null,yn),Xn()};function Dn(ge){var $e=ge.getWParam;ge.getWParam=function(){var Ke=0;return it.ignoreMc1Ms0CookieProcessing&&(Ke=Ke|2),Ke|$e()}}o(Dn,"_hookWParam");function wn(ge){var $e=ge||(0,ce.Jj)().event;$e.type!=="beforeunload"&&(pn=!0,I.setUnloading(pn)),ri(2,2)}o(wn,"_handleUnloadEvents");function sr(ge){pn=!1,I.setUnloading(pn)}o(sr,"_handleShowEvents");function Vt(ge,$e){if(ge.sendAttempt||(ge.sendAttempt=0),ge.latency||(ge.latency=1),ge.ext&&ge.ext[Dr]&&delete ge.ext[Dr],ge.ext&&ge.ext[Fr]&&ge.ext[Fr].id&&delete ge.ext[Fr].id,vn&&(He.if,ge.ext=(0,Ie.Ax)(ge.ext),ge.baseData&&(ge.baseData=(0,Ie.Ax)(ge.baseData)),ge.data&&(ge.data=(0,Ie.Ax)(ge.data))),ge.sync){if(sn||Zt)ge.latency=3,ge.sync=!1;else if(I){vn&&(ge=(0,Ie.Ax)(ge)),I.sendSynchronousBatch(Cr.create(ge.iKey,[ge]),ge.sync===!0?1:ge.sync,3);return}}var Ke=ge.latency,ut=In,At=Kn;Ke===4&&(ut=Ut,At=fn);var It=!1;if(ut<At)It=!ci(ge,$e);else{var En=1,Rn=Gr;Ke===4&&(En=4,Rn=1),It=!0,wi(ge.iKey,ge.latency,En,Rn)&&(It=!ci(ge,$e))}It&&zr(Zr,[ge],Ce.h.QueueFull)}o(Vt,"_addEventToQueues"),pt.setEventQueueLimits=function(ge,$e){Kn=ge>0?ge:1e4,We=$e>0?$e:0,cn();var Ke=In>ge;if(!Ke&&tt>0)for(var ut=1;!Ke&&ut<=3;ut++){var At=Y[ut];At&&At.batches&&(0,Ie.tO)(At.batches,function(It){It&&It.count()>=tt&&(Ke=!0)})}Yr(!0,Ke)},pt.pause=function(){nr(),Zt=!0,I.pause()},pt.resume=function(){Zt=!1,I.resume(),dn()},pt.addResponseHandler=function(ge){I._responseHandlers.push(ge)},pt._loadTransmitProfiles=function(ge){bi(),(0,Ie.rW)(ge,function($e,Ke){var ut=Ke.length;if(ut>=2){var At=ut>2?Ke[2]:0;if(Ke.splice(0,ut-2),Ke[1]<0&&(Ke[0]=-1),Ke[1]>0&&Ke[0]>0){var It=Ke[0]/Ke[1];Ke[0]=Math.ceil(It)*Ke[1]}At>=0&&Ke[1]>=0&&At>Ke[1]&&(At=Ke[1]),Ke.push(At),Qn[$e]=Ke}})},pt.flush=function(ge,$e,Ke){if(ge===void 0&&(ge=!0),!Zt)if(Ke=Ke||1,ge)St==null?(nr(),ii(1,0,Ke),St=Or(function(){St=null,Ir($e,Ke)},0)):Gt.push($e);else{var ut=nr();Nr(1,1,Ke),$e!=null&&$e(),ut&&dn()}},pt.setMsaAuthTicket=function(ge){I.addHeader(vr,ge)},pt.hasEvents=_r,pt._setTransmitProfile=function(ge){tr!==ge&&Qn[ge]!==void 0&&(nr(),tr=ge,dn())};function Nr(ge,$e,Ke){var ut=ii(ge,$e,Ke);return I.sendQueuedRequests($e,Ke),ut}o(Nr,"_sendEventsForLatencyAndAbove");function _r(){return In>0}o(_r,"_hasEvents");function dn(){if(Rt>=0&&ii(Rt,0,Nt)&&I.sendQueuedRequests(0,Nt),Ut>0&&!qt&&!Zt){var ge=Qn[tr][2];ge>=0&&(qt=Or(function(){qt=null,Nr(4,0,1),dn()},ge))}var $e=Qn[tr][1];!Hn&&!St&&$e>=0&&!Zt&&(_r()?Hn=Or(function(){Hn=null,Nr(tn===0?3:1,0,1),tn++,tn%=2,dn()},$e):tn=0)}o(dn,"_scheduleTimer"),pt._backOffTransmission=function(){sn<ra&&(sn++,nr(),dn())},pt._clearBackOff=function(){sn&&(sn=0,nr(),dn())};function Xn(){it=null,Lt=!1,Gt=[],St=null,Zt=!1,Ut=0,fn=500,In=0,Kn=1e4,Qn={},tr=me,Hn=null,qt=null,sn=0,tn=0,mn=null,Y={},We=void 0,tt=0,Rt=-1,Nt=null,vn=!0,pn=!1,$t=na,hn=Mi,yn=null,Ht=mi(),I=new kn(si,Ii,ia,{requeue:qr,send:qe,sent:at,drop:mt,rspFail:Tt,oth:Ot},Ht),ai(),jr(),cn()}o(Xn,"_initDefaults");function Or(ge,$e){$e===0&&sn&&($e=1);var Ke=1e3;return sn&&(Ke=Et(sn-1)),Ht.set(ge,$e*Ke)}o(Or,"_createTimer");function nr(){return Hn!==null?(Ht.clear(Hn),Hn=null,tn=0,!0):!1}o(nr,"_clearScheduledTimer");function ri(ge,$e){nr(),St&&(Ht.clear(St),St=null),Zt||Nr(1,ge,$e)}o(ri,"_releaseAllQueues");function jr(){Y[4]={batches:[],iKeyMap:{}},Y[3]={batches:[],iKeyMap:{}},Y[2]={batches:[],iKeyMap:{}},Y[1]={batches:[],iKeyMap:{}}}o(jr,"_clearQueues");function li(ge,$e,Ke){var ut=Y[$e];ut||($e=1,ut=Y[$e]);var At=ut.iKeyMap[ge];return!At&&Ke&&(At=Cr.create(ge),ut.batches.push(At),ut.iKeyMap[ge]=At),At}o(li,"_getEventBatch");function Yr(ge,$e){I.canSendRequest()&&!sn&&(We>0&&In>We&&($e=!0),$e&&St==null&&pt.flush(ge,null,20))}o(Yr,"_performAutoFlush");function ci(ge,$e){vn&&(ge=(0,Ie.Ax)(ge));var Ke=ge.latency,ut=li(ge.iKey,Ke,!0);return ut.addEvent(ge)?(Ke!==4?(In++,$e&&ge.sendAttempt===0&&Yr(!ge.sync,tt>0&&ut.count()>=tt)):Ut++,!0):!1}o(ci,"_addEventToProperQueue");function wi(ge,$e,Ke,ut){for(;Ke<=$e;){var At=li(ge,$e,!0);if(At&&At.count()>0){var It=At.split(0,ut),En=It.count();if(En>0)return Ke===4?Ut-=En:In-=En,he(Zr,[It],Ce.h.QueueFull),!0}Ke++}return Si(),!1}o(wi,"_dropEventWithLatencyOrLess");function Si(){for(var ge=0,$e=0,Ke=o(function(At){var It=Y[At];It&&It.batches&&(0,Ie.tO)(It.batches,function(En){At===4?ge+=En.count():$e+=En.count()})},"_loop_1"),ut=1;ut<=4;ut++)Ke(ut);In=$e,Ut=ge}o(Si,"_resetQueueCounts");function ii(ge,$e,Ke){var ut=!1,At=$e===0;return!At||I.canSendRequest()?(0,U.Lm)(pt.core,function(){return"PostChannel._queueBatches"},function(){for(var It=[],En=4;En>=ge;){var Rn=Y[En];Rn&&Rn.batches&&Rn.batches.length>0&&((0,Ie.tO)(Rn.batches,function(Gn){I.addBatch(Gn)?ut=ut||Gn&&Gn.count()>0:It=It.concat(Gn.events()),En===4?Ut-=Gn.count():In-=Gn.count()}),Rn.batches=[],Rn.iKeyMap={}),En--}It.length>0&&zr(Zr,It,Ce.h.KillSwitch),ut&&Rt>=ge&&(Rt=-1,Nt=0)},function(){return{latency:ge,sendType:$e,sendReason:Ke}},!At):(Rt=Rt>=0?Math.min(Rt,ge):ge,Nt=Math.max(Nt,Ke)),ut}o(ii,"_queueBatches");function Ir(ge,$e){Nr(1,0,$e),Si(),Ci(function(){ge&&ge(),Gt.length>0?St=Or(function(){St=null,Ir(Gt.shift(),$e)},0):(St=null,dn())})}o(Ir,"_flushImpl");function Ci(ge){I.isCompletelyIdle()?ge():St=Or(function(){St=null,Ci(ge)},yi)}o(Ci,"_waitForIdleManager");function bi(){nr(),ai(),tr=me,dn()}o(bi,"_resetTransmitProfiles");function ai(){Qn={},Qn[me]=[2,1,0],Qn[Le]=[6,3,0],Qn[Ze]=[18,9,0]}o(ai,"_initializeProfiles");function qr(ge,$e){var Ke=[],ut=$t;pn&&(ut=hn),(0,Ie.tO)(ge,function(At){At&&At.count()>0&&(0,Ie.tO)(At.events(),function(It){It&&(It.sync&&(It.latency=4,It.sync=!1),It.sendAttempt<ut?((0,He.if)(It,pt.identifier),Vt(It,!1)):Ke.push(It))})}),Ke.length>0&&zr(Zr,Ke,Ce.h.NonRetryableStatus),pn&&ri(2,2)}o(qr,"_requeueEvents");function rr(ge,$e){var Ke=pt._notificationManager||{},ut=Ke[ge];if(ut)try{ut.apply(Ke,$e)}catch(At){(0,Te.kP)(pt.diagLog(),1,74,ge+" notification failed: "+At)}}o(rr,"_callNotification");function zr(ge,$e){for(var Ke=[],ut=2;ut<arguments.length;ut++)Ke[ut-2]=arguments[ut];$e&&$e.length>0&&rr(ge,[$e].concat(Ke))}o(zr,"_notifyEvents");function he(ge,$e){for(var Ke=[],ut=2;ut<arguments.length;ut++)Ke[ut-2]=arguments[ut];$e&&$e.length>0&&(0,Ie.tO)($e,function(At){At&&At.count()>0&&rr(ge,[At.events()].concat(Ke))})}o(he,"_notifyBatchEvents");function qe(ge,$e,Ke){ge&&ge.length>0&&rr("eventsSendRequest",[$e>=1e3&&$e<=1999?$e-1e3:0,Ke!==!0])}o(qe,"_sendingEvent");function at(ge,$e){he("eventsSent",ge,$e),dn()}o(at,"_eventsSentEvent");function mt(ge,$e){he(Zr,ge,$e>=8e3&&$e<=8999?$e-8e3:Ce.h.Unknown)}o(mt,"_eventsDropped");function Tt(ge){he(Zr,ge,Ce.h.NonRetryableStatus),dn()}o(Tt,"_eventsResponseFail");function Ot(ge,$e){he(Zr,ge,Ce.h.Unknown),dn()}o(Ot,"_otherEvent");function cn(){!it||!it.disableAutoBatchFlushLimit?tt=Math.max(si*(Ii+1),Kn/6):tt=0}o(cn,"_setAutoLimits"),(0,Ie.l_)(pt,"_setTimeoutOverride",function(){return Ht.set},function(ge){Ht=mi(ge,Ht.clear)}),(0,Ie.l_)(pt,"_clearTimeoutOverride",function(){return Ht.clear},function(ge){Ht=mi(Ht.set,ge)})}),vt}return o(rt,"PostChannel"),rt.__ieDyn=1,rt}(Ve.i);const Vi=ni},4873:(ot,l,C)=>{"use strict";C.d(l,{By:()=>v,cc:()=>y});var R=C(6708);function v(W){var N={};return(0,R.rW)(W,function(m,w){N[m]=w,N[w]=m}),(0,R._A)(N)}o(v,"createEnumStyle");function P(W){var N={};return objForEachKey(W,function(m,w){N[m]=m,N[w]=m}),deepFreeze(N)}o(P,"createEnumMap");function y(W){var N={};return(0,R.rW)(W,function(m,w){N[m]=w[1],N[w[0]]=w[1]}),(0,R._A)(N)}o(y,"createValueMap")},5928:(ot,l,C)=>{"use strict";C.d(l,{h:()=>v});var R=C(4873),v=(0,R.By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},7310:(ot,l,C)=>{"use strict";C.d(l,{X:()=>ee,v:()=>te});var R=C(4873),v,P="Failed",y=P+"MonitorAjax",W="Track",N="Start",m="Stop",w="Event",O="AuthContext",H="Exception",E="Local",$="Session",F="Storage",j="Browser",Q="Cannot",Ee="Buffer",z="InstrumentationKey",ee=(0,R.By)({CRITICAL:1,WARNING:2}),te=(0,R.By)((v={},v[j+"DoesNotSupport"+E+F]=0,v[j+Q+"Read"+E+F]=1,v[j+Q+"Read"+$+F]=2,v[j+Q+"Write"+E+F]=3,v[j+Q+"Write"+$+F]=4,v[j+P+"RemovalFrom"+E+F]=5,v[j+P+"RemovalFrom"+$+F]=6,v[Q+"SendEmptyTelemetry"]=7,v.ClientPerformanceMathError=8,v["ErrorParsingAI"+$+"Cookie"]=9,v.ErrorPVCalc=10,v[H+"WhileLoggingError"]=11,v[P+"AddingTelemetryTo"+Ee]=12,v[y+"Abort"]=13,v[y+"Dur"]=14,v[y+"Open"]=15,v[y+"RSC"]=16,v[y+"Send"]=17,v[y+"GetCorrelationHeader"]=18,v[P+"ToAddHandlerForOnBeforeUnload"]=19,v[P+"ToSendQueuedTelemetry"]=20,v[P+"ToReportDataLoss"]=21,v["Flush"+P]=22,v.MessageLimitPerPVExceeded=23,v.MissingRequiredFieldSpecification=24,v.NavigationTimingNotSupported=25,v.OnError=26,v[$+"RenewalDateIsZero"]=27,v.SenderNotInitialized=28,v[N+W+w+P]=29,v[m+W+w+P]=30,v[N+W+P]=31,v[m+W+P]=32,v.TelemetrySampledAndNotSent=33,v[W+w+P]=34,v[W+H+P]=35,v[W+"Metric"+P]=36,v[W+"PV"+P]=37,v[W+"PV"+P+"Calc"]=38,v[W+"Trace"+P]=39,v["Transmission"+P]=40,v[P+"ToSet"+F+Ee]=41,v[P+"ToRestore"+F+Ee]=42,v.InvalidBackendResponse=43,v[P+"ToFixDepricatedValues"]=44,v.InvalidDurationValue=45,v.TelemetryEnvelopeInvalid=46,v.CreateEnvelopeError=47,v[Q+"SerializeObject"]=48,v[Q+"SerializeObjectNonSerializable"]=49,v.CircularReferenceDetected=50,v["Clear"+O+P]=51,v[H+"Truncated"]=52,v.IllegalCharsInName=53,v.ItemNotInArray=54,v.MaxAjaxPerPVExceeded=55,v.MessageTruncated=56,v.NameTooLong=57,v.SampleRateOutOfRange=58,v["Set"+O+P]=59,v["Set"+O+P+"AccountName"]=60,v.StringValueTooLong=61,v.StartCalledMoreThanOnce=62,v.StopCalledWithoutStart=63,v["TelemetryInitializer"+P]=64,v.TrackArgumentsNotSpecified=65,v.UrlTooLong=66,v[$+F+Ee+"Full"]=67,v[Q+"AccessCookie"]=68,v.IdTooLong=69,v.InvalidEvent=70,v[y+"SetRequestHeader"]=71,v["Send"+j+"InfoOnUserInit"]=72,v["Plugin"+H]=73,v["Notification"+H]=74,v.SnippetScriptLoadFailure=99,v["Invalid"+z]=100,v[Q+"ParseAiBlobValue"]=101,v.InvalidContentBlob=102,v[W+"PageAction"+w+P]=103,v[P+"AddingCustomDefinedRequestContext"]=104,v["InMemory"+F+Ee+"Full"]=105,v[z+"Deprecation"]=106,v))},5121:(ot,l,C)=>{"use strict";C.d(l,{F:()=>H});var R=C(1088),v=C(1679),P=C(8096),y=C(6900),W=C(5018),N=C(6708),m=C(6041),w=C(1880),O=C(9288),H=function(E){(0,R.ne)($,E);function $(){var F=E.call(this)||this;return(0,v.Z)($,F,function(j,Q){j[P.VL]=function(ee,te,T,q){Q[P.VL](ee,te,T||new W.AQ(ee),q||new w.f(ee))},j.track=function(ee){(0,O.Lm)(j[m.kl](),function(){return"AppInsightsCore:track"},function(){ee===null&&(z(ee),(0,N._y)("Invalid telemetry item")),Ee(ee),Q.track(ee)},function(){return{item:ee}},!ee.sync)};function Ee(ee){(0,N.le)(ee[P.I])&&(z(ee),(0,N._y)("telemetry name required"))}o(Ee,"_validateTelemetryItem");function z(ee){var te=j[P.tb]();te&&te[m.$F]([ee],2)}o(z,"_notifyInvalidEvent")}),F}return o($,"AppInsightsCore"),$.__ieDyn=1,$}(y.A)},6900:(ot,l,C)=>{"use strict";C.d(l,{A:()=>ye});var R=C(1088),v=C(1679),P=C(2091),y=C(8096),W=C(6708),N=C(6041),m=C(1589),w=C(3833),O=500,H="Channel has invalid priority - ";function E(ve,G,se){G&&(0,W.kJ)(G)&&G[y.R5]>0&&(G=G.sort(function(Re,Ge){return Re[N.yi]-Ge[N.yi]}),(0,W.tO)(G,function(Re){Re[N.yi]<O&&(0,W._y)(H+Re[y.pZ])}),ve[y.MW]({queue:(0,W.FL)(G),chain:(0,m.jV)(G,se[y.TC],se)}))}o(E,"_addChannelQueue");function $(ve,G){function se(){return(0,m.CD)(null,G[y.TC],G,null)}o(se,"_getTelCtx");function Re(L,U,re,de){var He=L?L[y.R5]+1:1;function Ie(){He--,He===0&&(de&&de(),de=null)}o(Ie,"_runChainOnComplete"),He>0&&(0,W.tO)(L,function(ce){if(ce&&ce.queue[y.R5]>0){var Ce=ce.chain,Te=U[y.zV](Ce);Te[y.Fc](Ie),re(Te)}else He--}),Ie()}o(Re,"_processChannelQueue");function Ge(L,U){var re=U||{reason:0};return Re(ve,L,function(de){de[y.uL](re)},function(){L[y.uL](re)}),!0}o(Ge,"_doUpdate");function ie(L,U){var re=U||{reason:0,isAsync:!1};return Re(ve,L,function(de){de[y.uL](re)},function(){L[y.uL](re),lt=!1}),!0}o(ie,"_doTeardown");function Xe(L){var U=null;return ve&&ve[y.R5]>0&&(0,W.tO)(ve,function(re){if(re&&re.queue[y.R5]>0&&((0,W.tO)(re.queue,function(de){if(de[y.pZ]===L)return U=de,-1}),U))return-1}),U}o(Xe,"_getChannel");var lt=!1,wt={identifier:"ChannelControllerPlugin",priority:O,initialize:function(L,U,re,de){lt=!0,(0,W.tO)(ve,function(He){He&&He.queue[y.R5]>0&&(0,w.bP)((0,m.CD)(He.chain,L,U),re)})},isInitialized:function(){return lt},processTelemetry:function(L,U){Re(ve,U||se(),function(re){re[y.uL](L)},function(){U[y.uL](L)})},update:Ge,pause:function(){Re(ve,se(),function(L){L.iterate(function(U){U.pause&&U.pause()})},null)},resume:function(){Re(ve,se(),function(L){L.iterate(function(U){U.resume&&U.resume()})},null)},teardown:ie,getChannel:Xe,flush:function(L,U,re,de){var He=1,Ie=!1,ce=null;de=de||5e3;function Ce(){He--,Ie&&He===0&&(ce&&(clearTimeout(ce),ce=null),U&&U(Ie),U=null)}return o(Ce,"doCallback"),Re(ve,se(),function(Te){Te.iterate(function(Ve){if(Ve[y.kL]){He++;var me=!1;Ve[y.kL](L,function(){me=!0,Ce()},re)||me||(L&&ce==null?ce=setTimeout(function(){ce=null,Ce()},de):Ce())}})},function(){Ie=!0,Ce()}),!0},_setQueue:function(L){ve=L}};return wt}o($,"createChannelControllerPlugin");function F(ve,G,se){var Re=[];if(ve&&(0,W.tO)(ve,function(ie){return E(Re,ie,se)}),G){var Ge=[];(0,W.tO)(G,function(ie){ie[N.yi]>O&&Ge[y.MW](ie)}),E(Re,Ge,se)}return Re}o(F,"createChannelQueues");var j=C(3242),Q=C(5883),Ee=C(7158),z=C(5018),ee=C(9288),te=C(4063),T=C(7630),q=function(ve){(0,R.ne)(G,ve);function G(){var se=ve.call(this)||this;se.identifier="TelemetryInitializerPlugin",se.priority=199;var Re,Ge;ie(),(0,v.Z)(G,se,function(Xe,lt){Xe.addTelemetryInitializer=function(wt){var L={id:Re++,fn:wt};Ge[y.MW](L);var U={remove:function(){(0,W.tO)(Ge,function(re,de){if(re.id===L.id)return Ge[y.cb](de,1),-1})}};return U},Xe[N.hL]=function(wt,L){for(var U=!1,re=Ge[y.R5],de=0;de<re;++de){var He=Ge[de];if(He)try{if(He.fn[y.ZV](null,[wt])===!1){U=!0;break}}catch(Ie){(0,z.kP)(L[y.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,W.jj)(Ie),{exception:(0,T.eU)(Ie)},!0)}}U||Xe[y.uL](wt,L)},Xe[y.F3]=function(){ie()}});function ie(){Re=0,Ge=[]}return o(ie,"_initDefaults"),se}return o(G,"TelemetryInitializerPlugin"),G.__ieDyn=1,G}(te.i),k=C(310),le="Plugins must provide initialize method",V="_notificationManager",fe="SDK is still unloading...",De="SDK is not initialized",Fe={loggingLevelConsole:1};function ae(ve,G){return new ee.Jk(G)}o(ae,"_createPerfManager");function we(ve,G,se){var Re,Ge=[],ie={};return(0,W.tO)(se,function(Xe){((0,W.le)(Xe)||(0,W.le)(Xe[y.VL]))&&(0,W._y)(le);var lt=Xe[N.yi],wt=Xe[y.pZ];Xe&&lt&&((0,W.le)(ie[lt])?ie[lt]=wt:(0,z.jV)(ve,"Two extensions have same priority #"+lt+" - "+ie[lt]+", "+wt)),(!lt||lt<G)&&Ge[y.MW](Xe)}),Re={all:se},Re[N.oV]=Ge,Re}o(we,"_validateExtensions");function D(ve,G){var se=!1;return(0,W.tO)(G,function(Re){if(Re===ve)return se=!0,-1}),se}o(D,"_isPluginPresent");function Je(){var ve;return(0,P.pu)((ve={},ve[y.g]=function(G){},ve[y.n7]=function(G){},ve[N.uC]=function(G){},ve[N.$F]=function(G,se){},ve[N.f_]=function(G,se){},ve))}o(Je,"_createDummyNotificationManager");var ye=function(){function ve(){var G,se,Re,Ge,ie,Xe,lt,wt,L,U,re,de,He,Ie,ce,Ce,Te,Ve,me,Le,Ze=0;(0,v.Z)(ve,this,function(nt){be(),nt[y.yl]=function(){return se},nt[y.VL]=function(dt,zt,an,on){Ie&&(0,W._y)(fe),nt[y.yl]()&&(0,W._y)("Core should not be initialized more than once"),G=dt||{},nt[y.TC]=G,(0,W.le)(dt[y.p$])&&(0,W._y)("Please provide instrumentation key"),Ge=on,nt[V]=on,lr(),ar(),mr(),an&&(nt[y.eZ]=an);var Yt=(0,W.qK)(G,N.js,[]);L=[],L[y.MW].apply(L,(0,R.$h)((0,R.$h)([],zt,!1),Yt,!1)),de=(0,W.qK)(G,N.Z,[]),K(null),(!He||He[y.R5]===0)&&(0,W._y)("No "+N.Z+" available"),se=!0,nt.releaseQueue()},nt.getTransmissionControls=function(){var dt=[];return He&&(0,W.tO)(He,function(zt){dt[y.MW](zt.queue)}),(0,W.FL)(dt)},nt.track=function(dt){dt.iKey=dt.iKey||G[y.p$],dt[y.Z_]=dt[y.Z_]||(0,W.Y6)(new Date),dt.ver=dt.ver||"4.0",!Ie&&nt[y.yl]()?B()[y.uL](dt):Re[y.MW](dt)},nt[y.SD]=B,nt[y.tb]=function(){return Ge||(Ge=Je(),nt[V]=Ge),Ge},nt[y.g]=function(dt){Ge&&Ge[y.g](dt)},nt[y.n7]=function(dt){Ge&&Ge[y.n7](dt)},nt.getCookieMgr=function(){return lt||(lt=(0,j.Nz)(G,nt[y.eZ])),lt},nt.setCookieMgr=function(dt){lt=dt},nt[N.kl]=function(){if(!ie&&!Xe&&(0,W.v4)(G.enablePerfMgr)){var dt=(0,W.v4)(G[N.DN]);(0,W.mf)(dt)&&(Xe=dt(nt,nt[y.tb]()))}return ie||Xe||(0,ee.j5)()},nt.setPerfMgr=function(dt){ie=dt},nt.eventCnt=function(){return Re[y.R5]},nt.releaseQueue=function(){if(se&&Re[y.R5]>0){var dt=Re;Re=[],(0,W.tO)(dt,function(zt){B()[y.uL](zt)})}},nt.pollInternalLogs=function(dt){Ce=dt||null;var zt=(0,W.v4)(G.diagnosticLogInterval);return(!zt||!(zt>0))&&(zt=1e4),Ze&&clearInterval(Ze),Ze=setInterval(function(){Mn()},zt),Ze},nt[y.LS]=function(){Ze&&(clearInterval(Ze),Ze=0,Mn())},(0,W.Vb)(nt,function(){return ce},["addTelemetryInitializer"]),nt.unload=function(dt,zt,an){var on;dt===void 0&&(dt=!0),se||(0,W._y)(De),Ie&&(0,W._y)(fe);var Yt=(on={reason:50},on[y.d]=dt,on.flushComplete=!1,on),_n=(0,m.Bt)(jt(),nt);_n[y.Fc](function(){be(),zt&&zt(Yt)},nt);function zn(vr){Yt.flushComplete=vr,Ie=!0,Ve.run(_n,Yt),nt[y.LS](),_n[y.uL](Yt)}o(zn,"_doUnload"),Cn(dt,zn,6,an)||zn(!1)},nt[y.TO]=Ye,nt.addPlugin=function(dt,zt,an,on){if(!dt){on&&on(!1),yr(le);return}var Yt=Ye(dt[y.pZ]);if(Yt&&!zt){on&&on(!1),yr("Plugin ["+dt[y.pZ]+"] is already loaded!");return}var _n={reason:16};function zn(Ar){L[y.MW](dt),_n.added=[dt],K(_n),on&&on(!0)}if(o(zn,"_addPlugin"),Yt){var vr=[Yt.plugin],er={reason:2,isAsync:!!an};An(vr,er,function(Ar){Ar?(_n.removed=vr,_n.reason|=32,zn(!0)):on&&on(!1)})}else zn(!1)},nt.evtNamespace=function(){return Te},nt[y.kL]=Cn,nt.getTraceCtx=function(dt){return Le||(Le=(0,w.Yn)()),Le},nt.setTraceCtx=function(dt){Le=dt||null},(0,W.Oi)(nt,"addUnloadCb",function(){return Ve},"add");function be(){se=!1,G=(0,W.mm)(!0,{},Fe),nt[y.TC]=G,nt[y.eZ]=new z.AQ(G),nt[y.iC]=[],ce=new q,Re=[],Ge=null,ie=null,Xe=null,lt=null,wt=null,U=null,L=[],re=null,de=null,He=null,Ie=!1,Ce=null,Te=(0,Q.J)("AIBaseCore",!0),Ve=(0,k.Y)(),Le=null}o(be,"_initDefaults");function B(){return(0,m.CD)(jt(),G,nt)}o(B,"_createTelCtx");function K(dt){var zt=we(nt[y.eZ],O,L);U=zt[N.oV],wt=null;var an=zt.all;if(He=(0,W.FL)(F(de,an,nt)),re){var on=(0,W.UA)(an,re);on!==-1&&an[y.cb](on,1),on=(0,W.UA)(U,re),on!==-1&&U[y.cb](on,1),re._setQueue(He)}else re=$(He,nt);an[y.MW](re),U[y.MW](re),nt[y.iC]=(0,w.AA)(an),re[y.VL](G,nt,an),(0,w.bP)(B(),an),nt[y.iC]=(0,W.FL)((0,w.AA)(U||[])).slice(),dt&&cr(dt)}o(K,"_initPluginChain");function Ye(dt){var zt,an=null,on=null;return(0,W.tO)(nt[y.iC],function(Yt){if(Yt[y.pZ]===dt&&Yt!==re&&Yt!==ce)return on=Yt,-1}),!on&&re&&(on=re.getChannel(dt)),on&&(an=(zt={plugin:on},zt[y.$h]=function(Yt){(0,w.OY)(on)[N.mE]=!Yt},zt.isEnabled=function(){var Yt=(0,w.OY)(on);return!Yt[y.fi]&&!Yt[N.mE]},zt.remove=function(Yt,_n){var zn;Yt===void 0&&(Yt=!0);var vr=[on],er=(zn={reason:1},zn[y.d]=Yt,zn);An(vr,er,function(Ar){Ar&&K({reason:32,removed:vr}),_n&&_n(Ar)})},zt)),an}o(Ye,"_getPlugin");function jt(){if(!wt){var dt=(U||[]).slice();(0,W.UA)(dt,ce)===-1&&dt[y.MW](ce),wt=(0,m.jV)((0,w.AA)(dt),G,nt)}return wt}o(jt,"_getPluginChain");function An(dt,zt,an){if(dt&&dt[y.R5]>0){var on=(0,m.jV)(dt,G,nt),Yt=(0,m.Bt)(on,nt);Yt[y.Fc](function(){var _n=!1,zn=[];(0,W.tO)(L,function(er,Ar){D(er,dt)?_n=!0:zn[y.MW](er)}),L=zn;var vr=[];de&&((0,W.tO)(de,function(er,Ar){var Ur=[];(0,W.tO)(er,function(Sr){D(Sr,dt)?_n=!0:Ur[y.MW](Sr)}),vr[y.MW](Ur)}),de=vr),an&&an(_n)}),Yt[y.uL](zt)}else an(!1)}o(An,"_removePlugins");function Mn(){var dt=nt[y.eZ]?nt[y.eZ].queue:[];dt&&((0,W.tO)(dt,function(zt){var an,on=(an={},an[y.I]=Ce||"InternalMessageId: "+zt[y.Gc],an.iKey=(0,W.v4)(G[y.p$]),an.time=(0,W.Y6)(new Date),an.baseType=z.lQ.dataType,an.baseData={message:zt[y.gU]},an);nt.track(on)}),dt[y.R5]=0)}o(Mn,"_flushInternalLogs");function Cn(dt,zt,an,on){return re?re[y.kL](dt,zt,an||6,on):(zt&&zt(!1),!0)}o(Cn,"_flushChannels");function lr(){var dt=(0,W.v4)(G.disableDbgExt);dt===!0&&me&&(Ge[y.n7](me),me=null),Ge&&!me&&dt!==!0&&(me=(0,Ee.p)(G),Ge[y.g](me))}o(lr,"_initDebugListener");function ar(){var dt=(0,W.v4)(G.enablePerfMgr);!dt&&Xe&&(Xe=null),dt&&(0,W.qK)(G,N.DN,ae)}o(ar,"_initPerfManager");function mr(){var dt=(0,W.qK)(G,N.Zh,{});dt.NotificationManager=Ge}o(mr,"_initExtConfig");function cr(dt){var zt=(0,m.xy)(jt(),nt);(!nt._updateHook||nt._updateHook(zt,dt)!==!0)&&zt[y.uL](dt)}o(cr,"_doUpdate");function yr(dt){var zt=nt[y.eZ];zt?(0,z.kP)(zt,2,73,dt):(0,W._y)(dt)}o(yr,"_logOrThrowError")})}return o(ve,"BaseCore"),ve.__ieDyn=1,ve}()},4063:(ot,l,C)=>{"use strict";C.d(l,{i:()=>w});var R=C(1679),v=C(8096),P=C(6708),y=C(6041),W=C(1589),N=C(310),m="getPlugin",w=function(){function O(){var H=this,E,$,F,j,Q;ee(),(0,R.Z)(O,H,function(te){te[v.VL]=function(T,q,k,le){z(T,q,le),E=!0},te[v.fi]=function(T,q){var k,le=te[y.oV];if(!le||T&&le!==T[y.oV]())return;var V,fe=!1,De=T||(0,W.Bt)(null,le,F&&F[m]?F[m]():F),Fe=q||(k={reason:0},k[v.d]=!1,k);function ae(){if(!fe){fe=!0,j.run(De,q);var we=Q;Q=[],(0,P.tO)(we,function(D){D.rm()}),V===!0&&De[v.uL](Fe),ee()}}return o(ae,"_unloadCallback"),!te[v.F3]||te[v.F3](De,Fe,ae)!==!0?ae():V=!0,V},te[v.Tu]=function(T,q){var k=te[y.oV];if(!k||T&&k!==T[y.oV]())return;var le,V=!1,fe=T||(0,W.xy)(null,k,F&&F[m]?F[m]():F),De=q||{reason:0};function Fe(){V||(V=!0,z(fe.getCfg(),fe.core(),fe[v.W2]()))}return o(Fe,"_updateCallback"),!te._doUpdate||te._doUpdate(fe,De,Fe)!==!0?Fe():le=!0,le},te._addHook=function(T){T&&((0,P.kJ)(T)?Q=Q.concat(T):Q[v.MW](T))},(0,P.Oi)(te,"_addUnloadCb",function(){return j},"add")}),H[v.mc]=function(te){return Ee(te)[v.mc]()},H[v.yl]=function(){return E},H.setInitialized=function(te){E=te},H[v.Jd]=function(te){F=te},H[v.uL]=function(te,T){T?T[v.uL](te):F&&(0,P.mf)(F[y.hL])&&F[y.hL](te,null)},H._getTelCtx=Ee;function Ee(te){te===void 0&&(te=null);var T=te;if(!T){var q=$||(0,W.CD)(null,{},H[y.oV]);F&&F[m]?T=q[v.zV](null,F[m]):T=q[v.zV](null,F)}return T}o(Ee,"_getTelCtx");function z(te,T,q){te&&(0,P.sO)(te,y.Zh,[],null,P.le),!q&&T&&(q=T[v.SD]()[v.W2]());var k=F;F&&F[m]&&(k=F[m]()),H[y.oV]=T,$=(0,W.CD)(q,te,T,k)}o(z,"_setDefaults");function ee(){E=!1,H[y.oV]=null,$=null,F=null,Q=[],j=(0,N.Y)()}o(ee,"_initDefaults")}return o(O,"BaseTelemetryPlugin"),O.__ieDyn=1,O}()},3242:(ot,l,C)=>{"use strict";C.d(l,{kj:()=>T,JP:()=>fe,Nz:()=>De,p7:()=>Fe,UY:()=>ve});var R=C(8096),v=C(5018),P=C(7630),y=C(6708),W=C(6041),N="toGMTString",m="toUTCString",w="cookie",O="expires",H="enabled",E="isCookieUseDisabled",$="disableCookiesUsage",F="_ckMgr",j=null,Q=null,Ee=null,z=(0,P.Me)(),ee={},te={};function T(G,se){var Re=De[F]||te[F];return Re||(Re=De[F]=De(G,se),te[F]=Re),Re}o(T,"_gblCookieMgr");function q(G){return G?G.isEnabled():!0}o(q,"_isMgrEnabled");function k(G){var se=G[R.Lk]=G[R.Lk]||{};if((0,y.sO)(se,"domain",G.cookieDomain,y.BX,y.le),(0,y.sO)(se,"path",G.cookiePath||"/",null,y.le),(0,y.le)(se[H])){var Re=void 0;(0,y.o8)(G[E])||(Re=!G[E]),(0,y.o8)(G[$])||(Re=!G[$]),se[H]=Re}return se}o(k,"_createCookieMgrConfig");function le(G,se){return se&&G&&(0,y.kJ)(G.ignoreCookies)?G.ignoreCookies[R.ou](se)!==-1:!1}o(le,"_isIgnoredCookie");function V(G,se){return se&&G&&(0,y.kJ)(G.blockedCookies)&&G.blockedCookies[R.ou](se)!==-1?!0:le(G,se)}o(V,"_isBlockedCookie");function fe(G,se){var Re;if(G)Re=G.getCookieMgr();else if(se){var Ge=se[R.Lk];Ge[F]?Re=Ge[F]:Re=De(se)}return Re||(Re=T(se,(G||{})[R.eZ])),Re}o(fe,"safeGetCookieMgr");function De(G,se){var Re,Ge=k(G||te),ie=Ge.path||"/",Xe=Ge.domain,lt=Ge[H]!==!1,wt=(Re={isEnabled:function(){var L=lt&&Fe(se),U=te[F];return L&&U&&wt!==U&&(L=q(U)),L}},Re[R.$h]=function(L){lt=L!==!1},Re.set=function(L,U,re,de,He){var Ie=!1;if(q(wt)&&!V(Ge,L)){var ce={},Ce=(0,y.nd)(U||W.qS),Te=Ce[R.ou](";");if(Te!==-1&&(Ce=(0,y.nd)(U[R.zc](0,Te)),ce=ae(U[R.zc](Te+1))),(0,y.sO)(ce,"domain",de||Xe,y.fQ,y.o8),!(0,y.le)(re)){var Ve=(0,P.w1)();if((0,y.o8)(ce[O])){var me=(0,y.m6)(),Le=me+re*1e3;if(Le>0){var Ze=new Date;Ze.setTime(Le),(0,y.sO)(ce,O,we(Ze,Ve?N:m)||we(Ze,Ve?N:m)||W.qS,y.fQ)}}Ve||(0,y.sO)(ce,"max-age",W.qS+re,null,y.o8)}var nt=(0,P.k$)();nt&&nt.protocol==="https:"&&((0,y.sO)(ce,"secure",null,null,y.o8),Q===null&&(Q=!ve(((0,P.jW)()||{})[R.qV])),Q&&(0,y.sO)(ce,"SameSite","None",null,y.o8)),(0,y.sO)(ce,"path",He||ie,null,y.o8);var be=Ge.setCookie||ye;be(L,D(Ce,ce)),Ie=!0}return Ie},Re.get=function(L){var U=W.qS;return q(wt)&&!le(Ge,L)&&(U=(Ge.getCookie||Je)(L)),U},Re.del=function(L,U){var re=!1;return q(wt)&&(re=wt.purge(L,U)),re},Re.purge=function(L,U){var re,de=!1;if(Fe(se)){var He=(re={},re.path=U||"/",re[O]="Thu, 01 Jan 1970 00:00:01 GMT",re);(0,P.w1)()||(He["max-age"]="0");var Ie=Ge.delCookie||ye;Ie(L,D(W.qS,He)),de=!0}return de},Re);return wt[F]=wt,wt}o(De,"createCookieMgr");function Fe(G){if(j===null){j=!1;try{var se=z||{};j=se[w]!==void 0}catch(Re){(0,v.kP)(G,2,68,"Cannot access document.cookie - "+(0,y.jj)(Re),{exception:(0,P.eU)(Re)})}}return j}o(Fe,"areCookiesSupported");function ae(G){var se={};if(G&&G[R.R5]){var Re=(0,y.nd)(G)[R.w6](";");(0,y.tO)(Re,function(Ge){if(Ge=(0,y.nd)(Ge||W.qS),Ge){var ie=Ge[R.ou]("=");ie===-1?se[Ge]=null:se[(0,y.nd)(Ge[R.zc](0,ie))]=(0,y.nd)(Ge[R.zc](ie+1))}})}return se}o(ae,"_extractParts");function we(G,se){return(0,y.mf)(G[se])?G[se]():null}o(we,"_formatDate");function D(G,se){var Re=G||W.qS;return(0,y.rW)(se,function(Ge,ie){Re+="; "+Ge+((0,y.le)(ie)?W.qS:"="+ie)}),Re}o(D,"_formatCookieValue");function Je(G){var se=W.qS;if(z){var Re=z[w]||W.qS;Ee!==Re&&(ee=ae(Re),Ee=Re),se=(0,y.nd)(ee[G]||W.qS)}return se}o(Je,"_getCookieValue");function ye(G,se){z&&(z[w]=G+"="+se)}o(ye,"_setCookieValue");function ve(G){return(0,y.HD)(G)?!!((0,y._Q)(G,"CPU iPhone OS 12")||(0,y._Q)(G,"iPad; CPU OS 12")||(0,y._Q)(G,"Macintosh; Intel Mac OS X 10_14")&&(0,y._Q)(G,"Version/")&&(0,y._Q)(G,"Safari")||(0,y._Q)(G,"Macintosh; Intel Mac OS X 10_14")&&(0,y.Id)(G,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,y._Q)(G,"Chrome/5")||(0,y._Q)(G,"Chrome/6")||(0,y._Q)(G,"UnrealEngine")&&!(0,y._Q)(G,"Chrome")||(0,y._Q)(G,"UCBrowser/12")||(0,y._Q)(G,"UCBrowser/11")):!1}o(ve,"uaDisallowsSameSiteNone")},5843:(ot,l,C)=>{"use strict";C.d(l,{GW:()=>$,Jj:()=>F,DO:()=>Q,Tr:()=>Ee,zB:()=>ee,oF:()=>T,vn:()=>q,ej:()=>k,d8:()=>le,kT:()=>V});var R=C(2091),v=C(8096),P=C(3242),y=C(7630),W=C(4869),N=C(6708),m=C(6041),w=C(4878),O=null,H,E=null;function $(){var fe=Q();return fe[v.zc](0,8)+"-"+fe[v.zc](8,12)+"-"+fe[v.zc](12,16)+"-"+fe[v.zc](16,20)+"-"+fe[v.zc](20)}o($,"newGuid");function F(){var fe=(0,y.r)();return fe&&fe.now?fe.now():(0,N.m6)()}o(F,"perfNow");function j(fe,De){if(fe&&De){var Fe=fe[_DYN_LENGTH],ae=Fe-De[_DYN_LENGTH];return fe[_DYN_SUBSTRING](ae>=0?ae:0,Fe)===De}return!1}o(j,"strEndsWith");function Q(){for(var fe=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],De=m.qS,Fe,ae=0;ae<4;ae++)Fe=(0,w._l)(),De+=fe[Fe&15]+fe[Fe>>4&15]+fe[Fe>>8&15]+fe[Fe>>12&15]+fe[Fe>>16&15]+fe[Fe>>20&15]+fe[Fe>>24&15]+fe[Fe>>28&15];var we=fe[8+((0,w._l)()&3)|0];return De[v.Jn](0,8)+De[v.Jn](9,4)+"4"+De[v.Jn](13,3)+we+De[v.Jn](16,3)+De[v.Jn](19,12)}o(Q,"generateW3CId");var Ee={_canUseCookies:void 0,isTypeof:N.Ym,isUndefined:N.o8,isNullOrUndefined:N.le,hasOwnProperty:N.nr,isFunction:N.mf,isObject:N.Kn,isDate:N.J_,isArray:N.kJ,isError:N.VZ,isString:N.HD,isNumber:N.hj,isBoolean:N.jn,toISOString:N.Y6,arrForEach:N.tO,arrIndexOf:N.UA,arrMap:N.Mr,arrReduce:N.Xz,strTrim:N.nd,objCreate:R.pu,objKeys:N.FY,objDefineAccessors:N.l_,addEventHandler:W.Ib,dateNow:N.m6,isIE:y.w1,disableCookies:T,newGuid:$,perfNow:F,newId:w.pZ,randomValue:w.az,random32:w._l,mwcRandomSeed:w.CN,mwcRandom32:w.F6,generateW3CId:Q},z=/[xy]/g,ee={Attach:W.pZ,AttachEvent:W.pZ,Detach:W.pD,DetachEvent:W.pD};function te(fe,De){var Fe=(0,P.kj)(fe,De),ae=Ee._canUseCookies;return O===null&&(O=[],H=ae,(0,N.l_)(Ee,"_canUseCookies",function(){return H},function(we){H=we,(0,N.tO)(O,function(D){D[v.$h](we)})})),(0,N.UA)(O,Fe)===-1&&O[v.MW](Fe),(0,N.jn)(ae)&&Fe[v.$h](ae),(0,N.jn)(H)&&Fe[v.$h](H),Fe}o(te,"_legacyCookieMgr");function T(){te()[v.$h](!1)}o(T,"disableCookies");function q(fe){return te(null,fe).isEnabled()}o(q,"canUseCookies");function k(fe,De){return te(null,fe).get(De)}o(k,"getCookie");function le(fe,De,Fe,ae){te(null,fe).set(De,Fe,null,ae)}o(le,"setCookie");function V(fe,De){return te(null,fe).del(De)}o(V,"deleteCookie")},5883:(ot,l,C)=>{"use strict";C.d(l,{J:()=>F,K:()=>j});var R=C(4392),v=C(8096),P=C(6708),y=C(6041),W=C(4878),N=R.RJ,m="2.8.12",w="."+(0,W.pZ)(6),O=0;function H(Q,Ee,z){if(N)try{return N(Q,Ee,{value:z,enumerable:!1,configurable:!0}),!0}catch(ee){}return!1}o(H,"_createAccessor");function E(Q){return Q[v.xv]===1||Q[v.xv]===9||!+Q[v.xv]}o(E,"_canAcceptData");function $(Q,Ee){var z=Ee[Q.id];if(!z){z={};try{E(Ee)&&(H(Ee,Q.id,z)||(Ee[Q.id]=z))}catch(ee){}}return z}o($,"_getCache");function F(Q,Ee){return Ee===void 0&&(Ee=!1),(0,P.Gf)(Q+O+++(Ee?"."+m:y.qS)+w)}o(F,"createUniqueNamespace");function j(Q){var Ee={id:F("_aiData-"+(Q||y.qS)+"."+m),accept:function(z){return E(z)},get:function(z,ee,te,T){var q=z[Ee.id];return q?q[(0,P.Gf)(ee)]:(T&&(q=$(Ee,z),q[(0,P.Gf)(ee)]=te),te)},kill:function(z,ee){if(z&&z[ee])try{delete z[ee]}catch(te){}}};return Ee}o(j,"createElmNodeData")},7158:(ot,l,C)=>{"use strict";C.d(l,{j:()=>w,p:()=>O});var R=C(8096),v=C(7630),P=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],y=null,W;function N(H,E){return function(){var $=arguments,F=w(E);if(F){var j=F.listener;j&&j[H]&&j[H][R.ZV](j,$)}}}o(N,"_listenerProxyFunc");function m(){var H=(0,v.a8)("Microsoft");return H&&(y=H.ApplicationInsights),y}o(m,"_getExtensionNamespace");function w(H){var E=y;return!E&&H.disableDbgExt!==!0&&(E=y||m()),E?E.ChromeDbgExt:null}o(w,"getDebugExt");function O(H){if(!W){W={};for(var E=0;E<P[R.R5];E++)W[P[E]]=N(P[E],H)}return W}o(O,"getDebugListener")},5018:(ot,l,C)=>{"use strict";C.d(l,{lQ:()=>$,vH:()=>F,AQ:()=>j,kP:()=>Ee,jV:()=>z,L4:()=>ee});var R=C(1679),v=C(8096),P=C(7158),y=C(7630),W=C(6708),N=C(6041),m="AI (Internal): ",w="AI: ",O="AITR_";function H(te){return te?'"'+te[v.i7](/\"/g,N.qS)+'"':N.qS}o(H,"_sanitizeDiagnosticText");function E(te,T){var q=(0,y.dr)();if(q){var k="log";q[te]&&(k=te),(0,W.mf)(q[k])&&q[k](T)}}o(E,"_logToConsole");var $=function(){function te(T,q,k,le){k===void 0&&(k=!1);var V=this;V[v.Gc]=T,V[v.gU]=(k?w:m)+T;var fe=N.qS;(0,y.nS)()&&(fe=(0,y.xA)().stringify(le));var De=(q?" message:"+H(q):N.qS)+(le?" props:"+H(fe):N.qS);V[v.gU]+=De}return o(te,"_InternalLogMessage"),te.dataType="MessageData",te}();function F(te,T){return(te||{})[v.eZ]||new j(T)}o(F,"safeGetLogger");var j=function(){function te(T){this.identifier="DiagnosticLogger",this.queue=[];var q=0,k={},le,V,fe,De;(0,R.Z)(te,this,function(Fe){we(T||{}),Fe.consoleLoggingLevel=function(){return le},Fe.telemetryLoggingLevel=function(){return V},Fe.maxInternalMessageLimit=function(){return fe},Fe[v.Fr]=function(){return De},Fe.throwInternal=function(ye,ve,G,se,Re){Re===void 0&&(Re=!1);var Ge=new $(ve,G,Re,se);if(De)throw(0,y.eU)(Ge);var ie=ye===1?N.ys:N.cL;if((0,W.o8)(Ge[v.gU]))Je("throw"+(ye===1?"Critical":"Warning"),Ge);else{if(Re){var Xe=+Ge[v.Gc];!k[Xe]&&le>=ye&&(Fe[ie](Ge[v.gU]),k[Xe]=!0)}else le>=ye&&Fe[ie](Ge[v.gU]);ae(ye,Ge)}},Fe[N.cL]=function(ye){E("warn",ye),Je("warning",ye)},Fe[N.ys]=function(ye){E("error",ye),Je("error",ye)},Fe.resetInternalMessageCount=function(){q=0,k={}},Fe[v.jk]=ae;function ae(ye,ve){if(!D()){var G=!0,se=O+ve[v.Gc];if(k[se]?G=!1:k[se]=!0,G&&(ye<=V&&(Fe.queue[v.MW](ve),q++,Je(ye===1?"error":"warn",ve)),q===fe)){var Re="Internal events throttle limit per PageView reached for this app.",Ge=new $(23,Re,!1);Fe.queue[v.MW](Ge),ye===1?Fe[N.ys](Re):Fe[N.cL](Re)}}}o(ae,"_logInternalMessage");function we(ye){le=(0,W.v4)(ye.loggingLevelConsole,0),V=(0,W.v4)(ye.loggingLevelTelemetry,1),fe=(0,W.v4)(ye.maxMessageLimit,25),De=(0,W.v4)(ye.enableDebug,(0,W.v4)(ye[v.Fr],!1))}o(we,"_setDefaultsFromConfig");function D(){return q>=fe}o(D,"_areInternalMessagesThrottled");function Je(ye,ve){var G=(0,P.j)(T||{});G&&G[v.mc]&&G[v.mc](ye,ve)}o(Je,"_debugExtMsg")})}return o(te,"DiagnosticLogger"),te.__ieDyn=1,te}();function Q(te){return te||new j}o(Q,"_getLogger");function Ee(te,T,q,k,le,V){V===void 0&&(V=!1),Q(te).throwInternal(T,q,k,le,V)}o(Ee,"_throwInternal");function z(te,T){Q(te)[N.cL](T)}o(z,"_warnToConsole");function ee(te,T,q){Q(te)[v.jk](T,q)}o(ee,"_logInternalMessage")},7630:(ot,l,C)=>{"use strict";C.d(l,{dI:()=>Fe,a8:()=>ae,Ym:()=>we,Jj:()=>D,Nv:()=>Je,Me:()=>ye,d6:()=>ve,jW:()=>G,fE:()=>se,s1:()=>Re,k$:()=>Ge,dr:()=>ie,r:()=>Xe,nS:()=>lt,xA:()=>wt,MX:()=>L,gz:()=>U,b$:()=>re,w1:()=>de,sA:()=>He,eU:()=>Ie,MF:()=>Ce,JO:()=>Te,cp:()=>Ve,Z3:()=>me,ed:()=>Ze,pI:()=>nt});var R=C(4392),v=C(2091),P=C(8096),y=C(6708),W=C(6041),N="window",m="document",w="documentMode",O="navigator",H="history",E="location",$="console",F="performance",j="JSON",Q="crypto",Ee="msCrypto",z="ReactNative",ee="msie",te="trident/",T="XMLHttpRequest",q=null,k=null,le=!1,V=null,fe=null;function De(be,B){var K=!1;if(be){try{if(K=B in be,!K){var Ye=be[R.hB];Ye&&(K=B in Ye)}}catch(An){}if(!K)try{var jt=new be;K=!(0,y.o8)(jt[B])}catch(An){}}return K}o(De,"_hasProperty");function Fe(be){le=be}o(Fe,"setEnableEnvMocks");function ae(be){var B=(0,v.Rd)();return B&&B[be]?B[be]:be===N&&we()?window:null}o(ae,"getGlobalInst");function we(){return Boolean(typeof window===R.fK&&window)}o(we,"hasWindow");function D(){return we()?window:ae(N)}o(D,"getWindow");function Je(){return Boolean(typeof document===R.fK&&document)}o(Je,"hasDocument");function ye(){return Je()?document:ae(m)}o(ye,"getDocument");function ve(){return Boolean(typeof navigator===R.fK&&navigator)}o(ve,"hasNavigator");function G(){return ve()?navigator:ae(O)}o(G,"getNavigator");function se(){return Boolean(typeof history===R.fK&&history)}o(se,"hasHistory");function Re(){return se()?history:ae(H)}o(Re,"getHistory");function Ge(be){if(be&&le){var B=ae("__mockLocation");if(B)return B}return typeof location===R.fK&&location?location:ae(E)}o(Ge,"getLocation");function ie(){return typeof console!==R.jA?console:ae($)}o(ie,"getConsole");function Xe(){return ae(F)}o(Xe,"getPerformance");function lt(){return Boolean(typeof JSON===R.fK&&JSON||ae(j)!==null)}o(lt,"hasJSON");function wt(){return lt()?JSON||ae(j):null}o(wt,"getJSON");function L(){return ae(Q)}o(L,"getCrypto");function U(){return ae(Ee)}o(U,"getMsCrypto");function re(){var be=G();return be&&be.product?be.product===z:!1}o(re,"isReactNative");function de(){var be=G();if(be&&(be[P.qV]!==k||q===null)){k=be[P.qV];var B=(k||W.qS)[P.T1]();q=(0,y._Q)(B,ee)||(0,y._Q)(B,te)}return q}o(de,"isIE");function He(be){if(be===void 0&&(be=null),!be){var B=G()||{};be=B?(B[P.qV]||W.qS)[P.T1]():W.qS}var K=(be||W.qS)[P.T1]();if((0,y._Q)(K,ee)){var Ye=ye()||{};return Math.max(parseInt(K[P.w6](ee)[1]),Ye[w]||0)}else if((0,y._Q)(K,te)){var jt=parseInt(K[P.w6](te)[1]);if(jt)return jt+4}return null}o(He,"getIEVersion");function Ie(be){var B=Object[R.hB].toString[P._S](be),K=W.qS;return B==="[object Error]"?K="{ stack: '"+be.stack+"', message: '"+be.message+"', name: '"+be[P.I]+"'":lt()&&(K=wt().stringify(be)),B+K}o(Ie,"dumpObj");function ce(be){if(!be||!isString(be)){var B=G()||{};be=B?(B[_DYN_USER_AGENT]||STR_EMPTY)[_DYN_TO_LOWER_CASE]():STR_EMPTY}var K=(be||STR_EMPTY)[_DYN_TO_LOWER_CASE]();return K[_DYN_INDEX_OF]("safari")>=0}o(ce,"isSafari");function Ce(){return fe===null&&(fe=ve()&&Boolean(G().sendBeacon)),fe}o(Ce,"isBeaconsSupported");function Te(be){var B=!1;try{B=!!ae("fetch");var K=ae("Request");B&&be&&K&&(B=De(K,"keepalive"))}catch(Ye){}return B}o(Te,"isFetchSupported");function Ve(){return V===null&&(V=typeof XDomainRequest!==R.jA,V&&me()&&(V=V&&!De(ae(T),"withCredentials"))),V}o(Ve,"useXDomainRequest");function me(){var be=!1;try{var B=ae(T);be=!!B}catch(K){}return be}o(me,"isXhrSupported");function Le(be,B){if(be)for(var K=0;K<be[P.R5];K++){var Ye=be[K];if(Ye[P.I]&&Ye[P.I]===B)return Ye}return{}}o(Le,"_getNamedValue");function Ze(be){var B=ye();return B&&be?Le(B.querySelectorAll("meta"),be).content:null}o(Ze,"findMetaTag");function nt(be){var B,K=Xe();if(K){var Ye=K.getEntriesByType("navigation")||[];B=Le((Ye[P.R5]>0?Ye[0]:{}).serverTiming,be).description}return B}o(nt,"findNamedServerTiming")},4869:(ot,l,C)=>{"use strict";C.d(l,{um:()=>De,jU:()=>ye,XO:()=>ve,QY:()=>G,pZ:()=>se,pD:()=>Re,Ib:()=>Ge,C1:()=>ie,yw:()=>lt,nJ:()=>wt,c9:()=>L,JA:()=>U,TJ:()=>re,C9:()=>de,nD:()=>He,Yl:()=>Ie});var R=C(8096),v=C(5883),P=C(7630),y=C(6708),W=C(6041),N="on",m="attachEvent",w="addEventListener",O="detachEvent",H="removeEventListener",E="events",$="visibilitychange",F="pagehide",j="pageshow",Q="unload",Ee="beforeunload",z=(0,v.J)("aiEvtPageHide"),ee=(0,v.J)("aiEvtPageShow"),te=/\.[\.]+/g,T=/[\.]+$/,q=1,k=(0,v.K)("events"),le=/^([^.]*)(?:\.(.+)|)/;function V(ce){return ce&&ce[R.i7]?ce[R.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,W.qS):ce}o(V,"_normalizeNamespace");function fe(ce,Ce){var Te;if(Ce){var Ve=W.qS;(0,y.kJ)(Ce)?(Ve=W.qS,(0,y.tO)(Ce,function(Le){Le=V(Le),Le&&(Le[0]!=="."&&(Le="."+Le),Ve+=Le)})):Ve=V(Ce),Ve&&(Ve[0]!=="."&&(Ve="."+Ve),ce=(ce||W.qS)+Ve)}var me=le.exec(ce||W.qS)||[];return Te={},Te[R.P6]=me[1],Te.ns=(me[2]||W.qS).replace(te,".").replace(T,W.qS)[R.w6](".").sort().join("."),Te}o(fe,"_getEvtNamespace");function De(ce,Ce,Te){var Ve=[],me=k.get(ce,E,{},!1),Le=fe(Ce,Te);return(0,y.rW)(me,function(Ze,nt){(0,y.tO)(nt,function(be){var B;(!Le[R.P6]||Le[R.P6]===be.evtName[R.P6])&&(!Le.ns||Le.ns===Le.ns)&&Ve[R.MW]((B={},B[R.I]=be.evtName[R.P6]+(be.evtName.ns?"."+be.evtName.ns:W.qS),B.handler=be[R.Kn],B))})}),Ve}o(De,"__getRegisteredEvents");function Fe(ce,Ce,Te){Te===void 0&&(Te=!0);var Ve=k.get(ce,E,{},Te),me=Ve[Ce];return me||(me=Ve[Ce]=[]),me}o(Fe,"_getRegisteredEvents");function ae(ce,Ce,Te,Ve){ce&&Ce&&Ce[R.P6]&&(ce[H]?ce[H](Ce[R.P6],Te,Ve):ce[O]&&ce[O](N+Ce[R.P6],Te))}o(ae,"_doDetach");function we(ce,Ce,Te,Ve){var me=!1;return ce&&Ce&&Ce[R.P6]&&Te&&(ce[w]?(ce[w](Ce[R.P6],Te,Ve),me=!0):ce[m]&&(ce[m](N+Ce[R.P6],Te),me=!0)),me}o(we,"_doAttach");function D(ce,Ce,Te,Ve){for(var me=Ce[R.R5];me--;){var Le=Ce[me];Le&&(!Te.ns||Te.ns===Le.evtName.ns)&&(!Ve||Ve(Le))&&(ae(ce,Le.evtName,Le[R.Kn],Le.capture),Ce[R.cb](me,1))}}o(D,"_doUnregister");function Je(ce,Ce,Te){if(Ce[R.P6])D(ce,Fe(ce,Ce[R.P6]),Ce,Te);else{var Ve=k.get(ce,E,{});(0,y.rW)(Ve,function(me,Le){D(ce,Le,Ce,Te)}),(0,y.FY)(Ve)[R.R5]===0&&k.kill(ce,E)}}o(Je,"_unregisterEvents");function ye(ce,Ce){var Te;return Ce?((0,y.kJ)(Ce)?Te=[ce].concat(Ce):Te=[ce,Ce],Te=fe("xx",Te).ns[R.w6](".")):Te=ce,Te}o(ye,"mergeEvtNamespace");function ve(ce,Ce,Te,Ve,me){var Le;me===void 0&&(me=!1);var Ze=!1;if(ce)try{var nt=fe(Ce,Ve);if(Ze=we(ce,nt,Te,me),Ze&&k.accept(ce)){var be=(Le={guid:q++,evtName:nt},Le[R.Kn]=Te,Le.capture=me,Le);Fe(ce,nt.type)[R.MW](be)}}catch(B){}return Ze}o(ve,"eventOn");function G(ce,Ce,Te,Ve,me){if(me===void 0&&(me=!1),ce)try{var Le=fe(Ce,Ve),Ze=!1;Je(ce,Le,function(nt){return Le.ns&&!Te||nt[R.Kn]===Te?(Ze=!0,!0):!1}),Ze||ae(ce,Le,Te,me)}catch(nt){}}o(G,"eventOff");function se(ce,Ce,Te,Ve){return Ve===void 0&&(Ve=!1),ve(ce,Ce,Te,null,Ve)}o(se,"attachEvent");function Re(ce,Ce,Te,Ve){Ve===void 0&&(Ve=!1),G(ce,Ce,Te,null,Ve)}o(Re,"detachEvent");function Ge(ce,Ce,Te){var Ve=!1,me=(0,P.Jj)();me&&(Ve=ve(me,ce,Ce,Te),Ve=ve(me.body,ce,Ce,Te)||Ve);var Le=(0,P.Me)();return Le&&(Ve=ve(Le,ce,Ce,Te)||Ve),Ve}o(Ge,"addEventHandler");function ie(ce,Ce,Te){var Ve=(0,P.Jj)();Ve&&(G(Ve,ce,Ce,Te),G(Ve.body,ce,Ce,Te));var me=(0,P.Me)();me&&G(me,ce,Ce,Te)}o(ie,"removeEventHandler");function Xe(ce,Ce,Te,Ve){var me=!1;return Ce&&ce&&ce[R.R5]>0&&(0,y.tO)(ce,function(Le){Le&&(!Te||(0,y.UA)(Te,Le)===-1)&&(me=Ge(Le,Ce,Ve)||me)}),me}o(Xe,"_addEventListeners");function lt(ce,Ce,Te,Ve){var me=!1;return Ce&&ce&&(0,y.kJ)(ce)&&(me=Xe(ce,Ce,Te,Ve),!me&&Te&&Te[R.R5]>0&&(me=Xe(ce,Ce,null,Ve))),me}o(lt,"addEventListeners");function wt(ce,Ce,Te){ce&&(0,y.kJ)(ce)&&(0,y.tO)(ce,function(Ve){Ve&&ie(Ve,Ce,Te)})}o(wt,"removeEventListeners");function L(ce,Ce,Te){return lt([Ee,Q,F],ce,Ce,Te)}o(L,"addPageUnloadEventListener");function U(ce,Ce){wt([Ee,Q,F],ce,Ce)}o(U,"removePageUnloadEventListener");function re(ce,Ce,Te){function Ve(Ze){var nt=(0,P.Me)();ce&&nt&&nt.visibilityState==="hidden"&&ce(Ze)}o(Ve,"_handlePageVisibility");var me=ye(z,Te),Le=Xe([F],ce,Ce,me);return(!Ce||(0,y.UA)(Ce,$)===-1)&&(Le=Xe([$],Ve,Ce,me)||Le),!Le&&Ce&&(Le=re(ce,null,Te)),Le}o(re,"addPageHideEventListener");function de(ce,Ce){var Te=ye(z,Ce);wt([F],ce,Te),wt([$],null,Te)}o(de,"removePageHideEventListener");function He(ce,Ce,Te){function Ve(Ze){var nt=(0,P.Me)();ce&&nt&&nt.visibilityState==="visible"&&ce(Ze)}o(Ve,"_handlePageVisibility");var me=ye(ee,Te),Le=Xe([j],ce,Ce,me);return Le=Xe([$],Ve,Ce,me)||Le,!Le&&Ce&&(Le=He(ce,null,Te)),Le}o(He,"addPageShowEventListener");function Ie(ce,Ce){var Te=ye(ee,Ce);wt([j],ce,Te),wt([$],null,Te)}o(Ie,"removePageShowEventListener")},6708:(ot,l,C)=>{"use strict";C.d(l,{Ym:()=>se,o8:()=>Re,le:()=>ie,BX:()=>Xe,nr:()=>lt,Kn:()=>wt,mf:()=>L,Gf:()=>re,rW:()=>de,Id:()=>He,xe:()=>ce,_Q:()=>Te,J_:()=>Ve,kJ:()=>me,VZ:()=>Ze,HD:()=>nt,hj:()=>be,jn:()=>B,Y6:()=>jt,tO:()=>Mn,UA:()=>Cn,Mr:()=>lr,Xz:()=>ar,nd:()=>mr,FY:()=>dt,l_:()=>zt,_A:()=>on,FL:()=>Yt,Xi:()=>_n,m6:()=>zn,jj:()=>vr,sO:()=>er,qK:()=>Ar,v4:()=>Ur,F:()=>Sr,fQ:()=>Dr,_y:()=>Fr,cf:()=>Nn,Oi:()=>Cr,Vb:()=>Wr,hl:()=>Rr,Ax:()=>vi,mm:()=>br});var R=C(4392),v=C(2091),P=C(8096),y=C(6041),W="toISOString",N="endsWith",m="startsWith",w="indexOf",O="map",H="reduce",E="trim",$="toString",F="__proto__",j="constructor",Q=R.RJ,Ee=R.Pw.freeze,z=R.Pw.seal,ee=R.Pw.keys,te=String[R.hB],T=te[E],q=te[N],k=te[m],le=Date[R.hB],V=le[W],fe=Array.isArray,De=R.V4[$],Fe=R.CY[$],ae=Fe[P._S](R.Pw),we=/-([a-z])/g,D=/([^\w\d_$])/g,Je=/^(\d+[\w\d_$])/,ye=Object.getPrototypeOf;function ve(M){if(M){if(ye)return ye(M);var ue=M[F]||M[R.hB]||M[j];if(ue)return ue}return null}o(ve,"_getObjProto");function G(M){return De[_DYN_CALL](M)}o(G,"objToString");function se(M,ue){return typeof M===ue}o(se,"isTypeof");function Re(M){return M===void 0||typeof M===R.jA}o(Re,"isUndefined");function Ge(M){return!Re(M)}o(Ge,"isNotUndefined");function ie(M){return M===null||Re(M)}o(ie,"isNullOrUndefined");function Xe(M){return!ie(M)}o(Xe,"isNotNullOrUndefined");function lt(M,ue){return!!(M&&R.CY[P._S](M,ue))}o(lt,"hasOwnProperty");function wt(M){return!!(M&&typeof M===R.fK)}o(wt,"isObject");function L(M){return!!(M&&typeof M===R.cb)}o(L,"isFunction");function U(M){return M&&L(M.then)}o(U,"isPromiseLike");function re(M){var ue=M;return ue&&nt(ue)&&(ue=ue[P.i7](we,function(Ae,Pe){return Pe.toUpperCase()}),ue=ue[P.i7](D,"_"),ue=ue[P.i7](Je,function(Ae,Pe){return"_"+Pe})),ue}o(re,"normalizeJsName");function de(M,ue){if(M)for(var Ae in M)R.CY[P._S](M,Ae)&&ue[P._S](M,Ae,M[Ae])}o(de,"objForEachKey");function He(M,ue){var Ae=!1;return M&&ue&&!(Ae=M===ue)&&(Ae=q?M[N](ue):Ie(M,ue)),Ae}o(He,"strEndsWith");function Ie(M,ue){var Ae=!1,Pe=ue?ue[P.R5]:0,et=M?M[P.R5]:0;if(Pe&&et&&et>=Pe&&!(Ae=M===ue)){for(var je=et-1,ct=Pe-1;ct>=0;ct--){if(M[je]!=ue[ct])return!1;je--}Ae=!0}return Ae}o(Ie,"_strEndsWithPoly");function ce(M,ue){var Ae=!1;return M&&ue&&!(Ae=M===ue)&&(Ae=k?M[m](ue):Ce(M,ue)),Ae}o(ce,"strStartsWith");function Ce(M,ue){var Ae=!1,Pe=ue?ue[P.R5]:0;if(M&&Pe&&M[P.R5]>=Pe&&!(Ae=M===ue)){for(var et=0;et<Pe;et++)if(M[et]!==ue[et])return!1;Ae=!0}return Ae}o(Ce,"_strStartsWithPoly");function Te(M,ue){return M&&ue?M[P.ou](ue)!==-1:!1}o(Te,"strContains");function Ve(M){return!!(M&&De[P._S](M)==="[object Date]")}o(Ve,"isDate");var me=fe||Le;function Le(M){return!!(M&&De[P._S](M)==="[object Array]")}o(Le,"_isArrayPoly");function Ze(M){return!!(M&&De[P._S](M)==="[object Error]")}o(Ze,"isError");function nt(M){return typeof M=="string"}o(nt,"isString");function be(M){return typeof M=="number"}o(be,"isNumber");function B(M){return typeof M=="boolean"}o(B,"isBoolean");function K(M){return typeof M=="symbol"}o(K,"isSymbol");function Ye(M){var ue=!1;if(M&&typeof M=="object"){var Ae=ye?ye(M):ve(M);Ae?(Ae[j]&&R.CY[P._S](Ae,j)&&(Ae=Ae[j]),ue=typeof Ae===R.cb&&Fe[P._S](Ae)===ae):ue=!0}return ue}o(Ye,"isPlainObject");function jt(M){if(M)return V?M[W]():An(M)}o(jt,"toISOString");function An(M){if(M&&M.getUTCFullYear){var ue=o(function(Ae){var Pe=String(Ae);return Pe[P.R5]===1&&(Pe="0"+Pe),Pe},"pad");return M.getUTCFullYear()+"-"+ue(M.getUTCMonth()+1)+"-"+ue(M.getUTCDate())+"T"+ue(M.getUTCHours())+":"+ue(M.getUTCMinutes())+":"+ue(M.getUTCSeconds())+"."+String((M.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}o(An,"_toISOStringPoly");function Mn(M,ue,Ae){var Pe=M[P.R5];try{for(var et=0;et<Pe&&!(et in M&&ue[P._S](Ae||M,M[et],et,M)===-1);et++);}catch(je){}}o(Mn,"arrForEach");function Cn(M,ue,Ae){if(M){if(M[w])return M[w](ue,Ae);var Pe=M[P.R5],et=Ae||0;try{for(var je=Math.max(et>=0?et:Pe-Math.abs(et),0);je<Pe;je++)if(je in M&&M[je]===ue)return je}catch(ct){}}return-1}o(Cn,"arrIndexOf");function lr(M,ue,Ae){var Pe;if(M){if(M[O])return M[O](ue,Ae);var et=M[P.R5],je=Ae||M;Pe=new Array(et);try{for(var ct=0;ct<et;ct++)ct in M&&(Pe[ct]=ue[P._S](je,M[ct],M))}catch(Et){}}return Pe}o(lr,"arrMap");function ar(M,ue,Ae){var Pe;if(M){if(M[H])return M[H](ue,Ae);var et=M[P.R5],je=0;if(arguments[P.R5]>=3)Pe=arguments[2];else{for(;je<et&&!(je in M);)je++;Pe=M[je++]}for(;je<et;)je in M&&(Pe=ue(Pe,M[je],je,M)),je++}return Pe}o(ar,"arrReduce");function mr(M){return M&&(M=T&&M[E]?M[E]():M[P.i7]?M[P.i7](/^\s+|(?=\s)\s+$/g,y.qS):M),M}o(mr,"strTrim");var cr=!{toString:null}.propertyIsEnumerable("toString"),yr=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function dt(M){var ue=typeof M;if(ue!==R.cb&&(ue!==R.fK||M===null)&&(0,v.ZU)("objKeys called on non-object"),!cr&&ee)return ee(M);var Ae=[];for(var Pe in M)M&&R.CY[P._S](M,Pe)&&Ae[P.MW](Pe);if(cr)for(var et=yr[P.R5],je=0;je<et;je++)M&&R.CY[P._S](M,yr[je])&&Ae[P.MW](yr[je]);return Ae}o(dt,"objKeys");function zt(M,ue,Ae,Pe){if(Q)try{var et={enumerable:!0,configurable:!0};return Ae&&(et.get=Ae),Pe&&(et.set=Pe),Q(M,ue,et),!0}catch(je){}return!1}o(zt,"objDefineAccessors");function an(M){return M}o(an,"_doNothing");function on(M){return Ee&&de(M,function(ue,Ae){(me(Ae)||wt(Ae))&&Ee(Ae)}),Yt(M)}o(on,"deepFreeze");var Yt=Ee||an,_n=z||an;function zn(){var M=Date;return M.now?M.now():new M().getTime()}o(zn,"dateNow");function vr(M){return Ze(M)?M[P.I]:y.qS}o(vr,"getExceptionName");function er(M,ue,Ae,Pe,et){var je=Ae;return M&&(je=M[ue],je!==Ae&&(!et||et(je))&&(!Pe||Pe(Ae))&&(je=Ae,M[ue]=je)),je}o(er,"setValue");function Ar(M,ue,Ae){var Pe;return M?(Pe=M[ue],!Pe&&ie(Pe)&&(Pe=Re(Ae)?{}:Ae,M[ue]=Pe)):Pe=Re(Ae)?{}:Ae,Pe}o(Ar,"getSetValue");function Ur(M,ue){return ie(M)?ue:M}o(Ur,"getCfgValue");function Sr(M){return!M}o(Sr,"isNotTruthy");function Dr(M){return!!M}o(Dr,"isTruthy");function Fr(M){throw new Error(M)}o(Fr,"throwError");function Ln(M,ue){var Ae=null,Pe=null;return L(M)?Ae=M:Pe=M,function(){var et=arguments;if(Ae&&(Pe=Ae()),Pe)return Pe[ue][P.ZV](Pe,et)}}o(Ln,"_createProxyFunction");function Nn(M,ue,Ae){if(M&&ue&&wt(M)&&wt(ue)){var Pe=o(function(je){if(nt(je)){var ct=ue[je];L(ct)?(!Ae||Ae(je,!0,ue,M))&&(M[je]=Ln(ue,je)):(!Ae||Ae(je,!1,ue,M))&&(lt(M,je)&&delete M[je],zt(M,je,function(){return ue[je]},function(Et){ue[je]=Et})||(M[je]=ct))}},"_loop_1");for(var et in ue)Pe(et)}return M}o(Nn,"proxyAssign");function Cr(M,ue,Ae,Pe,et){M&&ue&&Ae&&(et!==!1||Re(M[ue]))&&(M[ue]=Ln(Ae,Pe))}o(Cr,"proxyFunctionAs");function Wr(M,ue,Ae,Pe){return M&&ue&&wt(M)&&me(Ae)&&Mn(Ae,function(et){nt(et)&&Cr(M,et,ue,et,Pe)}),M}o(Wr,"proxyFunctions");function Rr(M){return function(){function ue(){var Ae=this;M&&de(M,function(Pe,et){Ae[Pe]=et})}return o(ue,"class_1"),ue}()}o(Rr,"createClassFromInterface");function vi(M){return M&&R.rl&&(M=(0,R.Pw)((0,R.rl)({},M))),M}o(vi,"optimizeObject");function br(M,ue,Ae,Pe,et,je){var ct=arguments,Et=ct[0]||{},Dt=ct[P.R5],bt=!1,Ct=1;for(Dt>0&&B(Et)&&(bt=Et,Et=ct[Ct]||{},Ct++),wt(Et)||(Et={});Ct<Dt;Ct++){var Bt=ct[Ct],xt=me(Bt),Wt=wt(Bt);for(var Ft in Bt){var Wn=xt&&Ft in Bt||Wt&&R.CY[P._S](Bt,Ft);if(!!Wn){var bn=Bt[Ft],ur=void 0;if(bt&&bn&&((ur=me(bn))||Ye(bn))){var ir=Et[Ft];ur?me(ir)||(ir=[]):Ye(ir)||(ir={}),bn=br(bt,ir,bn)}bn!==void 0&&(Et[Ft]=bn)}}}return Et}o(br,"objExtend")},6041:(ot,l,C)=>{"use strict";C.d(l,{qS:()=>R,Z:()=>v,oV:()=>P,DN:()=>y,mE:()=>W,Zh:()=>N,js:()=>m,hL:()=>w,yi:()=>O,uC:()=>H,$F:()=>E,f_:()=>$,C$:()=>F,ys:()=>j,cL:()=>Q,kl:()=>Ee});var R="",v="channels",P="core",y="createPerfMgr",W="disabled",N="extensionConfig",m="extensions",w="processTelemetry",O="priority",H="eventsSent",E="eventsDiscarded",$="eventsSendRequest",F="perfEvent",j="errorToConsole",Q="warnToConsole",Ee="getPerfMgr"},1880:(ot,l,C)=>{"use strict";C.d(l,{f:()=>N});var R=C(1679),v=C(8096),P=C(6708),y=C(6041);function W(m,w,O,H){(0,P.tO)(m,function(E){if(E&&E[w])if(O)setTimeout(function(){return H(E)},0);else try{H(E)}catch($){}})}o(W,"_runListeners");var N=function(){function m(w){this.listeners=[];var O=!!(w||{}).perfEvtsSendAll;(0,R.Z)(m,this,function(H){H[v.g]=function(E){H.listeners[v.MW](E)},H[v.n7]=function(E){for(var $=(0,P.UA)(H[v.dE],E);$>-1;)H.listeners[v.cb]($,1),$=(0,P.UA)(H[v.dE],E)},H[y.uC]=function(E){W(H[v.dE],y.uC,!0,function($){$[y.uC](E)})},H[y.$F]=function(E,$){W(H[v.dE],y.$F,!0,function(F){F[y.$F](E,$)})},H[y.f_]=function(E,$){W(H[v.dE],y.f_,$,function(F){F[y.f_](E,$)})},H[y.C$]=function(E){E&&(O||!E[v.PL]())&&W(H[v.dE],y.C$,!1,function($){E[v.d]?setTimeout(function(){return $[y.C$](E)},0):$[y.C$](E)})}})}return o(m,"NotificationManager"),m.__ieDyn=1,m}()},9288:(ot,l,C)=>{"use strict";C.d(l,{zn:()=>O,Jk:()=>H,Lm:()=>$,j5:()=>j});var R=C(1679),v=C(8096),P=C(6708),y=C(6041),W="ctx",N="ParentContextKey",m="ChildrenContextKey",w=null,O=function(){function Q(Ee,z,ee){var te=this,T=!1;if(te.start=(0,P.m6)(),te[v.I]=Ee,te[v.d]=ee,te[v.PL]=function(){return!1},(0,P.mf)(z)){var q;T=(0,P.l_)(te,"payload",function(){return!q&&(0,P.mf)(z)&&(q=z(),z=null),q})}te[v.T]=function(k){return k?k===Q[N]||k===Q[m]?te[k]:(te[W]||{})[k]:null},te[v.wu]=function(k,le){if(k)if(k===Q[N])te[k]||(te[v.PL]=function(){return!0}),te[k]=le;else if(k===Q[m])te[k]=le;else{var V=te[W]=te[W]||{};V[k]=le}},te[v.Km]=function(){var k=0,le=te[v.T](Q[m]);if((0,P.kJ)(le))for(var V=0;V<le[v.R5];V++){var fe=le[V];fe&&(k+=fe[v.Z_])}te[v.Z_]=(0,P.m6)()-te.start,te.exTime=te[v.Z_]-k,te[v.Km]=function(){},!T&&(0,P.mf)(z)&&(te.payload=z())}}return o(Q,"PerfEvent"),Q.ParentContextKey="parent",Q.ChildrenContextKey="childEvts",Q}(),H=function(){function Q(Ee){this.ctx={},(0,R.Z)(Q,this,function(z){z.create=function(ee,te,T){return new O(ee,te,T)},z.fire=function(ee){ee&&(ee[v.Km](),Ee&&(0,P.mf)(Ee[y.C$])&&Ee[y.C$](ee))},z[v.wu]=function(ee,te){if(ee){var T=z[W]=z[W]||{};T[ee]=te}},z[v.T]=function(ee){return(z[W]||{})[ee]}})}return o(Q,"PerfManager"),Q.__ieDyn=1,Q}(),E="CoreUtils.doPerf";function $(Q,Ee,z,ee,te){if(Q){var T=Q;if(T[y.kl]&&(T=T[y.kl]()),T){var q=void 0,k=T[v.T](E);try{if(q=T.create(Ee(),ee,te),q){if(k&&q[v.wu]&&(q[v.wu](O[N],k),k[v.T]&&k[v.wu])){var le=k[v.T](O[m]);le||(le=[],k[v.wu](O[m],le)),le[v.MW](q)}return T[v.wu](E,q),z(q)}}catch(V){q&&q[v.wu]&&q[v.wu]("exception",V)}finally{q&&T.fire(q),T[v.wu](E,k)}}}return z()}o($,"doPerf");function F(Q){w=Q}o(F,"setGblPerfMgr");function j(){return w}o(j,"getGblPerfMgr")},1589:(ot,l,C)=>{"use strict";C.d(l,{CD:()=>j,Bt:()=>Q,xy:()=>Ee,jV:()=>z,Vi:()=>te});var R=C(8096),v=C(5018),P=C(7630),y=C(6708),W=C(6041),N=C(9288),m=C(3833),w="TelemetryPluginChain",O="_hasRun",H="_getTelCtx",E=0;function $(T,q,k){for(;T;){if(T[R.TO]()===k)return T;T=T[R.W2]()}return z([k],q[R.TC]||{},q)}o($,"_getNextProxyStart");function F(T,q,k,le){var V=null,fe=[];le!==null&&(V=le?$(T,k,le):T);var De={_next:ae,ctx:{core:function(){return k},diagLog:function(){return(0,v.vH)(k,q)},getCfg:function(){return q},getExtCfg:we,getConfig:D,hasNext:function(){return!!V},getNext:function(){return V},setNext:function(ye){V=ye},iterate:Je,onComplete:Fe}};function Fe(ye,ve){for(var G=[],se=2;se<arguments.length;se++)G[se-2]=arguments[se];ye&&fe[R.MW]({func:ye,self:(0,y.o8)(ve)?De.ctx:ve,args:G})}o(Fe,"_addOnComplete");function ae(){var ye=V;if(V=ye?ye[R.W2]():null,!ye){var ve=fe;ve&&ve[R.R5]>0&&((0,y.tO)(ve,function(G){try{G.func[R._S](G.self,G.args)}catch(se){(0,v.kP)(k[R.eZ],2,73,"Unexpected Exception during onComplete - "+(0,P.eU)(se))}}),fe=[])}return ye}o(ae,"_moveNext");function we(ye,ve,G){ve===void 0&&(ve={}),G===void 0&&(G=0);var se;if(q){var Re=q[W.Zh];Re&&ye&&(se=Re[ye])}if(!se)se=ve;else if((0,y.Kn)(ve)&&G!==0){var Ge=(0,y.mm)(!0,ve,se);q&&G===2&&(0,y.rW)(ve,function(ie){if((0,y.le)(Ge[ie])){var Xe=q[ie];(0,y.le)(Xe)||(Ge[ie]=Xe)}}),se=Ge}return se}o(we,"_getExtCfg");function D(ye,ve,G){G===void 0&&(G=!1);var se,Re=we(ye,null);return Re&&!(0,y.le)(Re[ve])?se=Re[ve]:q&&!(0,y.le)(q[ve])&&(se=q[ve]),(0,y.le)(se)?G:se}o(D,"_getConfig");function Je(ye){for(var ve;ve=De._next();){var G=ve[R.TO]();G&&ye(G)}}return o(Je,"_iterateChain"),De}o(F,"_createInternalContext");function j(T,q,k,le){var V=F(T,q,k,le),fe=V.ctx;function De(ae){var we=V._next();return we&&we[W.hL](ae,fe),!we}o(De,"_processNext");function Fe(ae,we){return ae===void 0&&(ae=null),(0,y.kJ)(ae)&&(ae=z(ae,q,k,we)),j(ae||fe[R.W2](),q,k,we)}return o(Fe,"_createNew"),fe[R.uL]=De,fe[R.zV]=Fe,fe}o(j,"createProcessTelemetryContext");function Q(T,q,k){var le=q[R.TC]||{},V=F(T,le,q,k),fe=V.ctx;function De(ae){var we=V._next();return we&&we.unload(fe,ae),!we}o(De,"_processNext");function Fe(ae,we){return ae===void 0&&(ae=null),(0,y.kJ)(ae)&&(ae=z(ae,le,q,we)),Q(ae||fe[R.W2](),q,we)}return o(Fe,"_createNew"),fe[R.uL]=De,fe[R.zV]=Fe,fe}o(Q,"createProcessTelemetryUnloadContext");function Ee(T,q,k){var le=q[R.TC]||{},V=F(T,le,q,k),fe=V.ctx;function De(ae){return fe.iterate(function(we){(0,y.mf)(we[R.Tu])&&we[R.Tu](fe,ae)})}o(De,"_processNext");function Fe(ae,we){return ae===void 0&&(ae=null),(0,y.kJ)(ae)&&(ae=z(ae,le,q,we)),Ee(ae||fe[R.W2](),q,we)}return o(Fe,"_createNew"),fe[R.uL]=De,fe[R.zV]=Fe,fe}o(Ee,"createProcessTelemetryUpdateContext");function z(T,q,k,le){var V=null,fe=!le;if((0,y.kJ)(T)&&T[R.R5]>0){var De=null;(0,y.tO)(T,function(Fe){if(!fe&&le===Fe&&(fe=!0),fe&&Fe&&(0,y.mf)(Fe[W.hL])){var ae=ee(Fe,q,k);V||(V=ae),De&&De._setNext(ae),De=ae}})}return le&&!V?z([le],q,k):V}o(z,"createTelemetryProxyChain");function ee(T,q,k){var le=null,V=(0,y.mf)(T[W.hL]),fe=(0,y.mf)(T[R.Jd]),De;T?De=T[R.pZ]+"-"+T[W.yi]+"-"+E++:De="Unknown-0-"+E++;var Fe={getPlugin:function(){return T},getNext:function(){return le},processTelemetry:D,unload:Je,update:ye,_id:De,_setNext:function(ve){le=ve}};function ae(){var ve;return T&&(0,y.mf)(T[H])&&(ve=T[H]()),ve||(ve=j(Fe,q,k)),ve}o(ae,"_getTelCtx");function we(ve,G,se,Re,Ge){var ie=!1,Xe=T?T[R.pZ]:w,lt=ve[O];return lt||(lt=ve[O]={}),ve.setNext(le),T&&(0,N.Lm)(ve[W.oV](),function(){return Xe+":"+se},function(){lt[De]=!0;try{var wt=le?le._id:W.qS;wt&&(lt[wt]=!1),ie=G(ve)}catch(U){var L=le?lt[le._id]:!0;L&&(ie=!0),(!le||!L)&&(0,v.kP)(ve[R.mc](),1,73,"Plugin ["+Xe+"] failed during "+se+" - "+(0,P.eU)(U)+", run flags: "+(0,P.eU)(lt))}},Re,Ge),ie}o(we,"_processChain");function D(ve,G){G=G||ae();function se(Re){if(!T||!V)return!1;var Ge=(0,m.OY)(T);return Ge[R.fi]||Ge[W.mE]?!1:(fe&&T[R.Jd](le),T[W.hL](ve,Re),!0)}o(se,"_callProcessTelemetry"),we(G,se,"processTelemetry",function(){return{item:ve}},!ve.sync)||G[R.uL](ve)}o(D,"_processTelemetry");function Je(ve,G){function se(){var Re=!1;if(T){var Ge=(0,m.OY)(T),ie=T[W.oV]||Ge[W.oV];T&&(!ie||ie===ve.core())&&!Ge[R.fi]&&(Ge[W.oV]=null,Ge[R.fi]=!0,Ge[R.yl]=!1,T[R.fi]&&T[R.fi](ve,G)===!0&&(Re=!0))}return Re}o(se,"_callTeardown"),we(ve,se,"unload",function(){},G[R.d])||ve[R.uL](G)}o(Je,"_unloadPlugin");function ye(ve,G){function se(){var Re=!1;if(T){var Ge=(0,m.OY)(T),ie=T[W.oV]||Ge[W.oV];T&&(!ie||ie===ve.core())&&!Ge[R.fi]&&T[R.Tu]&&T[R.Tu](ve,G)===!0&&(Re=!0)}return Re}o(se,"_callUpdate"),we(ve,se,"update",function(){},!1)||ve[R.uL](G)}return o(ye,"_updatePlugin"),(0,y.FL)(Fe)}o(ee,"createTelemetryPluginProxy");var te=function(){function T(q,k,le,V){var fe=this,De=j(q,k,le,V);(0,y.Vb)(fe,De,(0,y.FY)(De))}return o(T,"ProcessTelemetryContext"),T}()},4878:(ot,l,C)=>{"use strict";C.d(l,{az:()=>$,_l:()=>F,CN:()=>j,F6:()=>Q,pZ:()=>Ee});var R=C(8096),v=C(7630),P=C(6708),y=C(6041),W=4294967296,N=4294967295,m=!1,w=123456789,O=987654321;function H(z){z<0&&(z>>>=0),w=123456789+z&N,O=987654321-z&N,m=!0}o(H,"_mwcSeed");function E(){try{var z=(0,P.m6)()&2147483647;H((Math.random()*W^z)+z)}catch(ee){}}o(E,"_autoSeedMwc");function $(z){return z>0?Math.floor(F()/N*(z+1))>>>0:0}o($,"randomValue");function F(z){var ee=0,te=(0,v.MX)()||(0,v.gz)();return te&&te.getRandomValues&&(ee=te.getRandomValues(new Uint32Array(1))[0]&N),ee===0&&(0,v.w1)()&&(m||E(),ee=Q()&N),ee===0&&(ee=Math.floor(W*Math.random()|0)),z||(ee>>>=0),ee}o(F,"random32");function j(z){z?H(z):E()}o(j,"mwcRandomSeed");function Q(z){O=36969*(O&65535)+(O>>16)&N,w=18e3*(w&65535)+(w>>16)&N;var ee=(O<<16)+(w&65535)>>>0&N|0;return z||(ee>>>=0),ee}o(Q,"mwcRandom32");function Ee(z){z===void 0&&(z=22);for(var ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",te=F()>>>0,T=0,q=y.qS;q[R.R5]<z;)T++,q+=ee.charAt(te&63),te>>>=6,T===5&&(te=(F()<<2&4294967295|te&3)>>>0,T=0);return q}o(Ee,"newId")},3833:(ot,l,C)=>{"use strict";C.d(l,{OY:()=>m,bP:()=>w,AA:()=>O,Yn:()=>E});var R=C(8096),v=C(5883),P=C(6708),y=C(6041),W=C(4206),N=(0,v.K)("plugin");function m($){return N.get($,"state",{},!0)}o(m,"_getPluginState");function w($,F){for(var j=[],Q=null,Ee=$[R.W2](),z;Ee;){var ee=Ee[R.TO]();if(ee){Q&&(0,P.mf)(Q[R.Jd])&&(0,P.mf)(ee[y.hL])&&Q[R.Jd](ee);var te=!1;(0,P.mf)(ee[R.yl])?te=ee[R.yl]():(z=m(ee),te=z[R.yl]),te||j[R.MW](ee),Q=ee,Ee=Ee[R.W2]()}}(0,P.tO)(j,function(T){var q=$[y.oV]();T[R.VL]($.getCfg(),q,F,$[R.W2]()),z=m(T),!T[y.oV]&&!z[y.oV]&&(z[y.oV]=q),z[R.yl]=!0,delete z[R.fi]})}o(w,"initializePlugins");function O($){return $.sort(function(F,j){var Q=0;if(j){var Ee=(0,P.mf)(j[y.hL]);(0,P.mf)(F[y.hL])?Q=Ee?F[y.yi]-j[y.yi]:1:Ee&&(Q=-1)}else Q=F?1:-1;return Q})}o(O,"sortPlugins");function H($,F,j,Q){var Ee=0;function z(){for(;Ee<$[_DYN_LENGTH];){var ee=$[Ee++];if(ee){var te=ee._doUnload||ee[_DYN__DO_TEARDOWN];if(isFunction(te)&&te[_DYN_CALL](ee,F,j,z)===!0)return!0}}}return o(z,"_doUnload"),z()}o(H,"unloadComponents");function E($){var F={};return{getName:function(){return F[R.I]},setName:function(j){$&&$.setName(j),F[R.I]=j},getTraceId:function(){return F[R.nY]},setTraceId:function(j){$&&$.setTraceId(j),(0,W.jN)(j)&&(F[R.nY]=j)},getSpanId:function(){return F[R._d]},setSpanId:function(j){$&&$.setSpanId(j),(0,W.Lc)(j)&&(F[R._d]=j)},getTraceFlags:function(){return F[R.T0]},setTraceFlags:function(j){$&&$.setTraceFlags(j),F[R.T0]=j}}}o(E,"createDistributedTraceContext")},310:(ot,l,C)=>{"use strict";C.d(l,{Y:()=>W});var R=C(8096),v=C(5018),P=C(7630),y=C(6708);function W(){var N=[];function m(O){O&&N[R.MW](O)}o(m,"_addHandler");function w(O,H){(0,y.tO)(N,function(E){try{E(O,H)}catch($){(0,v.kP)(O[R.mc](),2,73,"Unexpected error calling unload handler - "+(0,P.eU)($))}}),N=[]}return o(w,"_runHandlers"),{add:m,run:w}}o(W,"createUnloadHandlerContainer")},4206:(ot,l,C)=>{"use strict";C.d(l,{SU:()=>j,j_:()=>Q,jN:()=>Ee,Lc:()=>z,J6:()=>ee,Pn:()=>te,aR:()=>T,lq:()=>q});var R=C(8096),v=C(5843),P=C(7630),y=C(6708),W=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,N="00",m="ff",w="00000000000000000000000000000000",O="0000000000000000",H=1;function E(k,le,V){return k&&k[R.R5]===le&&k!==V?!!k.match(/^[\da-f]*$/):!1}o(E,"_isValid");function $(k,le,V){return E(k,le)?k:V}o($,"_formatValue");function F(k){(isNaN(k)||k<0||k>255)&&(k=1);for(var le=k.toString(16);le[R.R5]<2;)le="0"+le;return le}o(F,"_formatFlags");function j(k,le,V,fe){var De;return De={},De[R.PA]=E(fe,2,m)?fe:N,De[R.nY]=Ee(k)?k:(0,v.DO)(),De.spanId=z(le)?le:(0,v.DO)()[R.Jn](0,16),De.traceFlags=V>=0&&V<=255?V:1,De}o(j,"createTraceParent");function Q(k){var le;if(!k||((0,y.kJ)(k)&&(k=k[0]||""),!k||!(0,y.HD)(k)||k[R.R5]>8192))return null;var V=W.exec((0,y.nd)(k));return!V||V[1]===m||V[2]===w||V[3]===O?null:(le={},le[R.PA]=V[1],le[R.nY]=V[2],le[R._d]=V[3],le[R.T0]=parseInt(V[4],16),le)}o(Q,"parseTraceParent");function Ee(k){return E(k,32,w)}o(Ee,"isValidTraceId");function z(k){return E(k,16,O)}o(z,"isValidSpanId");function ee(k){return!(!k||!E(k[R.PA],2,m)||!E(k[R.nY],32,w)||!E(k[R._d],16,O)||!E(F(k[R.T0]),2))}o(ee,"isValidTraceParent");function te(k){return ee(k)?(k[R.T0]&H)===H:!1}o(te,"isSampledFlag");function T(k){if(k){var le=F(k[R.T0]);E(le,2)||(le="01");var V=k[R.PA]||N;return V!=="00"&&V!=="ff"&&(V=N),"".concat(V,"-").concat($(k.traceId,32,w),"-").concat($(k.spanId,16,O),"-").concat(le)}return""}o(T,"formatTraceParent");function q(){var k="traceparent",le=Q((0,P.ed)(k));return le||(le=Q((0,P.pI)(k))),le}o(q,"findW3cTraceParent")},8096:(ot,l,C)=>{"use strict";C.d(l,{VL:()=>R,I:()=>v,tb:()=>P,pZ:()=>y,MW:()=>W,yl:()=>N,TC:()=>m,p$:()=>w,eZ:()=>O,R5:()=>H,Z_:()=>E,uL:()=>$,SD:()=>F,g:()=>j,n7:()=>Q,LS:()=>Ee,Fc:()=>z,TO:()=>ee,kL:()=>te,iC:()=>T,cb:()=>q,fi:()=>k,Gc:()=>le,gU:()=>V,d:()=>fe,F3:()=>De,Tu:()=>Fe,W2:()=>ae,mc:()=>we,Jd:()=>D,zV:()=>Je,Lk:()=>ye,ou:()=>ve,zc:()=>G,qV:()=>se,w6:()=>Re,$h:()=>Ge,Jn:()=>ie,xv:()=>Xe,ZV:()=>lt,i7:()=>wt,Fr:()=>L,jk:()=>U,T1:()=>re,_S:()=>de,P6:()=>He,Kn:()=>Ie,dE:()=>ce,PL:()=>Ce,T:()=>Te,wu:()=>Ve,Km:()=>me,nY:()=>Le,_d:()=>Ze,T0:()=>nt,PA:()=>be});var R="initialize",v="name",P="getNotifyMgr",y="identifier",W="push",N="isInitialized",m="config",w="instrumentationKey",O="logger",H="length",E="time",$="processNext",F="getProcessTelContext",j="addNotificationListener",Q="removeNotificationListener",Ee="stopPollingInternalLogs",z="onComplete",ee="getPlugin",te="flush",T="_extensions",q="splice",k="teardown",le="messageId",V="message",fe="isAsync",De="_doTeardown",Fe="update",ae="getNext",we="diagLog",D="setNextPlugin",Je="createNew",ye="cookieCfg",ve="indexOf",G="substring",se="userAgent",Re="split",Ge="setEnabled",ie="substr",Xe="nodeType",lt="apply",wt="replace",L="enableDebugExceptions",U="logInternalMessage",re="toLowerCase",de="call",He="type",Ie="handler",ce="listeners",Ce="isChildEvt",Te="getCtx",Ve="setCtx",me="complete",Le="traceId",Ze="spanId",nt="traceFlags",be="version"},4392:(ot,l,C)=>{"use strict";C.d(l,{cb:()=>R,fK:()=>v,jA:()=>P,hB:()=>y,bO:()=>W,Pw:()=>m,V4:()=>w,rl:()=>O,yu:()=>H,RJ:()=>E,CY:()=>$});var R="function",v="object",P="undefined",y="prototype",W="hasOwnProperty",N="default",m=Object,w=m[y],O=m.assign,H=m.create,E=m.defineProperty,$=w[W]},2091:(ot,l,C)=>{"use strict";C.d(l,{Rd:()=>P,ZU:()=>y,pu:()=>W});var R=C(4392),v=null;function P(N){N===void 0&&(N=!0);var m=N===!1?null:v;return m||(typeof globalThis!==R.jA&&(m=globalThis),!m&&typeof self!==R.jA&&(m=self),!m&&typeof window!==R.jA&&(m=window),!m&&typeof C.g!==R.jA&&(m=C.g),v=m),m}o(P,"getGlobal");function y(N){throw new TypeError(N)}o(y,"throwTypeError");function W(N){var m=R.yu;if(m)return m(N);if(N==null)return{};var w=typeof N;w!==R.fK&&w!==R.cb&&y("Object prototype may only be an Object:"+N);function O(){}return o(O,"tmpFunc"),O[R.hB]=N,new O}o(W,"objCreateFn")},1088:(ot,l,C)=>{"use strict";C.d(l,{uc:()=>$,ne:()=>j,$h:()=>V});var R=C(4392),v=C(2091),P=((0,v.Rd)()||{}).Symbol,y=((0,v.Rd)()||{}).Reflect,W=!!P,N=!!y,m="decorate",w="metadata",O="getOwnPropertySymbols",H="iterator",E=o(function(ae){for(var we,D=1,Je=arguments.length;D<Je;D++){we=arguments[D];for(var ye in we)R.V4[R.bO].call(we,ye)&&(ae[ye]=we[ye])}return ae},"__objAssignFnImpl"),$=R.rl||E,F=o(function(ae,we){return F=R.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,Je){D.__proto__=Je}||function(D,Je){for(var ye in Je)Je[R.bO](ye)&&(D[ye]=Je[ye])},F(ae,we)},"extendStaticsFn");function j(ae,we){typeof we!==R.cb&&we!==null&&(0,v.ZU)("Class extends value "+String(we)+" is not a constructor or null"),F(ae,we);function D(){this.constructor=ae}o(D,"__"),ae[R.hB]=we===null?(0,v.pu)(we):(D[R.hB]=we[R.hB],new D)}o(j,"__extendsFn");function Q(ae,we){var D={};for(var Je in ae)ObjHasOwnProperty.call(ae,Je)&&we.indexOf(Je)<0&&(D[Je]=ae[Je]);if(ae!=null&&typeof ObjClass[O]===strShimFunction)for(var ye=0,ve=ObjClass[O](ae);ye<ve.length;ye++)we.indexOf(ve[ye])<0&&ObjProto.propertyIsEnumerable.call(ae,ve[ye])&&(D[ve[ye]]=ae[ve[ye]]);return D}o(Q,"__restFn");function Ee(ae,we,D,Je){var ye=arguments.length,ve=ye<3?we:Je===null?Je=ObjClass.getOwnPropertyDescriptor(we,D):Je,G;if(N&&typeof y[m]===strShimFunction)ve=y[m](ae,we,D,Je);else for(var se=ae.length-1;se>=0;se--)(G=ae[se])&&(ve=(ye<3?G(ve):ye>3?G(we,D,ve):G(we,D))||ve);return ye>3&&ve&&ObjDefineProperty(we,D,ve),ve}o(Ee,"__decorateFn");function z(ae,we){return function(D,Je){we(D,Je,ae)}}o(z,"__paramFn");function ee(ae,we){if(N&&y[w]===strShimFunction)return y[w](ae,we)}o(ee,"__metadataFn");function te(ae,we){for(var D in ae)D!==strDefault&&!ObjHasOwnProperty.call(we,D)&&T(we,ae,D)}o(te,"__exportStarFn");function T(ae,we,D,Je){Je===void 0&&(Je=D),ObjCreate?ObjDefineProperty(ae,Je,{enumerable:!0,get:function(){return we[D]}}):ae[Je]=we[D]}o(T,"__createBindingFn");function q(ae){var we=typeof P===strShimFunction&&P[H],D=we&&ae[we],Je=0;if(D)return D.call(ae);if(ae&&typeof ae.length=="number")return{next:function(){return ae&&Je>=ae.length&&(ae=void 0),{value:ae&&ae[Je++],done:!ae}}};throwTypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}o(q,"__valuesFn");function k(ae,we){var D=typeof P===strShimFunction&&ae[P[H]];if(!D)return ae;var Je=D.call(ae),ye,ve=[],G;try{for(;(we===void 0||we-- >0)&&!(ye=Je.next()).done;)ve.push(ye.value)}catch(se){G={error:se}}finally{try{ye&&!ye.done&&(D=Je.return)&&D.call(Je)}finally{if(G)throw G.error}}return ve}o(k,"__readFn");function le(){for(var ae=arguments,we=0,D=0,Je=ae.length;D<Je;D++)we+=ae[D].length;for(var ye=Array(we),ve=0,D=0;D<Je;D++)for(var G=ae[D],se=0,Re=G.length;se<Re;se++,ve++)ye[ve]=G[se];return ye}o(le,"__spreadArraysFn");function V(ae,we){for(var D=0,Je=we.length,ye=ae.length;D<Je;D++,ye++)ae[ye]=we[D];return ae}o(V,"__spreadArrayFn");function fe(ae,we){return ObjDefineProperty?ObjDefineProperty(ae,"raw",{value:we}):ae.raw=we,ae}o(fe,"__makeTemplateObjectFn");function De(ae){if(ae&&ae.__esModule)return ae;var we={};if(ae!=null)for(var D in ae)D!==strDefault&&Object.prototype.hasOwnProperty.call(ae,D)&&T(we,ae,D);return ObjCreate?ObjDefineProperty(we,strDefault,{enumerable:!0,value:ae}):we[strDefault]=ae,we}o(De,"__importStarFn");function Fe(ae){return ae&&ae.__esModule?ae:{strDefault:ae}}o(Fe,"__importDefaultFn")},3268:(ot,l,C)=>{"use strict";C.r(l),C.d(l,{AppInsightsCore:()=>La.F,ApplicationInsights:()=>Ai,CoreUtils:()=>bn.Tr,Sender:()=>Ia,SeverityLevel:()=>co,_InternalMessageId:()=>ka.v,arrForEach:()=>B.tO,isNullOrUndefined:()=>B.le,proxyFunctions:()=>B.Vb,throwError:()=>B._y});var R=C(1679),v=C(1088),P="AppInsightsPropertiesPlugin",y="AppInsightsChannelPlugin",W="ApplicationInsightsAnalytics",N="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",m="sampleRate",w="ProcessLegacy",O="http.method",H="https://dc.services.visualstudio.com",E="/v2/track",$="not_specified",F="iKey",j="split",Q="length",Ee="toLowerCase",z="ingestionendpoint",ee="toString",te="removeItem",T="name",q="message",k="count",le="preTriggerDate",V="disabled",fe="interval",De="daysOfMonth",Fe="date",ae="getUTCDate",we="stringify",D="pathname",Je="correlationHeaderExcludePatterns",ye="indexOf",ve="extensionConfig",G="exceptions",se="parsedStack",Re="properties",Ge="measurements",ie="sizeInBytes",Xe="typeName",lt="severityLevel",wt="problemGroup",L="isManual",U="CreateFromInterface",re="assembly",de="hasFullStack",He="level",Ie="method",ce="fileName",Ce="line",Te="duration",Ve="receivedResponse",me="substring",Le="sanitizeKeyAndAddUniqueness",Ze="sanitizeException",nt="sanitizeProperties",be="sanitizeMeasurements",B=C(6708),K=C(5018),Ye=C(7630),jt;function An(S,g,_){var x=g[Q],oe=Mn(S,g);if(oe[Q]!==x){for(var Se=0,Ne=oe;_[Ne]!==void 0;)Se++,Ne=oe[me](0,150-3)+an(Se);oe=Ne}return oe}o(An,"dataSanitizeKeyAndAddUniqueness");function Mn(S,g){var _;return g&&(g=(0,B.nd)(g[ee]()),g[Q]>150&&(_=g[me](0,150),(0,K.kP)(S,2,57,"name is too long.  It has been truncated to "+150+" characters.",{name:g},!0))),_||g}o(Mn,"dataSanitizeKey");function Cn(S,g,_){_===void 0&&(_=1024);var x;return g&&(_=_||1024,g=(0,B.nd)(g),g.toString()[Q]>_&&(x=g[ee]()[me](0,_),(0,K.kP)(S,2,61,"string value is too long. It has been truncated to "+_+" characters.",{value:g},!0))),x||g}o(Cn,"dataSanitizeString");function lr(S,g){return zt(S,g,2048,66)}o(lr,"dataSanitizeUrl");function ar(S,g){var _;return g&&g[Q]>32768&&(_=g[me](0,32768),(0,K.kP)(S,2,56,"message is too long, it has been truncated to "+32768+" characters.",{message:g},!0)),_||g}o(ar,"dataSanitizeMessage");function mr(S,g){var _;if(g){var x=""+g;x[Q]>32768&&(_=x[me](0,32768),(0,K.kP)(S,2,52,"exception is too long, it has been truncated to "+32768+" characters.",{exception:g},!0))}return _||g}o(mr,"dataSanitizeException");function cr(S,g){if(g){var _={};(0,B.rW)(g,function(x,oe){if((0,B.Kn)(oe)&&(0,Ye.nS)())try{oe=(0,Ye.xA)()[we](oe)}catch(Se){(0,K.kP)(S,2,49,"custom property is not valid",{exception:Se},!0)}oe=Cn(S,oe,8192),x=An(S,x,_),_[x]=oe}),g=_}return g}o(cr,"dataSanitizeProperties");function yr(S,g){if(g){var _={};(0,B.rW)(g,function(x,oe){x=An(S,x,_),_[x]=oe}),g=_}return g}o(yr,"dataSanitizeMeasurements");function dt(S,g){return g&&zt(S,g,128,69)[ee]()}o(dt,"dataSanitizeId");function zt(S,g,_,x){var oe;return g&&(g=(0,B.nd)(g),g[Q]>_&&(oe=g[me](0,_),(0,K.kP)(S,2,x,"input is too long, it has been truncated to "+_+" characters.",{data:g},!0))),oe||g}o(zt,"dataSanitizeInput");function an(S){var g="00"+S;return g.substr(g[Q]-3)}o(an,"dsPadNumber");var on=(jt={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768},jt[Le]=An,jt.sanitizeKey=Mn,jt.sanitizeString=Cn,jt.sanitizeUrl=lr,jt.sanitizeMessage=ar,jt[Ze]=mr,jt[nt]=cr,jt[be]=yr,jt.sanitizeId=dt,jt.sanitizeInput=zt,jt.padNumber=an,jt.trim=B.nd,jt),Yt=function(){function S(g,_,x,oe){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Se=this;Se.ver=2,Se[T]=Cn(g,_)||$,Se[Re]=cr(g,x),Se[Ge]=yr(g,oe)}return o(S,"Event"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Event",S.dataType="EventData",S}(),_n=function(){function S(g,_,x,oe,Se){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Ne=this;Ne.ver=2,_=_||$,Ne[q]=ar(g,_),Ne[Re]=cr(g,oe),Ne[Ge]=yr(g,Se),x&&(Ne[lt]=x)}return o(S,"Trace"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Message",S.dataType="MessageData",S}(),zn="";function vr(S,g){return g===void 0&&(g=!1),S==null?g:S.toString()[Ee]()==="true"}o(vr,"stringToBoolOrDefault");function er(S){(isNaN(S)||S<0)&&(S=0),S=Math.round(S);var g=zn+S%1e3,_=zn+Math.floor(S/1e3)%60,x=zn+Math.floor(S/(1e3*60))%60,oe=zn+Math.floor(S/(1e3*60*60))%24,Se=Math.floor(S/(1e3*60*60*24));return g=g[Q]===1?"00"+g:g[Q]===2?"0"+g:g,_=_[Q]<2?"0"+_:_,x=x[Q]<2?"0"+x:x,oe=oe[Q]<2?"0"+oe:oe,(Se>0?Se+".":zn)+oe+":"+x+":"+_+"."+g}o(er,"msToTimeSpan");function Ar(S,g){var _=null;return(0,B.tO)(S,function(x){if(x.identifier===g)return _=x,-1}),_}o(Ar,"getExtensionByName");function Ur(S,g,_,x,oe){return!oe&&(0,B.HD)(S)&&(S==="Script error."||S==="Script error")}o(Ur,"isCrossOriginError");var Sr=function(){function S(g,_,x,oe,Se,Ne,Be){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ft=this;ft.ver=2,ft.id=dt(g,Be),ft.url=lr(g,x),ft[T]=Cn(g,_)||$,isNaN(oe)||(ft[Te]=er(oe)),ft[Re]=cr(g,Se),ft[Ge]=yr(g,Ne)}return o(S,"PageView"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",S.dataType="PageviewData",S}(),Dr=function(){function S(g,_,x,oe,Se,Ne,Be){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ft=this;ft.ver=2,ft.url=lr(g,x),ft[T]=Cn(g,_)||$,ft[Re]=cr(g,Se),ft[Ge]=yr(g,Ne),Be&&(ft.domProcessing=Be.domProcessing,ft[Te]=Be[Te],ft.networkConnect=Be.networkConnect,ft.perfTotal=Be.perfTotal,ft[Ve]=Be[Ve],ft.sentRequest=Be.sentRequest)}return o(S,"PageViewPerformance"),S.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",S.dataType="PageviewPerformanceData",S}(),Fr="<no_method>",Ln="error",Nn="stack",Cr="stackDetails",Wr="errorSrc",Rr="message",vi="description";function br(S,g){var _=S;return _&&!(0,B.HD)(_)&&(JSON&&JSON[we]?(_=JSON[we](S),g&&(!_||_==="{}")&&((0,B.mf)(S[ee])?_=S[ee]():_=""+S)):_=""+S+" - (Missing JSON.stringify)"),_||""}o(br,"_stringify");function M(S,g){var _=S;return S&&(_&&!(0,B.HD)(_)&&(_=S[Rr]||S[vi]||_),_&&!(0,B.HD)(_)&&(_=br(_,!0)),S.filename&&(_=_+" @"+(S.filename||"")+":"+(S.lineno||"?")+":"+(S.colno||"?"))),g&&g!=="String"&&g!=="Object"&&g!=="Error"&&(_||"")[ye](g)===-1&&(_=g+": "+_),_||""}o(M,"_formatMessage");function ue(S){try{if((0,B.Kn)(S))return"hasFullStack"in S&&"typeName"in S}catch(g){}return!1}o(ue,"_isExceptionDetailsInternal");function Ae(S){try{if((0,B.Kn)(S))return"ver"in S&&"exceptions"in S&&"properties"in S}catch(g){}return!1}o(Ae,"_isExceptionInternal");function Pe(S){return S&&S.src&&(0,B.HD)(S.src)&&S.obj&&(0,B.kJ)(S.obj)}o(Pe,"_isStackDetails");function et(S){var g=S||"";(0,B.HD)(g)||((0,B.HD)(g[Nn])?g=g[Nn]:g=""+g);var _=g[j](`
`);return{src:g,obj:_}}o(et,"_convertStackObj");function je(S){for(var g=[],_=S[j](`
`),x=0;x<_[Q];x++){var oe=_[x];_[x+1]&&(oe+="@"+_[x+1],x++),g.push(oe)}return{src:S,obj:g}}o(je,"_getOperaStack");function ct(S){var g=null;if(S)try{if(S[Nn])g=et(S[Nn]);else if(S[Ln]&&S[Ln][Nn])g=et(S[Ln][Nn]);else if(S.exception&&S.exception[Nn])g=et(S.exception[Nn]);else if(Pe(S))g=S;else if(Pe(S[Cr]))g=S[Cr];else if(window&&window.opera&&S[Rr])g=je(S[q]);else if(S.reason&&S.reason[Nn])g=et(S.reason[Nn]);else if((0,B.HD)(S))g=et(S);else{var _=S[Rr]||S[vi]||"";(0,B.HD)(S[Wr])&&(_&&(_+=`
`),_+=" from "+S[Wr]),_&&(g=et(_))}}catch(x){g=et(x)}return g||{src:"",obj:null}}o(ct,"_getStackFromErrorObj");function Et(S){var g="";return S&&(S.obj?(0,B.tO)(S.obj,function(_){g+=_+`
`}):g=S.src||""),g}o(Et,"_formatStackTrace");function Dt(S){var g,_=S.obj;if(_&&_[Q]>0){g=[];var x=0,oe=0;(0,B.tO)(_,function(Pn){var Zn=Pn[ee]();if(Wt.regex.test(Zn)){var Oe=new Wt(Zn,x++);oe+=Oe[ie],g.push(Oe)}});var Se=32*1024;if(oe>Se)for(var Ne=0,Be=g[Q]-1,ft=0,st=Ne,kt=Be;Ne<Be;){var nn=g[Ne][ie],jn=g[Be][ie];if(ft+=nn+jn,ft>Se){var ln=kt-st+1;g.splice(st,ln);break}st=Ne,kt=Be,Ne++,Be--}}return g}o(Dt,"_parseStack");function bt(S){var g="";if(S&&(g=S.typeName||S[T]||"",!g))try{var _=/function (.{1,200})\(/,x=_.exec(S.constructor[ee]());g=x&&x[Q]>1?x[1]:""}catch(oe){}return g}o(bt,"_getErrorType");function Ct(S){if(S)try{if(!(0,B.HD)(S)){var g=bt(S),_=br(S,!1);return(!_||_==="{}")&&(S[Ln]&&(S=S[Ln],g=bt(S)),_=br(S,!0)),_[ye](g)!==0&&g!=="String"?g+":"+_:_}}catch(x){}return""+(S||"")}o(Ct,"_formatErrorCode");var Bt=function(){function S(g,_,x,oe,Se,Ne){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Be=this;Be.ver=2,Ae(_)?(Be[G]=_[G]||[],Be[Re]=_[Re],Be[Ge]=_[Ge],_[lt]&&(Be[lt]=_[lt]),_.id&&(Be.id=_.id),_[wt]&&(Be[wt]=_[wt]),(0,B.le)(_[L])||(Be[L]=_[L])):(x||(x={}),Be[G]=[new xt(g,_,x)],Be[Re]=cr(g,x),Be[Ge]=yr(g,oe),Se&&(Be[lt]=Se),Ne&&(Be.id=Ne))}return o(S,"Exception"),S.CreateAutoException=function(g,_,x,oe,Se,Ne,Be,ft){var st,kt=bt(Se||Ne||g);return st={},st[q]=M(g,kt),st.url=_,st.lineNumber=x,st.columnNumber=oe,st.error=Ct(Se||Ne||g),st.evt=Ct(Ne||g),st[Xe]=kt,st.stackDetails=ct(Be||Se||Ne),st.errorSrc=ft,st},S.CreateFromInterface=function(g,_,x,oe){var Se=_[G]&&(0,B.Mr)(_[G],function(Be){return xt[U](g,Be)}),Ne=new S(g,(0,v.uc)((0,v.uc)({},_),{exceptions:Se}),x,oe);return Ne},S.prototype.toInterface=function(){var g,_=this,x=_.exceptions,oe=_.properties,Se=_.measurements,Ne=_.severityLevel,Be=_.problemGroup,ft=_.id,st=_.isManual,kt=x instanceof Array&&(0,B.Mr)(x,function(nn){return nn.toInterface()})||void 0;return g={ver:"4.0"},g[G]=kt,g.severityLevel=Ne,g.properties=oe,g.measurements=Se,g.problemGroup=Be,g.id=ft,g.isManual=st,g},S.CreateSimpleException=function(g,_,x,oe,Se,Ne){var Be;return{exceptions:[(Be={},Be[de]=!0,Be.message=g,Be.stack=Se,Be.typeName=_,Be)]}},S.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",S.dataType="ExceptionData",S.formatError=Ct,S}(),xt=function(){function S(g,_,x){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var oe=this;if(ue(_))oe[Xe]=_[Xe],oe[q]=_[q],oe[Nn]=_[Nn],oe[se]=_[se]||[],oe[de]=_[de];else{var Se=_,Ne=Se&&Se.evt;(0,B.VZ)(Se)||(Se=Se[Ln]||Ne||Se),oe[Xe]=Cn(g,bt(Se))||$,oe[q]=ar(g,M(_||Se,oe[Xe]))||$;var Be=_[Cr]||ct(_);oe[se]=Dt(Be),(0,B.kJ)(oe[se])&&(0,B.Mr)(oe[se],function(ft){return ft[re]=Cn(g,ft[re])}),oe[Nn]=mr(g,Et(Be)),oe.hasFullStack=(0,B.kJ)(oe.parsedStack)&&oe.parsedStack[Q]>0,x&&(x[Xe]=x[Xe]||oe[Xe])}}return o(S,"_ExceptionDetails"),S.prototype.toInterface=function(){var g,_=this,x=_[se]instanceof Array&&(0,B.Mr)(_[se],function(Se){return Se.toInterface()}),oe=(g={id:_.id,outerId:_.outerId,typeName:_[Xe],message:_[q],hasFullStack:_[de],stack:_[Nn]},g[se]=x||void 0,g);return oe},S.CreateFromInterface=function(g,_){var x=_[se]instanceof Array&&(0,B.Mr)(_[se],function(Se){return Wt[U](Se)})||_[se],oe=new S(g,(0,v.uc)((0,v.uc)({},_),{parsedStack:x}));return oe},S}(),Wt=function(){function S(g,_){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var x=this;if(x[ie]=0,typeof g=="string"){var oe=g;x[He]=_,x[Ie]=Fr,x[re]=(0,B.nd)(oe),x[ce]="",x[Ce]=0;var Se=oe.match(S.regex);Se&&Se[Q]>=5&&(x[Ie]=(0,B.nd)(Se[2])||x[Ie],x[ce]=(0,B.nd)(Se[4]),x[Ce]=parseInt(Se[5])||0)}else x[He]=g[He],x[Ie]=g[Ie],x[re]=g[re],x[ce]=g[ce],x[Ce]=g[Ce],x[ie]=0;x.sizeInBytes+=x.method[Q],x.sizeInBytes+=x.fileName[Q],x.sizeInBytes+=x.assembly[Q],x[ie]+=S.baseSize,x.sizeInBytes+=x.level.toString()[Q],x.sizeInBytes+=x.line.toString()[Q]}return o(S,"_StackFrame"),S.CreateFromInterface=function(g){return new S(g,null)},S.prototype.toInterface=function(){var g=this;return{level:g[He],method:g[Ie],assembly:g[re],fileName:g[ce],line:g[Ce]}},S.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,S.baseSize=58,S}(),Ft=function(){function S(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return o(S,"DataPoint"),S}(),Wn=function(){function S(g,_,x,oe,Se,Ne,Be,ft,st){this.aiDataContract={ver:1,metrics:1,properties:0};var kt=this;kt.ver=2;var nn=new Ft;nn[k]=oe>0?oe:void 0,nn.max=isNaN(Ne)||Ne===null?void 0:Ne,nn.min=isNaN(Se)||Se===null?void 0:Se,nn[T]=Cn(g,_)||$,nn.value=x,nn.stdDev=isNaN(Be)||Be===null?void 0:Be,kt.metrics=[nn],kt[Re]=cr(g,ft),kt[Ge]=yr(g,st)}return o(S,"Metric"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",S.dataType="MetricData",S}(),bn=C(5843),ur=C(3242),ir=C(4878),or=C(4869);function $r(S){var g=null;if((0,B.mf)(Event))g=new Event(S);else{var _=(0,Ye.Me)();_&&_.createEvent&&(g=_.createEvent("Event"),g.initEvent(S,!0,!0))}return g}o($r,"createDomEvent");var Lr=C(4873),qn=(0,Lr.cc)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),pi=C(2091),Jt=(0,Lr.By)({LocalStorage:0,SessionStorage:1}),Jn=(0,Lr.By)({AI:0,AI_AND_W3C:1,W3C:2}),xn=void 0,en=void 0;function $n(){return yi()?kn(Jt.LocalStorage):null}o($n,"_getLocalStorageObject");function kn(S){try{if((0,B.le)((0,pi.Rd)()))return null;var g=new Date()[ee](),_=(0,Ye.a8)(S===Jt.LocalStorage?"localStorage":"sessionStorage");_.setItem(g,g);var x=_.getItem(g)!==g;if(_[te](g),!x)return _}catch(oe){}return null}o(kn,"_getVerifiedStorageObject");function wr(){return Mi()?kn(Jt.SessionStorage):null}o(wr,"_getSessionStorageObject");function Kr(){xn=!1,en=!1}o(Kr,"utlDisableStorage");function mi(){xn=yi(!0),en=Mi(!0)}o(mi,"utlEnableStorage");function yi(S){return(S||xn===void 0)&&(xn=!!kn(Jt.LocalStorage)),xn}o(yi,"utlCanUseLocalStorage");function si(S,g){var _=$n();if(_!==null)try{return _.getItem(g)}catch(x){xn=!1,(0,K.kP)(S,2,1,"Browser failed read of local storage. "+(0,B.jj)(x),{exception:(0,Ye.eU)(x)})}return null}o(si,"utlGetLocalStorage");function Gr(S,g,_){var x=$n();if(x!==null)try{return x.setItem(g,_),!0}catch(oe){xn=!1,(0,K.kP)(S,2,3,"Browser failed write to local storage. "+(0,B.jj)(oe),{exception:(0,Ye.eU)(oe)})}return!1}o(Gr,"utlSetLocalStorage");function na(S,g){var _=$n();if(_!==null)try{return _[te](g),!0}catch(x){xn=!1,(0,K.kP)(S,2,5,"Browser failed removal of local storage item. "+(0,B.jj)(x),{exception:(0,Ye.eU)(x)})}return!1}o(na,"utlRemoveStorage");function Mi(S){return(S||en===void 0)&&(en=!!kn(Jt.SessionStorage)),en}o(Mi,"utlCanUseSessionStorage");function ra(){var S=[];return Mi()&&(0,B.rW)((0,Ye.a8)("sessionStorage"),function(g){S.push(g)}),S}o(ra,"utlGetSessionStorageKeys");function Ii(S,g){var _=wr();if(_!==null)try{return _.getItem(g)}catch(x){en=!1,(0,K.kP)(S,2,2,"Browser failed read of session storage. "+(0,B.jj)(x),{exception:(0,Ye.eU)(x)})}return null}o(Ii,"utlGetSessionStorage");function ia(S,g,_){var x=wr();if(x!==null)try{return x.setItem(g,_),!0}catch(oe){en=!1,(0,K.kP)(S,2,4,"Browser failed write to session storage. "+(0,B.jj)(oe),{exception:(0,Ye.eU)(oe)})}return!1}o(ia,"utlSetSessionStorage");function Zr(S,g){var _=wr();if(_!==null)try{return _[te](g),!0}catch(x){en=!1,(0,K.kP)(S,2,6,"Browser failed removal of session storage item. "+(0,B.jj)(x),{exception:(0,Ye.eU)(x)})}return!1}o(Zr,"utlRemoveSessionStorage");var ei=(0,Ye.Me)()||{},ti=0,sa=[null,null,null,null,null];function Oi(S){var g=ti,_=sa,x=_[g];return ei.createElement?_[g]||(x=_[g]=ei.createElement("a")):x={host:rt(S,!0)},x.href=S,g++,g>=_[Q]&&(g=0),ti=g,x}o(Oi,"urlParseUrl");function ni(S){var g,_=Oi(S);return _&&(g=_.href),g}o(ni,"urlGetAbsoluteUrl");function Vi(S){var g,_=Oi(S);return _&&(g=_[D]),g}o(Vi,"urlGetPathName");function ke(S,g){return S?S.toUpperCase()+" "+g:g}o(ke,"urlGetCompleteUrl");function rt(S,g){var _=vt(S,g)||"";if(_){var x=_.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(x!=null&&x[Q]>3&&(0,B.HD)(x[2])&&x[2][Q]>0)return x[2]+(x[3]||"")}return _}o(rt,"urlParseHost");function vt(S,g){var _=null;if(S){var x=S.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(x!=null&&x[Q]>2&&(0,B.HD)(x[2])&&x[2][Q]>0&&(_=x[2]||"",g&&x[Q]>2)){var oe=(x[1]||"")[Ee](),Se=x[3]||"";(oe==="http"&&Se===":80"||oe==="https"&&Se===":443")&&(Se=""),_+=Se}}return _}o(vt,"urlParseFullHost");var it=[H+E,"https://breeze.aimon.applicationinsights.io"+E,"https://dc-int.services.visualstudio.com"+E];function Lt(S){return(0,B.UA)(it,S[Ee]())!==-1}o(Lt,"isInternalApplicationInsightsEndpoint");var Gt={NotSpecified:$,createDomEvent:$r,disableStorage:Kr,isInternalApplicationInsightsEndpoint:Lt,canUseLocalStorage:yi,getStorage:si,setStorage:Gr,removeStorage:na,canUseSessionStorage:Mi,getSessionStorageKeys:ra,getSessionStorage:Ii,setSessionStorage:ia,removeSessionStorage:Zr,disableCookies:bn.oF,canUseCookies:bn.vn,disallowsSameSiteNone:ur.UY,setCookie:bn.d8,stringToBoolOrDefault:vr,getCookie:bn.ej,deleteCookie:bn.kT,trim:B.nd,newId:ir.pZ,random32:function(){return(0,ir._l)(!0)},generateW3CId:bn.DO,isArray:B.kJ,isError:B.VZ,isDate:B.J_,toISOStringForIE8:B.Y6,getIEVersion:Ye.sA,msToTimeSpan:er,isCrossOriginError:Ur,dump:Ye.eU,getExceptionName:B.jj,addEventHandler:or.pZ,IsBeaconApiSupported:Ye.MF,getExtension:Ar},St={parseUrl:Oi,getAbsoluteUrl:ni,getPathName:Vi,getCompleteUrl:ke,parseHost:rt,parseFullHost:vt},Zt={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(S,g,_){if(!g||S&&S.disableCorrelationHeaders)return!1;if(S&&S[Je]){for(var x=0;x<S.correlationHeaderExcludePatterns[Q];x++)if(S[Je][x].test(g))return!1}var oe=Oi(g).host[Ee]();if(oe&&(oe[ye](":443")!==-1||oe[ye](":80")!==-1)&&(oe=(vt(g,!0)||"")[Ee]()),(!S||!S.enableCorsCorrelation)&&oe&&oe!==_)return!1;var Se=S&&S.correlationHeaderDomains;if(Se){var Ne;if((0,B.tO)(Se,function(st){var kt=new RegExp(st.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));Ne=Ne||kt.test(oe)}),!Ne)return!1}var Be=S&&S.correlationHeaderExcludedDomains;if(!Be||Be[Q]===0)return!0;for(var x=0;x<Be[Q];x++){var ft=new RegExp(Be[x].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(ft.test(oe))return!1}return oe&&oe[Q]>0},getCorrelationContext:function(S){if(S){var g=Zt.getCorrelationContextValue(S,qn[1]);if(g&&g!==Zt.correlationIdPrefix)return g}},getCorrelationContextValue:function(S,g){if(S)for(var _=S[j](","),x=0;x<_[Q];++x){var oe=_[x][j]("=");if(oe[Q]===2&&oe[0]===g)return oe[1]}}};function Ut(S,g,_,x){var oe,Se=x,Ne=x;if(g&&g[Q]>0){var Be=Oi(g);if(oe=Be.host,!Se)if(Be[D]!=null){var ft=Be.pathname[Q]===0?"/":Be[D];ft.charAt(0)!=="/"&&(ft="/"+ft),Ne=Be[D],Se=Cn(S,_?_+" "+ft:ft)}else Se=Cn(S,g)}else oe=x,Se=x;return{target:oe,name:Se,data:Ne}}o(Ut,"AjaxHelperParseDependencyPath");function fn(){var S=(0,Ye.r)();if(S&&S.now&&S.timing){var g=S.now()+S.timing.navigationStart;if(g>0)return g}return(0,B.m6)()}o(fn,"dateTimeUtilsNow");function In(S,g){var _=null;return S!==0&&g!==0&&!(0,B.le)(S)&&!(0,B.le)(g)&&(_=g-S),_}o(In,"dateTimeUtilsDuration");var Kn={Now:fn,GetDuration:In};function Qn(S,g){var _=S||{};return{getName:function(){return _[_DYN_NAME]},setName:function(x){g&&g.setName(x),_[_DYN_NAME]=x},getTraceId:function(){return _.traceID},setTraceId:function(x){g&&g.setTraceId(x),isValidTraceId(x)&&(_.traceID=x)},getSpanId:function(){return _.parentID},setSpanId:function(x){g&&g.setSpanId(x),isValidSpanId(x)&&(_.parentID=x)},getTraceFlags:function(){return _.traceFlags},setTraceFlags:function(x){g&&g.setTraceFlags(x),_.traceFlags=x}}}o(Qn,"createDistributedTraceContextFromTrace");var tr=function(){function S(g,_,x,oe,Se,Ne,Be,ft,st,kt,nn,jn){st===void 0&&(st="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var ln=this;ln.ver=2,ln.id=_,ln[Te]=er(Se),ln.success=Ne,ln.resultCode=Be+"",ln.type=Cn(g,st);var Pn=Ut(g,x,ft,oe);ln.data=lr(g,oe)||Pn.data,ln.target=Cn(g,Pn.target),kt&&(ln.target="".concat(ln.target," | ").concat(kt)),ln[T]=Cn(g,Pn[T]),ln[Re]=cr(g,nn),ln[Ge]=yr(g,jn)}return o(S,"RemoteDependencyData"),S.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",S.dataType="RemoteDependencyData",S}(),Hn=C(5883),qt=C(4063);function sn(S){var g="ai."+S+".";return function(_){return g+_}}o(sn,"_aiNameFunc");var tn=sn("application"),mn=sn("device"),I=sn("location"),Y=sn("operation"),We=sn("session"),tt=sn("user"),Rt=sn("cloud"),Nt=sn("internal"),vn=function(S){(0,v.ne)(g,S);function g(){return S.call(this)||this}return o(g,"ContextTagKeys"),g}((0,B.hl)({applicationVersion:tn("ver"),applicationBuild:tn("build"),applicationTypeId:tn("typeId"),applicationId:tn("applicationId"),applicationLayer:tn("layer"),deviceId:mn("id"),deviceIp:mn("ip"),deviceLanguage:mn("language"),deviceLocale:mn("locale"),deviceModel:mn("model"),deviceFriendlyName:mn("friendlyName"),deviceNetwork:mn("network"),deviceNetworkName:mn("networkName"),deviceOEMName:mn("oemName"),deviceOS:mn("os"),deviceOSVersion:mn("osVersion"),deviceRoleInstance:mn("roleInstance"),deviceRoleName:mn("roleName"),deviceScreenResolution:mn("screenResolution"),deviceType:mn("type"),deviceMachineName:mn("machineName"),deviceVMName:mn("vmName"),deviceBrowser:mn("browser"),deviceBrowserVersion:mn("browserVersion"),locationIp:I("ip"),locationCountry:I("country"),locationProvince:I("province"),locationCity:I("city"),operationId:Y("id"),operationName:Y("name"),operationParentId:Y("parentId"),operationRootId:Y("rootId"),operationSyntheticSource:Y("syntheticSource"),operationCorrelationVector:Y("correlationVector"),sessionId:We("id"),sessionIsFirst:We("isFirst"),sessionIsNew:We("isNew"),userAccountAcquisitionDate:tt("accountAcquisitionDate"),userAccountId:tt("accountId"),userAgent:tt("userAgent"),userId:tt("id"),userStoreRegion:tt("storeRegion"),userAuthUserId:tt("authUserId"),userAnonymousUserAcquisitionDate:tt("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:tt("authUserAcquisitionDate"),cloudName:Rt("name"),cloudRole:Rt("role"),cloudRoleVer:Rt("roleVer"),cloudRoleInstance:Rt("roleInstance"),cloudEnvironment:Rt("environment"),cloudLocation:Rt("location"),cloudDeploymentUnit:Rt("deploymentUnit"),internalNodeName:Nt("nodeName"),internalSdkVersion:Nt("sdkVersion"),internalAgentVersion:Nt("agentVersion"),internalSnippet:Nt("snippet"),internalSdkSrc:Nt("sdkSrc")})),pn={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},$t=new vn,hn=function(){function S(g,_,x){var oe=this,Se=this;Se.ver=1,Se.sampleRate=100,Se.tags={},Se[T]=Cn(g,x)||$,Se.data=_,Se.time=(0,B.Y6)(new Date),Se.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return oe.sampleRate===100?4:1},tags:1,data:1}}return o(S,"Envelope"),S}(),yn=function(){function S(g,_){this.aiDataContract={baseType:1,baseData:1},this.baseType=g,this.baseData=_}return o(S,"Data"),S}(),Ht="duration",pt="tags",On="deviceType",Dn="data",wn="name",sr="traceID",Vt="length",Nr="stringify",_r="measurements",dn="dataType",Xn="envelopeType",Or="toString",nr="onLine",ri="isOnline",jr="enqueue",li="count",Yr="push",ci="emitLineDelimitedJson",wi="clear",Si="batchPayloads",ii="markAsSent",Ir="clearSent",Ci="bufferOverride",bi="BUFFER_KEY",ai="SENT_BUFFER_KEY",qr="MAX_BUFFER_SIZE",rr="namePrefix",zr="maxBatchSizeInBytes",he="triggerSend",qe="diagLog",at="onunloadDisableBeacon",mt="isBeaconApiDisabled",Tt="_sender",Ot="_senderConfig",cn="enableSessionStorageBuffer",ge="_buffer",$e="samplingPercentage",Ke="instrumentationKey",ut="endpointUrl",At="customHeaders",It="disableXhr",En="onunloadDisableFetch",Rn="disableTelemetry",Gn="baseType",ui="sampleRate",Bi="convertUndefined",di="_xhrReadyStateChange",dr="_onError",Pi="_onPartialSuccess",fi="_onSuccess",ji="itemsAccepted",Aa="itemsReceived",Hi="isRetryDisabled",Yi="setRequestHeader",Li="maxBatchInterval",qi="eventsSendRequest",xr="disableInstrumentationKeyValidation",xi="getSamplingScore",la="getHashCodeScore",Ui="baseType",Vn="baseData",fr="properties",pa="true";function hr(S,g,_){return(0,B.sO)(S,g,_,B.fQ)}o(hr,"_setValueIf");function Va(S,g,_){var x=_[pt]=_[pt]||{},oe=g.ext=g.ext||{},Se=g[pt]=g[pt]||[],Ne=oe.user;Ne&&(hr(x,$t.userAuthUserId,Ne.authId),hr(x,$t.userId,Ne.id||Ne.localId));var Be=oe.app;Be&&hr(x,$t.sessionId,Be.sesId);var ft=oe.device;ft&&(hr(x,$t.deviceId,ft.id||ft.localId),hr(x,$t[On],ft.deviceClass),hr(x,$t.deviceIp,ft.ip),hr(x,$t.deviceModel,ft.model),hr(x,$t[On],ft[On]));var st=g.ext.web;if(st){hr(x,$t.deviceLanguage,st.browserLang),hr(x,$t.deviceBrowserVersion,st.browserVer),hr(x,$t.deviceBrowser,st.browser);var kt=_[Dn]=_[Dn]||{},nn=kt[Vn]=kt[Vn]||{},jn=nn[fr]=nn[fr]||{};hr(jn,"domain",st.domain),hr(jn,"isManual",st.isManual?pa:null),hr(jn,"screenRes",st.screenRes),hr(jn,"userConsent",st.userConsent?pa:null)}var ln=oe.os;ln&&hr(x,$t.deviceOS,ln[wn]);var Pn=oe.trace;Pn&&(hr(x,$t.operationParentId,Pn.parentID),hr(x,$t.operationName,Cn(S,Pn[wn])),hr(x,$t.operationId,Pn[sr]));for(var Zn={},Oe=Se[Vt]-1;Oe>=0;Oe--){var Bn=Se[Oe];(0,B.rW)(Bn,function(Er,pr){Zn[Er]=pr}),Se.splice(Oe,1)}(0,B.rW)(Se,function(Er,pr){Zn[Er]=pr});var Yn=(0,v.uc)((0,v.uc)({},x),Zn);Yn[$t.internalSdkVersion]||(Yn[$t.internalSdkVersion]="javascript:".concat(ja.Version)),_[pt]=(0,B.Ax)(Yn)}o(Va,"_extractPartAExtensions");function Qi(S,g,_){(0,B.le)(S)||(0,B.rW)(S,function(x,oe){(0,B.hj)(oe)?_[x]=oe:(0,B.HD)(oe)?g[x]=oe:(0,Ye.nS)()&&(g[x]=(0,Ye.xA)()[Nr](oe))})}o(Qi,"_extractPropsAndMeasurements");function Wi(S,g){(0,B.le)(S)||(0,B.rW)(S,function(_,x){S[_]=x||g})}o(Wi,"_convertPropsUndefinedToCustomDefinedValue");function $i(S,g,_,x){var oe=new hn(S,x,g);hr(oe,"sampleRate",_[m]),(_[Vn]||{}).startTime&&(oe.time=(0,B.Y6)(_[Vn].startTime)),oe.iKey=_.iKey;var Se=_.iKey.replace(/-/g,"");return oe[wn]=oe[wn].replace("{0}",Se),Va(S,_,oe),_[pt]=_[pt]||[],(0,B.Ax)(oe)}o($i,"_createEnvelope");function _i(S,g){(0,B.le)(g[Vn])&&(0,K.kP)(S,1,46,"telemetryItem.baseData cannot be null.")}o(_i,"EnvelopeCreatorInit");var ja={Version:"2.8.12"};function ki(S,g,_){_i(S,g);var x=g[Vn][_r]||{},oe=g[Vn][fr]||{};Qi(g[Dn],oe,x),(0,B.le)(_)||Wi(oe,_);var Se=g[Vn];if((0,B.le)(Se))return(0,K.jV)(S,"Invalid input for dependency data"),null;var Ne=Se[fr]&&Se[fr][O]?Se[fr][O]:"GET",Be=new tr(S,Se.id,Se.target,Se[wn],Se[Ht],Se.success,Se.responseCode,Ne,Se.type,Se.correlationContext,oe,x),ft=new yn(tr[dn],Be);return $i(S,tr[Xn],g,ft)}o(ki,"DependencyEnvelopeCreator");function ma(S,g,_){_i(S,g);var x={},oe={};g[Ui]!==Yt[dn]&&(x.baseTypeSource=g[Ui]),g[Ui]===Yt[dn]?(x=g[Vn][fr]||{},oe=g[Vn][_r]||{}):g[Vn]&&Qi(g[Vn],x,oe),Qi(g[Dn],x,oe),(0,B.le)(_)||Wi(x,_);var Se=g[Vn][wn],Ne=new Yt(S,Se,x,oe),Be=new yn(Yt[dn],Ne);return $i(S,Yt[Xn],g,Be)}o(ma,"EventEnvelopeCreator");function Ya(S,g,_){_i(S,g);var x=g[Vn][_r]||{},oe=g[Vn][fr]||{};Qi(g[Dn],oe,x),(0,B.le)(_)||Wi(oe,_);var Se=g[Vn],Ne=Bt.CreateFromInterface(S,Se,oe,x),Be=new yn(Bt[dn],Ne);return $i(S,Bt[Xn],g,Be)}o(Ya,"ExceptionEnvelopeCreator");function qa(S,g,_){_i(S,g);var x=g[Vn],oe=x[fr]||{},Se=x[_r]||{};Qi(g[Dn],oe,Se),(0,B.le)(_)||Wi(oe,_);var Ne=new Wn(S,x[wn],x.average,x.sampleCount,x.min,x.max,x.stdDev,oe,Se),Be=new yn(Wn[dn],Ne);return $i(S,Wn[Xn],g,Be)}o(qa,"MetricEnvelopeCreator");function Qa(S,g,_){_i(S,g);var x,oe=g[Vn];!(0,B.le)(oe)&&!(0,B.le)(oe[fr])&&!(0,B.le)(oe[fr][Ht])?(x=oe[fr][Ht],delete oe[fr][Ht]):!(0,B.le)(g[Dn])&&!(0,B.le)(g[Dn][Ht])&&(x=g[Dn][Ht],delete g[Dn][Ht]);var Se=g[Vn],Ne;((g.ext||{}).trace||{})[sr]&&(Ne=g.ext.trace[sr]);var Be=Se.id||Ne,ft=Se[wn],st=Se.uri,kt=Se[fr]||{},nn=Se[_r]||{};if((0,B.le)(Se.refUri)||(kt.refUri=Se.refUri),(0,B.le)(Se.pageType)||(kt.pageType=Se.pageType),(0,B.le)(Se.isLoggedIn)||(kt.isLoggedIn=Se.isLoggedIn[Or]()),!(0,B.le)(Se[fr])){var jn=Se[fr];(0,B.rW)(jn,function(Zn,Oe){kt[Zn]=Oe})}Qi(g[Dn],kt,nn),(0,B.le)(_)||Wi(kt,_);var ln=new Sr(S,ft,st,x,kt,nn,Be),Pn=new yn(Sr[dn],ln);return $i(S,Sr[Xn],g,Pn)}o(Qa,"PageViewEnvelopeCreator");function Xa(S,g,_){_i(S,g);var x=g[Vn],oe=x[wn],Se=x.uri||x.url,Ne=x[fr]||{},Be=x[_r]||{};Qi(g[Dn],Ne,Be),(0,B.le)(_)||Wi(Ne,_);var ft=new Dr(S,oe,Se,void 0,Ne,Be,x),st=new yn(Dr[dn],ft);return $i(S,Dr[Xn],g,st)}o(Xa,"PageViewPerformanceEnvelopeCreator");function Za(S,g,_){_i(S,g);var x=g[Vn].message,oe=g[Vn].severityLevel,Se=g[Vn][fr]||{},Ne=g[Vn][_r]||{};Qi(g[Dn],Se,Ne),(0,B.le)(_)||Wi(Se,_);var Be=new _n(S,x,oe,Se,Ne),ft=new yn(_n[dn],Be);return $i(S,_n[Xn],g,ft)}o(Za,"TraceEnvelopeCreator");function Da(S,g){(0,or.QY)(S,null,null,g)}o(Da,"_disableEvents");function eo(S){var g,_=(0,Ye.Me)(),x=(0,Ye.jW)(),oe=!1,Se=!0,Ne=(0,or.jU)((0,Hn.J)("OfflineListener"),S);try{if(ft((0,Ye.Jj)())&&(oe=!0),_){var Be=_.body||_;Be.ononline&&ft(Be)&&(oe=!0)}oe&&x&&!(0,B.le)(x[nr])&&(Se=x[nr])}catch(ln){oe=!1}function ft(ln){var Pn=!1;return ln&&(Pn=(0,or.XO)(ln,"online",st,Ne),Pn&&(0,or.XO)(ln,"offline",kt,Ne)),Pn}o(ft,"_enableEvents");function st(){Se=!0}o(st,"_setOnline");function kt(){Se=!1}o(kt,"_setOffline");function nn(){var ln=!0;return oe?ln=Se:x&&!(0,B.le)(x[nr])&&(ln=x[nr]),ln}o(nn,"_isOnline");function jn(){var ln=(0,Ye.Jj)();if(ln&&oe){if(Da(ln,Ne),_){var Pn=_.body||_;(0,B.o8)(Pn.ononline)||Da(Pn,Ne)}oe=!1}}return o(jn,"_unload"),g={},g[ri]=nn,g.isListening=function(){return oe},g.unload=jn,g}o(eo,"createOfflineListener");var ca=function(){function S(g,_){var x=[],oe=!1;this._get=function(){return x},this._set=function(Se){return x=Se,x},(0,R.Z)(S,this,function(Se){Se[jr]=function(Ne){if(Se[li]()>=_.eventsLimitInMem()){oe||((0,K.kP)(g,2,105,"Maximum in-memory buffer size reached: "+Se[li](),!0),oe=!0);return}x[Yr](Ne)},Se[li]=function(){return x[Vt]},Se.size=function(){for(var Ne=x[Vt],Be=0;Be<x[Vt];Be++)Ne+=x[Be][Vt];return _[ci]()||(Ne+=2),Ne},Se[wi]=function(){x=[],oe=!1},Se.getItems=function(){return x.slice(0)},Se[Si]=function(Ne){if(Ne&&Ne[Vt]>0){var Be=_[ci]()?Ne.join(`
`):"["+Ne.join(",")+"]";return Be}return null}})}return o(S,"BaseSendBuffer"),S.__ieDyn=1,S}(),to=function(S){(0,v.ne)(g,S);function g(_,x){var oe=S.call(this,_,x)||this;return(0,R.Z)(g,oe,function(Se,Ne){Se[ii]=function(Be){Ne[wi]()},Se[Ir]=function(Be){}}),oe}return o(g,"ArraySendBuffer"),g.__ieDyn=1,g}(ca),no=function(S){(0,v.ne)(g,S);function g(_,x){var oe=S.call(this,_,x)||this,Se=!1,Ne=x[Ci]()||{getItem:Ii,setItem:ia},Be=Ne.getItem,ft=Ne.setItem;return(0,R.Z)(g,oe,function(st,kt){var nn=Zn(g[bi]),jn=Zn(g[ai]),ln=st._set(nn.concat(jn));ln[Vt]>g[qr]&&(ln[Vt]=g[qr]),Oe(g[ai],[]),Oe(g[bi],ln),st[jr]=function(Bn){if(st[li]()>=g[qr]){Se||((0,K.kP)(_,2,67,"Maximum buffer size reached: "+st[li](),!0),Se=!0);return}kt[jr](Bn),Oe(g[bi],st._get())},st[wi]=function(){kt[wi](),Oe(g[bi],st._get()),Oe(g[ai],[]),Se=!1},st[ii]=function(Bn){Oe(g[bi],st._set(Pn(Bn,st._get())));var Yn=Zn(g[ai]);Yn instanceof Array&&Bn instanceof Array&&(Yn=Yn.concat(Bn),Yn[Vt]>g[qr]&&((0,K.kP)(_,1,67,"Sent buffer reached its maximum size: "+Yn[Vt],!0),Yn[Vt]=g[qr]),Oe(g[ai],Yn))},st[Ir]=function(Bn){var Yn=Zn(g[ai]);Yn=Pn(Bn,Yn),Oe(g[ai],Yn)};function Pn(Bn,Yn){var Er=[];return(0,B.tO)(Yn,function(pr){!(0,B.mf)(pr)&&(0,B.UA)(Bn,pr)===-1&&Er[Yr](pr)}),Er}o(Pn,"_removePayloadsFromBuffer");function Zn(Bn){var Yn=Bn;try{Yn=x[rr]&&x[rr]()?x[rr]()+"_"+Yn:Yn;var Er=Be(_,Yn);if(Er){var pr=(0,Ye.xA)().parse(Er);if((0,B.HD)(pr)&&(pr=(0,Ye.xA)().parse(pr)),pr&&(0,B.kJ)(pr))return pr}}catch(Xi){(0,K.kP)(_,1,42," storage key: "+Yn+", "+(0,B.jj)(Xi),{exception:(0,Ye.eU)(Xi)})}return[]}o(Zn,"_getBuffer");function Oe(Bn,Yn){var Er=Bn;try{Er=x[rr]&&x[rr]()?x[rr]()+"_"+Er:Er;var pr=JSON[Nr](Yn);ft(_,Er,pr)}catch(Xi){ft(_,Er,JSON[Nr]([])),(0,K.kP)(_,2,41," storage key: "+Er+", "+(0,B.jj)(Xi)+". Buffer cleared",{exception:(0,Ye.eU)(Xi)})}}o(Oe,"_setBuffer")}),oe}return o(g,"SessionStorageSendBuffer"),g.BUFFER_KEY="AI_buffer",g.SENT_BUFFER_KEY="AI_sentBuffer",g.MAX_BUFFER_SIZE=2e3,g}(ca),ro=function(){function S(g){(0,R.Z)(S,this,function(_){_.serialize=function(Ne){var Be=x(Ne,"root");try{return(0,Ye.xA)()[Nr](Be)}catch(ft){(0,K.kP)(g,1,48,ft&&(0,B.mf)(ft[Or])?ft[Or]():"Error serializing object",null,!0)}};function x(Ne,Be){var ft="__aiCircularRefCheck",st={};if(!Ne)return(0,K.kP)(g,1,48,"cannot serialize object because it is null or undefined",{name:Be},!0),st;if(Ne[ft])return(0,K.kP)(g,2,50,"Circular reference detected while serializing object",{name:Be},!0),st;if(!Ne.aiDataContract){if(Be==="measurements")st=Se(Ne,"number",Be);else if(Be==="properties")st=Se(Ne,"string",Be);else if(Be==="tags")st=Se(Ne,"string",Be);else if((0,B.kJ)(Ne))st=oe(Ne,Be);else{(0,K.kP)(g,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:Be},!0);try{(0,Ye.xA)()[Nr](Ne),st=Ne}catch(kt){(0,K.kP)(g,1,48,kt&&(0,B.mf)(kt[Or])?kt[Or]():"Error serializing object",null,!0)}}return st}return Ne[ft]=!0,(0,B.rW)(Ne.aiDataContract,function(kt,nn){var jn=(0,B.mf)(nn)?nn()&1:nn&1,ln=(0,B.mf)(nn)?nn()&4:nn&4,Pn=nn&2,Zn=Ne[kt]!==void 0,Oe=(0,B.Kn)(Ne[kt])&&Ne[kt]!==null;if(jn&&!Zn&&!Pn)(0,K.kP)(g,1,24,"Missing required field specification. The field is required but not present on source",{field:kt,name:Be});else if(!ln){var Bn=void 0;Oe?Pn?Bn=oe(Ne[kt],kt):Bn=x(Ne[kt],kt):Bn=Ne[kt],Bn!==void 0&&(st[kt]=Bn)}}),delete Ne[ft],st}o(x,"_serializeObject");function oe(Ne,Be){var ft;if(Ne)if(!(0,B.kJ)(Ne))(0,K.kP)(g,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:Be},!0);else{ft=[];for(var st=0;st<Ne[Vt];st++){var kt=Ne[st],nn=x(kt,Be+"["+st+"]");ft[Yr](nn)}}return ft}o(oe,"_serializeArray");function Se(Ne,Be,ft){var st;return Ne&&(st={},(0,B.rW)(Ne,function(kt,nn){if(Be==="string")nn===void 0?st[kt]="undefined":nn===null?st[kt]="null":nn[Or]?st[kt]=nn[Or]():st[kt]="invalid field: toString() is not defined.";else if(Be==="number")if(nn===void 0)st[kt]="undefined";else if(nn===null)st[kt]="null";else{var jn=parseFloat(nn);isNaN(jn)?st[kt]="NaN":st[kt]=jn}else st[kt]="invalid field: "+ft+" is of unknown type.",(0,K.kP)(g,1,st[kt],null,!0)})),st}o(Se,"_serializeStringMap")})}return o(S,"Serializer"),S.__ieDyn=1,S}(),ua=8,io=function(){function S(){}return o(S,"HashCodeScoreGenerator"),S.prototype.getHashCodeScore=function(g){var _=this.getHashCode(g)/S.INT_MAX_VALUE;return _*100},S.prototype.getHashCode=function(g){if(g==="")return 0;for(;g[Vt]<ua;)g=g.concat(g);for(var _=5381,x=0;x<g[Vt];++x)_=(_<<5)+_+g.charCodeAt(x),_=_&_;return Math.abs(_)},S.INT_MAX_VALUE=2147483647,S}(),Ra=function(){function S(){var g=this,_=new io,x=new vn;g[xi]=function(oe){var Se=0;return oe[pt]&&oe[pt][x.userId]?Se=_.getHashCodeScore(oe[pt][x.userId]):oe.ext&&oe.ext.user&&oe.ext.user.id?Se=_[la](oe.ext.user.id):oe[pt]&&oe[pt][x.operationId]?Se=_.getHashCodeScore(oe[pt][x.operationId]):oe.ext&&oe.ext.telemetryTrace&&oe.ext.telemetryTrace[sr]?Se=_.getHashCodeScore(oe.ext.telemetryTrace[sr]):Se=Math.random()*100,Se}}return o(S,"SamplingScoreGenerator"),S}(),Ta=function(){function S(g,_){this.INT_MAX_VALUE=2147483647;var x=_||(0,K.vH)(null);(g>100||g<0)&&(x.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:g},!0),g=100),this[ui]=g,this.samplingScoreGenerator=new Ra}return o(S,"Sample"),S.prototype.isSampledIn=function(g){var _=this[ui],x=!1;return _==null||_>=100||g.baseType===Wn[dn]?!0:(x=this.samplingScoreGenerator[xi](g)<_,x)},S}(),Ei,ao=65e3;function Qr(S){try{return S.responseText}catch(g){}return null}o(Qr,"_getResponseText");function Ma(){var S,g,_;return S={endpointUrl:function(){return H+E}},S[ci]=function(){return!1},S[Li]=function(){return 15e3},S[zr]=function(){return 102400},S[Rn]=function(){return!1},S[cn]=function(){return!0},S[Ci]=function(){return!1},S[Hi]=function(){return!1},S[mt]=function(){return!0},S[It]=function(){return!1},S[En]=function(){return!1},S[at]=function(){return!1},S[Ke]=function(){return g},S[rr]=function(){return g},S[$e]=function(){return 100},S[At]=function(){return _},S[Bi]=function(){return g},S.eventsLimitInMem=function(){return 1e4},S}o(Ma,"_getDefaultAppInsightsChannelConfig");var oo=(Ei={},Ei[Yt.dataType]=ma,Ei[_n.dataType]=Za,Ei[Sr.dataType]=Qa,Ei[Dr.dataType]=Xa,Ei[Bt.dataType]=Ya,Ei[Wn.dataType]=qa,Ei[tr.dataType]=ki,Ei),Ia=function(S){(0,v.ne)(g,S);function g(){var _=S.call(this)||this;_.priority=1001,_.identifier=y,_._senderConfig=Ma();var x,oe,Se,Ne,Be,ft,st,kt,nn=0,jn,ln,Pn,Zn;return(0,R.Z)(g,_,function(Oe,Bn){mo(),Oe.pause=function(){Oa(),Ne=!0},Oe.resume=function(){Ne&&(Ne=!1,oe=null,Oe._buffer.size()>Oe._senderConfig[zr]()&&Oe[he](!0,null,10),ya())},Oe.flush=function(Me,_t,Pt){if(Me===void 0&&(Me=!0),!Ne){Oa();try{Oe[he](Me,null,Pt||1)}catch(Xt){(0,K.kP)(Oe[qe](),1,22,"flush failed, telemetry will not be collected: "+(0,B.jj)(Xt),{exception:(0,Ye.eU)(Xt)})}}},Oe.onunloadFlush=function(){if(!Ne)if((Oe._senderConfig[at]()===!1||Oe[Ot][mt]()===!1)&&(0,Ye.MF)())try{Oe[he](!0,Xi,2)}catch(Me){(0,K.kP)(Oe[qe](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,B.jj)(Me),{exception:(0,Ye.eU)(Me)})}else Oe.flush()},Oe.addHeader=function(Me,_t){kt[Me]=_t},Oe.initialize=function(Me,_t,Pt,Xt){Oe.isInitialized()&&(0,K.kP)(Oe[qe](),1,28,"Sender is already initialized"),Bn.initialize(Me,_t,Pt,Xt);var Tn=Oe._getTelCtx(),Un=Oe.identifier;ft=new ro(_t.logger),x=0,oe=null,Se=0,Oe[Tt]=null,st=0;var Fn=Oe[qe]();Zn=(0,or.jU)((0,Hn.J)("Sender"),_t.evtNamespace&&_t.evtNamespace()),Pn=eo(Zn);var Br=Ma();(0,B.rW)(Br,function(gi,Pr){Oe[Ot][gi]=function(){var Sa=Tn.getConfig(Un,gi,Pr());return!Sa&&gi==="endpointUrl"&&(Sa=Pr()),Sa}});var hi=Oe[Ot][cn]()&&!!(Oe._senderConfig[Ci]()||Mi());Oe[ge]=hi?new no(Fn,Oe[Ot]):new to(Fn,Oe[Ot]),Oe._sample=new Ta(Oe[Ot][$e](),Fn),Fi(Me)||(0,K.kP)(Fn,1,100,"Invalid Instrumentation key "+Me[Ke]),!Lt(Oe._senderConfig.endpointUrl())&&Oe._senderConfig.customHeaders()&&Oe._senderConfig.customHeaders()[Vt]>0&&(0,B.tO)(Oe[Ot][At](),function(gi){_.addHeader(gi.header,gi.value)});var Tr=Oe[Ot],Hr=null;!Tr[It]()&&(0,Ye.cp)()?Hr=wa:!Tr[It]()&&(0,Ye.Z3)()&&(Hr=da),!Hr&&(0,Ye.JO)()&&(Hr=ho),jn=Hr||da,!Tr[mt]()&&(0,Ye.MF)()&&(Hr=Di),Oe[Tt]=Hr||da,!Tr[En]()&&(0,Ye.JO)(!0)?ln=fo:(0,Ye.MF)()?ln=Di:!Tr[It]()&&(0,Ye.cp)()?ln=wa:!Tr[It]()&&(0,Ye.Z3)()?ln=da:ln=jn},Oe.processTelemetry=function(Me,_t){_t=Oe._getTelCtx(_t);var Pt=_t[qe]();try{if(Oe[Ot][Rn]())return;if(!Me){(0,K.kP)(Pt,1,7,"Cannot send empty telemetry");return}if(Me.baseData&&!Me[Gn]){(0,K.kP)(Pt,1,70,"Cannot send telemetry without baseData and baseType");return}if(Me[Gn]||(Me[Gn]="EventData"),!Oe[Tt]){(0,K.kP)(Pt,1,28,"Sender was not initialized");return}if(Yn(Me))Me[m]=Oe._sample[ui];else{(0,K.kP)(Pt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Oe._sample[ui]});return}var Xt=Oe[Ot][Bi]()||void 0,Tn=Me.iKey||Oe[Ot][Ke](),Un=g.constructEnvelope(Me,Tn,Pt,Xt);if(!Un){(0,K.kP)(Pt,1,47,"Unable to create an AppInsights envelope");return}var Fn=!1;if(Me[pt]&&Me[pt][w]&&((0,B.tO)(Me[pt][w],function(Hr){try{Hr&&Hr(Un)===!1&&(Fn=!0,(0,K.jV)(Pt,"Telemetry processor check returns false"))}catch(gi){(0,K.kP)(Pt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,B.jj)(gi),{exception:(0,Ye.eU)(gi)},!0)}}),delete Me[pt][w]),Fn)return;var Br=ft.serialize(Un),hi=Oe[ge],Tr=hi.size();Tr+Br[Vt]>Oe[Ot][zr]()&&(!Pn||Pn[ri]())&&Oe[he](!0,null,10),hi[jr](Br),ya()}catch(Hr){(0,K.kP)(Pt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,B.jj)(Hr),{exception:(0,Ye.eU)(Hr)})}Oe.processNext(Me,_t)},Oe[di]=function(Me,_t,Pt){Me.readyState===4&&Er(Me.status,_t,Me.responseURL,Pt,fa(Me),Qr(Me)||Me.response)},Oe[he]=function(Me,_t,Pt){if(Me===void 0&&(Me=!0),!Ne)try{var Xt=Oe[ge];if(Oe[Ot][Rn]())Xt[wi]();else{if(Xt[li]()>0){var Tn=Xt.getItems();po(Pt||0,Me),_t?_t.call(_,Tn,Me):Oe[Tt](Tn,Me)}Se=+new Date}Oa()}catch(Fn){var Un=(0,Ye.sA)();(!Un||Un>9)&&(0,K.kP)(Oe[qe](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,B.jj)(Fn),{exception:(0,Ye.eU)(Fn)})}},Oe._doTeardown=function(Me,_t){Oe.onunloadFlush(),Pn.unload(),mo()},Oe[dr]=function(Me,_t,Pt){(0,K.kP)(Oe[qe](),2,26,"Failed to send telemetry.",{message:_t}),Oe._buffer[Ir](Me)},Oe[Pi]=function(Me,_t){for(var Pt=[],Xt=[],Tn=_t.errors.reverse(),Un=0,Fn=Tn;Un<Fn.length;Un++){var Br=Fn[Un],hi=Me.splice(Br.index,1)[0];go(Br.statusCode)?Xt[Yr](hi):Pt[Yr](hi)}Me[Vt]>0&&Oe[fi](Me,_t[ji]),Pt[Vt]>0&&Oe[dr](Pt,fa(null,["partial success",_t[ji],"of",_t.itemsReceived].join(" "))),Xt[Vt]>0&&(Na(Xt),(0,K.kP)(Oe[qe](),2,40,"Partial success. Delivered: "+Me[Vt]+", Failed: "+Pt[Vt]+". Will retry to send "+Xt[Vt]+" our of "+_t[Aa]+" items"))},Oe[fi]=function(Me,_t){Oe._buffer[Ir](Me)},Oe._xdrOnLoad=function(Me,_t){var Pt=Qr(Me);if(Me&&(Pt+""=="200"||Pt===""))x=0,Oe[fi](_t,0);else{var Xt=Fa(Pt);Xt&&Xt.itemsReceived&&Xt.itemsReceived>Xt[ji]&&!Oe[Ot][Hi]()?Oe[Pi](_t,Xt):Oe[dr](_t,aa(Me))}};function Yn(Me){return Oe._sample.isSampledIn(Me)}o(Yn,"_isSampledIn");function Er(Me,_t,Pt,Xt,Tn,Un){var Fn=null;if(Oe._appId||(Fn=Fa(Un),Fn&&Fn.appId&&(Oe._appId=Fn.appId)),(Me<200||Me>=300)&&Me!==0){if((Me===301||Me===307||Me===308)&&!pr(Pt)){Oe[dr](_t,Tn);return}!Oe[Ot][Hi]()&&go(Me)?(Na(_t),(0,K.kP)(Oe[qe](),2,40,". Response code "+Me+". Will retry to send "+_t[Vt]+" items.")):Oe[dr](_t,Tn)}else if(Pn&&!Pn[ri]()){if(!Oe[Ot][Hi]()){var Br=10;Na(_t,Br),(0,K.kP)(Oe[qe](),2,40,". Offline - Response Code: ".concat(Me,". Offline status: ").concat(!Pn.isOnline(),". Will retry to send ").concat(_t.length," items."))}}else pr(Pt),Me===206?(Fn||(Fn=Fa(Un)),Fn&&!Oe[Ot][Hi]()?Oe[Pi](_t,Fn):Oe[dr](_t,Tn)):(x=0,Oe[fi](_t,Xt))}o(Er,"_checkResponsStatus");function pr(Me){return st>=10?!1:!(0,B.le)(Me)&&Me!==""&&Me!==Oe[Ot][ut]()?(Oe[Ot][ut]=function(){return Me},++st,!0):!1}o(pr,"_checkAndUpdateEndPointUrl");function Xi(Me,_t){ln?ln(Me,!1):Di(Me,_t)}o(Xi,"_doUnloadSend");function uo(Me){var _t=(0,Ye.jW)(),Pt=Oe[ge],Xt=Oe[Ot][ut](),Tn=Oe._buffer[Si](Me),Un=new Blob([Tn],{type:"text/plain;charset=UTF-8"}),Fn=_t.sendBeacon(Xt,Un);return Fn&&(Pt[ii](Me),Oe._onSuccess(Me,Me[Vt])),Fn}o(uo,"_doBeaconSend");function Di(Me,_t){if((0,B.kJ)(Me)&&Me[Vt]>0&&!uo(Me)){for(var Pt=[],Xt=0;Xt<Me[Vt];Xt++){var Tn=Me[Xt];uo([Tn])||Pt[Yr](Tn)}Pt[Vt]>0&&(jn&&jn(Pt,!0),(0,K.kP)(Oe[qe](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}o(Di,"_beaconSender");function da(Me,_t){var Pt=new XMLHttpRequest,Xt=Oe[Ot][ut]();try{Pt[N]=!0}catch(Un){}Pt.open("POST",Xt,_t),Pt[Yi]("Content-type","application/json"),Lt(Xt)&&Pt[Yi](qn[6],qn[7]),(0,B.tO)((0,B.FY)(kt),function(Un){Pt[Yi](Un,kt[Un])}),Pt.onreadystatechange=function(){return Oe._xhrReadyStateChange(Pt,Me,Me[Vt])},Pt.onerror=function(Un){return Oe[dr](Me,fa(Pt),Un)};var Tn=Oe._buffer[Si](Me);Pt.send(Tn),Oe._buffer[ii](Me)}o(da,"_xhrSender");function fo(Me,_t){if((0,B.kJ)(Me)){for(var Pt=Me[Vt],Xt=0;Xt<Me[Vt];Xt++)Pt+=Me[Xt][Vt];nn+Pt<=ao?Xr(Me,!1):(0,Ye.MF)()?Di(Me,_t):(jn&&jn(Me,!0),(0,K.kP)(Oe[qe](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}o(fo,"_fetchKeepAliveSender");function ho(Me,_t){Xr(Me,!0)}o(ho,"_fetchSender");function Xr(Me,_t){var Pt,Xt=Oe[Ot][ut](),Tn=Oe._buffer[Si](Me),Un=new Blob([Tn],{type:"application/json"}),Fn=new Headers,Br=Tn[Vt],hi=!1,Tr=!1;Lt(Xt)&&Fn.append(qn[6],qn[7]),(0,B.tO)((0,B.FY)(kt),function(Pr){Fn.append(Pr,kt[Pr])});var Hr=(Pt={method:"POST",headers:Fn,body:Un},Pt[N]=!0,Pt);_t||(Hr.keepalive=!0,hi=!0,nn+=Br);var gi=new Request(Xt,Hr);try{gi[N]=!0}catch(Pr){}Oe._buffer[ii](Me);try{fetch(gi).then(function(Pr){_t||(nn-=Br,Br=0),Tr||(Tr=!0,Pr.ok?Pr.text().then(function(Sa){Er(Pr.status,Me,Pr.url,Me[Vt],Pr.statusText,Sa)}):Oe[dr](Me,Pr.statusText))}).catch(function(Pr){_t||(nn-=Br,Br=0),Tr||(Tr=!0,Oe[dr](Me,Pr.message))})}catch(Pr){Tr||Oe[dr](Me,(0,Ye.eU)(Pr))}hi&&!Tr&&(Tr=!0,Oe._onSuccess(Me,Me[Vt]))}o(Xr,"_doFetchSender");function Fa(Me){try{if(Me&&Me!==""){var _t=(0,Ye.xA)().parse(Me);if(_t&&_t.itemsReceived&&_t.itemsReceived>=_t[ji]&&_t.itemsReceived-_t.itemsAccepted===_t.errors[Vt])return _t}}catch(Pt){(0,K.kP)(Oe[qe](),1,43,"Cannot parse the response. "+(0,B.jj)(Pt),{response:Me})}return null}o(Fa,"_parseResponse");function Na(Me,_t){if(_t===void 0&&(_t=1),!(!Me||Me[Vt]===0)){var Pt=Oe[ge];Pt[Ir](Me),x++;for(var Xt=0,Tn=Me;Xt<Tn.length;Xt++){var Un=Tn[Xt];Pt[jr](Un)}Jr(_t),ya()}}o(Na,"_resendPayload");function Jr(Me){var _t=10,Pt;if(x<=1)Pt=_t;else{var Xt=(Math.pow(2,x)-1)/2,Tn=Math.floor(Math.random()*Xt*_t)+1;Tn=Me*Tn,Pt=Math.max(Math.min(Tn,3600),_t)}var Un=(0,B.m6)()+Pt*1e3;oe=Un}o(Jr,"_setRetryTime");function ya(){if(!Be&&!Ne){var Me=oe?Math.max(0,oe-(0,B.m6)()):0,_t=Math.max(Oe[Ot][Li](),Me);Be=setTimeout(function(){Be=null,Oe[he](!0,null,1)},_t)}}o(ya,"_setupTimer");function Oa(){clearTimeout(Be),Be=null,oe=null}o(Oa,"_clearScheduledTimer");function go(Me){return Me===401||Me===403||Me===408||Me===429||Me===500||Me===502||Me===503||Me===504}o(go,"_isRetriable");function fa(Me,_t){return Me?"XMLHttpRequest,Status:"+Me.status+",Response:"+Qr(Me)||0||0:_t}o(fa,"_formatErrorMessageXhr");function wa(Me,_t){var Pt=Oe[ge],Xt=(0,Ye.Jj)(),Tn=new XDomainRequest;Tn.onload=function(){return Oe._xdrOnLoad(Tn,Me)},Tn.onerror=function(hi){return Oe[dr](Me,aa(Tn),hi)};var Un=Xt&&Xt.location&&Xt.location.protocol||"";if(Oe[Ot][ut]().lastIndexOf(Un,0)!==0){(0,K.kP)(Oe[qe](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),Pt[wi]();return}var Fn=Oe[Ot][ut]().replace(/^(https?:)/,"");Tn.open("POST",Fn);var Br=Pt[Si](Me);Tn.send(Br),Pt[ii](Me)}o(wa,"_xdrSender");function aa(Me,_t){return Me?"XDomainRequest,Response:"+Qr(Me)||0:_t}o(aa,"_formatErrorMessageXdr");function vo(){var Me="getNotifyMgr";return Oe.core[Me]?Oe.core[Me]():Oe.core._notificationManager}o(vo,"_getNotifyMgr");function po(Me,_t){var Pt=vo();if(Pt&&Pt[qi])try{Pt[qi](Me,_t)}catch(Xt){(0,K.kP)(Oe[qe](),1,74,"send request notification failed: "+(0,B.jj)(Xt),{exception:(0,Ye.eU)(Xt)})}}o(po,"_notifySendRequest");function Fi(Me){var _t=(0,B.le)(Me[xr])?!1:Me[xr];if(_t)return!0;var Pt="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Xt=new RegExp(Pt);return Xt.test(Me[Ke])}o(Fi,"_validateInstrumentationKey");function mo(){Oe[Tt]=null,Oe[ge]=null,Oe._appId=null,Oe._sample=null,kt={},Pn=null,x=0,oe=null,Se=null,Ne=!1,Be=null,ft=null,st=0,nn=0,jn=null,ln=null,Zn=null}o(mo,"_initDefaults")}),_}return o(g,"Sender"),g.constructEnvelope=function(_,x,oe,Se){var Ne;x!==_.iKey&&!(0,B.le)(x)?Ne=(0,v.uc)((0,v.uc)({},_),{iKey:x}):Ne=_;var Be=oo[Ne.baseType]||ma;return Be(oe,Ne,Se)},g}(qt.i),so=";",lo="=";function Pa(S){if(!S)return{};var g=S[j](so),_=(0,B.Xz)(g,function(oe,Se){var Ne=Se[j](lo);if(Ne[Q]===2){var Be=Ne[0][Ee](),ft=Ne[1];oe[Be]=ft}return oe},{});if((0,B.FY)(_)[Q]>0){if(_.endpointsuffix){var x=_.location?_.location+".":"";_[z]=_[z]||"https://"+x+"dc."+_.endpointsuffix}_[z]=_[z]||H}return _}o(Pa,"parseConnectionString");var fl={parse:Pa},La=C(5121),xa="instrumentationKey",ze="connectionString",Ki="diagnosticLogInterval",ka=C(7310),co=(0,Lr.By)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Ai=function(){function S(g){var _=new La.F;((0,B.le)(g)||(0,B.le)(g[xa])&&(0,B.le)(g[ze]))&&(0,B._y)("Invalid input configuration"),(0,R.Z)(S,this,function(x){if(g[ze]){var oe=Pa(g[ze]),Se=oe.ingestionendpoint;g.endpointUrl=Se?Se+E:g.endpointUrl,g[xa]=oe.instrumentationkey||g[xa]}x.config=g,Ne(),x.initialize=Ne,x.getSKUDefaults=function(){x.config[Ki]=x.config[Ki]&&x.config[Ki]>0?x.config[Ki]:1e4},x.getSKUDefaults(),(0,B.Vb)(x,_,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb"]);function Ne(){_.initialize(x.config,[new Ia]),_.pollInternalLogs()}o(Ne,"_initialize")})}return o(S,"ApplicationInsights"),S.__ieDyn=1,S}()},1679:(ot,l,C)=>{"use strict";C.d(l,{Z:()=>wt});/*!
 * Microsoft Dynamic Proto Utility, 1.1.9
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var R,v="undefined",P="constructor",y="prototype",W="function",N="_dynInstFuncs",m="_isDynProxy",w="_dynClass",O="_dynCls$",H="_dynInstChk",E=H,$="_dfOpts",F="_unknown_",j="__proto__",Q="_dyn"+j,Ee="__dynProto$Gbl",z="_dynInstProto",ee="useBaseInst",te="setInstFuncs",T=Object,q=T.getPrototypeOf,k=T.getOwnPropertyNames;function le(){var L;return typeof globalThis!==v&&(L=globalThis),!L&&typeof self!==v&&(L=self),!L&&typeof window!==v&&(L=window),!L&&typeof C.g!==v&&(L=C.g),L||{}}o(le,"_getGlobal");var V=le(),fe=V[Ee]||(V[Ee]={o:(R={},R[te]=!0,R[ee]=!0,R),n:1e3});function De(L,U){return L&&T[y].hasOwnProperty.call(L,U)}o(De,"_hasOwnProperty");function Fe(L){return L&&(L===T[y]||L===Array[y])}o(Fe,"_isObjectOrArrayPrototype");function ae(L){return Fe(L)||L===Function[y]}o(ae,"_isObjectArrayOrFunctionPrototype");function we(L){var U;if(L){if(q)return q(L);var re=L[j]||L[y]||(L[P]?L[P][y]:null);U=L[Q]||re,De(L,Q)||(delete L[z],U=L[Q]=L[z]||L[Q],L[z]=re)}return U}o(we,"_getObjProto");function D(L,U){var re=[];if(k)re=k(L);else for(var de in L)typeof de=="string"&&De(L,de)&&re.push(de);if(re&&re.length>0)for(var He=0;He<re.length;He++)U(re[He])}o(D,"_forEachProp");function Je(L,U,re){return U!==P&&typeof L[U]===W&&(re||De(L,U))}o(Je,"_isDynamicCandidate");function ye(L){throw new TypeError("DynamicProto: "+L)}o(ye,"_throwTypeError");function ve(L){var U={};return D(L,function(re){!U[re]&&Je(L,re,!1)&&(U[re]=L[re])}),U}o(ve,"_getInstanceFuncs");function G(L,U){for(var re=L.length-1;re>=0;re--)if(L[re]===U)return!0;return!1}o(G,"_hasVisited");function se(L,U,re,de){function He(Te,Ve,me){var Le=Ve[me];if(Le[m]&&de){var Ze=Te[N]||{};Ze[E]!==!1&&(Le=(Ze[Ve[w]]||{})[me]||Le)}return function(){return Le.apply(Te,arguments)}}o(He,"_instFuncProxy");var Ie={};D(re,function(Te){Ie[Te]=He(U,re,Te)});for(var ce=we(L),Ce=[];ce&&!ae(ce)&&!G(Ce,ce);)D(ce,function(Te){!Ie[Te]&&Je(ce,Te,!q)&&(Ie[Te]=He(U,ce,Te))}),Ce.push(ce),ce=we(ce);return Ie}o(se,"_getBaseFuncs");function Re(L,U,re,de){var He=null;if(L&&De(re,w)){var Ie=L[N]||{};if(He=(Ie[re[w]]||{})[U],He||ye("Missing ["+U+"] "+W),!He[H]&&Ie[E]!==!1){for(var ce=!De(L,U),Ce=we(L),Te=[];ce&&Ce&&!ae(Ce)&&!G(Te,Ce);){var Ve=Ce[U];if(Ve){ce=Ve===de;break}Te.push(Ce),Ce=we(Ce)}try{ce&&(L[U]=He),He[H]=1}catch(me){Ie[E]=!1}}}return He}o(Re,"_getInstFunc");function Ge(L,U,re){var de=U[L];return de===re&&(de=we(U)[L]),typeof de!==W&&ye("["+L+"] is not a "+W),de}o(Ge,"_getProtoFunc");function ie(L,U,re,de,He){function Ie(Te,Ve){var me=o(function(){var Le=Re(this,Ve,Te,me)||Ge(Ve,Te,me);return Le.apply(this,arguments)},"dynProtoProxy");return me[m]=1,me}if(o(Ie,"_createDynamicPrototype"),!Fe(L)){var ce=re[N]=re[N]||{},Ce=ce[U]=ce[U]||{};ce[E]!==!1&&(ce[E]=!!He),D(re,function(Te){Je(re,Te,!1)&&re[Te]!==de[Te]&&(Ce[Te]=re[Te],delete re[Te],(!De(L,Te)||L[Te]&&!L[Te][m])&&(L[Te]=Ie(L,Te)))})}}o(ie,"_populatePrototype");function Xe(L,U){if(q){for(var re=[],de=we(U);de&&!ae(de)&&!G(re,de);){if(de===L)return!0;re.push(de),de=we(de)}return!1}return!0}o(Xe,"_checkPrototype");function lt(L,U){return De(L,y)?L.name||U||F:((L||{})[P]||{}).name||U||F}o(lt,"_getObjName");function wt(L,U,re,de){De(L,y)||ye("theClass is an invalid class definition.");var He=L[y];Xe(He,U)||ye("["+lt(L)+"] not in hierarchy of ["+lt(U)+"]");var Ie=null;De(He,w)?Ie=He[w]:(Ie=O+lt(L,"_")+"$"+fe.n,fe.n++,He[w]=Ie);var ce=wt[$],Ce=!!ce[ee];Ce&&de&&de[ee]!==void 0&&(Ce=!!de[ee]);var Te=ve(U),Ve=se(He,U,Te,Ce);re(U,Ve);var me=!!q&&!!ce[te];me&&de&&(me=!!de[te]),ie(He,Ie,U,Te,me!==!1)}o(wt,"dynamicProto"),wt[$]=fe.o},6232:(ot,l,C)=>{"use strict";const R=C(8641),v=C(8692),P=C(1474),y=C(5870),W=o((N,m={})=>{let w=[];if(Array.isArray(N))for(let O of N){let H=W.create(O,m);Array.isArray(H)?w.push(...H):w.push(H)}else w=[].concat(W.create(N,m));return m&&m.expand===!0&&m.nodupes===!0&&(w=[...new Set(w)]),w},"braces");W.parse=(N,m={})=>y(N,m),W.stringify=(N,m={})=>R(typeof N=="string"?W.parse(N,m):N,m),W.compile=(N,m={})=>(typeof N=="string"&&(N=W.parse(N,m)),v(N,m)),W.expand=(N,m={})=>{typeof N=="string"&&(N=W.parse(N,m));let w=P(N,m);return m.noempty===!0&&(w=w.filter(Boolean)),m.nodupes===!0&&(w=[...new Set(w)]),w},W.create=(N,m={})=>N===""||N.length<3?[N]:m.expand!==!0?W.compile(N,m):W.expand(N,m),ot.exports=W},8692:(ot,l,C)=>{"use strict";const R=C(1516),v=C(3596),P=o((y,W={})=>{let N=o((m,w={})=>{let O=v.isInvalidBrace(w),H=m.invalid===!0&&W.escapeInvalid===!0,E=O===!0||H===!0,$=W.escapeInvalid===!0?"\\":"",F="";if(m.isOpen===!0||m.isClose===!0)return $+m.value;if(m.type==="open")return E?$+m.value:"(";if(m.type==="close")return E?$+m.value:")";if(m.type==="comma")return m.prev.type==="comma"?"":E?m.value:"|";if(m.value)return m.value;if(m.nodes&&m.ranges>0){let j=v.reduce(m.nodes),Q=R(...j,{...W,wrap:!1,toRegex:!0});if(Q.length!==0)return j.length>1&&Q.length>1?`(${Q})`:Q}if(m.nodes)for(let j of m.nodes)F+=N(j,m);return F},"walk");return N(y)},"compile");ot.exports=P},7007:ot=>{"use strict";ot.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}},1474:(ot,l,C)=>{"use strict";const R=C(1516),v=C(8641),P=C(3596),y=o((N="",m="",w=!1)=>{let O=[];if(N=[].concat(N),m=[].concat(m),!m.length)return N;if(!N.length)return w?P.flatten(m).map(H=>`{${H}}`):m;for(let H of N)if(Array.isArray(H))for(let E of H)O.push(y(E,m,w));else for(let E of m)w===!0&&typeof E=="string"&&(E=`{${E}}`),O.push(Array.isArray(E)?y(H,E,w):H+E);return P.flatten(O)},"append"),W=o((N,m={})=>{let w=m.rangeLimit===void 0?1e3:m.rangeLimit,O=o((H,E={})=>{H.queue=[];let $=E,F=E.queue;for(;$.type!=="brace"&&$.type!=="root"&&$.parent;)$=$.parent,F=$.queue;if(H.invalid||H.dollar){F.push(y(F.pop(),v(H,m)));return}if(H.type==="brace"&&H.invalid!==!0&&H.nodes.length===2){F.push(y(F.pop(),["{}"]));return}if(H.nodes&&H.ranges>0){let z=P.reduce(H.nodes);if(P.exceedsLimit(...z,m.step,w))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let ee=R(...z,m);ee.length===0&&(ee=v(H,m)),F.push(y(F.pop(),ee)),H.nodes=[];return}let j=P.encloseBrace(H),Q=H.queue,Ee=H;for(;Ee.type!=="brace"&&Ee.type!=="root"&&Ee.parent;)Ee=Ee.parent,Q=Ee.queue;for(let z=0;z<H.nodes.length;z++){let ee=H.nodes[z];if(ee.type==="comma"&&H.type==="brace"){z===1&&Q.push(""),Q.push("");continue}if(ee.type==="close"){F.push(y(F.pop(),Q,j));continue}if(ee.value&&ee.type!=="open"){Q.push(y(Q.pop(),ee.value));continue}ee.nodes&&O(ee,H)}return Q},"walk");return P.flatten(O(N))},"expand");ot.exports=W},5870:(ot,l,C)=>{"use strict";const R=C(8641),{MAX_LENGTH:v,CHAR_BACKSLASH:P,CHAR_BACKTICK:y,CHAR_COMMA:W,CHAR_DOT:N,CHAR_LEFT_PARENTHESES:m,CHAR_RIGHT_PARENTHESES:w,CHAR_LEFT_CURLY_BRACE:O,CHAR_RIGHT_CURLY_BRACE:H,CHAR_LEFT_SQUARE_BRACKET:E,CHAR_RIGHT_SQUARE_BRACKET:$,CHAR_DOUBLE_QUOTE:F,CHAR_SINGLE_QUOTE:j,CHAR_NO_BREAK_SPACE:Q,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Ee}=C(7007),z=o((ee,te={})=>{if(typeof ee!="string")throw new TypeError("Expected a string");let T=te||{},q=typeof T.maxLength=="number"?Math.min(v,T.maxLength):v;if(ee.length>q)throw new SyntaxError(`Input length (${ee.length}), exceeds max characters (${q})`);let k={type:"root",input:ee,nodes:[]},le=[k],V=k,fe=k,De=0,Fe=ee.length,ae=0,we=0,D,Je={};const ye=o(()=>ee[ae++],"advance"),ve=o(G=>{if(G.type==="text"&&fe.type==="dot"&&(fe.type="text"),fe&&fe.type==="text"&&G.type==="text"){fe.value+=G.value;return}return V.nodes.push(G),G.parent=V,G.prev=fe,fe=G,G},"push");for(ve({type:"bos"});ae<Fe;)if(V=le[le.length-1],D=ye(),!(D===Ee||D===Q)){if(D===P){ve({type:"text",value:(te.keepEscaping?D:"")+ye()});continue}if(D===$){ve({type:"text",value:"\\"+D});continue}if(D===E){De++;let G=!0,se;for(;ae<Fe&&(se=ye());){if(D+=se,se===E){De++;continue}if(se===P){D+=ye();continue}if(se===$&&(De--,De===0))break}ve({type:"text",value:D});continue}if(D===m){V=ve({type:"paren",nodes:[]}),le.push(V),ve({type:"text",value:D});continue}if(D===w){if(V.type!=="paren"){ve({type:"text",value:D});continue}V=le.pop(),ve({type:"text",value:D}),V=le[le.length-1];continue}if(D===F||D===j||D===y){let G=D,se;for(te.keepQuotes!==!0&&(D="");ae<Fe&&(se=ye());){if(se===P){D+=se+ye();continue}if(se===G){te.keepQuotes===!0&&(D+=se);break}D+=se}ve({type:"text",value:D});continue}if(D===O){we++;let G=fe.value&&fe.value.slice(-1)==="$"||V.dollar===!0;V=ve({type:"brace",open:!0,close:!1,dollar:G,depth:we,commas:0,ranges:0,nodes:[]}),le.push(V),ve({type:"open",value:D});continue}if(D===H){if(V.type!=="brace"){ve({type:"text",value:D});continue}let G="close";V=le.pop(),V.close=!0,ve({type:G,value:D}),we--,V=le[le.length-1];continue}if(D===W&&we>0){if(V.ranges>0){V.ranges=0;let G=V.nodes.shift();V.nodes=[G,{type:"text",value:R(V)}]}ve({type:"comma",value:D}),V.commas++;continue}if(D===N&&we>0&&V.commas===0){let G=V.nodes;if(we===0||G.length===0){ve({type:"text",value:D});continue}if(fe.type==="dot"){if(V.range=[],fe.value+=D,fe.type="range",V.nodes.length!==3&&V.nodes.length!==5){V.invalid=!0,V.ranges=0,fe.type="text";continue}V.ranges++,V.args=[];continue}if(fe.type==="range"){G.pop();let se=G[G.length-1];se.value+=fe.value+D,fe=se,V.ranges--;continue}ve({type:"dot",value:D});continue}ve({type:"text",value:D})}do if(V=le.pop(),V.type!=="root"){V.nodes.forEach(Re=>{Re.nodes||(Re.type==="open"&&(Re.isOpen=!0),Re.type==="close"&&(Re.isClose=!0),Re.nodes||(Re.type="text"),Re.invalid=!0)});let G=le[le.length-1],se=G.nodes.indexOf(V);G.nodes.splice(se,1,...V.nodes)}while(le.length>0);return ve({type:"eos"}),k},"parse");ot.exports=z},8641:(ot,l,C)=>{"use strict";const R=C(3596);ot.exports=(v,P={})=>{let y=o((W,N={})=>{let m=P.escapeInvalid&&R.isInvalidBrace(N),w=W.invalid===!0&&P.escapeInvalid===!0,O="";if(W.value)return(m||w)&&R.isOpenOrClose(W)?"\\"+W.value:W.value;if(W.value)return W.value;if(W.nodes)for(let H of W.nodes)O+=y(H);return O},"stringify");return y(v)}},3596:(ot,l)=>{"use strict";l.isInteger=C=>typeof C=="number"?Number.isInteger(C):typeof C=="string"&&C.trim()!==""?Number.isInteger(Number(C)):!1,l.find=(C,R)=>C.nodes.find(v=>v.type===R),l.exceedsLimit=(C,R,v=1,P)=>P===!1||!l.isInteger(C)||!l.isInteger(R)?!1:(Number(R)-Number(C))/Number(v)>=P,l.escapeNode=(C,R=0,v)=>{let P=C.nodes[R];!P||(v&&P.type===v||P.type==="open"||P.type==="close")&&P.escaped!==!0&&(P.value="\\"+P.value,P.escaped=!0)},l.encloseBrace=C=>C.type!=="brace"?!1:C.commas>>0+C.ranges>>0==0?(C.invalid=!0,!0):!1,l.isInvalidBrace=C=>C.type!=="brace"?!1:C.invalid===!0||C.dollar?!0:C.commas>>0+C.ranges>>0==0||C.open!==!0||C.close!==!0?(C.invalid=!0,!0):!1,l.isOpenOrClose=C=>C.type==="open"||C.type==="close"?!0:C.open===!0||C.close===!0,l.reduce=C=>C.reduce((R,v)=>(v.type==="text"&&R.push(v.value),v.type==="range"&&(v.type="text"),R),[]),l.flatten=(...C)=>{const R=[],v=o(P=>{for(let y=0;y<P.length;y++){let W=P[y];Array.isArray(W)?v(W,R):W!==void 0&&R.push(W)}return R},"flat");return v(C),R}},1516:(ot,l,C)=>{"use strict";/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const R=C(6529),v=C(2999),P=o(T=>T!==null&&typeof T=="object"&&!Array.isArray(T),"isObject"),y=o(T=>q=>T===!0?Number(q):String(q),"transform"),W=o(T=>typeof T=="number"||typeof T=="string"&&T!=="","isValidValue"),N=o(T=>Number.isInteger(+T),"isNumber"),m=o(T=>{let q=`${T}`,k=-1;if(q[0]==="-"&&(q=q.slice(1)),q==="0")return!1;for(;q[++k]==="0";);return k>0},"zeros"),w=o((T,q,k)=>typeof T=="string"||typeof q=="string"?!0:k.stringify===!0,"stringify"),O=o((T,q,k)=>{if(q>0){let le=T[0]==="-"?"-":"";le&&(T=T.slice(1)),T=le+T.padStart(le?q-1:q,"0")}return k===!1?String(T):T},"pad"),H=o((T,q)=>{let k=T[0]==="-"?"-":"";for(k&&(T=T.slice(1),q--);T.length<q;)T="0"+T;return k?"-"+T:T},"toMaxLen"),E=o((T,q)=>{T.negatives.sort((De,Fe)=>De<Fe?-1:De>Fe?1:0),T.positives.sort((De,Fe)=>De<Fe?-1:De>Fe?1:0);let k=q.capture?"":"?:",le="",V="",fe;return T.positives.length&&(le=T.positives.join("|")),T.negatives.length&&(V=`-(${k}${T.negatives.join("|")})`),le&&V?fe=`${le}|${V}`:fe=le||V,q.wrap?`(${k}${fe})`:fe},"toSequence"),$=o((T,q,k,le)=>{if(k)return v(T,q,{wrap:!1,...le});let V=String.fromCharCode(T);if(T===q)return V;let fe=String.fromCharCode(q);return`[${V}-${fe}]`},"toRange"),F=o((T,q,k)=>{if(Array.isArray(T)){let le=k.wrap===!0,V=k.capture?"":"?:";return le?`(${V}${T.join("|")})`:T.join("|")}return v(T,q,k)},"toRegex"),j=o((...T)=>new RangeError("Invalid range arguments: "+R.inspect(...T)),"rangeError"),Q=o((T,q,k)=>{if(k.strictRanges===!0)throw j([T,q]);return[]},"invalidRange"),Ee=o((T,q)=>{if(q.strictRanges===!0)throw new TypeError(`Expected step "${T}" to be a number`);return[]},"invalidStep"),z=o((T,q,k=1,le={})=>{let V=Number(T),fe=Number(q);if(!Number.isInteger(V)||!Number.isInteger(fe)){if(le.strictRanges===!0)throw j([T,q]);return[]}V===0&&(V=0),fe===0&&(fe=0);let De=V>fe,Fe=String(T),ae=String(q),we=String(k);k=Math.max(Math.abs(k),1);let D=m(Fe)||m(ae)||m(we),Je=D?Math.max(Fe.length,ae.length,we.length):0,ye=D===!1&&w(T,q,le)===!1,ve=le.transform||y(ye);if(le.toRegex&&k===1)return $(H(T,Je),H(q,Je),!0,le);let G={negatives:[],positives:[]},se=o(ie=>G[ie<0?"negatives":"positives"].push(Math.abs(ie)),"push"),Re=[],Ge=0;for(;De?V>=fe:V<=fe;)le.toRegex===!0&&k>1?se(V):Re.push(O(ve(V,Ge),Je,ye)),V=De?V-k:V+k,Ge++;return le.toRegex===!0?k>1?E(G,le):F(Re,null,{wrap:!1,...le}):Re},"fillNumbers"),ee=o((T,q,k=1,le={})=>{if(!N(T)&&T.length>1||!N(q)&&q.length>1)return Q(T,q,le);let V=le.transform||(ye=>String.fromCharCode(ye)),fe=`${T}`.charCodeAt(0),De=`${q}`.charCodeAt(0),Fe=fe>De,ae=Math.min(fe,De),we=Math.max(fe,De);if(le.toRegex&&k===1)return $(ae,we,!1,le);let D=[],Je=0;for(;Fe?fe>=De:fe<=De;)D.push(V(fe,Je)),fe=Fe?fe-k:fe+k,Je++;return le.toRegex===!0?F(D,null,{wrap:!1,options:le}):D},"fillLetters"),te=o((T,q,k,le={})=>{if(q==null&&W(T))return[T];if(!W(T)||!W(q))return Q(T,q,le);if(typeof k=="function")return te(T,q,1,{transform:k});if(P(k))return te(T,q,0,k);let V={...le};return V.capture===!0&&(V.wrap=!0),k=k||V.step||1,N(k)?N(T)&&N(q)?z(T,q,k,V):ee(T,q,Math.max(Math.abs(k),1),V):k!=null&&!P(k)?Ee(k,V):te(T,q,1,k)},"fill");ot.exports=te},3338:ot=>{"use strict";/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */ot.exports=function(l){return typeof l=="number"?l-l==0:typeof l=="string"&&l.trim()!==""?Number.isFinite?Number.isFinite(+l):isFinite(+l):!1}},5179:(ot,l,C)=>{ot=C.nmd(ot);var R=200,v="__lodash_hash_undefined__",P=1,y=2,W=9007199254740991,N="[object Arguments]",m="[object Array]",w="[object AsyncFunction]",O="[object Boolean]",H="[object Date]",E="[object Error]",$="[object Function]",F="[object GeneratorFunction]",j="[object Map]",Q="[object Number]",Ee="[object Null]",z="[object Object]",ee="[object Promise]",te="[object Proxy]",T="[object RegExp]",q="[object Set]",k="[object String]",le="[object Symbol]",V="[object Undefined]",fe="[object WeakMap]",De="[object ArrayBuffer]",Fe="[object DataView]",ae="[object Float32Array]",we="[object Float64Array]",D="[object Int8Array]",Je="[object Int16Array]",ye="[object Int32Array]",ve="[object Uint8Array]",G="[object Uint8ClampedArray]",se="[object Uint16Array]",Re="[object Uint32Array]",Ge=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,Xe=/^(?:0|[1-9]\d*)$/,lt={};lt[ae]=lt[we]=lt[D]=lt[Je]=lt[ye]=lt[ve]=lt[G]=lt[se]=lt[Re]=!0,lt[N]=lt[m]=lt[De]=lt[O]=lt[Fe]=lt[H]=lt[E]=lt[$]=lt[j]=lt[Q]=lt[z]=lt[T]=lt[q]=lt[k]=lt[fe]=!1;var wt=typeof C.g=="object"&&C.g&&C.g.Object===Object&&C.g,L=typeof self=="object"&&self&&self.Object===Object&&self,U=wt||L||Function("return this")(),re=l&&!l.nodeType&&l,de=re&&!0&&ot&&!ot.nodeType&&ot,He=de&&de.exports===re,Ie=He&&wt.process,ce=function(){try{return Ie&&Ie.binding&&Ie.binding("util")}catch(I){}}(),Ce=ce&&ce.isTypedArray;function Te(I,Y){for(var We=-1,tt=I==null?0:I.length,Rt=0,Nt=[];++We<tt;){var vn=I[We];Y(vn,We,I)&&(Nt[Rt++]=vn)}return Nt}o(Te,"arrayFilter");function Ve(I,Y){for(var We=-1,tt=Y.length,Rt=I.length;++We<tt;)I[Rt+We]=Y[We];return I}o(Ve,"arrayPush");function me(I,Y){for(var We=-1,tt=I==null?0:I.length;++We<tt;)if(Y(I[We],We,I))return!0;return!1}o(me,"arraySome");function Le(I,Y){for(var We=-1,tt=Array(I);++We<I;)tt[We]=Y(We);return tt}o(Le,"baseTimes");function Ze(I){return function(Y){return I(Y)}}o(Ze,"baseUnary");function nt(I,Y){return I.has(Y)}o(nt,"cacheHas");function be(I,Y){return I==null?void 0:I[Y]}o(be,"getValue");function B(I){var Y=-1,We=Array(I.size);return I.forEach(function(tt,Rt){We[++Y]=[Rt,tt]}),We}o(B,"mapToArray");function K(I,Y){return function(We){return I(Y(We))}}o(K,"overArg");function Ye(I){var Y=-1,We=Array(I.size);return I.forEach(function(tt){We[++Y]=tt}),We}o(Ye,"setToArray");var jt=Array.prototype,An=Function.prototype,Mn=Object.prototype,Cn=U["__core-js_shared__"],lr=An.toString,ar=Mn.hasOwnProperty,mr=function(){var I=/[^.]+$/.exec(Cn&&Cn.keys&&Cn.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),cr=Mn.toString,yr=RegExp("^"+lr.call(ar).replace(Ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=He?U.Buffer:void 0,zt=U.Symbol,an=U.Uint8Array,on=Mn.propertyIsEnumerable,Yt=jt.splice,_n=zt?zt.toStringTag:void 0,zn=Object.getOwnPropertySymbols,vr=dt?dt.isBuffer:void 0,er=K(Object.keys,Object),Ar=ti(U,"DataView"),Ur=ti(U,"Map"),Sr=ti(U,"Promise"),Dr=ti(U,"Set"),Fr=ti(U,"WeakMap"),Ln=ti(Object,"create"),Nn=Lt(Ar),Cr=Lt(Ur),Wr=Lt(Sr),Rr=Lt(Dr),vi=Lt(Fr),br=zt?zt.prototype:void 0,M=br?br.valueOf:void 0;function ue(I){var Y=-1,We=I==null?0:I.length;for(this.clear();++Y<We;){var tt=I[Y];this.set(tt[0],tt[1])}}o(ue,"Hash");function Ae(){this.__data__=Ln?Ln(null):{},this.size=0}o(Ae,"hashClear");function Pe(I){var Y=this.has(I)&&delete this.__data__[I];return this.size-=Y?1:0,Y}o(Pe,"hashDelete");function et(I){var Y=this.__data__;if(Ln){var We=Y[I];return We===v?void 0:We}return ar.call(Y,I)?Y[I]:void 0}o(et,"hashGet");function je(I){var Y=this.__data__;return Ln?Y[I]!==void 0:ar.call(Y,I)}o(je,"hashHas");function ct(I,Y){var We=this.__data__;return this.size+=this.has(I)?0:1,We[I]=Ln&&Y===void 0?v:Y,this}o(ct,"hashSet"),ue.prototype.clear=Ae,ue.prototype.delete=Pe,ue.prototype.get=et,ue.prototype.has=je,ue.prototype.set=ct;function Et(I){var Y=-1,We=I==null?0:I.length;for(this.clear();++Y<We;){var tt=I[Y];this.set(tt[0],tt[1])}}o(Et,"ListCache");function Dt(){this.__data__=[],this.size=0}o(Dt,"listCacheClear");function bt(I){var Y=this.__data__,We=kn(Y,I);if(We<0)return!1;var tt=Y.length-1;return We==tt?Y.pop():Yt.call(Y,We,1),--this.size,!0}o(bt,"listCacheDelete");function Ct(I){var Y=this.__data__,We=kn(Y,I);return We<0?void 0:Y[We][1]}o(Ct,"listCacheGet");function Bt(I){return kn(this.__data__,I)>-1}o(Bt,"listCacheHas");function xt(I,Y){var We=this.__data__,tt=kn(We,I);return tt<0?(++this.size,We.push([I,Y])):We[tt][1]=Y,this}o(xt,"listCacheSet"),Et.prototype.clear=Dt,Et.prototype.delete=bt,Et.prototype.get=Ct,Et.prototype.has=Bt,Et.prototype.set=xt;function Wt(I){var Y=-1,We=I==null?0:I.length;for(this.clear();++Y<We;){var tt=I[Y];this.set(tt[0],tt[1])}}o(Wt,"MapCache");function Ft(){this.size=0,this.__data__={hash:new ue,map:new(Ur||Et),string:new ue}}o(Ft,"mapCacheClear");function Wn(I){var Y=ei(this,I).delete(I);return this.size-=Y?1:0,Y}o(Wn,"mapCacheDelete");function bn(I){return ei(this,I).get(I)}o(bn,"mapCacheGet");function ur(I){return ei(this,I).has(I)}o(ur,"mapCacheHas");function ir(I,Y){var We=ei(this,I),tt=We.size;return We.set(I,Y),this.size+=We.size==tt?0:1,this}o(ir,"mapCacheSet"),Wt.prototype.clear=Ft,Wt.prototype.delete=Wn,Wt.prototype.get=bn,Wt.prototype.has=ur,Wt.prototype.set=ir;function or(I){var Y=-1,We=I==null?0:I.length;for(this.__data__=new Wt;++Y<We;)this.add(I[Y])}o(or,"SetCache");function $r(I){return this.__data__.set(I,v),this}o($r,"setCacheAdd");function Lr(I){return this.__data__.has(I)}o(Lr,"setCacheHas"),or.prototype.add=or.prototype.push=$r,or.prototype.has=Lr;function qn(I){var Y=this.__data__=new Et(I);this.size=Y.size}o(qn,"Stack");function pi(){this.__data__=new Et,this.size=0}o(pi,"stackClear");function Jt(I){var Y=this.__data__,We=Y.delete(I);return this.size=Y.size,We}o(Jt,"stackDelete");function Jn(I){return this.__data__.get(I)}o(Jn,"stackGet");function xn(I){return this.__data__.has(I)}o(xn,"stackHas");function en(I,Y){var We=this.__data__;if(We instanceof Et){var tt=We.__data__;if(!Ur||tt.length<R-1)return tt.push([I,Y]),this.size=++We.size,this;We=this.__data__=new Wt(tt)}return We.set(I,Y),this.size=We.size,this}o(en,"stackSet"),qn.prototype.clear=pi,qn.prototype.delete=Jt,qn.prototype.get=Jn,qn.prototype.has=xn,qn.prototype.set=en;function $n(I,Y){var We=Zt(I),tt=!We&&St(I),Rt=!We&&!tt&&fn(I),Nt=!We&&!tt&&!Rt&&qt(I),vn=We||tt||Rt||Nt,pn=vn?Le(I.length,String):[],$t=pn.length;for(var hn in I)(Y||ar.call(I,hn))&&!(vn&&(hn=="length"||Rt&&(hn=="offset"||hn=="parent")||Nt&&(hn=="buffer"||hn=="byteLength"||hn=="byteOffset")||Vi(hn,$t)))&&pn.push(hn);return pn}o($n,"arrayLikeKeys");function kn(I,Y){for(var We=I.length;We--;)if(Gt(I[We][0],Y))return We;return-1}o(kn,"assocIndexOf");function wr(I,Y,We){var tt=Y(I);return Zt(I)?tt:Ve(tt,We(I))}o(wr,"baseGetAllKeys");function Kr(I){return I==null?I===void 0?V:Ee:_n&&_n in Object(I)?sa(I):it(I)}o(Kr,"baseGetTag");function mi(I){return Hn(I)&&Kr(I)==N}o(mi,"baseIsArguments");function yi(I,Y,We,tt,Rt){return I===Y?!0:I==null||Y==null||!Hn(I)&&!Hn(Y)?I!==I&&Y!==Y:si(I,Y,We,tt,yi,Rt)}o(yi,"baseIsEqual");function si(I,Y,We,tt,Rt,Nt){var vn=Zt(I),pn=Zt(Y),$t=vn?m:ni(I),hn=pn?m:ni(Y);$t=$t==N?z:$t,hn=hn==N?z:hn;var yn=$t==z,Ht=hn==z,pt=$t==hn;if(pt&&fn(I)){if(!fn(Y))return!1;vn=!0,yn=!1}if(pt&&!yn)return Nt||(Nt=new qn),vn||qt(I)?ra(I,Y,We,tt,Rt,Nt):Ii(I,Y,$t,We,tt,Rt,Nt);if(!(We&P)){var On=yn&&ar.call(I,"__wrapped__"),Dn=Ht&&ar.call(Y,"__wrapped__");if(On||Dn){var wn=On?I.value():I,sr=Dn?Y.value():Y;return Nt||(Nt=new qn),Rt(wn,sr,We,tt,Nt)}}return pt?(Nt||(Nt=new qn),ia(I,Y,We,tt,Rt,Nt)):!1}o(si,"baseIsEqualDeep");function Gr(I){if(!tr(I)||rt(I))return!1;var Y=Kn(I)?yr:ie;return Y.test(Lt(I))}o(Gr,"baseIsNative");function na(I){return Hn(I)&&Qn(I.length)&&!!lt[Kr(I)]}o(na,"baseIsTypedArray");function Mi(I){if(!vt(I))return er(I);var Y=[];for(var We in Object(I))ar.call(I,We)&&We!="constructor"&&Y.push(We);return Y}o(Mi,"baseKeys");function ra(I,Y,We,tt,Rt,Nt){var vn=We&P,pn=I.length,$t=Y.length;if(pn!=$t&&!(vn&&$t>pn))return!1;var hn=Nt.get(I);if(hn&&Nt.get(Y))return hn==Y;var yn=-1,Ht=!0,pt=We&y?new or:void 0;for(Nt.set(I,Y),Nt.set(Y,I);++yn<pn;){var On=I[yn],Dn=Y[yn];if(tt)var wn=vn?tt(Dn,On,yn,Y,I,Nt):tt(On,Dn,yn,I,Y,Nt);if(wn!==void 0){if(wn)continue;Ht=!1;break}if(pt){if(!me(Y,function(sr,Vt){if(!nt(pt,Vt)&&(On===sr||Rt(On,sr,We,tt,Nt)))return pt.push(Vt)})){Ht=!1;break}}else if(!(On===Dn||Rt(On,Dn,We,tt,Nt))){Ht=!1;break}}return Nt.delete(I),Nt.delete(Y),Ht}o(ra,"equalArrays");function Ii(I,Y,We,tt,Rt,Nt,vn){switch(We){case Fe:if(I.byteLength!=Y.byteLength||I.byteOffset!=Y.byteOffset)return!1;I=I.buffer,Y=Y.buffer;case De:return!(I.byteLength!=Y.byteLength||!Nt(new an(I),new an(Y)));case O:case H:case Q:return Gt(+I,+Y);case E:return I.name==Y.name&&I.message==Y.message;case T:case k:return I==Y+"";case j:var pn=B;case q:var $t=tt&P;if(pn||(pn=Ye),I.size!=Y.size&&!$t)return!1;var hn=vn.get(I);if(hn)return hn==Y;tt|=y,vn.set(I,Y);var yn=ra(pn(I),pn(Y),tt,Rt,Nt,vn);return vn.delete(I),yn;case le:if(M)return M.call(I)==M.call(Y)}return!1}o(Ii,"equalByTag");function ia(I,Y,We,tt,Rt,Nt){var vn=We&P,pn=Zr(I),$t=pn.length,hn=Zr(Y),yn=hn.length;if($t!=yn&&!vn)return!1;for(var Ht=$t;Ht--;){var pt=pn[Ht];if(!(vn?pt in Y:ar.call(Y,pt)))return!1}var On=Nt.get(I);if(On&&Nt.get(Y))return On==Y;var Dn=!0;Nt.set(I,Y),Nt.set(Y,I);for(var wn=vn;++Ht<$t;){pt=pn[Ht];var sr=I[pt],Vt=Y[pt];if(tt)var Nr=vn?tt(Vt,sr,pt,Y,I,Nt):tt(sr,Vt,pt,I,Y,Nt);if(!(Nr===void 0?sr===Vt||Rt(sr,Vt,We,tt,Nt):Nr)){Dn=!1;break}wn||(wn=pt=="constructor")}if(Dn&&!wn){var _r=I.constructor,dn=Y.constructor;_r!=dn&&"constructor"in I&&"constructor"in Y&&!(typeof _r=="function"&&_r instanceof _r&&typeof dn=="function"&&dn instanceof dn)&&(Dn=!1)}return Nt.delete(I),Nt.delete(Y),Dn}o(ia,"equalObjects");function Zr(I){return wr(I,sn,Oi)}o(Zr,"getAllKeys");function ei(I,Y){var We=I.__data__;return ke(Y)?We[typeof Y=="string"?"string":"hash"]:We.map}o(ei,"getMapData");function ti(I,Y){var We=be(I,Y);return Gr(We)?We:void 0}o(ti,"getNative");function sa(I){var Y=ar.call(I,_n),We=I[_n];try{I[_n]=void 0;var tt=!0}catch(Nt){}var Rt=cr.call(I);return tt&&(Y?I[_n]=We:delete I[_n]),Rt}o(sa,"getRawTag");var Oi=zn?function(I){return I==null?[]:(I=Object(I),Te(zn(I),function(Y){return on.call(I,Y)}))}:tn,ni=Kr;(Ar&&ni(new Ar(new ArrayBuffer(1)))!=Fe||Ur&&ni(new Ur)!=j||Sr&&ni(Sr.resolve())!=ee||Dr&&ni(new Dr)!=q||Fr&&ni(new Fr)!=fe)&&(ni=o(function(I){var Y=Kr(I),We=Y==z?I.constructor:void 0,tt=We?Lt(We):"";if(tt)switch(tt){case Nn:return Fe;case Cr:return j;case Wr:return ee;case Rr:return q;case vi:return fe}return Y},"getTag"));function Vi(I,Y){return Y=Y==null?W:Y,!!Y&&(typeof I=="number"||Xe.test(I))&&I>-1&&I%1==0&&I<Y}o(Vi,"isIndex");function ke(I){var Y=typeof I;return Y=="string"||Y=="number"||Y=="symbol"||Y=="boolean"?I!=="__proto__":I===null}o(ke,"isKeyable");function rt(I){return!!mr&&mr in I}o(rt,"isMasked");function vt(I){var Y=I&&I.constructor,We=typeof Y=="function"&&Y.prototype||Mn;return I===We}o(vt,"isPrototype");function it(I){return cr.call(I)}o(it,"objectToString");function Lt(I){if(I!=null){try{return lr.call(I)}catch(Y){}try{return I+""}catch(Y){}}return""}o(Lt,"toSource");function Gt(I,Y){return I===Y||I!==I&&Y!==Y}o(Gt,"eq");var St=mi(function(){return arguments}())?mi:function(I){return Hn(I)&&ar.call(I,"callee")&&!on.call(I,"callee")},Zt=Array.isArray;function Ut(I){return I!=null&&Qn(I.length)&&!Kn(I)}o(Ut,"isArrayLike");var fn=vr||mn;function In(I,Y){return yi(I,Y)}o(In,"isEqual");function Kn(I){if(!tr(I))return!1;var Y=Kr(I);return Y==$||Y==F||Y==w||Y==te}o(Kn,"isFunction");function Qn(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=W}o(Qn,"isLength");function tr(I){var Y=typeof I;return I!=null&&(Y=="object"||Y=="function")}o(tr,"isObject");function Hn(I){return I!=null&&typeof I=="object"}o(Hn,"isObjectLike");var qt=Ce?Ze(Ce):na;function sn(I){return Ut(I)?$n(I):Mi(I)}o(sn,"keys");function tn(){return[]}o(tn,"stubArray");function mn(){return!1}o(mn,"stubFalse"),ot.exports=In},919:(ot,l,C)=>{"use strict";const R=C(6391),v=C(6232),P=C(6796),y=C(292),W=o(m=>m===""||m==="./","isEmptyString"),N=o((m,w,O)=>{w=[].concat(w),m=[].concat(m);let H=new Set,E=new Set,$=new Set,F=0,j=o(z=>{$.add(z.output),O&&O.onResult&&O.onResult(z)},"onResult");for(let z=0;z<w.length;z++){let ee=P(String(w[z]),{...O,onResult:j},!0),te=ee.state.negated||ee.state.negatedExtglob;te&&F++;for(let T of m){let q=ee(T,!0);!(te?!q.isMatch:q.isMatch)||(te?H.add(q.output):(H.delete(q.output),E.add(q.output)))}}let Ee=(F===w.length?[...$]:[...E]).filter(z=>!H.has(z));if(O&&Ee.length===0){if(O.failglob===!0)throw new Error(`No matches found for "${w.join(", ")}"`);if(O.nonull===!0||O.nullglob===!0)return O.unescape?w.map(z=>z.replace(/\\/g,"")):w}return Ee},"micromatch");N.match=N,N.matcher=(m,w)=>P(m,w),N.isMatch=(m,w,O)=>P(w,O)(m),N.any=N.isMatch,N.not=(m,w,O={})=>{w=[].concat(w).map(String);let H=new Set,E=[],$=o(j=>{O.onResult&&O.onResult(j),E.push(j.output)},"onResult"),F=new Set(N(m,w,{...O,onResult:$}));for(let j of E)F.has(j)||H.add(j);return[...H]},N.contains=(m,w,O)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${R.inspect(m)}"`);if(Array.isArray(w))return w.some(H=>N.contains(m,H,O));if(typeof w=="string"){if(W(m)||W(w))return!1;if(m.includes(w)||m.startsWith("./")&&m.slice(2).includes(w))return!0}return N.isMatch(m,w,{...O,contains:!0})},N.matchKeys=(m,w,O)=>{if(!y.isObject(m))throw new TypeError("Expected the first argument to be an object");let H=N(Object.keys(m),w,O),E={};for(let $ of H)E[$]=m[$];return E},N.some=(m,w,O)=>{let H=[].concat(m);for(let E of[].concat(w)){let $=P(String(E),O);if(H.some(F=>$(F)))return!0}return!1},N.every=(m,w,O)=>{let H=[].concat(m);for(let E of[].concat(w)){let $=P(String(E),O);if(!H.every(F=>$(F)))return!1}return!0},N.all=(m,w,O)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${R.inspect(m)}"`);return[].concat(w).every(H=>P(H,O)(m))},N.capture=(m,w,O)=>{let H=y.isWindows(O),$=P.makeRe(String(m),{...O,capture:!0}).exec(H?y.toPosixSlashes(w):w);if($)return $.slice(1).map(F=>F===void 0?"":F)},N.makeRe=(...m)=>P.makeRe(...m),N.scan=(...m)=>P.scan(...m),N.parse=(m,w)=>{let O=[];for(let H of[].concat(m||[]))for(let E of v(String(H),w))O.push(P.parse(E,w));return O},N.braces=(m,w)=>{if(typeof m!="string")throw new TypeError("Expected a string");return w&&w.nobrace===!0||!/\{.*\}/.test(m)?[m]:v(m,w)},N.braceExpand=(m,w)=>{if(typeof m!="string")throw new TypeError("Expected a string");return N.braces(m,{...w,expand:!0})},ot.exports=N},6796:(ot,l,C)=>{"use strict";ot.exports=C(5761)},3889:(ot,l,C)=>{"use strict";const R=C(6470),v="\\\\/",P=`[^${v}]`,y="\\.",W="\\+",N="\\?",m="\\/",w="(?=.)",O="[^/]",H=`(?:${m}|$)`,E=`(?:^|${m})`,$=`${y}{1,2}${H}`,F=`(?!${y})`,j=`(?!${E}${$})`,Q=`(?!${y}{0,1}${H})`,Ee=`(?!${$})`,z=`[^.${m}]`,ee=`${O}*?`,te={DOT_LITERAL:y,PLUS_LITERAL:W,QMARK_LITERAL:N,SLASH_LITERAL:m,ONE_CHAR:w,QMARK:O,END_ANCHOR:H,DOTS_SLASH:$,NO_DOT:F,NO_DOTS:j,NO_DOT_SLASH:Q,NO_DOTS_SLASH:Ee,QMARK_NO_DOT:z,STAR:ee,START_ANCHOR:E},T={...te,SLASH_LITERAL:`[${v}]`,QMARK:P,STAR:`${P}*?`,DOTS_SLASH:`${y}{1,2}(?:[${v}]|$)`,NO_DOT:`(?!${y})`,NO_DOTS:`(?!(?:^|[${v}])${y}{1,2}(?:[${v}]|$))`,NO_DOT_SLASH:`(?!${y}{0,1}(?:[${v}]|$))`,NO_DOTS_SLASH:`(?!${y}{1,2}(?:[${v}]|$))`,QMARK_NO_DOT:`[^.${v}]`,START_ANCHOR:`(?:^|[${v}])`,END_ANCHOR:`(?:[${v}]|$)`},q={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};ot.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:q,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:R.sep,extglobChars(k){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${k.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(k){return k===!0?T:te}}},3969:(ot,l,C)=>{"use strict";const R=C(3889),v=C(292),{MAX_LENGTH:P,POSIX_REGEX_SOURCE:y,REGEX_NON_SPECIAL_CHARS:W,REGEX_SPECIAL_CHARS_BACKREF:N,REPLACEMENTS:m}=R,w=o((E,$)=>{if(typeof $.expandRange=="function")return $.expandRange(...E,$);E.sort();const F=`[${E.join("-")}]`;try{new RegExp(F)}catch(j){return E.map(Q=>v.escapeRegex(Q)).join("..")}return F},"expandRange"),O=o((E,$)=>`Missing ${E}: "${$}" - use "\\\\${$}" to match literal characters`,"syntaxError"),H=o((E,$)=>{if(typeof E!="string")throw new TypeError("Expected a string");E=m[E]||E;const F={...$},j=typeof F.maxLength=="number"?Math.min(P,F.maxLength):P;let Q=E.length;if(Q>j)throw new SyntaxError(`Input length: ${Q}, exceeds maximum allowed length: ${j}`);const Ee={type:"bos",value:"",output:F.prepend||""},z=[Ee],ee=F.capture?"":"?:",te=v.isWindows($),T=R.globChars(te),q=R.extglobChars(T),{DOT_LITERAL:k,PLUS_LITERAL:le,SLASH_LITERAL:V,ONE_CHAR:fe,DOTS_SLASH:De,NO_DOT:Fe,NO_DOT_SLASH:ae,NO_DOTS_SLASH:we,QMARK:D,QMARK_NO_DOT:Je,STAR:ye,START_ANCHOR:ve}=T,G=o(be=>`(${ee}(?:(?!${ve}${be.dot?De:k}).)*?)`,"globstar"),se=F.dot?"":Fe,Re=F.dot?D:Je;let Ge=F.bash===!0?G(F):ye;F.capture&&(Ge=`(${Ge})`),typeof F.noext=="boolean"&&(F.noextglob=F.noext);const ie={input:E,index:-1,start:0,dot:F.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:z};E=v.removePrefix(E,ie),Q=E.length;const Xe=[],lt=[],wt=[];let L=Ee,U;const re=o(()=>ie.index===Q-1,"eos"),de=ie.peek=(be=1)=>E[ie.index+be],He=ie.advance=()=>E[++ie.index]||"",Ie=o(()=>E.slice(ie.index+1),"remaining"),ce=o((be="",B=0)=>{ie.consumed+=be,ie.index+=B},"consume"),Ce=o(be=>{ie.output+=be.output!=null?be.output:be.value,ce(be.value)},"append"),Te=o(()=>{let be=1;for(;de()==="!"&&(de(2)!=="("||de(3)==="?");)He(),ie.start++,be++;return be%2==0?!1:(ie.negated=!0,ie.start++,!0)},"negate"),Ve=o(be=>{ie[be]++,wt.push(be)},"increment"),me=o(be=>{ie[be]--,wt.pop()},"decrement"),Le=o(be=>{if(L.type==="globstar"){const B=ie.braces>0&&(be.type==="comma"||be.type==="brace"),K=be.extglob===!0||Xe.length&&(be.type==="pipe"||be.type==="paren");be.type!=="slash"&&be.type!=="paren"&&!B&&!K&&(ie.output=ie.output.slice(0,-L.output.length),L.type="star",L.value="*",L.output=Ge,ie.output+=L.output)}if(Xe.length&&be.type!=="paren"&&(Xe[Xe.length-1].inner+=be.value),(be.value||be.output)&&Ce(be),L&&L.type==="text"&&be.type==="text"){L.value+=be.value,L.output=(L.output||"")+be.value;return}be.prev=L,z.push(be),L=be},"push"),Ze=o((be,B)=>{const K={...q[B],conditions:1,inner:""};K.prev=L,K.parens=ie.parens,K.output=ie.output;const Ye=(F.capture?"(":"")+K.open;Ve("parens"),Le({type:be,value:B,output:ie.output?"":fe}),Le({type:"paren",extglob:!0,value:He(),output:Ye}),Xe.push(K)},"extglobOpen"),nt=o(be=>{let B=be.close+(F.capture?")":""),K;if(be.type==="negate"){let Ye=Ge;if(be.inner&&be.inner.length>1&&be.inner.includes("/")&&(Ye=G(F)),(Ye!==Ge||re()||/^\)+$/.test(Ie()))&&(B=be.close=`)$))${Ye}`),be.inner.includes("*")&&(K=Ie())&&/^\.[^\\/.]+$/.test(K)){const jt=H(K,{...$,fastpaths:!1}).output;B=be.close=`)${jt})${Ye})`}be.prev.type==="bos"&&(ie.negatedExtglob=!0)}Le({type:"paren",extglob:!0,value:U,output:B}),me("parens")},"extglobClose");if(F.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(E)){let be=!1,B=E.replace(N,(K,Ye,jt,An,Mn,Cn)=>An==="\\"?(be=!0,K):An==="?"?Ye?Ye+An+(Mn?D.repeat(Mn.length):""):Cn===0?Re+(Mn?D.repeat(Mn.length):""):D.repeat(jt.length):An==="."?k.repeat(jt.length):An==="*"?Ye?Ye+An+(Mn?Ge:""):Ge:Ye?K:`\\${K}`);return be===!0&&(F.unescape===!0?B=B.replace(/\\/g,""):B=B.replace(/\\+/g,K=>K.length%2==0?"\\\\":K?"\\":"")),B===E&&F.contains===!0?(ie.output=E,ie):(ie.output=v.wrapOutput(B,ie,$),ie)}for(;!re();){if(U=He(),U==="\0")continue;if(U==="\\"){const K=de();if(K==="/"&&F.bash!==!0||K==="."||K===";")continue;if(!K){U+="\\",Le({type:"text",value:U});continue}const Ye=/^\\+/.exec(Ie());let jt=0;if(Ye&&Ye[0].length>2&&(jt=Ye[0].length,ie.index+=jt,jt%2!=0&&(U+="\\")),F.unescape===!0?U=He():U+=He(),ie.brackets===0){Le({type:"text",value:U});continue}}if(ie.brackets>0&&(U!=="]"||L.value==="["||L.value==="[^")){if(F.posix!==!1&&U===":"){const K=L.value.slice(1);if(K.includes("[")&&(L.posix=!0,K.includes(":"))){const Ye=L.value.lastIndexOf("["),jt=L.value.slice(0,Ye),An=L.value.slice(Ye+2),Mn=y[An];if(Mn){L.value=jt+Mn,ie.backtrack=!0,He(),!Ee.output&&z.indexOf(L)===1&&(Ee.output=fe);continue}}}(U==="["&&de()!==":"||U==="-"&&de()==="]")&&(U=`\\${U}`),U==="]"&&(L.value==="["||L.value==="[^")&&(U=`\\${U}`),F.posix===!0&&U==="!"&&L.value==="["&&(U="^"),L.value+=U,Ce({value:U});continue}if(ie.quotes===1&&U!=='"'){U=v.escapeRegex(U),L.value+=U,Ce({value:U});continue}if(U==='"'){ie.quotes=ie.quotes===1?0:1,F.keepQuotes===!0&&Le({type:"text",value:U});continue}if(U==="("){Ve("parens"),Le({type:"paren",value:U});continue}if(U===")"){if(ie.parens===0&&F.strictBrackets===!0)throw new SyntaxError(O("opening","("));const K=Xe[Xe.length-1];if(K&&ie.parens===K.parens+1){nt(Xe.pop());continue}Le({type:"paren",value:U,output:ie.parens?")":"\\)"}),me("parens");continue}if(U==="["){if(F.nobracket===!0||!Ie().includes("]")){if(F.nobracket!==!0&&F.strictBrackets===!0)throw new SyntaxError(O("closing","]"));U=`\\${U}`}else Ve("brackets");Le({type:"bracket",value:U});continue}if(U==="]"){if(F.nobracket===!0||L&&L.type==="bracket"&&L.value.length===1){Le({type:"text",value:U,output:`\\${U}`});continue}if(ie.brackets===0){if(F.strictBrackets===!0)throw new SyntaxError(O("opening","["));Le({type:"text",value:U,output:`\\${U}`});continue}me("brackets");const K=L.value.slice(1);if(L.posix!==!0&&K[0]==="^"&&!K.includes("/")&&(U=`/${U}`),L.value+=U,Ce({value:U}),F.literalBrackets===!1||v.hasRegexChars(K))continue;const Ye=v.escapeRegex(L.value);if(ie.output=ie.output.slice(0,-L.value.length),F.literalBrackets===!0){ie.output+=Ye,L.value=Ye;continue}L.value=`(${ee}${Ye}|${L.value})`,ie.output+=L.value;continue}if(U==="{"&&F.nobrace!==!0){Ve("braces");const K={type:"brace",value:U,output:"(",outputIndex:ie.output.length,tokensIndex:ie.tokens.length};lt.push(K),Le(K);continue}if(U==="}"){const K=lt[lt.length-1];if(F.nobrace===!0||!K){Le({type:"text",value:U,output:U});continue}let Ye=")";if(K.dots===!0){const jt=z.slice(),An=[];for(let Mn=jt.length-1;Mn>=0&&(z.pop(),jt[Mn].type!=="brace");Mn--)jt[Mn].type!=="dots"&&An.unshift(jt[Mn].value);Ye=w(An,F),ie.backtrack=!0}if(K.comma!==!0&&K.dots!==!0){const jt=ie.output.slice(0,K.outputIndex),An=ie.tokens.slice(K.tokensIndex);K.value=K.output="\\{",U=Ye="\\}",ie.output=jt;for(const Mn of An)ie.output+=Mn.output||Mn.value}Le({type:"brace",value:U,output:Ye}),me("braces"),lt.pop();continue}if(U==="|"){Xe.length>0&&Xe[Xe.length-1].conditions++,Le({type:"text",value:U});continue}if(U===","){let K=U;const Ye=lt[lt.length-1];Ye&&wt[wt.length-1]==="braces"&&(Ye.comma=!0,K="|"),Le({type:"comma",value:U,output:K});continue}if(U==="/"){if(L.type==="dot"&&ie.index===ie.start+1){ie.start=ie.index+1,ie.consumed="",ie.output="",z.pop(),L=Ee;continue}Le({type:"slash",value:U,output:V});continue}if(U==="."){if(ie.braces>0&&L.type==="dot"){L.value==="."&&(L.output=k);const K=lt[lt.length-1];L.type="dots",L.output+=U,L.value+=U,K.dots=!0;continue}if(ie.braces+ie.parens===0&&L.type!=="bos"&&L.type!=="slash"){Le({type:"text",value:U,output:k});continue}Le({type:"dot",value:U,output:k});continue}if(U==="?"){if(!(L&&L.value==="(")&&F.noextglob!==!0&&de()==="("&&de(2)!=="?"){Ze("qmark",U);continue}if(L&&L.type==="paren"){const Ye=de();let jt=U;if(Ye==="<"&&!v.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(L.value==="("&&!/[!=<:]/.test(Ye)||Ye==="<"&&!/<([!=]|\w+>)/.test(Ie()))&&(jt=`\\${U}`),Le({type:"text",value:U,output:jt});continue}if(F.dot!==!0&&(L.type==="slash"||L.type==="bos")){Le({type:"qmark",value:U,output:Je});continue}Le({type:"qmark",value:U,output:D});continue}if(U==="!"){if(F.noextglob!==!0&&de()==="("&&(de(2)!=="?"||!/[!=<:]/.test(de(3)))){Ze("negate",U);continue}if(F.nonegate!==!0&&ie.index===0){Te();continue}}if(U==="+"){if(F.noextglob!==!0&&de()==="("&&de(2)!=="?"){Ze("plus",U);continue}if(L&&L.value==="("||F.regex===!1){Le({type:"plus",value:U,output:le});continue}if(L&&(L.type==="bracket"||L.type==="paren"||L.type==="brace")||ie.parens>0){Le({type:"plus",value:U});continue}Le({type:"plus",value:le});continue}if(U==="@"){if(F.noextglob!==!0&&de()==="("&&de(2)!=="?"){Le({type:"at",extglob:!0,value:U,output:""});continue}Le({type:"text",value:U});continue}if(U!=="*"){(U==="$"||U==="^")&&(U=`\\${U}`);const K=W.exec(Ie());K&&(U+=K[0],ie.index+=K[0].length),Le({type:"text",value:U});continue}if(L&&(L.type==="globstar"||L.star===!0)){L.type="star",L.star=!0,L.value+=U,L.output=Ge,ie.backtrack=!0,ie.globstar=!0,ce(U);continue}let be=Ie();if(F.noextglob!==!0&&/^\([^?]/.test(be)){Ze("star",U);continue}if(L.type==="star"){if(F.noglobstar===!0){ce(U);continue}const K=L.prev,Ye=K.prev,jt=K.type==="slash"||K.type==="bos",An=Ye&&(Ye.type==="star"||Ye.type==="globstar");if(F.bash===!0&&(!jt||be[0]&&be[0]!=="/")){Le({type:"star",value:U,output:""});continue}const Mn=ie.braces>0&&(K.type==="comma"||K.type==="brace"),Cn=Xe.length&&(K.type==="pipe"||K.type==="paren");if(!jt&&K.type!=="paren"&&!Mn&&!Cn){Le({type:"star",value:U,output:""});continue}for(;be.slice(0,3)==="/**";){const lr=E[ie.index+4];if(lr&&lr!=="/")break;be=be.slice(3),ce("/**",3)}if(K.type==="bos"&&re()){L.type="globstar",L.value+=U,L.output=G(F),ie.output=L.output,ie.globstar=!0,ce(U);continue}if(K.type==="slash"&&K.prev.type!=="bos"&&!An&&re()){ie.output=ie.output.slice(0,-(K.output+L.output).length),K.output=`(?:${K.output}`,L.type="globstar",L.output=G(F)+(F.strictSlashes?")":"|$)"),L.value+=U,ie.globstar=!0,ie.output+=K.output+L.output,ce(U);continue}if(K.type==="slash"&&K.prev.type!=="bos"&&be[0]==="/"){const lr=be[1]!==void 0?"|$":"";ie.output=ie.output.slice(0,-(K.output+L.output).length),K.output=`(?:${K.output}`,L.type="globstar",L.output=`${G(F)}${V}|${V}${lr})`,L.value+=U,ie.output+=K.output+L.output,ie.globstar=!0,ce(U+He()),Le({type:"slash",value:"/",output:""});continue}if(K.type==="bos"&&be[0]==="/"){L.type="globstar",L.value+=U,L.output=`(?:^|${V}|${G(F)}${V})`,ie.output=L.output,ie.globstar=!0,ce(U+He()),Le({type:"slash",value:"/",output:""});continue}ie.output=ie.output.slice(0,-L.output.length),L.type="globstar",L.output=G(F),L.value+=U,ie.output+=L.output,ie.globstar=!0,ce(U);continue}const B={type:"star",value:U,output:Ge};if(F.bash===!0){B.output=".*?",(L.type==="bos"||L.type==="slash")&&(B.output=se+B.output),Le(B);continue}if(L&&(L.type==="bracket"||L.type==="paren")&&F.regex===!0){B.output=U,Le(B);continue}(ie.index===ie.start||L.type==="slash"||L.type==="dot")&&(L.type==="dot"?(ie.output+=ae,L.output+=ae):F.dot===!0?(ie.output+=we,L.output+=we):(ie.output+=se,L.output+=se),de()!=="*"&&(ie.output+=fe,L.output+=fe)),Le(B)}for(;ie.brackets>0;){if(F.strictBrackets===!0)throw new SyntaxError(O("closing","]"));ie.output=v.escapeLast(ie.output,"["),me("brackets")}for(;ie.parens>0;){if(F.strictBrackets===!0)throw new SyntaxError(O("closing",")"));ie.output=v.escapeLast(ie.output,"("),me("parens")}for(;ie.braces>0;){if(F.strictBrackets===!0)throw new SyntaxError(O("closing","}"));ie.output=v.escapeLast(ie.output,"{"),me("braces")}if(F.strictSlashes!==!0&&(L.type==="star"||L.type==="bracket")&&Le({type:"maybe_slash",value:"",output:`${V}?`}),ie.backtrack===!0){ie.output="";for(const be of ie.tokens)ie.output+=be.output!=null?be.output:be.value,be.suffix&&(ie.output+=be.suffix)}return ie},"parse");H.fastpaths=(E,$)=>{const F={...$},j=typeof F.maxLength=="number"?Math.min(P,F.maxLength):P,Q=E.length;if(Q>j)throw new SyntaxError(`Input length: ${Q}, exceeds maximum allowed length: ${j}`);E=m[E]||E;const Ee=v.isWindows($),{DOT_LITERAL:z,SLASH_LITERAL:ee,ONE_CHAR:te,DOTS_SLASH:T,NO_DOT:q,NO_DOTS:k,NO_DOTS_SLASH:le,STAR:V,START_ANCHOR:fe}=R.globChars(Ee),De=F.dot?k:q,Fe=F.dot?le:q,ae=F.capture?"":"?:",we={negated:!1,prefix:""};let D=F.bash===!0?".*?":V;F.capture&&(D=`(${D})`);const Je=o(se=>se.noglobstar===!0?D:`(${ae}(?:(?!${fe}${se.dot?T:z}).)*?)`,"globstar"),ye=o(se=>{switch(se){case"*":return`${De}${te}${D}`;case".*":return`${z}${te}${D}`;case"*.*":return`${De}${D}${z}${te}${D}`;case"*/*":return`${De}${D}${ee}${te}${Fe}${D}`;case"**":return De+Je(F);case"**/*":return`(?:${De}${Je(F)}${ee})?${Fe}${te}${D}`;case"**/*.*":return`(?:${De}${Je(F)}${ee})?${Fe}${D}${z}${te}${D}`;case"**/.*":return`(?:${De}${Je(F)}${ee})?${z}${te}${D}`;default:{const Re=/^(.*?)\.(\w+)$/.exec(se);if(!Re)return;const Ge=ye(Re[1]);return Ge?Ge+z+Re[2]:void 0}}},"create"),ve=v.removePrefix(E,we);let G=ye(ve);return G&&F.strictSlashes!==!0&&(G+=`${ee}?`),G},ot.exports=H},5761:(ot,l,C)=>{"use strict";const R=C(6470),v=C(9826),P=C(3969),y=C(292),W=C(3889),N=o(w=>w&&typeof w=="object"&&!Array.isArray(w),"isObject"),m=o((w,O,H=!1)=>{if(Array.isArray(w)){const ee=w.map(T=>m(T,O,H));return o(T=>{for(const q of ee){const k=q(T);if(k)return k}return!1},"arrayMatcher")}const E=N(w)&&w.tokens&&w.input;if(w===""||typeof w!="string"&&!E)throw new TypeError("Expected pattern to be a non-empty string");const $=O||{},F=y.isWindows(O),j=E?m.compileRe(w,O):m.makeRe(w,O,!1,!0),Q=j.state;delete j.state;let Ee=o(()=>!1,"isIgnored");if($.ignore){const ee={...O,ignore:null,onMatch:null,onResult:null};Ee=m($.ignore,ee,H)}const z=o((ee,te=!1)=>{const{isMatch:T,match:q,output:k}=m.test(ee,j,O,{glob:w,posix:F}),le={glob:w,state:Q,regex:j,posix:F,input:ee,output:k,match:q,isMatch:T};return typeof $.onResult=="function"&&$.onResult(le),T===!1?(le.isMatch=!1,te?le:!1):Ee(ee)?(typeof $.onIgnore=="function"&&$.onIgnore(le),le.isMatch=!1,te?le:!1):(typeof $.onMatch=="function"&&$.onMatch(le),te?le:!0)},"matcher");return H&&(z.state=Q),z},"picomatch");m.test=(w,O,H,{glob:E,posix:$}={})=>{if(typeof w!="string")throw new TypeError("Expected input to be a string");if(w==="")return{isMatch:!1,output:""};const F=H||{},j=F.format||($?y.toPosixSlashes:null);let Q=w===E,Ee=Q&&j?j(w):w;return Q===!1&&(Ee=j?j(w):w,Q=Ee===E),(Q===!1||F.capture===!0)&&(F.matchBase===!0||F.basename===!0?Q=m.matchBase(w,O,H,$):Q=O.exec(Ee)),{isMatch:Boolean(Q),match:Q,output:Ee}},m.matchBase=(w,O,H,E=y.isWindows(H))=>(O instanceof RegExp?O:m.makeRe(O,H)).test(R.basename(w)),m.isMatch=(w,O,H)=>m(O,H)(w),m.parse=(w,O)=>Array.isArray(w)?w.map(H=>m.parse(H,O)):P(w,{...O,fastpaths:!1}),m.scan=(w,O)=>v(w,O),m.compileRe=(w,O,H=!1,E=!1)=>{if(H===!0)return w.output;const $=O||{},F=$.contains?"":"^",j=$.contains?"":"$";let Q=`${F}(?:${w.output})${j}`;w&&w.negated===!0&&(Q=`^(?!${Q}).*$`);const Ee=m.toRegex(Q,O);return E===!0&&(Ee.state=w),Ee},m.makeRe=(w,O={},H=!1,E=!1)=>{if(!w||typeof w!="string")throw new TypeError("Expected a non-empty string");let $={negated:!1,fastpaths:!0};return O.fastpaths!==!1&&(w[0]==="."||w[0]==="*")&&($.output=P.fastpaths(w,O)),$.output||($=P(w,O)),m.compileRe($,O,H,E)},m.toRegex=(w,O)=>{try{const H=O||{};return new RegExp(w,H.flags||(H.nocase?"i":""))}catch(H){if(O&&O.debug===!0)throw H;return/$^/}},m.constants=W,ot.exports=m},9826:(ot,l,C)=>{"use strict";const R=C(292),{CHAR_ASTERISK:v,CHAR_AT:P,CHAR_BACKWARD_SLASH:y,CHAR_COMMA:W,CHAR_DOT:N,CHAR_EXCLAMATION_MARK:m,CHAR_FORWARD_SLASH:w,CHAR_LEFT_CURLY_BRACE:O,CHAR_LEFT_PARENTHESES:H,CHAR_LEFT_SQUARE_BRACKET:E,CHAR_PLUS:$,CHAR_QUESTION_MARK:F,CHAR_RIGHT_CURLY_BRACE:j,CHAR_RIGHT_PARENTHESES:Q,CHAR_RIGHT_SQUARE_BRACKET:Ee}=C(3889),z=o(T=>T===w||T===y,"isPathSeparator"),ee=o(T=>{T.isPrefix!==!0&&(T.depth=T.isGlobstar?1/0:1)},"depth"),te=o((T,q)=>{const k=q||{},le=T.length-1,V=k.parts===!0||k.scanToEnd===!0,fe=[],De=[],Fe=[];let ae=T,we=-1,D=0,Je=0,ye=!1,ve=!1,G=!1,se=!1,Re=!1,Ge=!1,ie=!1,Xe=!1,lt=!1,wt=!1,L=0,U,re,de={value:"",depth:0,isGlob:!1};const He=o(()=>we>=le,"eos"),Ie=o(()=>ae.charCodeAt(we+1),"peek"),ce=o(()=>(U=re,ae.charCodeAt(++we)),"advance");for(;we<le;){re=ce();let Le;if(re===y){ie=de.backslashes=!0,re=ce(),re===O&&(Ge=!0);continue}if(Ge===!0||re===O){for(L++;He()!==!0&&(re=ce());){if(re===y){ie=de.backslashes=!0,ce();continue}if(re===O){L++;continue}if(Ge!==!0&&re===N&&(re=ce())===N){if(ye=de.isBrace=!0,G=de.isGlob=!0,wt=!0,V===!0)continue;break}if(Ge!==!0&&re===W){if(ye=de.isBrace=!0,G=de.isGlob=!0,wt=!0,V===!0)continue;break}if(re===j&&(L--,L===0)){Ge=!1,ye=de.isBrace=!0,wt=!0;break}}if(V===!0)continue;break}if(re===w){if(fe.push(we),De.push(de),de={value:"",depth:0,isGlob:!1},wt===!0)continue;if(U===N&&we===D+1){D+=2;continue}Je=we+1;continue}if(k.noext!==!0&&(re===$||re===P||re===v||re===F||re===m)===!0&&Ie()===H){if(G=de.isGlob=!0,se=de.isExtglob=!0,wt=!0,re===m&&we===D&&(lt=!0),V===!0){for(;He()!==!0&&(re=ce());){if(re===y){ie=de.backslashes=!0,re=ce();continue}if(re===Q){G=de.isGlob=!0,wt=!0;break}}continue}break}if(re===v){if(U===v&&(Re=de.isGlobstar=!0),G=de.isGlob=!0,wt=!0,V===!0)continue;break}if(re===F){if(G=de.isGlob=!0,wt=!0,V===!0)continue;break}if(re===E){for(;He()!==!0&&(Le=ce());){if(Le===y){ie=de.backslashes=!0,ce();continue}if(Le===Ee){ve=de.isBracket=!0,G=de.isGlob=!0,wt=!0;break}}if(V===!0)continue;break}if(k.nonegate!==!0&&re===m&&we===D){Xe=de.negated=!0,D++;continue}if(k.noparen!==!0&&re===H){if(G=de.isGlob=!0,V===!0){for(;He()!==!0&&(re=ce());){if(re===H){ie=de.backslashes=!0,re=ce();continue}if(re===Q){wt=!0;break}}continue}break}if(G===!0){if(wt=!0,V===!0)continue;break}}k.noext===!0&&(se=!1,G=!1);let Ce=ae,Te="",Ve="";D>0&&(Te=ae.slice(0,D),ae=ae.slice(D),Je-=D),Ce&&G===!0&&Je>0?(Ce=ae.slice(0,Je),Ve=ae.slice(Je)):G===!0?(Ce="",Ve=ae):Ce=ae,Ce&&Ce!==""&&Ce!=="/"&&Ce!==ae&&z(Ce.charCodeAt(Ce.length-1))&&(Ce=Ce.slice(0,-1)),k.unescape===!0&&(Ve&&(Ve=R.removeBackslashes(Ve)),Ce&&ie===!0&&(Ce=R.removeBackslashes(Ce)));const me={prefix:Te,input:T,start:D,base:Ce,glob:Ve,isBrace:ye,isBracket:ve,isGlob:G,isExtglob:se,isGlobstar:Re,negated:Xe,negatedExtglob:lt};if(k.tokens===!0&&(me.maxDepth=0,z(re)||De.push(de),me.tokens=De),k.parts===!0||k.tokens===!0){let Le;for(let Ze=0;Ze<fe.length;Ze++){const nt=Le?Le+1:D,be=fe[Ze],B=T.slice(nt,be);k.tokens&&(Ze===0&&D!==0?(De[Ze].isPrefix=!0,De[Ze].value=Te):De[Ze].value=B,ee(De[Ze]),me.maxDepth+=De[Ze].depth),(Ze!==0||B!=="")&&Fe.push(B),Le=be}if(Le&&Le+1<T.length){const Ze=T.slice(Le+1);Fe.push(Ze),k.tokens&&(De[De.length-1].value=Ze,ee(De[De.length-1]),me.maxDepth+=De[De.length-1].depth)}me.slashes=fe,me.parts=Fe}return me},"scan");ot.exports=te},292:(ot,l,C)=>{"use strict";var R=C(6038);const v=C(6470),P=R.platform==="win32",{REGEX_BACKSLASH:y,REGEX_REMOVE_BACKSLASH:W,REGEX_SPECIAL_CHARS:N,REGEX_SPECIAL_CHARS_GLOBAL:m}=C(3889);l.isObject=w=>w!==null&&typeof w=="object"&&!Array.isArray(w),l.hasRegexChars=w=>N.test(w),l.isRegexChar=w=>w.length===1&&l.hasRegexChars(w),l.escapeRegex=w=>w.replace(m,"\\$1"),l.toPosixSlashes=w=>w.replace(y,"/"),l.removeBackslashes=w=>w.replace(W,O=>O==="\\"?"":O),l.supportsLookbehinds=()=>{const w=R.version.slice(1).split(".").map(Number);return w.length===3&&w[0]>=9||w[0]===8&&w[1]>=10},l.isWindows=w=>w&&typeof w.windows=="boolean"?w.windows:P===!0||v.sep==="\\",l.escapeLast=(w,O,H)=>{const E=w.lastIndexOf(O,H);return E===-1?w:w[E-1]==="\\"?l.escapeLast(w,O,E-1):`${w.slice(0,E)}\\${w.slice(E)}`},l.removePrefix=(w,O={})=>{let H=w;return H.startsWith("./")&&(H=H.slice(2),O.prefix="./"),H},l.wrapOutput=(w,O={},H={})=>{const E=H.contains?"":"^",$=H.contains?"":"$";let F=`${E}(?:${w})${$}`;return O.negated===!0&&(F=`(?:^(?!${F}).*$)`),F}},6038:ot=>{var l=ot.exports={},C,R;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function P(){throw new Error("clearTimeout has not been defined")}o(P,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?C=setTimeout:C=v}catch(j){C=v}try{typeof clearTimeout=="function"?R=clearTimeout:R=P}catch(j){R=P}}();function y(j){if(C===setTimeout)return setTimeout(j,0);if((C===v||!C)&&setTimeout)return C=setTimeout,setTimeout(j,0);try{return C(j,0)}catch(Q){try{return C.call(null,j,0)}catch(Ee){return C.call(this,j,0)}}}o(y,"runTimeout");function W(j){if(R===clearTimeout)return clearTimeout(j);if((R===P||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(j);try{return R(j)}catch(Q){try{return R.call(null,j)}catch(Ee){return R.call(this,j)}}}o(W,"runClearTimeout");var N=[],m=!1,w,O=-1;function H(){!m||!w||(m=!1,w.length?N=w.concat(N):O=-1,N.length&&E())}o(H,"cleanUpNextTick");function E(){if(!m){var j=y(H);m=!0;for(var Q=N.length;Q;){for(w=N,N=[];++O<Q;)w&&w[O].run();O=-1,Q=N.length}w=null,m=!1,W(j)}}o(E,"drainQueue"),l.nextTick=function(j){var Q=new Array(arguments.length-1);if(arguments.length>1)for(var Ee=1;Ee<arguments.length;Ee++)Q[Ee-1]=arguments[Ee];N.push(new $(j,Q)),N.length===1&&!m&&y(E)};function $(j,Q){this.fun=j,this.array=Q}o($,"Item"),$.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function F(){}o(F,"noop"),l.on=F,l.addListener=F,l.once=F,l.off=F,l.removeListener=F,l.removeAllListeners=F,l.emit=F,l.prependListener=F,l.prependOnceListener=F,l.listeners=function(j){return[]},l.binding=function(j){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(j){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},2999:(ot,l,C)=>{"use strict";/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const R=C(3338),v=o((z,ee,te)=>{if(R(z)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(ee===void 0||z===ee)return String(z);if(R(ee)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let T={relaxZeros:!0,...te};typeof T.strictZeros=="boolean"&&(T.relaxZeros=T.strictZeros===!1);let q=String(T.relaxZeros),k=String(T.shorthand),le=String(T.capture),V=String(T.wrap),fe=z+":"+ee+"="+q+k+le+V;if(v.cache.hasOwnProperty(fe))return v.cache[fe].result;let De=Math.min(z,ee),Fe=Math.max(z,ee);if(Math.abs(De-Fe)===1){let ye=z+"|"+ee;return T.capture?`(${ye})`:T.wrap===!1?ye:`(?:${ye})`}let ae=Q(z)||Q(ee),we={min:z,max:ee,a:De,b:Fe},D=[],Je=[];if(ae&&(we.isPadded=ae,we.maxLen=String(we.max).length),De<0){let ye=Fe<0?Math.abs(Fe):1;Je=N(ye,Math.abs(De),we,T),De=we.a=0}return Fe>=0&&(D=N(De,Fe,we,T)),we.negatives=Je,we.positives=D,we.result=P(Je,D,T),T.capture===!0?we.result=`(${we.result})`:T.wrap!==!1&&D.length+Je.length>1&&(we.result=`(?:${we.result})`),v.cache[fe]=we,we.result},"toRegexRange");function P(z,ee,te){let T=m(z,ee,"-",!1,te)||[],q=m(ee,z,"",!1,te)||[],k=m(z,ee,"-?",!0,te)||[];return T.concat(k).concat(q).join("|")}o(P,"collatePatterns");function y(z,ee){let te=1,T=1,q=E(z,te),k=new Set([ee]);for(;z<=q&&q<=ee;)k.add(q),te+=1,q=E(z,te);for(q=$(ee+1,T)-1;z<q&&q<=ee;)k.add(q),T+=1,q=$(ee+1,T)-1;return k=[...k],k.sort(O),k}o(y,"splitToRanges");function W(z,ee,te){if(z===ee)return{pattern:z,count:[],digits:0};let T=w(z,ee),q=T.length,k="",le=0;for(let V=0;V<q;V++){let[fe,De]=T[V];fe===De?k+=fe:fe!=="0"||De!=="9"?k+=j(fe,De,te):le++}return le&&(k+=te.shorthand===!0?"\\d":"[0-9]"),{pattern:k,count:[le],digits:q}}o(W,"rangeToPattern");function N(z,ee,te,T){let q=y(z,ee),k=[],le=z,V;for(let fe=0;fe<q.length;fe++){let De=q[fe],Fe=W(String(le),String(De),T),ae="";if(!te.isPadded&&V&&V.pattern===Fe.pattern){V.count.length>1&&V.count.pop(),V.count.push(Fe.count[0]),V.string=V.pattern+F(V.count),le=De+1;continue}te.isPadded&&(ae=Ee(De,te,T)),Fe.string=ae+Fe.pattern+F(Fe.count),k.push(Fe),le=De+1,V=Fe}return k}o(N,"splitToPatterns");function m(z,ee,te,T,q){let k=[];for(let le of z){let{string:V}=le;!T&&!H(ee,"string",V)&&k.push(te+V),T&&H(ee,"string",V)&&k.push(te+V)}return k}o(m,"filterPatterns");function w(z,ee){let te=[];for(let T=0;T<z.length;T++)te.push([z[T],ee[T]]);return te}o(w,"zip");function O(z,ee){return z>ee?1:ee>z?-1:0}o(O,"compare");function H(z,ee,te){return z.some(T=>T[ee]===te)}o(H,"contains");function E(z,ee){return Number(String(z).slice(0,-ee)+"9".repeat(ee))}o(E,"countNines");function $(z,ee){return z-z%Math.pow(10,ee)}o($,"countZeros");function F(z){let[ee=0,te=""]=z;return te||ee>1?`{${ee+(te?","+te:"")}}`:""}o(F,"toQuantifier");function j(z,ee,te){return`[${z}${ee-z==1?"":"-"}${ee}]`}o(j,"toCharacterClass");function Q(z){return/^-?(0+)\d/.test(z)}o(Q,"hasPadding");function Ee(z,ee,te){if(!ee.isPadded)return z;let T=Math.abs(ee.maxLen-String(z).length),q=te.relaxZeros!==!1;switch(T){case 0:return"";case 1:return q?"0?":"0";case 2:return q?"0{0,2}":"00";default:return q?`0{0,${T}}`:`0{${T}}`}}o(Ee,"padZeros"),v.cache={},v.clearCache=()=>v.cache={},ot.exports=v},6724:()=>{},6470:(ot,l,C)=>{"use strict";var R=C(4155);function v(N){if(typeof N!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(N))}o(v,"assertPath");function P(N,m){for(var w="",O=0,H=-1,E=0,$,F=0;F<=N.length;++F){if(F<N.length)$=N.charCodeAt(F);else{if($===47)break;$=47}if($===47){if(!(H===F-1||E===1))if(H!==F-1&&E===2){if(w.length<2||O!==2||w.charCodeAt(w.length-1)!==46||w.charCodeAt(w.length-2)!==46){if(w.length>2){var j=w.lastIndexOf("/");if(j!==w.length-1){j===-1?(w="",O=0):(w=w.slice(0,j),O=w.length-1-w.lastIndexOf("/")),H=F,E=0;continue}}else if(w.length===2||w.length===1){w="",O=0,H=F,E=0;continue}}m&&(w.length>0?w+="/..":w="..",O=2)}else w.length>0?w+="/"+N.slice(H+1,F):w=N.slice(H+1,F),O=F-H-1;H=F,E=0}else $===46&&E!==-1?++E:E=-1}return w}o(P,"normalizeStringPosix");function y(N,m){var w=m.dir||m.root,O=m.base||(m.name||"")+(m.ext||"");return w?w===m.root?w+O:w+N+O:O}o(y,"_format");var W={resolve:o(function(){for(var m="",w=!1,O,H=arguments.length-1;H>=-1&&!w;H--){var E;H>=0?E=arguments[H]:(O===void 0&&(O=R.cwd()),E=O),v(E),E.length!==0&&(m=E+"/"+m,w=E.charCodeAt(0)===47)}return m=P(m,!w),w?m.length>0?"/"+m:"/":m.length>0?m:"."},"resolve"),normalize:o(function(m){if(v(m),m.length===0)return".";var w=m.charCodeAt(0)===47,O=m.charCodeAt(m.length-1)===47;return m=P(m,!w),m.length===0&&!w&&(m="."),m.length>0&&O&&(m+="/"),w?"/"+m:m},"normalize"),isAbsolute:o(function(m){return v(m),m.length>0&&m.charCodeAt(0)===47},"isAbsolute"),join:o(function(){if(arguments.length===0)return".";for(var m,w=0;w<arguments.length;++w){var O=arguments[w];v(O),O.length>0&&(m===void 0?m=O:m+="/"+O)}return m===void 0?".":W.normalize(m)},"join"),relative:o(function(m,w){if(v(m),v(w),m===w||(m=W.resolve(m),w=W.resolve(w),m===w))return"";for(var O=1;O<m.length&&m.charCodeAt(O)===47;++O);for(var H=m.length,E=H-O,$=1;$<w.length&&w.charCodeAt($)===47;++$);for(var F=w.length,j=F-$,Q=E<j?E:j,Ee=-1,z=0;z<=Q;++z){if(z===Q){if(j>Q){if(w.charCodeAt($+z)===47)return w.slice($+z+1);if(z===0)return w.slice($+z)}else E>Q&&(m.charCodeAt(O+z)===47?Ee=z:z===0&&(Ee=0));break}var ee=m.charCodeAt(O+z),te=w.charCodeAt($+z);if(ee!==te)break;ee===47&&(Ee=z)}var T="";for(z=O+Ee+1;z<=H;++z)(z===H||m.charCodeAt(z)===47)&&(T.length===0?T+="..":T+="/..");return T.length>0?T+w.slice($+Ee):($+=Ee,w.charCodeAt($)===47&&++$,w.slice($))},"relative"),_makeLong:o(function(m){return m},"_makeLong"),dirname:o(function(m){if(v(m),m.length===0)return".";for(var w=m.charCodeAt(0),O=w===47,H=-1,E=!0,$=m.length-1;$>=1;--$)if(w=m.charCodeAt($),w===47){if(!E){H=$;break}}else E=!1;return H===-1?O?"/":".":O&&H===1?"//":m.slice(0,H)},"dirname"),basename:o(function(m,w){if(w!==void 0&&typeof w!="string")throw new TypeError('"ext" argument must be a string');v(m);var O=0,H=-1,E=!0,$;if(w!==void 0&&w.length>0&&w.length<=m.length){if(w.length===m.length&&w===m)return"";var F=w.length-1,j=-1;for($=m.length-1;$>=0;--$){var Q=m.charCodeAt($);if(Q===47){if(!E){O=$+1;break}}else j===-1&&(E=!1,j=$+1),F>=0&&(Q===w.charCodeAt(F)?--F==-1&&(H=$):(F=-1,H=j))}return O===H?H=j:H===-1&&(H=m.length),m.slice(O,H)}else{for($=m.length-1;$>=0;--$)if(m.charCodeAt($)===47){if(!E){O=$+1;break}}else H===-1&&(E=!1,H=$+1);return H===-1?"":m.slice(O,H)}},"basename"),extname:o(function(m){v(m);for(var w=-1,O=0,H=-1,E=!0,$=0,F=m.length-1;F>=0;--F){var j=m.charCodeAt(F);if(j===47){if(!E){O=F+1;break}continue}H===-1&&(E=!1,H=F+1),j===46?w===-1?w=F:$!==1&&($=1):w!==-1&&($=-1)}return w===-1||H===-1||$===0||$===1&&w===H-1&&w===O+1?"":m.slice(w,H)},"extname"),format:o(function(m){if(m===null||typeof m!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof m);return y("/",m)},"format"),parse:o(function(m){v(m);var w={root:"",dir:"",base:"",ext:"",name:""};if(m.length===0)return w;var O=m.charCodeAt(0),H=O===47,E;H?(w.root="/",E=1):E=0;for(var $=-1,F=0,j=-1,Q=!0,Ee=m.length-1,z=0;Ee>=E;--Ee){if(O=m.charCodeAt(Ee),O===47){if(!Q){F=Ee+1;break}continue}j===-1&&(Q=!1,j=Ee+1),O===46?$===-1?$=Ee:z!==1&&(z=1):$!==-1&&(z=-1)}return $===-1||j===-1||z===0||z===1&&$===j-1&&$===F+1?j!==-1&&(F===0&&H?w.base=w.name=m.slice(1,j):w.base=w.name=m.slice(F,j)):(F===0&&H?(w.name=m.slice(1,$),w.base=m.slice(1,j)):(w.name=m.slice(F,$),w.base=m.slice(F,j)),w.ext=m.slice($,j)),F>0?w.dir=m.slice(0,F-1):H&&(w.dir="/"),w},"parse"),sep:"/",delimiter:":",win32:null,posix:null};W.posix=W,ot.exports=W},4155:ot=>{var l=ot.exports={},C,R;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function P(){throw new Error("clearTimeout has not been defined")}o(P,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?C=setTimeout:C=v}catch(j){C=v}try{typeof clearTimeout=="function"?R=clearTimeout:R=P}catch(j){R=P}}();function y(j){if(C===setTimeout)return setTimeout(j,0);if((C===v||!C)&&setTimeout)return C=setTimeout,setTimeout(j,0);try{return C(j,0)}catch(Q){try{return C.call(null,j,0)}catch(Ee){return C.call(this,j,0)}}}o(y,"runTimeout");function W(j){if(R===clearTimeout)return clearTimeout(j);if((R===P||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(j);try{return R(j)}catch(Q){try{return R.call(null,j)}catch(Ee){return R.call(this,j)}}}o(W,"runClearTimeout");var N=[],m=!1,w,O=-1;function H(){!m||!w||(m=!1,w.length?N=w.concat(N):O=-1,N.length&&E())}o(H,"cleanUpNextTick");function E(){if(!m){var j=y(H);m=!0;for(var Q=N.length;Q;){for(w=N,N=[];++O<Q;)w&&w[O].run();O=-1,Q=N.length}w=null,m=!1,W(j)}}o(E,"drainQueue"),l.nextTick=function(j){var Q=new Array(arguments.length-1);if(arguments.length>1)for(var Ee=1;Ee<arguments.length;Ee++)Q[Ee-1]=arguments[Ee];N.push(new $(j,Q)),N.length===1&&!m&&y(E)};function $(j,Q){this.fun=j,this.array=Q}o($,"Item"),$.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function F(){}o(F,"noop"),l.on=F,l.addListener=F,l.once=F,l.off=F,l.removeListener=F,l.removeAllListeners=F,l.emit=F,l.prependListener=F,l.prependOnceListener=F,l.listeners=function(j){return[]},l.binding=function(j){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(j){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},6529:()=>{},6391:()=>{}},Ja={};function gr(ot){var l=Ja[ot];if(l!==void 0)return l.exports;var C=Ja[ot]={id:ot,loaded:!1,exports:{}};return Po[ot](C,C.exports,gr),C.loaded=!0,C.exports}o(gr,"__webpack_require__"),(()=>{gr.n=ot=>{var l=ot&&ot.__esModule?()=>ot.default:()=>ot;return gr.d(l,{a:l}),l}})(),(()=>{gr.d=(ot,l)=>{for(var C in l)gr.o(l,C)&&!gr.o(ot,C)&&Object.defineProperty(ot,C,{enumerable:!0,get:l[C]})}})(),(()=>{gr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(ot){if(typeof window=="object")return window}}()})(),(()=>{gr.o=(ot,l)=>Object.prototype.hasOwnProperty.call(ot,l)})(),(()=>{gr.r=ot=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(ot,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ot,"__esModule",{value:!0})}})(),(()=>{gr.nmd=ot=>(ot.paths=[],ot.children||(ot.children=[]),ot)})();var Lo={};(()=>{"use strict";gr.r(Lo),gr.d(Lo,{AllowedProviderExtensionIds:()=>qo,StateKeys:()=>va,activate:()=>Ec,ensureProvidersRegistered:()=>kr,getOpenActionsService:()=>To,getState:()=>tl,isPreRelease:()=>_c,updateState:()=>Yo});var ot={};gr.r(ot),gr.d(ot,{max:()=>Pl,min:()=>Il});const l=require("vscode"),C=new TextDecoder,R=new TextEncoder,v=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function P(t){const e=R.encode(t),n=new Array(e.length);for(let r=0;r<e.length;++r)n[r]=v[e[r]];return n.join("")}o(P,"encodeUtf8Hex");function y(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const n=new Uint8Array(e.map(r=>parseInt(r,16)));return C.decode(n)}o(y,"decodeUtf8Hex");const W=/^[0-9a-f]{40}$/i;function N(t){return t!==void 0&&W.test(t)}o(N,"isSha");const m=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function w(t){return m.test(t)}o(w,"isValidBranchName");function O(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}o(O,"shortenRef");const H=47;function E(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}o(E,"asKey");function $(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}o($,"asFileKey");function F(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}o(F,"asFileStorageKey");function j(t){const e=typeof t=="string"?t:t.path;let n=0,r=-1,i=!0;for(let a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===H){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?"":e.slice(n,r)}o(j,"basename");function Q(t){const e=t.path;if(e.length===1)return"/";let n,r=-1,i=!0;for(let a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===H){if(!i){r=a;break}}else i=!1;return r===-1?"/":e.slice(0,r)}o(Q,"dirname");function Ee(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}o(Ee,"getParent");function z(t,e){const n=typeof e=="string"?e:e.path;return n.startsWith(t.path)?l.Uri.joinPath(t,n.substr(t.path.length)):l.Uri.joinPath(t,n)}o(z,"joinRelativePath");function ee(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),te(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):te(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}o(ee,"isChild");function te(t,e){if(typeof t=="string")return e=typeof e=="string"?e:e.path,e.startsWith("/")||(e=`/${e}`),e.length===1||t.startsWith(e.endsWith("/")?e:`${e}/`);if(typeof e=="string"){e.startsWith("/")||(e=`/${e}`);const n=typeof t=="string"?t:t.path;return e.length===1||n.startsWith(e.endsWith("/")?e:`${e}/`)}return e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}o(te,"isDescendent");function T(t){return t&&typeof t=="object"&&"scheme"in t}o(T,"isSerializedUri");function q(t){return t.split("/").map(e=>encodeURIComponent(e)).join("/")}o(q,"encodeURIComponentExceptSlashes");var k;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs",t.baseVirtualWorkspaceUri=l.Uri.parse(`${t.scheme}://`);function e(d){const{authority:f}=d,h=f.indexOf(t.authoritySeparator);return h!==-1?f.substr(0,h):f}o(e,"getProviderId"),t.getProviderId=e;function n(d){return d.scheme!==t.scheme?d:d.with({scheme:e(d)})}o(n,"getProviderUri"),t.getProviderUri=n;function r(d,f){const h=new Map,p=l.workspace.textDocuments;if(p.length===0)return h;for(const b of p)b.uri.scheme===d&&f.some(ne=>te(b.uri,ne))&&h.set(E(b.uri),b.uri);return h}o(r,"getOpenUris"),t.getOpenUris=r;function i(d){return d.scheme===t.scheme?d:d.with({scheme:t.scheme})}o(i,"getVirtualUri"),t.getVirtualUri=i;function a(d,f){const[h,p]=d.authority.split(t.authoritySeparator);let b;if(p)try{const ne=JSON.parse(y(p));b=f?f(ne):ne}catch{}return{scheme:h,metadata:b}}o(a,"decodeAuthority"),t.decodeAuthority=a;function s(d,f){const h=f?`${t.authoritySeparator}${P(JSON.stringify(f))}`:"";return`${d}${h}`}o(s,"encodeAuthority"),t.encodeAuthority=s;function c(d){return d.authority.indexOf(t.authoritySeparator)===-1}o(c,"isCanonicalUri"),t.isCanonicalUri=c;function u(){var d,f;return(f=(d=l.workspace.workspaceFolders)==null?void 0:d.every(h=>h.uri.scheme===t.scheme))!=null?f:!1}o(u,"isVirtualWorkspace"),t.isVirtualWorkspace=u})(k||(k={}));var le;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(le||(le={}));var V;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(V||(V={}));var fe;(function(t){function e(n){return n!==void 0&&n.type===ae.Active}o(e,"isActive"),t.isActive=e})(fe||(fe={}));var De;(function(t){function e(n){const r=k.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:Fe.Latest};if(N(r.idx))return{type:Fe.SHA,sha:r.idx}}}o(e,"decode"),t.decode=e})(De||(De={}));var Fe;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(Fe||(Fe={}));var ae;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(ae||(ae={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(ae||(ae={}));var we;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(we||(we={}));var D;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(D||(D={}));var Je;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})(Je||(Je={}));var ye;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(ye||(ye={}));var ve;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(ve||(ve={}));var G;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(G||(G={}));var se;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(se||(se={}));var Re;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(Re||(Re={}));var Ge;(function(t){t.Browse="browse",t.Edit="edit"})(Ge||(Ge={}));var ie;(function(t){t.CommitFailedError="CommitFailedError",t.DetachedHEADError="DetachedHEADError",t.CommitToProtectedBranchError="CommitToProtectedBranchError",t.CommitToArchivedRepositoryError="CommitToArchivedRepositoryError",t.InvalidBranchNameError="InvalidBranchNameError",t.InvalidCredentialsError="InvalidCredentialsError",t.MergeConflictError="MergeConflictError",t.NothingToCommitError="NothingToCommitError",t.SyncConflictsError="SyncConflictsError",t.SyncOrFetchError="SyncOrFetchError",t.UnresolvedConflictsError="UnresolvedConflictsError",t.InvalidRepositoryError="InvalidRepositoryError",t.Unknown="Unknown"})(ie||(ie={}));class Xe extends Error{constructor(e,n,r){super(typeof e=="string"?e:e.message);this.messageOrError=e,this.errorCode=n,this.action=r}static CommitFailedError(){return new Xe("Failed to create and push commit",ie.CommitFailedError)}static DetachedHEADError(e){return new Xe(e,ie.DetachedHEADError)}static CommitToProtectedBranchError(e){return new Xe(e,ie.CommitToProtectedBranchError)}static CommitToArchivedRepositoryError(e){return new Xe(e,ie.CommitToArchivedRepositoryError)}static InvalidBranchNameError(e,n=!1){const r=n?`Branch '${e}' already exists`:`Invalid branch name '${e}'`;return new Xe(r,ie.InvalidBranchNameError)}static InvalidCredentialsError(e,n){return new Xe(e,ie.InvalidCredentialsError,n)}static MergeConflictError(e){return new Xe(e,ie.MergeConflictError)}static NothingToCommitError(e){return new Xe(e,ie.NothingToCommitError)}static SyncOrFetchError(e=!1){const n=e?"Unable to sync the repository":"Unable to fetch the repository";return new Xe(n,ie.SyncOrFetchError)}static SyncConflictsError(){const e="Sync operation will result in conflicts";return new Xe(e,ie.SyncConflictsError)}static UnresolvedConflictsError(){return new Xe("You have unresolved merge conflicts.",ie.UnresolvedConflictsError)}static InvalidRepositoryError(){return new Xe("The current repository is invalid",ie.InvalidRepositoryError)}static asVirtualProviderErrorCode(e){return e instanceof Error&&"messageOrError"in e&&"errorCode"in e?e.errorCode:ie.Unknown}}o(Xe,"VirtualProviderError");const lt=6;var wt;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(wt||(wt={}));var L;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(L||(L={})),function(t){function e(n){return n===t.None||n===t.Latest||n===t.Match||n===t.TipPlusLatest?n:t.None}o(e,"sanitize"),t.sanitize=e}(L||(L={}));var U;(function(t){t.Browse="browse",t.Edit="edit"})(U||(U={})),function(t){function e(r){return r===t.Browse||r===t.Edit?r:t.Edit}o(e,"sanitize"),t.sanitize=e;function n(r){return r===t.Browse?t.Edit:t.Browse}o(n,"toggle"),t.toggle=n}(U||(U={}));var re;(function(t){function e(n,r){return n.display===r.display&&n.index===r.index}o(e,"equals"),t.equals=e})(re||(re={}));var de;(function(t){const e=new Map([[se.Branch,L.None],[se.RemoteBranch,L.None],[se.PullRequestBranch,L.Match],[se.PullRequestRemoteBranch,L.Match],[se.Commit,L.Match],[se.Tag,L.Match]]),n=new Map([[se.Branch,U.Edit],[se.RemoteBranch,U.Edit],[se.PullRequestBranch,U.Browse],[se.PullRequestRemoteBranch,U.Browse],[se.Commit,U.Browse],[se.Tag,U.Browse]]);function r(a){var s,c;return{display:(s=n.get(a))!=null?s:U.Edit,index:(c=e.get(a))!=null?c:L.None}}o(r,"getDefault"),t.getDefault=r;function i(a){switch(a){case se.Branch:case se.RemoteBranch:return{display:U.Browse,index:L.Latest};case se.PullRequestBranch:case se.PullRequestRemoteBranch:return{display:U.Browse,index:L.Match};case se.Commit:case se.Tag:return{display:U.Browse,index:L.Match};default:return{display:U.Edit,index:L.None}}}o(i,"getIndexDefault"),t.getIndexDefault=i})(de||(de={}));const He=null;var Ie=gr(5179),ce=gr.n(Ie);const Ce="modes",Te="indexMemento";class Ve{constructor(){this._onDidChange=new l.EventEmitter,this._onDidChangeAny=new l.EventEmitter,this.memoryState=new Map}static configure(e,n){me.configPrefix=e,me.state=n.workspaceState,n.subscriptions.push(l.workspace.onDidChangeConfiguration(me.onConfigurationChanged,me))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(Ce),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(Ce,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(Te),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}getEffective(e,n,r){const i=this.inspect(e,n);return i===void 0&&r!==void 0?r:(i==null?void 0:i.workspaceFolderValue)!==void 0?i.workspaceFolderValue:(i==null?void 0:i.workspaceValue)!==void 0?i.workspaceValue:i==null?void 0:i.globalValue}get(e,n,r){return r===void 0?l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e):l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e,r)}getMode(e,n,r){var i;const a=e.toString();let s=this.modes!==void 0?this.modes[a]:void 0;if(s!==void 0)return{display:U.sanitize(s.display),index:L.sanitize(s.index)};if(s=this.memoryState.get(a),s!==void 0)return s;if(n===se.Branch||n===se.RemoteBranch)switch((i=l.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:i.get("branch")){case"none":return{display:U.Edit,index:L.None};case"latest":return{display:U.Browse,index:L.Latest};case"tipPlusLatest":return{display:U.Edit,index:L.TipPlusLatest}}if(!r)return de.getDefault(n)}setMode(e,n){const r=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(r,n),Promise.resolve()):(this.modes[r]=n,this._state.update(Ce,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=n,this._state.update(Te,this.indexMemento))}getAny(e,n,r){return r===void 0?l.workspace.getConfiguration(void 0,n).get(e):l.workspace.getConfiguration(void 0,n).get(e,r)}changed(e,n,r){var i;return(i=e==null?void 0:e.affectsConfiguration(`${this.configPrefix}.${n}`,r))!=null?i:!0}inspect(e,n){return l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).inspect(e===void 0?this.configPrefix:e)}inspectAny(e,n){return l.workspace.getConfiguration(void 0,n).inspect(e)}async migrate(e,n,r){const i=me.inspect(e);if(i===void 0)return!1;let a=!1;return i.globalValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),a=!0),i.workspaceValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),a=!0),i.workspaceFolderValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder),a=!0),!a&&r.fallbackValue!==void 0&&(await this.update(n,r.fallbackValue,l.ConfigurationTarget.Global),a=!0),a}async migrateIfMissing(e,n,r){const i=me.inspect(e);if(i===void 0)return;const a=me.inspect(n);i.globalValue!==void 0&&(a===void 0||a.globalValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(a===void 0||a.workspaceValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(a===void 0||a.workspaceFolderValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,n,r){return l.workspace.getConfiguration(this.configPrefix).update(e,n,r)}updateAny(e,n,r,i){return l.workspace.getConfiguration(void 0,r===l.ConfigurationTarget.Global?void 0:i).update(e,n,r)}updateEffective(e,n){const r=me.inspect(e);return r.workspaceFolderValue!==void 0?n===r.workspaceFolderValue?Promise.resolve(void 0):me.update(e,n,l.ConfigurationTarget.WorkspaceFolder):r.workspaceValue!==void 0?n===r.workspaceValue?Promise.resolve(void 0):me.update(e,n,l.ConfigurationTarget.Workspace):r.globalValue===n||r.globalValue===void 0&&n===r.defaultValue?Promise.resolve(void 0):me.update(e,ce()(n,r.defaultValue)?void 0:n,l.ConfigurationTarget.Global)}}o(Ve,"Configuration");const me=new Ve,Le="";var Ze;(function(t){t.Off="off",t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug"})(Ze||(Ze={}));var nt;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(nt||(nt={}));const be="[RemoteHub]",B=o(class{static configure(t,e,n){this._isDebugging=t.extensionMode===l.ExtensionMode.Development,this.outputChannelName=e,this.logLevel=n}static enabled(t){return this.level>=this.toOrderedLevel(t)}static get logLevel(){return this._logLevel}static set logLevel(t){var e,n;this._logLevel=t,this.level=this.toOrderedLevel(t),t===Ze.Off?((e=this.output)==null||e.dispose(),this.output=void 0):this.output=(n=this.output)!=null?n:l.window.createOutputChannel(this.outputChannelName)}static toOrderedLevel(t){switch(t){case Ze.Off:return 0;case Ze.Error:return 1;case Ze.Warn:return 2;case Ze.Info:return 3;case Ze.Debug:return 4}}static get isDebugging(){return this._isDebugging}static debug(t,...e){B.isDebugging&&console.log(this.timestamp,be,t!=null?t:Le,...e),!(this.output===void 0||this.level<4)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:Le}${this.toLoggableParams(!0,e)}`)}static error(t,e,...n){if(!(this.level<1&&!B.isDebugging)){if(e===void 0){const r=t instanceof Error?t.stack:void 0;if(r){const i=/.*\s*?at\s(.+?)\s/.exec(r);i!==null&&(e=i[1])}}B.isDebugging&&console.error(this.timestamp,be,e!=null?e:Le,...n,t),!(this.output===void 0||this.level<1)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:Le}${this.toLoggableParams(!1,n)}
${String(t)}`)}}static log(t,...e){B.isDebugging&&console.log(this.timestamp,be,t!=null?t:Le,...e),!(this.output===void 0||this.level<3)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:Le}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){B.isDebugging&&console.warn(this.timestamp,be,t!=null?t:Le,...e),!(this.output===void 0||this.level<2)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:Le}${this.toLoggableParams(!1,e)}`)}static showOutputChannel(){var t;(t=this.output)==null||t.show()}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof l.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,n,r;let i;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;i=(e=t.prototype.constructor.name)!=null?e:Le}else i=(r=(n=t.constructor)==null?void 0:n.name)!=null?r:Le;const a=i.indexOf("_");return a===-1?i:i.substr(a+1)}static get timestamp(){const t=new Date;return`[${t.toISOString().replace(/T/," ").replace(/\..+/,Le)}:${`00${t.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!B.isDebugging)return Le;const n=e.map(r=>this.toLoggable(r)).join(", ");return n.length!==0?` \u2014 ${n}`:Le}},"_Logger");let K=B;K.level=0,K._logLevel=Ze.Off;const Ye=new TextDecoder,jt=new TextEncoder;async function An(t){const e=typeof t=="string"?jt.encode(t):t;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const r=new cr;r.update(e),n=r.digest()}return globalThis.btoa(encodeURIComponent(Ye.decode(n)))}o(An,"sha1");async function Mn(t){const e=await globalThis.crypto.subtle.digest({name:"sha-256"},t);return Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join("")}o(Mn,"sha256");var Cn;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(Cn||(Cn={}));function lr(t,e,n=32){const r=n-e,i=~((1<<r)-1);return(t<<e|(i&t)>>>r)>>>0}o(lr,"leftRotate");function ar(t,e=0,n=t.byteLength,r=0){for(let i=0;i<n;i++)t[e+i]=r}o(ar,"fill");const mr=o(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let n=this._buffLen,r=0;const i=t.byteLength;for(;r<i;){const a=Math.min(64-n,i-r);for(let s=0;s<a;s++)e[n++]=t[r++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,ar(this._buff,this._buffLen),this._buffLen>56&&(this._step(),ar(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=mr._bigBlock32,e=this._buffDV;for(let f=0;f<64;f+=4)t.setUint32(f,e.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)t.setUint32(f,lr(t.getUint32(f-12,!1)^t.getUint32(f-32,!1)^t.getUint32(f-56,!1)^t.getUint32(f-64,!1),1),!1);let n=this._h0,r=this._h1,i=this._h2,a=this._h3,s=this._h4,c,u,d;for(let f=0;f<80;f++)f<20?(c=r&i|~r&a,u=1518500249):f<40?(c=r^i^a,u=1859775393):f<60?(c=r&i|r&a|i&a,u=2400959708):(c=r^i^a,u=3395469782),d=lr(n,5)+c+s+u+t.getUint32(f*4,!1)&4294967295,s=a,a=i,i=lr(r,30),r=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+a&4294967295,this._h4=this._h4+s&4294967295}},"_SHA1Computer");let cr=mr;cr._bigBlock32=new DataView(new ArrayBuffer(320));function yr(t){const e=globalThis.atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}o(yr,"fromBase64");const{fromCharCode:dt}=String;function zt(t){let e;if(typeof t=="string")e=t;else{e="";for(let n=0,{length:r}=t;n<r;n++)e+=dt(t[n])}return globalThis.btoa(e)}o(zt,"toBase64");function an(t,e){if(t===e)return-1;let n=0;for(;t[n]===e[n];)n++;return n}o(an,"indexOfDifference");function on(t){return t.replace(/[\\{}*+?|^$.[\]()]/g,"\\$&")}o(on,"escapeRegExpCharacters");let Yt;var _n;(function(t){function e(n){const r=vr(n);return Yt=l.env.uiKind===l.UIKind.Web,K.warn(`Running on the ${Yt?"web":"desktop"}${n.extensionRuntime!==l.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${r}; storageUri=${n.globalStorageUri.toString(!0)}`),r}o(e,"configure"),t.configure=e})(_n||(_n={}));const zn=/\/workspaceStorage\/(?<id>[^/]+)/i;function vr(t){var e;if(t.storageUri===void 0)return"";const n=zn.exec(t.storageUri.path);let r;if((e=n==null?void 0:n.groups)==null?void 0:e.id)r=n.groups.id;else{r=t.storageUri.path;const i=an(t.globalStorageUri.path,r),a=`/${t.extension.id}`;r.endsWith(a)?r=r.slice(i,-a.length):r=r.substr(i)}return/-[0-9]$/.test(r)?r.slice(0,-2):r}o(vr,"getWorkspaceId");var er;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasRecentRepositories="remoteHub:hasRecentRepositories",t.HasSearchIndexes="gitHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",t.HasPullRequestExtension="gitHub:hasPullRequestExtension"})(er||(er={}));const Ar=new Map;function Ur(t){return t==="isWeb"?isWeb:t==="remoteName"?env.remoteName:t==="virtualWorkspace"?VirtualProviderUtils.isVirtualWorkspace():t.startsWith("config.")?configuration.getAny(t.substring(7)):Ar.get(t)}o(Ur,"getContext");function Sr(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}o(Sr,"isSupportedContextKey");async function Dr(t,e){Ar.set(t,e),!t.startsWith("continueOn:")&&await l.commands.executeCommand("setContext",t,e)}o(Dr,"setContext");const Fr=o(async(t,e,n)=>{const r=await Promise.resolve().then(gr.bind(gr,850)),i=await Promise.resolve().then(gr.bind(gr,5229)),a=new r.AppInsightsCore,s=new i.PostChannel,c={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){c.extensionConfig={};const f={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[s.identifier]=f}const d=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(c,[]),a.addTelemetryInitializer(f=>{var h,p;!d||(f.ext=(h=f.ext)!=null?h:{},f.ext.utc=(p=f.ext.utc)!=null?p:{},f.ext.utc.flags=8462029)}),a},"getAICore"),Ln=o(async(t,e,n)=>{const r=await Fr(t,e,n);return{logEvent:(a,s)=>{try{r==null||r.track({name:a,baseData:{name:a,properties:s==null?void 0:s.properties,measurements:s==null?void 0:s.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{r==null||r.unload()}catch(a){throw new Error(`Failed to flush app insights!
`+a.message)}}}},"oneDataSystemClientFactory");var Nn;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(Nn||(Nn={}));class Cr{constructor(e,n){this._instantiationStatus=Nn.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Nn.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Nn.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===Nn.NOT_INSTANTIATED&&(this._instantiationStatus=Nn.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=Nn.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=Nn.INSTANTIATED}))}}o(Cr,"BaseTelemetrySender");class Wr{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}internalSendTelemetryException(e,n,r,i){i?this.telemetrySender.sendErrorData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryException(e,n,r){this.internalSendTelemetryException(e,n,r,!1)}sendDangerousTelemetryException(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryException(e,n,r,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}}o(Wr,"BaseTelemetryReporter");class Rr{static applyReplacements(e,n){for(const r of Object.keys(e))for(const i of n)i.lookup.test(r)&&(i.replacementString!==void 0?e[r]=i.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.7"}}static getInstance(){return Rr._instance||(Rr._instance=new Rr),Rr._instance}}o(Rr,"TelemetryUtil");const vi=o(async(t,e)=>{let n;try{const i=await Promise.resolve().then(gr.bind(gr,3268));n=new i.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0})}catch(i){return Promise.reject(i)}return{logEvent:(i,a)=>{const s={...a==null?void 0:a.properties,...a==null?void 0:a.measurements};(e==null?void 0:e.length)&&Rr.applyReplacements(s,e),n==null||n.track({name:i,data:s})},flush:async()=>{n==null||n.flush()}}},"webAppInsightsClientFactory");function br(t){if(t.userAgentData){const e=t.userAgentData.brands[t.userAgentData.brands.length-1];return`${t.userAgentData.platform} - ${e==null?void 0:e.brand} v${e==null?void 0:e.version}}`}else return t.appVersion}o(br,"getBrowserRelease");class M extends Wr{constructor(e,n){let r=o(s=>vi(s,n),"clientFactory");Rr.shouldUseOneDataSystemSDK(e)&&(r=o(s=>Ln(s,l),"clientFactory"));const i={release:br(navigator),platform:"web",architecture:"web"},a=new Cr(e,r);if(e&&e.indexOf("AIF")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,l,{additionalCommonProperties:Rr.getAdditionalCommonProperties(i)})}}o(M,"TelemetryReporter");const ue="Type of classified event does not match event properties",Ae=o(class{constructor(t){this.context=t,this.sharedProperties={},Ae._instance=this,this.reporter=new M(Ae.ingestionKey)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==ue&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,n){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},n)}sendErrorEvent(t,e,n){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},n)}sendException(t,e,n){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},n)}setSharedProperty(t,e){this.sharedProperties[t]=e}reportWorkbenchLoadResult(t){const e="_codespaces.webeditor.connectWorkspace";l.env.appHost==="github.dev"&&(K.debug(`Executing ${e}`),t={...t,errorDetail:t.errorDetail instanceof Error?t.errorDetail.name:void 0},l.commands.executeCommand(e,t).then(n=>{},n=>{K.debug(`Failed to execute ${e}`,n)}))}},"_TelemetryService");let Pe=Ae;Pe.ingestionKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255";function et(t,e){const n=l.l10n.t("Report Issue"),r=l.l10n.t("Reload");l.window.showErrorMessage(l.l10n.t("The {0} extension failed to activate.",t.extension.packageJSON.displayName),{modal:!0,detail:l.l10n.t("Please try reloading the window, or report an issue.")},r,n).then(i=>{i===n?l.commands.executeCommand("workbench.action.openIssueReporter",{extensionId:t.extension.id,issueTitle:"Extension activation failed",issueBody:e instanceof Error?e.toString():void 0}):i===r&&l.commands.executeCommand("workbench.action.reloadWindow")})}o(et,"handleExtensionActivationError");function je(t){const e=performance.now()*.001;let n=Math.floor(e),r=Math.floor(e%1*1e9);return t!==void 0&&(n=n-t[0],r=r-t[1],r<0&&(n--,r+=1e9)),[n,r]}o(je,"hrtime");let ct=0;function Et(){return ct===Number.MAX_SAFE_INTEGER&&(ct=0),++ct}o(Et,"getNextInstanceId");const Dt=o(class{constructor(t,e,...n){this.context=t,this.instance=`[${Et().toString().padStart(5)}] `;var r,i,a,s,c,u;let d;if(typeof(e==null?void 0:e.log)=="boolean"?d=e.log?{}:void 0:d=(r=e==null?void 0:e.log)!=null?r:{},this.logLevel=(i=e==null?void 0:e.logLevel)!=null?i:Ze.Info,this.time=je(),d){if(!K.enabled(this.logLevel))return;n.length?Ct(this.logLevel,`${this.instance}${(a=d.prefix)!=null?a:""}${t}${(s=d.message)!=null?s:""}`,...n):Ct(this.logLevel,`${this.instance}${(c=d.prefix)!=null?c:""}${t}${(u=d.message)!=null?u:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:je(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=je()}stop(t){this.restart(t)}logCore(t,e,n){var r,i,a,s,c,u,d;if(!K.enabled(this.logLevel))return;let f="";if(this.step){const[ne,A]=je(this.step.time),Z=ne*1e3+Math.floor(A/1e6);f=`${this.step.label?`${this.step.label} took `:""}${Z} ms`}if(!n){Ct(this.logLevel,`${this.instance}${(r=e==null?void 0:e.prefix)!=null?r:""}${t}${(i=e==null?void 0:e.message)!=null?i:""}${f?` ${f}`:""}${(a=e==null?void 0:e.suffix)!=null?a:""}`);return}const[h,p]=je(this.time),b=h*1e3+Math.floor(p/1e6);Ct(b>500?Ze.Warn:this.logLevel,`${this.instance}${(s=e==null?void 0:e.prefix)!=null?s:""}${t}${(c=e==null?void 0:e.message)!=null?c:""}${(u=e==null?void 0:e.took)!=null?u:" took "}${b} ms${f?` (${f})`:""}${(d=e==null?void 0:e.suffix)!=null?d:""}`)}static start(t,e,...n){var r;(r=Dt.watches.get(t))==null||r.log(),Dt.watches.set(t,new Dt(t,e,...n))}static log(t,e){var n;(n=Dt.watches.get(t))==null||n.log(e)}static stop(t,e){var n;(n=Dt.watches.get(t))==null||n.stop(e),Dt.watches.delete(t)}},"_Stopwatch");let bt=Dt;bt.watches=new Map;function Ct(t,e,...n){switch(t){case Ze.Warn:K.warn(e,...n);break;case Ze.Info:K.log(e,...n);break;default:K.debug(e,...n);break}}o(Ct,"log");class Bt{constructor(e){this.providerService=e,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=l.Disposable.from(e.onDidChangeRepositories(n=>{for(const r of n.added)this.repositoryOpened(r);for(const r of n.removed)this.repositoryClosed(r)}),me.onDidChange(n=>{for(const r of this.services.values()){const i=r.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",i.uri)&&r.service.updateIndexMode().catch(a=>{K.error(a)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const n=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(n,1)}}async repositoryOpened(e){const n=E(e.uri);if(!this.handledRepositories.has(n)){this.handledRepositories.add(n);for(const r of this.providers){const i=await r.createNavigationService(this.providerService,e);if(i!==void 0){const a=i();this.services.set(n,{service:a});break}}}}repositoryClosed(e){const n=E(e.uri);this.handledRepositories.delete(n);const r=this.services.get(n);r!==void 0&&(r.service.dispose(),this.services.delete(E(e.uri)))}}o(Bt,"CodeNavigationServices");const xt=globalThis.fetch;async function Wt(t,e,n){const r=new AbortController;n.onCancellationRequested(()=>r.abort());try{return await globalThis.fetch(t,{...e,signal:r.signal})}catch(i){throw n.isCancellationRequested?new CancellationError:i}}o(Wt,"fetchWithCancellation");async function Ft(t,e,n,r,i){if(n===0)throw new CancellationError;const a=new CancellationTokenSource;r.onCancellationRequested(()=>a.cancel());try{const s=await Wt(t,e,a.token);if(s.body){const c=[];let u=0;const d=s.body.getReader();let f=3;for(;;){let{done:h,value:p}=await d.read();if(h){const ne=c.reduce((pe,X)=>pe+X.length,0),A=new Uint8Array(ne);let Z=0;for(const pe of c)A.set(pe,Z),Z+=pe.length;return A}p&&(c.push(p),u+=p.length);const b=Math.floor(u/(1024*1024));if(f<b){f=b;const ne={message:b+" MB"};i.report(ne)}if(n!==void 0&&u>n)throw d.cancel(),a.cancel(),new Error("LIMIT_HIT")}}}catch(s){throw r.isCancellationRequested?new CancellationError:s}throw new CancellationError}o(Ft,"fetchUInt8ArrayWithMaxSizeAndCancellation");const Wn=globalThis.crypto;function bn(){return Wn.randomUUID()}o(bn,"uuid");/*! (c) Andrea Giammarchi - ISC */var ur={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;ur.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,n,r){"use strict";var i=e.create,a=e.defineProperty,s=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,u=/\+/g,d={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},f={append:function(X,_e){ne(this._ungap,X,_e)},delete:function(X){delete this._ungap[X]},get:function(X){return this.has(X)?this._ungap[X][0]:null},getAll:function(X){return this.has(X)?this._ungap[X].slice(0):[]},has:function(X){return X in this._ungap},set:function(X,_e){this._ungap[X]=[n(_e)]},forEach:function(X,_e){var xe=this;for(var Ue in xe._ungap)xe._ungap[Ue].forEach(Qe,Ue);function Qe(Mt){X.call(_e,Mt,n(Ue),xe)}o(Qe,"invoke")},toJSON:function(){return{}},toString:function(){var X=[];for(var _e in this._ungap)for(var xe=Z(_e),Ue=0,Qe=this._ungap[_e];Ue<Qe.length;Ue++)X.push(xe+"="+Z(Qe[Ue]));return X.join("&")}};for(var h in f)a(p.prototype,h,{configurable:!0,writable:!0,value:f[h]});ur.URLSearchParams=p;function p(X){var _e=i(null);switch(a(this,"_ungap",{value:_e}),!0){case!X:break;case typeof X=="string":X.charAt(0)==="?"&&(X=X.slice(1));for(var xe=X.split("&"),Ue=0,Qe=xe.length;Ue<Qe;Ue++){var Mt=xe[Ue],gt=Mt.indexOf("=");-1<gt?ne(_e,A(Mt.slice(0,gt)),A(Mt.slice(gt+1))):Mt.length&&ne(_e,A(Mt),"")}break;case r(X):for(var Ue=0,Qe=X.length;Ue<Qe;Ue++){var Mt=X[Ue];ne(_e,Mt[0],Mt[1])}break;case"forEach"in X:X.forEach(b,_e);break;default:for(var Qt in X)ne(_e,Qt,X[Qt])}}o(p,"URLSearchParams");function b(X,_e){ne(this,_e,X)}o(b,"addEach");function ne(X,_e,xe){var Ue=r(xe)?xe.join(","):xe;_e in X?X[_e].push(Ue):X[_e]=[Ue]}o(ne,"appendTo");function A(X){return decodeURIComponent(X.replace(c,"%25").replace(u," "))}o(A,"decode");function Z(X){return encodeURIComponent(X).replace(s,pe)}o(Z,"encode");function pe(X){return d[X]}o(pe,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(r){}"forEach"in t||(t.forEach=o(function(i,a){var s=this,c=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(u){!u.length||u in c||(c[u]=s.getAll(u)).forEach(function(d){i.call(a,d,u,s)})})},"forEach")),"keys"in t||(t.keys=o(function(){return n(this,function(i,a){this.push(a)})},"keys")),"values"in t||(t.values=o(function(){return n(this,function(i,a){this.push(i)})},"values")),"entries"in t||(t.entries=o(function(){return n(this,function(i,a){this.push([a,i])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=o(function(){for(var i=this.entries(),a=i.next(),s=a.done,c=[],u=Object.create(null),d,f,h;!s;)h=a.value,f=h[0],c.push(f),f in u||(u[f]=[]),u[f].push(h[1]),a=i.next(),s=a.done;for(c.sort(),d=0;d<c.length;d++)this.delete(c[d]);for(d=0;d<c.length;d++)f=c[d],this.append(f,u[f].shift())},"sort"));function n(r,i){var a=[];return r.forEach(i,a),e?a[Symbol.iterator]():{next:function(){var s=a.shift();return{done:s===void 0,value:s}}}}o(n,"iterator"),function(r){var i=r.defineProperty,a=r.getOwnPropertyDescriptor,s=o(function(h){function p(A,Z){t.append.call(this,A,Z),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}o(p,"append");function b(A){t.delete.call(this,A),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}o(b,"del");function ne(A,Z){t.set.call(this,A,Z),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}return o(ne,"set"),function(A,Z){return A.append=p,A.delete=b,A.set=ne,i(A,"_usp",{configurable:!0,writable:!0,value:Z})}},"createSearchParamsPollute"),c=o(function(h){return function(p,b){return i(p,"_searchParams",{configurable:!0,writable:!0,value:h(b,p)}),b}},"createSearchParamsCreate"),u=o(function(h){var p=h.append;h.append=t.append,URLSearchParams.call(h,h._usp.search.slice(1)),h.append=p},"updateSearchParams"),d=o(function(h,p){if(!(h instanceof p))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+p.name)},"verifySearchParams"),f=o(function(h){var p=h.prototype,b=a(p,"searchParams"),ne=a(p,"href"),A=a(p,"search"),Z;!b&&A&&A.set&&(Z=c(s(A)),r.defineProperties(p,{href:{get:function(){return ne.get.call(this)},set:function(pe){var X=this._searchParams;ne.set.call(this,pe),X&&u(X)}},search:{get:function(){return A.get.call(this)},set:function(pe){var X=this._searchParams;A.set.call(this,pe),X&&u(X)}},searchParams:{get:function(){return d(this,h),this._searchParams||Z(this,new URLSearchParams(this.search.slice(1)))},set:function(pe){d(this,h),Z(this,pe)}}}))},"upgradeClass");try{f(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&f(URL)}catch(h){}}(Object)})(ur.URLSearchParams.prototype,Object);const ir=ur.URLSearchParams,or=60,$r=or*60,Lr=$r*24,qn=Lr*7,pi=Lr*30,Jt=Lr*365;function Jn(t,e){typeof t!="number"&&(t=t.getTime());const n=Math.round((new Date().getTime()-t)/1e3);if(n<-30)return l.l10n.t("in {0}",Jn(new Date().getTime()+n*1e3,{ago:!1,short:e==null?void 0:e.short}));if(n<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?l.l10n.t("secs ago"):l.l10n.t("A few seconds ago"):(e==null?void 0:e.short)?l.l10n.t("now"):l.l10n.t("Just now");let r;return n<or?(r=n,(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec ago",r):l.l10n.t("{0} second ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs ago",r):l.l10n.t("{0} seconds ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec",r):l.l10n.t("{0} second",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs",r):l.l10n.t("{0} seconds",r)):n<$r?(r=Math.floor(n/or),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min ago",r):l.l10n.t("{0} minute ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins ago",r):l.l10n.t("{0} minutes ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min",r):l.l10n.t("{0} minute",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins",r):l.l10n.t("{0} minutes",r)):n<Lr?(r=Math.floor(n/$r),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr ago",r):l.l10n.t("{0} hour ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs ago",r):l.l10n.t("{0} hours ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr",r):l.l10n.t("{0} hour",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs",r):l.l10n.t("{0} hours",r)):n<qn?(r=Math.floor(n/Lr),(e==null?void 0:e.ago)?r===1?l.l10n.t("{0} day ago",r):l.l10n.t("{0} days ago",r):r===1?l.l10n.t("{0} day",r):l.l10n.t("{0} days",r)):n<pi?(r=Math.floor(n/qn),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk ago",r):l.l10n.t("{0} week ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks ago",r):l.l10n.t("{0} weeks ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk",r):l.l10n.t("{0} week",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks",r):l.l10n.t("{0} weeks",r)):n<Jt?(r=Math.floor(n/pi),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo ago",r):l.l10n.t("{0} month ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos ago",r):l.l10n.t("{0} months ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo",r):l.l10n.t("{0} month",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos",r):l.l10n.t("{0} months",r)):(r=Math.floor(n/Jt),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr ago",r):l.l10n.t("{0} year ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs ago",r):l.l10n.t("{0} years ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr",r):l.l10n.t("{0} year",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs",r):l.l10n.t("{0} years",r))}o(Jn,"fromNow");var xn,en;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(en||(en={}));class $n{constructor(){this[xn]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=en.None){const r=this._map.get(e);if(!!r)return n!==en.None&&this.touch(r,n),r.value}set(e,n,r=en.None){let i=this._map.get(e);if(i)i.value=n,r!==en.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case en.None:this.addItemLast(i);break;case en.First:this.addItemFirst(i);break;case en.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){const r=this._state;let i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}[(xn=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==en.First&&n!==en.Last)){if(n===en.First){if(e===this._head)return;const r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===en.Last){if(e===this._tail)return;const r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(const[n,r]of e)this.set(n,r)}}o($n,"LinkedMap");class kn extends $n{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=en.AsNew){return super.get(e,n)}peek(e){return super.get(e,en.None)}set(e,n){return super.set(e,n,en.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}o(kn,"LRUCache");class wr{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,n=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,i)=>{this.resolver=r,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const r=this.task;return this.task=void 0,r()}})),this.timeout=setTimeout(()=>{var r;this.timeout=void 0,(r=this.resolver)==null||r.call(this,void 0)},n),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}o(wr,"TaskDebouncer");const Kr=Symbol("QuickPickGoBack");var mi;(function(t){async function e(n,r,i,a,s){const c=[],u=n.getRemoteWorkspaceSourceProviders();c.push(...u.map(b=>new yi(b)));const d=await n.getRecentWorkspaceSourceProviders();if(d){const b=await d.provideSources();if(b){const ne=b.reduce((A,Z)=>("providerId"in Z&&A.push({label:`${Z.icon?`${Z.icon} `:""}${Z.name}`,description:Z.description,detail:Z.detail,url:Z.url,workspace:Z.url?void 0:Z.workspace,buttons:[Gr.OpenInNewWindow],showMore:void 0}),A),[]);c.push({label:l.l10n.t("recently opened"),kind:l.QuickPickItemKind.Separator},...ne)}}const f=l.window.createQuickPick(),h=[];let p=r;try{for(;;){const b=await new Promise(ne=>{h.push(f.onDidHide(()=>ne(void 0)),f.onDidChangeValue(A=>{A=A.trim(),A.length===0?f.items=c:f.activeItems.length===0||f.activeItems[0]instanceof si?f.items=[new si(n,A),...c]:f.items=c}),f.onDidAccept(()=>{if(f.activeItems.length!==0){const[A]=f.activeItems;(!(A instanceof si)||A.validate())&&ne(A)}}),f.onDidChangeActive(()=>{if(p!==void 0||!(s==null?void 0:s.allowAddToWorkspace))return;const[A]=f.activeItems;let Z=!0;if(A===void 0?Z=Boolean(f.value):Z=A instanceof si,Z){if(f.buttons.length===1)return;f.buttons=[Gr.AddToWorkspace]}else{if(f.buttons.length===0)return;f.buttons=[]}}),f.onDidTriggerButton(A=>{if(A===Gr.AddToWorkspace){const[Z]=f.activeItems;if(!(Z instanceof si))return;Z.validate()&&(p=Je.AddToWorkspace,ne(Z))}}),f.onDidTriggerItemButton(A=>{switch(A.button){case Gr.OpenInNewWindow:p=Je.NewWindow,ne(A.item);break;default:break}})),f.title=a,f.placeholder=i,f.matchOnDescription=!0,f.items=c,f.sortByLabel=!1,f.show()});if(b instanceof yi){const ne=await b.show(p,b.placeholder,a,s);if(ne===Kr)continue;const[A,Z]=ne;if(A&&"showMore"in A&&A.showMore!==void 0)continue;return[A,Z]}if(!(b&&"showMore"in b&&b.showMore!==void 0))return[b,p]}}finally{f.dispose(),h.forEach(b=>void b.dispose())}}o(e,"show"),t.show=e})(mi||(mi={}));class yi{constructor(e){this.provider=e}get label(){return`${this.provider.icon?`${this.provider.icon} `:""}${this.provider.label}`}get placeholder(){return this.provider.placeholder}async show(e,n,r,i){const a=l.window.createQuickPick(),s=new wr(500),c=[s];async function u(Z,pe,X,_e,xe){const Ue=await Z.provideSources(pe,X,_e,xe);return Ue==null?void 0:Ue.map(Qe=>"showMore"in Qe?{label:Qe.label,showMore:Qe.showMore}:"kind"in Qe?Qe:{label:`${Qe.icon?`${Qe.icon} `:""}${Qe.name}`,description:Qe.description,detail:Qe.detail,url:Qe.url,workspace:Qe.workspace,buttons:[Gr.OpenInNewWindow]})}o(u,"getItems");async function d(Z){var pe;b=void 0;const X=a.activeItems;a.items=(pe=Z!=null?Z:await A)!=null?pe:[],p&&X.length!==0&&(a.activeItems=a.items.filter(_e=>X.some(xe=>xe.url===_e.url))),a.busy=!1}o(d,"setItems");let f,h;if(this.provider.provideOrganization&&this.provider.provideProject){if(f=await this.provider.provideOrganization(),!f)return[void 0,void 0];if(h=await this.provider.provideProject(f),!h)return[void 0,void 0]}let p=!1,b,ne=e,A=u(this.provider,f,h,void 0,{sort:"updated"});try{const Z=await new Promise(pe=>{c.push(a.onDidHide(()=>pe(void 0)),a.onDidChangeValue(X=>{p=!1,X=X.trim(),a.busy=!0;const _e=s.debounce(X?()=>u(this.provider,f,h,X,{sort:"stars"}):()=>A);b===void 0&&(b=_e.then(xe=>d(xe)))}),a.onDidAccept(async()=>{var X;if(a.activeItems.length!==0){const[_e]=a.activeItems;if("showMore"in _e){await((X=_e.showMore)==null?void 0:X.call(_e)),A=u(this.provider,f,h,void 0,{sort:"updated"}),await d(await A);return}pe(_e)}}),a.onDidChangeActive(()=>{if(p=a.activeItems.length!==0,ne!==void 0||!(i==null?void 0:i.allowAddToWorkspace))return;const[X]=a.activeItems;if(X===void 0){if(a.buttons.length===1)return;a.buttons=[l.QuickInputButtons.Back]}else{if(a.buttons.length===2)return;a.buttons=[l.QuickInputButtons.Back,Gr.AddToWorkspace]}}),a.onDidTriggerButton(X=>{if(X===l.QuickInputButtons.Back){pe(Kr);return}if(X===Gr.AddToWorkspace){const[_e]=a.activeItems;if(_e===void 0)return;ne=Je.AddToWorkspace,pe(_e)}}),a.onDidTriggerItemButton(X=>{switch(X.button){case Gr.OpenInNewWindow:ne=Je.NewWindow,pe(X.item);break;default:break}})),a.title=r,a.placeholder=n,a.matchOnDetail=!0,a.sortByLabel=!1,a.buttons=[l.QuickInputButtons.Back],a.busy=!0,a.show(),b=s.debounce(()=>A,0).then(X=>d(X))});return Z===Kr?Z:[Z,ne]}finally{a.dispose(),c.forEach(Z=>void Z.dispose())}}}o(yi,"RemoteSourceProviderPickerItem");class si{constructor(e,n){this.url=n,this.alwaysShow=!0,this.canOpenResult=e.canOpenRemoteUrl(n)}get buttons(){return[Gr.OpenInNewWindow]}get label(){if(this.canOpenResult){const{provider:e,urlType:n}=this.canOpenResult;switch(n){case G.Branch:return l.l10n.t("Open Branch from {0} Repository",e.name);case G.Tag:return l.l10n.t("Open Tag from {0} Repository",e.name);case G.Commit:return l.l10n.t("Open Commit from {0} Repository",e.name);case G.File:return l.l10n.t("Open File from {0} Repository",e.name);case G.PullRequest:return l.l10n.t("Open Pull Request from {0} Repository",e.name);default:return l.l10n.t("Open {0} Repository",e.name)}}return l.l10n.t("Enter a Remote Url")}get description(){return this.url}validate(){return this.canOpenResult!==void 0}}o(si,"RemoteUrlQuickPickItem");var Gr;(function(t){t.AddToWorkspace={iconPath:new l.ThemeIcon("plus"),tooltip:l.l10n.t("Add to Workspace")},t.OpenInNewWindow={iconPath:new l.ThemeIcon("empty-window"),tooltip:l.l10n.t("Open in New Window")}})(Gr||(Gr={}));function na(t,e){return t.reduce((r,i)=>{const a=e(i),s=r.get(a);return s===void 0?r.set(a,[i]):s.push(i),r},new Map)}o(na,"groupBy");function Mi(t){let e=0;for(const n of t){if(n===0)return!0;if(e++,e>8e3)break}return!1}o(Mi,"isBinary");function ra(t,e,n=r=>r){return[...t.reduce((i,a)=>{const s=e(a),c=i.get(s);if(c===void 0)i.set(s,a);else{const u=n(c,a);u!==void 0&&i.set(s,u)}return i},new Map).values()]}o(ra,"uniqueBy");function Ii(t,e){switch(t){case V.Branch:case V.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case V.Tag:return"$(tag)";case V.Commit:return"$(git-commit)"}}o(Ii,"headTypeToCodicon");function ia(t){switch(t){case ae.Active:return"$(layers-active)";case ae.Match:return"$(layers-dot)";case ae.Indexed:return"$(layers)"}}o(ia,"indexTypeToCodicon");function Zr(t,e){switch(t){case V.Branch:case V.RemoteBranch:return e?new l.ThemeIcon("git-pull-request"):new l.ThemeIcon("git-branch");case V.Tag:return new l.ThemeIcon("tag");case V.Commit:return new l.ThemeIcon("git-commit")}}o(Zr,"headTypeToThemeIcon");function*ei(t,e){for(const n of t)yield*e(n)}o(ei,"flatMap");function*ti(t,e){for(const n of t)e(n)&&(yield n)}o(ti,"filter");function*sa(t,e){for(const n of t){const r=e(n);r!=null&&(yield r)}}o(sa,"filterMap");function Oi(t,e){for(const n of t)if(e(n))return n}o(Oi,"find");function ni(t,e){let n="";const r=t[Symbol.iterator]();let i=r.next();if(i.done)return n;for(;;){const a=i.value.toString();if(i=r.next(),i.done){n+=a;break}n+=a,n+=e}return n}o(ni,"join");function*Vi(t,e){for(const n of t)yield e(n)}o(Vi,"map");function ke(t,e){for(const n of t)if(e(n))return!0;return!1}o(ke,"some");function*rt(...t){for(const e of t)for(const n of e)yield n}o(rt,"union");function*vt(t){const e=new Set;for(const n of t)e.has(n)||(e.add(n),yield n)}o(vt,"unique");const it="";function Lt(...t){if(t.length===1){const e=t[0];return e===void 0?it:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(Lt,"defaultResolver");function Gt(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$serialize$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:Lt)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];const d=o(()=>i.apply(this,s),"run");return u===void 0?u=d():u=u.then(d,d),this[c]=u,u}}}o(Gt,"serialize");let St=0;function Zt(){return St===Number.MAX_SAFE_INTEGER&&(St=0),String(++St)}o(Zt,"getNextLockId");class Ut{constructor(){this.id=Zt()}async synchronize(e){let n;const r=this.promise;this.promise=new Promise(i=>n=i),await r;try{return await e()}finally{n()}}}o(Ut,"Lock");class fn{constructor(e){this.lock=new Ut,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,n){let r;const i=new bt(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:Ze.Debug});let a;await this.lock.synchronize(async()=>{this.writer&&await this.writer,a=new Promise(s=>r=s),this.readers.add(a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),a!==void 0&&this.readers.delete(a),r()}}async synchronizeWrite(e,n){let r;const i=new bt(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:Ze.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const a=[...this.readers];this.readers.clear(),await Promise.all(a)}this.writer=new Promise(a=>r=a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),r(),this.writer=void 0}}}o(fn,"ReaderWriterLock");class In{constructor(){this.locks=new Map}async synchronizeRead(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new fn(String(e)),this.locks.set(e,i)),i.synchronizeRead(n,r)}async synchronizeWrite(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new fn(String(e)),this.locks.set(e,i)),i.synchronizeWrite(n,r)}}o(In,"KeyedReaderWriterLock");const Kn=o(class{constructor(t,e,n,r,i){this.providerService=t,this.storageService=e,this.changeStore=n,this.workspaceId=r,this.context=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new fn("WorkspaceRepositories"),this.disposable=l.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this),me.onDidChange(this.onConfigurationChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await l.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void l.window.showTextDocument(t)}onConfigurationChanged(t){if(!me.changed(t,"experimental.syncRecentList"))return;const e=me.get("experimental.syncRecentList")===!0?[Kn.storageKey]:[];this.context.globalState.setKeysForSync(e)}onChangeStoreChanged(t){const e=ra(t.map(n=>n.rootUri),n=>E(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((r,i)=>i.timestamp-r.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(t){const n=E(t);e=e.filter(r=>E(r.canonicalUri)===n)}return e}async getCore(){return this.fromStorage(await this.storageService.get(Kn.storageKey))}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(t){const e=await this.getRecents();if(e.length!==0)return e.filter(n=>n.provider.id===t)}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),n=`${t.workspaceId}/${E(t.uri)}`,r=e.get(n);if(r===void 0)return;const i=this.changeStore.getScopedChangeStore(r),a=await i.getChanges(r.uri);if(a.length!==0){const s={title:l.l10n.t("Yes")},c={title:l.l10n.t("No"),isCloseAffordance:!0};if(await l.window.showWarningMessage(a.length===1?l.l10n.t(`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):l.l10n.t(`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,a.length),{modal:!0},s,c)!==s)return;await i.discardAll(r.uri)}this.cache.clear(),e.delete(n);try{await this.storageService.store(Kn.storageKey,this.toStorage(e))}catch(s){throw K.error(s,"Failed to save workspace repositories"),s}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const n of t){const[{HEAD:r,pullRequest:i},a]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),s=await this.changeStore.getChanges(n.uri);e.set(`${this.workspaceId}/${E(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:r.type,name:r.name},idx:(a==null?void 0:a.type)&&ae.hasIndex(a.type)?{type:a.type}:void 0,pullRequest:i?{id:i.id}:void 0,changes:qt(s),timestamp:Date.now()})}try{await this.storageService.store(Kn.storageKey,this.toStorage(e))}catch(n){throw K.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&T(r)?l.Uri.from(r):r);return new Map(e.workspaceRepositories)}catch(e){return K.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:Kn.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let Qn=Kn;Qn.storageKey="workspaceRepositories",Qn.storageSchemaVersion=1;function tr(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}o(tr,"hasChanges");function Hn(t){return tr(t.changes)}o(Hn,"hasUncommittedChanges");function qt(t){let e=0,n=0,r=0;for(const i of t)switch(i.type){case D.Created:e++;break;case D.Changed:n++;break;case D.Deleted:r++;break}return e||n||r?{added:e,changed:n,deleted:r,timestamp:Date.now()}:void 0}o(qt,"toChangesSummary");function sn(t,{compact:e=!0,preamble:n,separator:r=", ",short:i=!1,single:a=!1}={}){if(!tr(t))return l.l10n.t("Everything up to date");const{added:s,changed:c,deleted:u}=t;if(a){const f=s+c+u;return f===1?l.l10n.t("{0} change",f):l.l10n.t("{0} changes",f)}let d=`${n!=null?n:""}`;return(s||!e)&&(d+=i?`+${s}`:s===1?l.l10n.t("{0} file added",s):l.l10n.t("{0} files added",s),(c||u||!e)&&(d+=r)),(c||!e)&&(d+=i?`~${c}`:c===1?l.l10n.t("{0} file changed",c):l.l10n.t("{0} files changed",c),(u||!e)&&(d+=r)),(u||!e)&&(d+=i?`-${u}`:u===1?l.l10n.t("{0} file deleted",u):l.l10n.t("{0} files deleted",u)),d}o(sn,"formatChangesSummary");class tn extends Error{constructor(e){var n;const r=typeof e=="string"?e:Xn.getProviderId(e);super(`No provider registered with ${r}`);this.id=r,(n=Error.captureStackTrace)==null||n.call(Error,this,tn)}}o(tn,"ProviderNotFoundError");class mn{constructor(e,n,r,i,a){this.providerService=e,this.uri=n,this.id=r,this.name=i,this.provider={id:a.id,name:a.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}o(mn,"VirtualRepository");var I;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(I||(I={}));var Y;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(Y||(Y={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(Y||(Y={}));var We;(function(t){function e(n){return n!==void 0&&n.type===3}o(e,"isActive"),t.isActive=e})(We||(We={}));var tt;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(tt||(tt={}));var Rt;(function(t){function e(n){const r=k.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:1};if(N(r.idx))return{type:2,sha:r.idx}}}o(e,"decode"),t.decode=e})(Rt||(Rt={}));function Nt(t){return t!==void 0&&typeof t.then=="function"}o(Nt,"isPromise");const vn="";function pn(...t){if(t.length===1){const e=t[0];return e===void 0?vn:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(pn,"gate_defaultResolver");function $t(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$gate$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:pn)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];if(u===void 0){let d;try{if(d=i.apply(this,s),d==null||!Nt(d))return d;this[c]=u=d.then(f=>(this[c]=void 0,f)).catch(f=>{throw this[c]=void 0,f})}catch(f){throw this[c]=void 0,f}}return u}}}o($t,"gate");var hn=Object.defineProperty,yn=Object.getOwnPropertyDescriptor,Ht=o((t,e,n,r)=>{for(var i=r>1?void 0:r?yn(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&hn(e,n,i),i},"__decorateClass");class pt{constructor(){this.hasShownRepositoryNotValidMessage=!1}async showRepositoryNotValidMessage(){if(this.hasShownRepositoryNotValidMessage)return;this.hasShownRepositoryNotValidMessage=!0;const e=l.l10n.t("Open Repository");await l.window.showErrorMessage(l.l10n.t("The current workspace is not a valid repository. Would you like to open another repository?"),{modal:!0},e)===e&&l.commands.executeCommand("remoteHub.openRepository")}showGitHubStatus500Message(){return l.window.showErrorMessage(l.l10n.t("GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),l.l10n.t("OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate");await l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&e()}async showStatus403Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials do not have the required access."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate"),r=l.l10n.t("The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await l.window.showErrorMessage(r,n)===n&&e()}async showProviderNotFoundMessage(e){const n=On.get(e.id);if(n&&l.extensions.getExtension(n[0])===void 0){const r=l.l10n.t("Install");if(await l.window.showInformationMessage(l.l10n.t("Extension '{0}' is not installed. Would you like to install the extension and reload the window to open this workspace?",n[1]),{modal:!0},r)!==r)return;await l.commands.executeCommand("workbench.extensions.installExtension",n[0]),await l.commands.executeCommand("workbench.action.reloadWindow")}}}o(pt,"Messages"),Ht([$t(()=>"")],pt.prototype,"showRepositoryNotValidMessage",1),Ht([$t(()=>"")],pt.prototype,"showGitHubStatus500Message",1),Ht([$t(()=>"")],pt.prototype,"showStatus401Message",1),Ht([$t(()=>"")],pt.prototype,"showStatus403Message",1),Ht([$t()],pt.prototype,"showProviderNotFoundMessage",1);const On=new Map([["github",["GitHub.remotehub","GitHub Repositories"]],["azurerepos",["ms-vscode.azure-repos","Azure Repos"]]]),Dn=new pt;async function wn(t,e,n){var r,i,a,s,c;if(Pe.instance.publicLog2("openWorkspace",{location:e.location}),e.location===Je.AddToWorkspace){const d=(i=(r=l.workspace.workspaceFolders)==null?void 0:r.length)!=null?i:0;return void l.workspace.updateWorkspaceFolders(d,0,{uri:e.uri,name:e.name})}if(e.location===Je.CurrentWindow&&!(n==null?void 0:n.skipChangesPrompt)){const d=await t.getWorkspaceProvidersWithChanges();if(d.length){const f={title:l.l10n.t("Continue")},h={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(Yt?l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(b=>b.name).join(", ")):l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(b=>b.name).join(", ")),{modal:!0},f,h)!==f){Pe.instance.publicLog2("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const u=l.env.remoteName?!0:void 0;return e.filesToOpen&&(e.location===Je.CurrentWindow&&u===void 0&&((a=l.workspace.workspaceFolders)==null?void 0:a.length)===1&&l.workspace.workspaceFolders[0].uri.toString()===e.uri.toString()?await((s=To())==null?void 0:s.openPendingFiles(e.uri,e.filesToOpen)):await((c=To())==null?void 0:c.setPendingFilesToOpen(e.uri,e.filesToOpen))),Pe.instance.publicLog2("openWorkspace.success",{location:e.location,forceLocalWindow:String(u)}),void l.commands.executeCommand("vscode.openFolder",e.uri,{forceNewWindow:e.location===Je.NewWindow,forceLocalWindow:u})}o(wn,"openWorkspace");var sr=gr(6724),Vt=Object.defineProperty,Nr=Object.getOwnPropertyDescriptor,_r=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Nr(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Vt(e,n,i),i},"providers_decorateClass");const dn=o(class{constructor(t,e){this.telemetryService=t,this.workspaceState=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new l.EventEmitter,this._onDidChangeChangeStore=new l.EventEmitter,this._onDidChangeWorkspaceRepositories=new l.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new l.EventEmitter,this._onDidChangeRepository=new l.EventEmitter,this._onDidSyncRepository=new l.EventEmitter,this._onDidRefresh=new l.EventEmitter,this._onWillRefresh=new l.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=l.Disposable.from(l.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeChangeStore(){return this._onDidChangeChangeStore.event}get onDidChangeWorkspaceRepositories(){return this._onDidChangeWorkspaceRepositories.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(E(t.uri));!e||(K.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}addRepository(t){const e=E(t.uri);if(t.uri.scheme!==dn.scheme||this._repositories.has(e))return;const n=this.getProvider(t.uri);if(!n)return;this._repositories.set(e,null);const{repo:r,name:i}=this.getVirtualUriMetadata(t.uri),a=new mn(this,t.uri,r,i,n);this._repositories.set(e,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.publicLog2("repository.opened",{provider:n.id,repositories:this._repositories.size.toString()})}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added)this.addRepository(e);if(t.removed.length)for(const e of t.removed){const n=E(e.uri);if(e.uri.scheme!==dn.scheme||!this._repositories.has(n))continue;const r=this._repositories.get(n);this._repositories.delete(n),r&&(this._onDidChangeRepositories.fire({added:[],removed:[r]}),this.telemetryService.publicLog2("repository.closed",{repositories:this._repositories.size.toString()}))}Dr(er.HasVirtualFolders,this._repositories.size!==0),Dr(er.VirtualFolderProviders,ni(vt(Vi(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...Vi(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,n,r,i,a,s,c){var u;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const d={id:t,name:e,provider:n,fs:r,storage:i,changeStore:a,metadataStore:s,workspaceRepositories:c};this._providers.set(t,d);const f=l.Disposable.from(d.metadataStore.onDidChange(h=>this.onMetadataChanged(h)),d.changeStore.onDidChange(h=>this._onDidChangeChangeStore.fire(h)),d.workspaceRepositories.onDidChange(async()=>{const h=await this.workspaceRepositoriesGetRepositories();Dr(er.HasRecentRepositories,h.length>0),this._onDidChangeWorkspaceRepositories.fire()}));return this._onDidChangeProviders.fire({added:[d],removed:[]}),this.telemetryService.publicLog2("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(u=l.workspace.workspaceFolders)!=null?u:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const h=[];for(const[p,b]of[...this._repositories])(b==null?void 0:b.provider.id)===t&&(this._repositories.delete(p),h.push(b));this._onDidChangeRepositories.fire({added:[],removed:h}),this._onDidChangeProviders.fire({added:[],removed:[d]}),f.dispose()}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const n of this._providers.values()){t.push(...Vi(this.getRepositories(n.id),i=>i.uri));const r=this._indexProviders.get(n.id);r!==void 0&&e.push(r)}this._onWillRefresh.fire(t),t.forEach(n=>this.getMetadataStore(n).refresh()),e.forEach(n=>n.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){var n;const r=l.workspace.getWorkspaceFolder(t);if(!r||r.uri.scheme!==dn.scheme)return;const i=(n=this._repositories.get(E(r.uri)))!=null?n:this.addRepository(r);if(!(e!==void 0&&(i==null?void 0:i.provider.id)!==e))return i!=null?i:void 0}getRepositories(t){return ti(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const n=typeof t=="string"?t:dn.getProviderId(t),r=this._providers.get(n);return e!==void 0&&(r==null?void 0:r.id)!==e?!1:r!==void 0}getProvider(t){const e=typeof t=="string"?t:dn.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.provider;if(n)return n;throw new tn(t)}getChangeStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.changeStore;if(n)return n;throw new tn(t)}getMetadataStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.metadataStore;if(n)return n;throw new tn(t)}getWorkspaceRepositories(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.workspaceRepositories;if(n)return n;throw new tn(t)}getFileSystemProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.fs;if(n)return n;throw new tn(t)}getStorageService(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.storage;if(n)return n;throw new tn(t)}async getRecentWorkspaceSourceProviders(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.getRemoteWorkspaceSourceProvider(e.id);t.push(...n!=null?n:[])}if(t.length!==0)return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:l.l10n.t("Choose a recent repository"),provideSources:function(e,n,r,i){return t.sort((a,s)=>s.timestamp-a.timestamp).map(a=>({providerId:a.provider.id,name:a.name,icon:"$(repo)",description:Jn(a.timestamp,{ago:!0}),detail:`${a.provider.name}${a.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${a.pullRequest.id}`:""}${k.isCanonicalUri(a.uri)?"":`\xA0\xA0\u2022\xA0\xA0${Ii(a.ref.type)} ${a.ref.name}`}\xA0\xA0\u2022\xA0\xA0${sn(a.changes)}${a.idx?`\xA0\xA0\u2022\xA0\xA0${ia(a.idx.type)}`:""}`,workspace:{uri:a.uri,name:a.name,location:Je.CurrentWindow}}))}}}getRemoteWorkspaceSourceProviders(t){var e,n,r,i;return t?(i=(r=(e=this.getProvider(t))==null?void 0:(n=e.provider).getRemoteWorkspaceSourceProviders)==null?void 0:r.call(n))!=null?i:[]:[...ei(this._providers.values(),a=>{var s,c,u;return(u=(c=(s=a.provider).getRemoteWorkspaceSourceProviders)==null?void 0:c.call(s))!=null?u:[]})]}async getWorkspaceProvidersWithChanges(){var t,e;const n=new Map;for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])if(r.uri.scheme===k.scheme&&await this.getChangeStore(r.uri).hasChanges(r.uri)){const i=(e=this.getRepository(r.uri))==null?void 0:e.provider;if(!i)continue;n.set(i.id,i)}return[...n.values()]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new tn(t);return e==null?void 0:e.provider.getAuthentication(t)}canOpenRemoteUrl(t,e){if(e){const n=this.getProvider(e),r=n==null?void 0:n.provider.canOpenRemoteUrl(t);return r!==void 0?{provider:n,urlType:r}:void 0}for(const n of this._providers.values()){const r=n.provider.canOpenRemoteUrl(t);if(r!==void 0)return{provider:n,urlType:r}}}async createWorkspaceForRemoteUrl(t,e,n=Je.CurrentWindow){var r;const i=this.canOpenRemoteUrl(t,e);return(r=i==null?void 0:i.provider)==null?void 0:r.provider.createWorkspaceForRemoteUrl(t,n)}async openWorkspace(t,e){return wn(this,t,e)}createProviderUri(t,e,n){return k.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(dn.baseVirtualWorkspaceUri,e,n))}createRelativeProviderUri(t,e){return k.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const n=this.getProviderRootUri(t);let r=`${n.path}/`;r.endsWith("/")&&(r=r.slice(0,-1));const i=n.with({path:`${n.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===dn.scheme?k.getVirtualUri(i):i}createRelativeVirtualUri(t,e){return k.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,n){return this.getRepositoryProvider(t).createVirtualUri(dn.baseVirtualWorkspaceUri,e,n)}async getBestRemoteUri(t,e,n){const{provider:r,repo:i,ref:a}=this.getVirtualUriMetadata(t);if(e===I.Repository)return this.getRemoteUri(r.id,{repo:i,path:n});if(e===I.PullRequest||e===void 0&&(a==null?void 0:a.type)===ye.PullRequest){if((a==null?void 0:a.type)===ye.PullRequest)return this.getRemoteUri(r.id,{repo:i,pullRequest:{id:a.id},path:n});const{pullRequest:s}=await this.getMetadata(t);if(e===I.PullRequest&&s)return this.getRemoteUri(r.id,{repo:i,pullRequest:{id:s.id},path:n})}if(e===I.Branch||e===void 0&&(a==null?void 0:a.type)===ye.Branch){if((a==null?void 0:a.type)===ye.Branch)return this.getRemoteUri(r.id,{repo:i,branch:a.id,path:n});const{HEAD:s}=await this.getMetadata(t);if(s.type===V.Branch||s.type===V.RemoteBranch&&e===I.Branch)return this.getRemoteUri(r.id,{repo:i,branch:s.branch.name,path:n})}if(e===I.Tag||e===void 0&&(a==null?void 0:a.type)===ye.Tag){if((a==null?void 0:a.type)===ye.Tag)return this.getRemoteUri(r.id,{repo:i,tag:a.id,path:n});const{HEAD:s}=await this.getMetadata(t);if(s.type===V.Tag)return this.getRemoteUri(r.id,{repo:i,tag:s.detached.name,path:n})}if(e===I.Commit||e===void 0&&((a==null?void 0:a.type)===ye.Commit||(a==null?void 0:a.type)===ye.Tree&&N(a.id))){if((a==null?void 0:a.type)===ye.Commit||(a==null?void 0:a.type)===ye.Tree&&N(a.id))return this.getRemoteUri(r.id,{repo:i,sha:a.id,path:n});const{HEAD:s}=await this.getMetadata(t);if(e===I.Commit||s.type===V.Commit)return this.getRemoteUri(r.id,{repo:i,sha:s.sha,path:n})}if(e===void 0&&(a==null?void 0:a.type)===ye.Tree&&!N(a.id))return this.getRemoteUri(r.id,{repo:i,branch:a.id,path:n});if(e===void 0)return this.getRemoteUri(r.id,{repo:i,path:n})}getCanonicalUri(t){let{authority:e}=t;const n=e.indexOf(dn.authoritySeparator);return n!==-1&&(e=e.substr(0,n)),t.with({authority:e})}getRemoteUri(t,e){return this.getRepositoryProvider(t).getRemoteUri(e)}getProviderRootUri(t){return t=k.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=k.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=k.getVirtualUri(this.getProviderRootUri(t));let{authority:n}=e;const r=n.indexOf(dn.authoritySeparator);return r!==-1&&(n=n.substr(0,r)),e.with({authority:n})}getVirtualRootUri(t){return k.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=l.workspace.getWorkspaceFolder(k.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,n){var r,i;const a=this.getChangeStore(t);return(i=(r=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:i.call(r,t,e,n,a)}async getCommitOperations(t,e){const n=this.getChangeStore(t);let r;return(e==null?void 0:e.staged)?(r=await n.getStagedChanges(t),r.length===0&&e.staged==="auto"&&(r=await n.getChanges(t))):r=await n.getChanges(t),r.map(a=>{const s=this.getRelativeFilePath(t,a.uri);switch(a.type){case D.Created:case D.Changed:return{type:a.type,path:s,fileType:a.fileType,content:n.readFile(a.uri).then(async c=>{if(!c)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content undefined"}),new Error("No working content for created or changed commit operation");if(await An(c)!==a.hash)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content hash mismatch"}),new Error("Working file content hash does not match expected file content hash");return c})};case D.Deleted:return{type:a.type,path:s,fileType:a.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,n){return me.getMode(this.getVirtualRootUri(t),e,Boolean(n))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.id;return n?this._indexProviders.get(n):void 0}async getMetadataCore(t){const e=E(t);let n=this.pendingMetadataRequests.get(e);if(n)return n;let{revision:r,cachedMetadata:i}=await this.getMetadataStore(t).get(t);if(i!==void 0)return i;await this.getChangeStore(t).hasChanges(t)||(r=void 0);const a=this.getProvider(t);if(!a)throw new tn(t);const s=Rt.decode(t);(s==null?void 0:s.type)===tt.SHA&&(r=s.sha);try{n=a.provider.createMetadata(t,r),this.pendingMetadataRequests.set(e,n);const c=await n;return await this.updateMetadataCore(t,c,{silent:!0}),c}catch(c){throw Xe.asVirtualProviderErrorCode(c)===ie.InvalidRepositoryError&&Dn.showRepositoryNotValidMessage(),c}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const n=new bt(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.getMetadataStore(t).set(k.getVirtualUri(t),e.HEAD.sha,e)}finally{n.stop()}}updateMetadataCore(t,e,n){return this.getMetadataStore(t).set(k.getVirtualUri(t),e.HEAD.sha,e,n)}async getRepositoryContext(t){var e;const n=me.get("gitProtocol");let{HEAD:r,cloneUrl:i}=await this.getMetadata(t.uri);if(((e=r.branch)==null?void 0:e.remote)!==void 0){const a=this.getRemoteUri(t.provider.id,{repo:r.branch.remote.repo});return{cloneUrl:i}=await this.getMetadata(a),{uri:n==="http"?i.http:i.ssh,ref:r.branch.name,name:r.branch.remote.name}}return{uri:n==="http"?i.http:i.ssh,ref:r.name,name:t.name}}async clone(t){const{uri:e,ref:n}=await this.getRepositoryContext(t);if(!e)throw new Error("No url found for clone");let r=`${l.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(e)}`;if(n!==void 0&&(r+=`&ref=${encodeURIComponent(n)}`),Yt)return l.Uri.parse(r);const i=o(async a=>{try{await a.activate(),await l.commands.executeCommand("git.clone",e,void 0,{ref:n})}catch(s){K.error(s,"Unable to clone repository");const c=l.l10n.t("Could not clone your repository as Git is not installed."),u=l.l10n.t("Download Git");await l.window.showErrorMessage(c,{modal:!0},u)===u&&await l.commands.executeCommand("vscode.open",l.Uri.parse("https://aka.ms/vscode-download-git"))}},"cloneRepository");if(l.workspace.isTrusted){const a=l.extensions.getExtension("vscode.git");if(a)await i(a);else throw new Error("Git extension not found")}else return l.Uri.parse(`${r}&windowId=_blank`)}createBranch(t,e,n,r){return this.getRepositoryProvider(t).createBranch(t,e,n,r)}createAndPushCommit(t,e,n,r,i,a){return this.getRepositoryProvider(t).createAndPushCommit(t,e,n,r,i,a)}createPullRequest(t,e,n,r,i,a){return this.getRepositoryProvider(t).createPullRequest(t,e,n,r,i,a)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}async fetchOrSync(t){await this.getChangeStore(t).hasChanges(t)?await this.fetch(t):await this.sync(t,{reason:"invoked"})}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranch(t,e){return this.getRepositoryProvider(t).getBranch(t,e)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.getCommits(t,e)}compareCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.compareCommits(t,e)}getFileContent(t,e,n){return this.getRepositoryProvider(t).getFileContent(t,e,n)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,n,r;return(r=(n=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:n.call(e,t))!=null?r:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSubmodules(t){var e,n;return(n=(e=this.getRepositoryProvider(t)).getSubmodules)==null?void 0:n.call(e,t)}getSnapshots(t,e){var n,r;return(r=(n=this.getIndexProvider(t))==null?void 0:n.getSnapshots(t,e))!=null?r:Promise.resolve([])}async getTarGz(t,e,n){var r,i;return(i=(r=this.getRepositoryProvider(t)).getTarGz)==null?void 0:i.call(r,t,e,n)}async loadWorkspaceContents(t){return await kr(this,t),this.getRepositoryProvider(t).loadWorkspaceContents(t)}switchTo(t,e,n){return this.getRepositoryProvider(t).switchTo(t,e,n)}async sync(t,e){const n=this._repositories.get(E(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const r=this.getProvider(t),i=this.getIndexProvider(t);if(r===void 0)throw new tn(t);let{to:a,reason:s,...c}=e!=null?e:{};a===void 0&&i&&(a=await i.resolveIndexRef(t,s==="user"));const u=this.getChangeStore(t);if(await u.hasMergeConflicts(t))throw Xe.UnresolvedConflictsError();return await r.provider.sync(t,u,{conflictResolution:ve.Abort,...c,to:a})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}changeStoreApplyChangeset(t,e,n){return this.getChangeStore(t).applyChangeset(t,e,n)}changeStoreCreateFile(t,e){return this.getChangeStore(t).createFile(t,e)}changeStoreCreateDirectory(t){return this.getChangeStore(t).createDirectory(t)}changeStoreDeleteDirectory(t){return this.getChangeStore(t).deleteDirectory(t)}changeStoreDeleteFile(t){return this.getChangeStore(t).deleteFile(t)}changeStoreExportDebugInfo(){var t;for(const e of(t=l.workspace.workspaceFolders)!=null?t:[])this.getChangeStore(e.uri).exportDebugInfo(e.uri)}changeStoreGetChange(t){return this.getChangeStore(t).getChange(t)}changeStoreGetChanges(t,e){return this.getChangeStore(t).getChanges(this.stripUriScope(t),e)}changeStoreGetScopedChangeStore(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedChangeStore(n)}changeStoreGetScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedUri(t,n)}changeStoreHasChanges(t){return this.getChangeStore(t).hasChanges(this.stripUriScope(t))}changeStoreMaybeHasChanges(t,e){return this.getChangeStore(t).maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}changeStoreReadFile(t){return this.getChangeStore(t).readFile(t)}changeStoreResolveDiffCommand(t,e,n,r){return this.getChangeStore(t).resolveDiffCommand(t,e,n,r)}changeStoreStat(t){return this.getChangeStore(t).stat(t)}changeStoreUpdateDirectoryEntries(t,e){return this.getChangeStore(t).updateDirectoryEntries(t,e)}changeStoreWriteFile(t,e,n,r){return this.getChangeStore(t).writeFile(t,e,n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}getFromStorage(t,e){return this.getStorageService(t).get(e)}async storeInStorage(t,e,n){return this.getStorageService(t).store(e,n)}async deleteFromStorage(t,e){return this.getStorageService(t).delete(e)}async workspaceRepositoriesGetRepositoriesByCanonicalUri(){const t=await this.workspaceRepositoriesGetRepositories();return na(t.sort((e,n)=>n.timestamp-e.timestamp),e=>E(e.canonicalUri))}workspaceRepositoriesRemoveRepository(t){return this.getWorkspaceRepositories(t.uri).remove(t)}workspaceRepositoriesRefresh(){for(const[,t]of this._providers.entries())t.workspaceRepositories.refresh()}async workspaceRepositoriesGetRepositories(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.get();t.push(...n.filter(r=>r.provider.id===e.id))}return t}provideFileSearchResults(t,e,n){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,n)}provideTextSearchResults(t,e,n,r){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,n,r)}static getProviderId(t){const{authority:e}=t,n=e.indexOf(dn.authoritySeparator);return n!==-1?e.substr(0,n):e}static isCanonicalUri(t){return t.authority.indexOf(dn.authoritySeparator)===-1}},"_VirtualProviderService");let Xn=dn;Xn.scheme="vscode-vfs",Xn.authoritySeparator="+",Xn.baseVirtualWorkspaceUri=l.Uri.parse(`${dn.scheme}://`),_r([Gt()],Xn.prototype,"getMetadataCore",1);function Or(t,e,n){async function r(s,c){await kr(t,void 0);const[u,d]=typeof s=="string"?[{url:s,workspace:void 0}]:await mi.show(t,c,l.l10n.t("Enter a remote url, or select a remote provider"),c===Je.AddToWorkspace?l.l10n.t("Add Remote Repository to Workspace"):l.l10n.t("Open Remote Repository"),{allowAddToWorkspace:!1});if(!u){n.publicLog2("openRepository.abort",{reason:"abandoned"});return}try{let f;if(u.workspace)f=u.workspace,f.location=d!=null?d:f.location;else if(f=await t.createWorkspaceForRemoteUrl(u.url,void 0,d!=null?d:c),!f){n.publicLog2("openRepository.abort",{reason:"aborted invalid url"});return}await wn(t,f)}catch(f){if(n.sendException(f),Xe.asVirtualProviderErrorCode(f)===ie.InvalidCredentialsError){const{action:h}=f;if(h){Dn.showStatus401Message(()=>h());return}}K.error(f)}}o(r,"openRepository");async function i(s,c){const u=c?t.repositories.filter(d=>d.provider.id===c):t.repositories;if(u.length!==0){if(u.length>1){const d=await l.window.showQuickPick(u.map(f=>({label:f.name,description:f.provider.name,repository:f})),{placeHolder:s});return d?d.repository:void 0}return u[0]}}o(i,"getRepository");async function a(s,c,u=!1){var d;const f=await i(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(f===void 0)return;const h=Yr(c);if(!h)return;const p=s.getRelativeFilePath(h.uri),b=await s.getMetadata(f.uri),ne=((d=b.HEAD.branch)==null?void 0:d.name)===b.defaultBranch.name||b.pullRequest?await s.getBestRemoteUri(f.uri,I.Branch,p):await s.getBestRemoteUri(f.uri,void 0,p);if(ne===void 0)return;const A=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",Z=h.type===jr.File?`${wi(h.range)}`:`${Si(h.cellIndex,h.range)}`;return ne.with({authority:`${A}/${ne.authority}`,fragment:u?Z:void 0,path:q(ne.path)})}return o(a,"getLink"),[l.commands.registerCommand("remoteHub.openRepository",s=>(n.publicLog2("command.openRepository"),r(s))),l.commands.registerCommand("remoteHub.continueOn.openRepository",s=>(n.publicLog2("command.continueOn.openRepository"),r(s))),l.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn",async()=>l.commands.executeCommand("_workbench.editSessions.actions.continueEditSession")),l.commands.registerCommand("remoteHub.openOnDesktop",async()=>{if(!Yt)return;const s=await i(l.l10n.t("Choose which repository to open on the desktop"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c!==void 0)return n.publicLog2("command.openOnDesktop"),l.Uri.parse(`${l.env.uriScheme}://${e}/open?url=${encodeURIComponent(c.toString(!0))}`)}),l.commands.registerCommand("remoteHub.clone",async()=>{const s=await i(l.l10n.t("Choose which repository to clone"),void 0);if(s!==void 0){if(n.publicLog2("command.clone"),await t.changeStoreHasChanges(s.uri)&&l.workspace.getConfiguration("workbench.experimental.editSessions").get("autoResume")==="off"){const c={title:l.l10n.t("Continue")},u={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},c,u)!==c){n.publicLog2("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}return t.clone(s)}}),l.commands.registerCommand("remoteHub.continueEditSession.openOnWeb",async()=>{if(Yt)return;const s=await i(l.l10n.t("Choose which repository to open on the web"));if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev";return c.with({authority:`${u}/${c.authority}`})}),l.commands.registerCommand("remoteHub.openOnWeb",async()=>{if(Yt)return;const s=await i(l.l10n.t("Choose which repository to open on the web"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",d=c.with({authority:`${u}/${c.authority}`});n.publicLog2("command.openOnWeb"),l.env.openExternal(d)}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkFile",async()=>{const s=await i(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=l.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",d=c.with({authority:`${u}/${c.authority}`});await l.env.clipboard.writeText(d.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLink",async s=>{const c=await a(t,s,!0);c&&await l.env.clipboard.writeText(c.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkWithoutRange",async s=>{const c=await a(t,s,!1);c&&await l.env.clipboard.writeText(c.toString(!0))}),l.commands.registerCommand("remoteHub.goToRepository",async()=>{n.publicLog2("command.goToRepository");const s=await i(l.l10n.t("Choose which repository to open on the remote"));if(!s)return;const c={provider:s.provider,repo:s.id};return l.commands.executeCommand("remoteHub.openOnRemote",c)}),l.commands.registerCommand("remoteHub.openOnRemote",async s=>{n.publicLog2("command.openOnRemote");const{provider:c,...u}=s,d=t.getRemoteUri(c.id,u);if(d){await l.env.openExternal(d);return}l.window.showErrorMessage(l.l10n.t("Unable to open the resource on {0}",s.provider.name))}),l.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),l.commands.registerCommand("remoteHub.enableDebugLogging",()=>me.updateEffective("logLevel",Ze.Debug)),l.commands.registerCommand("remoteHub.disableDebugLogging",()=>me.updateEffective("logLevel",Ze.Warn)),l.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{t.changeStoreExportDebugInfo()}),l.commands.registerCommand("remoteHub.setContext",async(s,c)=>{if(!s.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await Dr(s,c)}),l.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const s={title:l.l10n.t("Continue Working On...")};await l.window.showInformationMessage(l.l10n.t("Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},s)===s&&await l.commands.executeCommand("remoteHub.continueOn")}),l.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>Yt?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}o(Or,"registerCommands");function nr(t){return t}o(nr,"command");async function ri(t,e){return l.commands.executeCommand(t,e)}o(ri,"executeCommand");var jr;(function(t){t[t.File=1]="File",t[t.Notebook=2]="Notebook"})(jr||(jr={}));function li(t){return t instanceof l.Uri?{fileUri:t,lineNumber:void 0}:t!==void 0&&"lineNumber"in t&&"uri"in t?{fileUri:t.uri,lineNumber:t.lineNumber}:{fileUri:void 0,lineNumber:void 0}}o(li,"extractContext");function Yr(t){var e,n,r;let i;const{fileUri:a,lineNumber:s}=li(t),c=a!=null?a:(e=l.window.activeTextEditor)==null?void 0:e.document.uri;if(c){if(c.scheme==="vscode-notebook-cell"&&((n=l.window.activeNotebookEditor)==null?void 0:n.notebook.uri.fsPath)===c.fsPath){const u=l.window.activeNotebookEditor.notebook.getCells().find(f=>f.document.uri.fragment===(c==null?void 0:c.fragment)),d=(r=u==null?void 0:u.index)!=null?r:l.window.activeNotebookEditor.selection.start;return i=ci(s),{type:2,uri:c,cellIndex:d,range:i}}return i=ci(s),{type:1,uri:c,range:i}}if(l.window.activeNotebookEditor)return{type:2,uri:l.window.activeNotebookEditor.notebook.uri,cellIndex:l.window.activeNotebookEditor.selection.start,range:void 0}}o(Yr,"getFileAndPosition");function ci(t){var e;return t!==void 0&&(!l.window.activeTextEditor||l.window.activeTextEditor.selection.isEmpty||!l.window.activeTextEditor.selection.contains(new l.Position(t-1,0)))?new l.Range(t-1,0,t-1,1):(e=l.window.activeTextEditor)==null?void 0:e.selection}o(ci,"getRangeOrSelectionForLink");function wi(t){if(!t)return"";let e=`L${t.start.line+1}`;return t.start.line!==t.end.line&&(e+=`-L${t.end.line+1}`),e}o(wi,"rangeString");function Si(t,e){if(t===void 0)return"";if(!e)return`C${t+1}`;let n=`C${t+1}:L${e.start.line+1}`;return e.start.line!==e.end.line&&(n+=`-L${e.end.line+1}`),n}o(Si,"notebookCellRangeString");function ii(t,e,n){return new at(new qr(t),new qr(e)).ComputeDiff(n).changes}o(ii,"stringDiff");class Ir{constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}o(Ir,"DiffChange");var Ci;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(Ci||(Ci={}));function bi(t,e){return(e<<5)-e+t|0}o(bi,"numberHash");function ai(t,e){e=bi(149417,e);for(let n=0,r=t.length;n<r;n++)e=bi(t.charCodeAt(n),e);return e}o(ai,"stringHash");class qr{constructor(e){this.source=e}getElements(){const e=this.source,n=new Int32Array(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}}o(qr,"StringDiffSequence");class rr{static Assert(e,n){if(!e)throw new Error(n)}}o(rr,"Debug");class zr{static Copy(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}static Copy2(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}}o(zr,"MyArray");var he;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(he||(he={}));class qe{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Ir(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}o(qe,"DiffChangeHelper");class at{constructor(e,n,r=null){this.ContinueProcessingPredicate=r,this._originalSequence=e,this._modifiedSequence=n;const[i,a,s]=at._getElements(e),[c,u,d]=at._getElements(n);this._hasStrings=s&&d,this._originalStringElements=i,this._originalElementsOrHash=a,this._modifiedStringElements=c,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const n=e.getElements();if(at._isStringArray(n)){const r=new Int32Array(n.length);for(let i=0,a=n.length;i<a;i++)r[i]=ai(n[i],0);return[n,r,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}ElementsAreStrictEqual(e,n){if(!this.ElementsAreEqual(e,n))return!1;const r=at._getStrictElement(this._originalSequence,e),i=at._getStrictElement(this._modifiedSequence,n);return r===i}static _getStrictElement(e,n){return typeof e.getStrictElement=="function"?e.getStrictElement(n):null}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,r,i,a){const s=[!1];let c=this.ComputeDiffRecursive(e,n,r,i,s);return a&&(c=this.PrettifyChanges(c)),{quitEarly:s[0],changes:c}}ComputeDiffRecursive(e,n,r,i,a){for(a[0]=!1;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let h;return r<=i?(rr.Assert(e===n+1,"originalStart should only be one more than originalEnd"),h=[new Ir(e,0,r,i-r+1)]):e<=n?(rr.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new Ir(e,n-e+1,r,0)]):(rr.Assert(e===n+1,"originalStart should only be one more than originalEnd"),rr.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const s=[0],c=[0],u=this.ComputeRecursionPoint(e,n,r,i,s,c,a),d=s[0],f=c[0];if(u!==null)return u;if(!a[0]){const h=this.ComputeDiffRecursive(e,d,r,f,a);let p=[];return a[0]?p=[new Ir(d+1,n-(d+1)+1,f+1,i-(f+1)+1)]:p=this.ComputeDiffRecursive(d+1,n,f+1,i,a),this.ConcatenateChanges(h,p)}return[new Ir(e,n-e+1,r,i-r+1)]}WALKTRACE(e,n,r,i,a,s,c,u,d,f,h,p,b,ne,A,Z,pe,X){let _e=null,xe=null,Ue=new qe,Qe=n,Mt=r,gt=b[0]-Z[0]-i,Qt=-1073741824,gn=this.m_forwardHistory.length-1;do{const rn=gt+e;rn===Qe||rn<Mt&&d[rn-1]<d[rn+1]?(h=d[rn+1],ne=h-gt-i,h<Qt&&Ue.MarkNextChange(),Qt=h,Ue.AddModifiedElement(h+1,ne),gt=rn+1-e):(h=d[rn-1]+1,ne=h-gt-i,h<Qt&&Ue.MarkNextChange(),Qt=h-1,Ue.AddOriginalElement(h,ne+1),gt=rn-1-e),gn>=0&&(d=this.m_forwardHistory[gn],e=d[0],Qe=1,Mt=d.length-1)}while(--gn>=-1);if(_e=Ue.getReverseChanges(),X[0]){let rn=b[0]+1,Kt=Z[0]+1;if(_e!==null&&_e.length>0){const un=_e[_e.length-1];rn=Math.max(rn,un.getOriginalEnd()),Kt=Math.max(Kt,un.getModifiedEnd())}xe=[new Ir(rn,p-rn+1,Kt,A-Kt+1)]}else{Ue=new qe,Qe=s,Mt=c,gt=b[0]-Z[0]-u,Qt=1073741824,gn=pe?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const rn=gt+a;rn===Qe||rn<Mt&&f[rn-1]>=f[rn+1]?(h=f[rn+1]-1,ne=h-gt-u,h>Qt&&Ue.MarkNextChange(),Qt=h+1,Ue.AddOriginalElement(h+1,ne+1),gt=rn+1-a):(h=f[rn-1],ne=h-gt-u,h>Qt&&Ue.MarkNextChange(),Qt=h,Ue.AddModifiedElement(h+1,ne+1),gt=rn-1-a),gn>=0&&(f=this.m_reverseHistory[gn],a=f[0],Qe=1,Mt=f.length-1)}while(--gn>=-1);xe=Ue.getChanges()}return this.ConcatenateChanges(_e,xe)}ComputeRecursionPoint(e,n,r,i,a,s,c){let u=0,d=0,f=0,h=0,p=0,b=0;e--,r--,a[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const ne=n-e+(i-r),A=ne+1,Z=new Int32Array(A),pe=new Int32Array(A),X=i-r,_e=n-e,xe=e-r,Ue=n-i,Mt=(_e-X)%2==0;Z[X]=e,pe[_e]=n,c[0]=!1;for(let gt=1;gt<=ne/2+1;gt++){let Qt=0,gn=0;f=this.ClipDiagonalBound(X-gt,gt,X,A),h=this.ClipDiagonalBound(X+gt,gt,X,A);for(let Kt=f;Kt<=h;Kt+=2){Kt===f||Kt<h&&Z[Kt-1]<Z[Kt+1]?u=Z[Kt+1]:u=Z[Kt-1]+1,d=u-(Kt-X)-xe;const un=u;for(;u<n&&d<i&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(Z[Kt]=u,u+d>Qt+gn&&(Qt=u,gn=d),!Mt&&Math.abs(Kt-_e)<=gt-1&&u>=pe[Kt])return a[0]=u,s[0]=d,un<=pe[Kt]&&1447>0&&gt<=1447+1?this.WALKTRACE(X,f,h,xe,_e,p,b,Ue,Z,pe,u,n,a,d,i,s,Mt,c):null}const rn=(Qt-e+(gn-r)-gt)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(Qt,rn))return c[0]=!0,a[0]=Qt,s[0]=gn,rn>0&&1447>0&&gt<=1447+1?this.WALKTRACE(X,f,h,xe,_e,p,b,Ue,Z,pe,u,n,a,d,i,s,Mt,c):(e++,r++,[new Ir(e,n-e+1,r,i-r+1)]);p=this.ClipDiagonalBound(_e-gt,gt,_e,A),b=this.ClipDiagonalBound(_e+gt,gt,_e,A);for(let Kt=p;Kt<=b;Kt+=2){Kt===p||Kt<b&&pe[Kt-1]>=pe[Kt+1]?u=pe[Kt+1]-1:u=pe[Kt-1],d=u-(Kt-_e)-Ue;const un=u;for(;u>e&&d>r&&this.ElementsAreEqual(u,d);)u--,d--;if(pe[Kt]=u,Mt&&Math.abs(Kt-X)<=gt&&u<=Z[Kt])return a[0]=u,s[0]=d,un>=Z[Kt]&&1447>0&&gt<=1447+1?this.WALKTRACE(X,f,h,xe,_e,p,b,Ue,Z,pe,u,n,a,d,i,s,Mt,c):null}if(gt<=1447){let Kt=new Int32Array(h-f+2);Kt[0]=X-f+1,zr.Copy2(Z,f,Kt,1,h-f+1),this.m_forwardHistory.push(Kt),Kt=new Int32Array(b-p+2),Kt[0]=_e-p+1,zr.Copy2(pe,p,Kt,1,b-p+1),this.m_reverseHistory.push(Kt)}}return this.WALKTRACE(X,f,h,xe,_e,p,b,Ue,Z,pe,u,n,a,d,i,s,Mt,c)}PrettifyChanges(e){for(let n=0;n<e.length;n++){const r=e[n],i=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,a=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,s=r.originalLength>0,c=r.modifiedLength>0;for(;r.originalStart+r.originalLength<i&&r.modifiedStart+r.modifiedLength<a&&(!s||this.OriginalElementsAreEqual(r.originalStart,r.originalStart+r.originalLength))&&(!c||this.ModifiedElementsAreEqual(r.modifiedStart,r.modifiedStart+r.modifiedLength));){const d=this.ElementsAreStrictEqual(r.originalStart,r.modifiedStart);if(this.ElementsAreStrictEqual(r.originalStart+r.originalLength,r.modifiedStart+r.modifiedLength)&&!d)break;r.originalStart++,r.modifiedStart++}let u=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],u)){e[n]=u[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){const r=e[n];let i=0,a=0;if(n>0){const h=e[n-1];i=h.originalStart+h.originalLength,a=h.modifiedStart+h.modifiedLength}const s=r.originalLength>0,c=r.modifiedLength>0;let u=0,d=this._boundaryScore(r.originalStart,r.originalLength,r.modifiedStart,r.modifiedLength);for(let h=1;;h++){const p=r.originalStart-h,b=r.modifiedStart-h;if(p<i||b<a||s&&!this.OriginalElementsAreEqual(p,p+r.originalLength)||c&&!this.ModifiedElementsAreEqual(b,b+r.modifiedLength))break;const A=(p===i&&b===a?5:0)+this._boundaryScore(p,r.originalLength,b,r.modifiedLength);A>d&&(d=A,u=h)}r.originalStart-=u,r.modifiedStart-=u;const f=[null];if(n>0&&this.ChangesOverlap(e[n-1],e[n],f)){e[n-1]=f[0],e.splice(n,1),n++;continue}}if(this._hasStrings)for(let n=1,r=e.length;n<r;n++){const i=e[n-1],a=e[n],s=a.originalStart-i.originalStart-i.originalLength,c=i.originalStart,u=a.originalStart+a.originalLength,d=u-c,f=i.modifiedStart,h=a.modifiedStart+a.modifiedLength,p=h-f;if(s<5&&d<20&&p<20){const b=this._findBetterContiguousSequence(c,d,f,p,s);if(b){const[ne,A]=b;(ne!==i.originalStart+i.originalLength||A!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=ne-i.originalStart,i.modifiedLength=A-i.modifiedStart,a.originalStart=ne+s,a.modifiedStart=A+s,a.originalLength=u-a.originalStart,a.modifiedLength=h-a.modifiedStart)}}}return e}_findBetterContiguousSequence(e,n,r,i,a){if(n<a||i<a)return null;const s=e+n-a+1,c=r+i-a+1;let u=0,d=0,f=0;for(let h=e;h<s;h++)for(let p=r;p<c;p++){const b=this._contiguousSequenceScore(h,p,a);b>0&&b>u&&(u=b,d=h,f=p)}return u>0?[d,f]:null}_contiguousSequenceScore(e,n,r){let i=0;for(let a=0;a<r;a++){if(!this.ElementsAreEqual(e+a,n+a))return 0;i+=this._originalStringElements[e+a].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._OriginalIsBoundary(r-1)||this._OriginalIsBoundary(r))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._ModifiedIsBoundary(r-1)||this._ModifiedIsBoundary(r))return!0}return!1}_boundaryScore(e,n,r,i){const a=this._OriginalRegionIsBoundary(e,n)?1:0,s=this._ModifiedRegionIsBoundary(r,i)?1:0;return a+s}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){const i=new Array(e.length+n.length-1);return zr.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],zr.Copy(n,1,i,e.length,n.length-1),i}else{const i=new Array(e.length+n.length);return zr.Copy(e,0,i,0,e.length),zr.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(rr.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),rr.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){const i=e.originalStart;let a=e.originalLength;const s=e.modifiedStart;let c=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(a=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(c=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new Ir(i,a,s,c),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;const a=r,s=i-r-1,c=n%2==0;if(e<0){const u=a%2==0;return c===u?0:1}else{const u=s%2==0;return c===u?i-1:i-2}}}o(at,"LcsDiff");var mt;(function(t){function e(r,i){return r instanceof $e?i:new l.Position(i.line,i.character)}o(e,"makePosition"),t.makePosition=e;function n(r,i){return r instanceof $e?i:new l.Range(i.start.line,i.start.character,i.end.line,i.end.character)}o(n,"makeRange"),t.makeRange=n})(mt||(mt={}));var Tt;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(Tt||(Tt={}));const Ot=o(class{constructor(t,e,n,r){this.diffCache=new kn(32),this.indexDocumentCache=new kn(32),this.codeDocumentCache=new kn(32),this.providerService=t,this.rootUri=e,this.index=n,this.code=r,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const i=await this.getIndexDocument(e);return i===void 0?!0:this.getDiff(1,i,t).length!==0}async mapPositionFromCodeToIndex(t,e){const n=t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===D.Created||i===D.Deleted)return;const a=await this.getIndexDocument(n);if(a===void 0)return;const s=this.getDiff(2,a,t);if(s.length===0)return e;const c=t.offsetAt(new l.Position(e.line,e.character));let u=c;for(const p of s){if(p.modifiedStart<=c&&c<p.modifiedStart+p.modifiedLength)return;if(u<p.modifiedStart)break;u=u-(p.modifiedLength-p.originalLength)}const d=a.positionAt(u),f=this.getWordAtOffset(a.lineAt(d.line).text,d.character),h=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(f===void 0||h===void 0||f!==h))return new l.Position(d.line,d.character)}async mapRangeFromIndexToCode(t,e){const n=t instanceof l.Uri?t:t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===D.Created||i===D.Deleted)return;const[a,s]=await Promise.all([this.getIndexDocument(n),this.getCodeDocument(t)]);if(a===void 0||s===void 0)return;const c=this.getDiff(1,a,s);if(c.length===0)return e;const u=a.offsetAt(e.start);let d=u;const f=a.offsetAt(e.end);let h=f;for(const Z of c){if(h<Z.originalStart)break;const pe=Z.modifiedLength-Z.originalLength;if(Z.originalStart<=u){if(u<Z.originalStart+Z.originalLength)return;d+=pe}else if(f<Z.originalStart+Z.originalLength)return;if(Z.originalStart<=f){if(f<Z.originalStart+Z.originalLength)return;h+=pe}}const p=s.positionAt(d),b=s.positionAt(h),ne=a.getText(e),A=s.getText(mt.makeRange(s,{start:p,end:b}));if(ne===A)return new l.Range(p.line,p.character,b.line,b.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof l.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,n){let r=t.get(e.toString());if(r!==null)return r!==void 0||(r=this._getDocument(e,n),t.set(e.toString(),r),r.then(i=>{i===void 0&&t.set(e.toString(),null)},void 0)),r}async _getDocument(t,e){const n=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,n).then(r=>new $e(t,Number.MAX_VALUE,Ot.textDecoder.decode(r)),()=>{})}getDiff(t,e,n){if(e.uri.toString()!==n.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${n.uri.toString()}) are pointing to a different document`);const r=`${t}${e.uri.toString()}`;let i=this.diffCache.get(r);return i!==void 0&&i.original===e.version&&i.modified===n.version||(i={original:e.version,modified:n.version,changes:ii(e.getText(),n.getText(),!0)},this.diffCache.set(r,i)),i.changes}getWordAtOffset(t,e){let n="findStart",r=0,i=t.length,a=0;for(;a<t.length&&n!=="endFound";){switch(a===e&&(n="findEnd"),t[a]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(n){case"findStart":r=a+1;break;case"findEnd":i=a,n="endFound";break}break}a++}return n==="endFound"?t.substring(r,i):void 0}},"_DiffMapper");let cn=Ot;cn.textDecoder=new TextDecoder("utf8");var ge;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(ge||(ge={}));class $e{static computeLineOffsets(e,n,r=0){const i=n?[r]:[];for(let a=0;a<e.length;a++){const s=e.charCodeAt(a);(s===13||s===10)&&(s===13&&a+1<e.length&&e.charCodeAt(a+1)===10&&a++,i.push(r+a+1))}return i}constructor(e,n,r){this._content=r,this.uri=e,this.version=n,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=$e.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}lineAt(e){const n=this.getLineOffsets();if(e>=n.length)return{lineNumber:e,text:""};const r=n[e],i=n[e+1];if(i===void 0)return{lineNumber:e,text:this._content.substring(r)};const a=this._content.substring(r,i);let s=a.length-1;for(;s>=0&&(a[s]===`
`||a[s]==="\r");)s--;return{lineNumber:e,text:a.substr(0,s+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){const s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}const a=r-1;return{line:a,character:e-n[a]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}o($e,"TextDocument");var Ke;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(Ke||(Ke={}));var ut;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(ut||(ut={}));var At;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=ut.MAX_VALUE),i===Number.MAX_VALUE&&(i=ut.MAX_VALUE),{line:r,character:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.objectLiteral(i)&&ze.uinteger(i.line)&&ze.uinteger(i.character)}o(n,"is"),t.is=n})(At||(At={}));var It;(function(t){function e(r,i,a,s){if(ze.uinteger(r)&&ze.uinteger(i)&&ze.uinteger(a)&&ze.uinteger(s))return{start:At.create(r,i),end:At.create(a,s)};if(At.is(r)&&At.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments["+r+", "+i+", "+a+", "+s+"]")}o(e,"create"),t.create=e;function n(r){var i=r;return ze.objectLiteral(i)&&At.is(i.start)&&At.is(i.end)}o(n,"is"),t.is=n})(It||(It={}));var En;(function(t){function e(r,i){return{uri:r,range:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&It.is(i.range)&&(ze.string(i.uri)||ze.undefined(i.uri))}o(n,"is"),t.is=n})(En||(En={}));var Rn;(function(t){function e(r,i,a,s){return{targetUri:r,targetRange:i,targetSelectionRange:a,originSelectionRange:s}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&It.is(i.targetRange)&&ze.string(i.targetUri)&&(It.is(i.targetSelectionRange)||ze.undefined(i.targetSelectionRange))&&(It.is(i.originSelectionRange)||ze.undefined(i.originSelectionRange))}o(n,"is"),t.is=n})(Rn||(Rn={}));var Gn;(function(t){function e(r,i,a,s){return{red:r,green:i,blue:a,alpha:s}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.numberRange(i.red,0,1)&&ze.numberRange(i.green,0,1)&&ze.numberRange(i.blue,0,1)&&ze.numberRange(i.alpha,0,1)}o(n,"is"),t.is=n})(Gn||(Gn={}));var ui;(function(t){function e(r,i){return{range:r,color:i}}o(e,"create"),t.create=e;function n(r){var i=r;return It.is(i.range)&&Gn.is(i.color)}o(n,"is"),t.is=n})(ui||(ui={}));var Bi;(function(t){function e(r,i,a){return{label:r,textEdit:i,additionalTextEdits:a}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.string(i.label)&&(ze.undefined(i.textEdit)||Li.is(i))&&(ze.undefined(i.additionalTextEdits)||ze.typedArray(i.additionalTextEdits,Li.is))}o(n,"is"),t.is=n})(Bi||(Bi={}));var di;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(di||(di={}));var dr;(function(t){function e(r,i,a,s,c){var u={startLine:r,endLine:i};return ze.defined(a)&&(u.startCharacter=a),ze.defined(s)&&(u.endCharacter=s),ze.defined(c)&&(u.kind=c),u}o(e,"create"),t.create=e;function n(r){var i=r;return ze.uinteger(i.startLine)&&ze.uinteger(i.startLine)&&(ze.undefined(i.startCharacter)||ze.uinteger(i.startCharacter))&&(ze.undefined(i.endCharacter)||ze.uinteger(i.endCharacter))&&(ze.undefined(i.kind)||ze.string(i.kind))}o(n,"is"),t.is=n})(dr||(dr={}));var Pi;(function(t){function e(r,i){return{location:r,message:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&En.is(i.location)&&ze.string(i.message)}o(n,"is"),t.is=n})(Pi||(Pi={}));var fi;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(fi||(fi={}));var ji;(function(t){t.Unnecessary=1,t.Deprecated=2})(ji||(ji={}));var Aa;(function(t){function e(n){var r=n;return r!=null&&ze.string(r.href)}o(e,"is"),t.is=e})(Aa||(Aa={}));var Hi;(function(t){function e(r,i,a,s,c,u){var d={range:r,message:i};return ze.defined(a)&&(d.severity=a),ze.defined(s)&&(d.code=s),ze.defined(c)&&(d.source=c),ze.defined(u)&&(d.relatedInformation=u),d}o(e,"create"),t.create=e;function n(r){var i,a=r;return ze.defined(a)&&It.is(a.range)&&ze.string(a.message)&&(ze.number(a.severity)||ze.undefined(a.severity))&&(ze.integer(a.code)||ze.string(a.code)||ze.undefined(a.code))&&(ze.undefined(a.codeDescription)||ze.string((i=a.codeDescription)===null||i===void 0?void 0:i.href))&&(ze.string(a.source)||ze.undefined(a.source))&&(ze.undefined(a.relatedInformation)||ze.typedArray(a.relatedInformation,Pi.is))}o(n,"is"),t.is=n})(Hi||(Hi={}));var Yi;(function(t){function e(r,i){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var c={title:r,command:i};return ze.defined(a)&&a.length>0&&(c.arguments=a),c}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.string(i.title)&&ze.string(i.command)}o(n,"is"),t.is=n})(Yi||(Yi={}));var Li;(function(t){function e(a,s){return{range:a,newText:s}}o(e,"replace"),t.replace=e;function n(a,s){return{range:{start:a,end:a},newText:s}}o(n,"insert"),t.insert=n;function r(a){return{range:a,newText:""}}o(r,"del"),t.del=r;function i(a){var s=a;return ze.objectLiteral(s)&&ze.string(s.newText)&&It.is(s.range)}o(i,"is"),t.is=i})(Li||(Li={}));var qi;(function(t){function e(r,i,a){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),a!==void 0&&(s.description=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&ze.objectLiteral(i)&&ze.string(i.label)&&(ze.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(ze.string(i.description)||i.description===void 0)}o(n,"is"),t.is=n})(qi||(qi={}));var xr;(function(t){function e(n){var r=n;return typeof r=="string"}o(e,"is"),t.is=e})(xr||(xr={}));var xi;(function(t){function e(a,s,c){return{range:a,newText:s,annotationId:c}}o(e,"replace"),t.replace=e;function n(a,s,c){return{range:{start:a,end:a},newText:s,annotationId:c}}o(n,"insert"),t.insert=n;function r(a,s){return{range:a,newText:"",annotationId:s}}o(r,"del"),t.del=r;function i(a){var s=a;return Li.is(s)&&(qi.is(s.annotationId)||xr.is(s.annotationId))}o(i,"is"),t.is=i})(xi||(xi={}));var la;(function(t){function e(r,i){return{textDocument:r,edits:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&_i.is(i.textDocument)&&Array.isArray(i.edits)}o(n,"is"),t.is=n})(la||(la={}));var Ui;(function(t){function e(r,i,a){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&ze.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||ze.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||ze.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||xr.is(i.annotationId))}o(n,"is"),t.is=n})(Ui||(Ui={}));var Vn;(function(t){function e(r,i,a,s){var c={kind:"rename",oldUri:r,newUri:i};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),s!==void 0&&(c.annotationId=s),c}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&ze.string(i.oldUri)&&ze.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||ze.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||ze.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||xr.is(i.annotationId))}o(n,"is"),t.is=n})(Vn||(Vn={}));var fr;(function(t){function e(r,i,a){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&ze.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||ze.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||ze.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||xr.is(i.annotationId))}o(n,"is"),t.is=n})(fr||(fr={}));var pa;(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return ze.string(i.kind)?Ui.is(i)||Vn.is(i)||fr.is(i):la.is(i)}))}o(e,"is"),t.is=e})(pa||(pa={}));var hr=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,a;if(r===void 0?i=Li.insert(e,n):xr.is(r)?(a=r,i=xi.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=xi.insert(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.replace=function(e,n,r){var i,a;if(r===void 0?i=Li.replace(e,n):xr.is(r)?(a=r,i=xi.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=xi.replace(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=Li.del(e):xr.is(n)?(i=n,r=xi.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=xi.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),Va=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(xr.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),Qi=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Va(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(la.is(r)){var i=new hr(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new hr(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(_i.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],a={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(a),r=new hr(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new hr(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Va,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;qi.is(n)||xr.is(n)?i=n:r=n;var a,s;if(i===void 0?a=Ui.create(e,r):(s=xr.is(i)?i:this._changeAnnotations.manage(i),a=Ui.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;qi.is(r)||xr.is(r)?a=r:i=r;var s,c;if(a===void 0?s=Vn.create(e,n,i):(c=xr.is(a)?a:this._changeAnnotations.manage(a),s=Vn.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;qi.is(n)||xr.is(n)?i=n:r=n;var a,s;if(i===void 0?a=fr.create(e,r):(s=xr.is(i)?i:this._changeAnnotations.manage(i),a=fr.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t}(),Wi;(function(t){function e(r){return{uri:r}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.string(i.uri)}o(n,"is"),t.is=n})(Wi||(Wi={}));var $i;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.string(i.uri)&&ze.integer(i.version)}o(n,"is"),t.is=n})($i||($i={}));var _i;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.string(i.uri)&&(i.version===null||ze.integer(i.version))}o(n,"is"),t.is=n})(_i||(_i={}));var ja;(function(t){function e(r,i,a,s){return{uri:r,languageId:i,version:a,text:s}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.string(i.uri)&&ze.string(i.languageId)&&ze.integer(i.version)&&ze.string(i.text)}o(n,"is"),t.is=n})(ja||(ja={}));var ki;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(ki||(ki={})),function(t){function e(n){var r=n;return r===t.PlainText||r===t.Markdown}o(e,"is"),t.is=e}(ki||(ki={}));var ma;(function(t){function e(n){var r=n;return ze.objectLiteral(n)&&ki.is(r.kind)&&ze.string(r.value)}o(e,"is"),t.is=e})(ma||(ma={}));var Ya;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(Ya||(Ya={}));var qa;(function(t){t.PlainText=1,t.Snippet=2})(qa||(qa={}));var Qa;(function(t){t.Deprecated=1})(Qa||(Qa={}));var Xa;(function(t){function e(r,i,a){return{newText:r,insert:i,replace:a}}o(e,"create"),t.create=e;function n(r){var i=r;return i&&ze.string(i.newText)&&It.is(i.insert)&&It.is(i.replace)}o(n,"is"),t.is=n})(Xa||(Xa={}));var Za;(function(t){t.asIs=1,t.adjustIndentation=2})(Za||(Za={}));var Da;(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(Da||(Da={}));var eo;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}o(e,"create"),t.create=e})(eo||(eo={}));var ca;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return ze.string(i)||ze.objectLiteral(i)&&ze.string(i.language)&&ze.string(i.value)}o(n,"is"),t.is=n})(ca||(ca={}));var to;(function(t){function e(n){var r=n;return!!r&&ze.objectLiteral(r)&&(ma.is(r.contents)||ca.is(r.contents)||ze.typedArray(r.contents,ca.is))&&(n.range===void 0||It.is(n.range))}o(e,"is"),t.is=e})(to||(to={}));var no;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}o(e,"create"),t.create=e})(no||(no={}));var ro;(function(t){function e(n,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s={label:n};return ze.defined(r)&&(s.documentation=r),ze.defined(i)?s.parameters=i:s.parameters=[],s}o(e,"create"),t.create=e})(ro||(ro={}));var ua;(function(t){t.Text=1,t.Read=2,t.Write=3})(ua||(ua={}));var io;(function(t){function e(n,r){var i={range:n};return ze.number(r)&&(i.kind=r),i}o(e,"create"),t.create=e})(io||(io={}));var Ra;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Ra||(Ra={}));var Ta;(function(t){t.Deprecated=1})(Ta||(Ta={}));var Ei;(function(t){function e(n,r,i,a,s){var c={name:n,kind:r,location:{uri:a,range:i}};return s&&(c.containerName=s),c}o(e,"create"),t.create=e})(Ei||(Ei={}));var ao;(function(t){function e(r,i,a,s,c,u){var d={name:r,detail:i,kind:a,range:s,selectionRange:c};return u!==void 0&&(d.children=u),d}o(e,"create"),t.create=e;function n(r){var i=r;return i&&ze.string(i.name)&&ze.number(i.kind)&&It.is(i.range)&&It.is(i.selectionRange)&&(i.detail===void 0||ze.string(i.detail))&&(i.deprecated===void 0||ze.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}o(n,"is"),t.is=n})(ao||(ao={}));var Qr;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Qr||(Qr={}));var Ma;(function(t){function e(r,i){var a={diagnostics:r};return i!=null&&(a.only=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.typedArray(i.diagnostics,Hi.is)&&(i.only===void 0||ze.typedArray(i.only,ze.string))}o(n,"is"),t.is=n})(Ma||(Ma={}));var oo;(function(t){function e(r,i,a){var s={title:r},c=!0;return typeof i=="string"?(c=!1,s.kind=i):Yi.is(i)?s.command=i:s.edit=i,c&&a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&ze.string(i.title)&&(i.diagnostics===void 0||ze.typedArray(i.diagnostics,Hi.is))&&(i.kind===void 0||ze.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Yi.is(i.command))&&(i.isPreferred===void 0||ze.boolean(i.isPreferred))&&(i.edit===void 0||pa.is(i.edit))}o(n,"is"),t.is=n})(oo||(oo={}));var Ia;(function(t){function e(r,i){var a={range:r};return ze.defined(i)&&(a.data=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&It.is(i.range)&&(ze.undefined(i.command)||Yi.is(i.command))}o(n,"is"),t.is=n})(Ia||(Ia={}));var so;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&ze.uinteger(i.tabSize)&&ze.boolean(i.insertSpaces)}o(n,"is"),t.is=n})(so||(so={}));var lo;(function(t){function e(r,i,a){return{range:r,target:i,data:a}}o(e,"create"),t.create=e;function n(r){var i=r;return ze.defined(i)&&It.is(i.range)&&(ze.undefined(i.target)||ze.string(i.target))}o(n,"is"),t.is=n})(lo||(lo={}));var Pa;(function(t){function e(r,i){return{range:r,parent:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&It.is(i.range)&&(i.parent===void 0||t.is(i.parent))}o(n,"is"),t.is=n})(Pa||(Pa={}));var fl=null,La;(function(t){function e(a,s,c,u){return new xa(a,s,c,u)}o(e,"create"),t.create=e;function n(a){var s=a;return!!(ze.defined(s)&&ze.string(s.uri)&&(ze.undefined(s.languageId)||ze.string(s.languageId))&&ze.uinteger(s.lineCount)&&ze.func(s.getText)&&ze.func(s.positionAt)&&ze.func(s.offsetAt))}o(n,"is"),t.is=n;function r(a,s){for(var c=a.getText(),u=i(s,function(ne,A){var Z=ne.range.start.line-A.range.start.line;return Z===0?ne.range.start.character-A.range.start.character:Z}),d=c.length,f=u.length-1;f>=0;f--){var h=u[f],p=a.offsetAt(h.range.start),b=a.offsetAt(h.range.end);if(b<=d)c=c.substring(0,p)+h.newText+c.substring(b,c.length);else throw new Error("Overlapping edit");d=p}return c}o(r,"applyEdits"),t.applyEdits=r;function i(a,s){if(a.length<=1)return a;var c=a.length/2|0,u=a.slice(0,c),d=a.slice(c);i(u,s),i(d,s);for(var f=0,h=0,p=0;f<u.length&&h<d.length;){var b=s(u[f],d[h]);b<=0?a[p++]=u[f++]:a[p++]=d[h++]}for(;f<u.length;)a[p++]=u[f++];for(;h<d.length;)a[p++]=d[h++];return a}o(i,"mergeSort")})(La||(La={}));var xa=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var a=n.charAt(i);r=a==="\r"||a===`
`,a==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return At.create(0,e);for(;r<i;){var a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}var s=r-1;return At.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),ze;(function(t){var e=Object.prototype.toString;function n(b){return typeof b!="undefined"}o(n,"defined"),t.defined=n;function r(b){return typeof b=="undefined"}o(r,"undefined"),t.undefined=r;function i(b){return b===!0||b===!1}o(i,"boolean"),t.boolean=i;function a(b){return e.call(b)==="[object String]"}o(a,"string"),t.string=a;function s(b){return e.call(b)==="[object Number]"}o(s,"number"),t.number=s;function c(b,ne,A){return e.call(b)==="[object Number]"&&ne<=b&&b<=A}o(c,"numberRange"),t.numberRange=c;function u(b){return e.call(b)==="[object Number]"&&-2147483648<=b&&b<=2147483647}o(u,"integer"),t.integer=u;function d(b){return e.call(b)==="[object Number]"&&0<=b&&b<=2147483647}o(d,"uinteger"),t.uinteger=d;function f(b){return e.call(b)==="[object Function]"}o(f,"func"),t.func=f;function h(b){return b!==null&&typeof b=="object"}o(h,"objectLiteral"),t.objectLiteral=h;function p(b,ne){return Array.isArray(b)&&b.every(ne)}o(p,"typedArray"),t.typedArray=p})(ze||(ze={}));var Ki;(function(t){function e(r){return typeof r=="string"||r instanceof String}o(e,"string"),t.string=e;function n(r){return typeof r=="number"||r instanceof Number}o(n,"number"),t.number=n})(Ki||(Ki={}));var ka;(function(t){function e(n){const r=n;return r!=null&&(Ki.number(r.value)||Ki.string(r.value))&&Ki.string(r.target)}o(e,"is"),t.is=e})(ka||(ka={}));class co extends l.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}}o(co,"ProtocolDiagnostic");var Ai;(function(t){const e=Object.prototype.toString;function n(f){return typeof f!="undefined"}o(n,"defined"),t.defined=n;function r(f){return f===!0||f===!1}o(r,"boolean"),t.boolean=r;function i(f){return e.call(f)==="[object String]"}o(i,"string"),t.string=i;function a(f){return e.call(f)==="[object Number]"}o(a,"number"),t.number=a;function s(f){return f!==null&&typeof f=="object"}o(s,"objectLiteral"),t.objectLiteral=s;function c(f){return Array.isArray(f)}o(c,"array"),t.array=c;function u(f){return c(f)&&f.every(h=>i(h))}o(u,"stringArray"),t.stringArray=u;function d(f,h){return Array.isArray(f)&&f.every(h)}o(d,"typedArray"),t.typedArray=d})(Ai||(Ai={}));var S;(function(t){function e(n){const r=n;return r&&Ai.string(r.language)&&Ai.string(r.value)}o(e,"is"),t.is=e})(S||(S={}));function g(t){const e=o(J=>l.Uri.parse(J),"nullConverter"),n=t!=null?t:e;function r(J){return n(J)}o(r,"asUri");function i(J){return J.map(a)}o(i,"asDiagnostics");function a(J){const yt=new co(h(J.range),J.message,b(J.severity),J.data);return J.code!==void 0&&(Aa.is(J.codeDescription)?yt.code={value:J.code,target:r(J.codeDescription.href)}:ka.is(J.code)?(yt.hasDiagnosticCode=!0,yt.code={value:J.code.value,target:r(J.code.target)}):yt.code=J.code),J.source&&(yt.source=J.source),J.relatedInformation&&(yt.relatedInformation=s(J.relatedInformation)),Array.isArray(J.tags)&&(yt.tags=u(J.tags)),yt}o(a,"asDiagnostic");function s(J){return J.map(c)}o(s,"asRelatedInformation");function c(J){return new l.DiagnosticRelatedInformation(gt(J.location),J.message)}o(c,"asDiagnosticRelatedInformation");function u(J){if(!J)return;const yt=[];for(const Sn of J){const Vr=d(Sn);Vr!==void 0&&yt.push(Vr)}return yt.length>0?yt:void 0}o(u,"asDiagnosticTags");function d(J){switch(J){case ji.Unnecessary:return l.DiagnosticTag.Unnecessary;case ji.Deprecated:return l.DiagnosticTag.Deprecated;default:return}}o(d,"asDiagnosticTag");function f(J){if(!!J)return new l.Position(J.line,J.character)}o(f,"asPosition");function h(J){if(!!J)return new l.Range(f(J.start),f(J.end))}o(h,"asRange");function p(J){return J.map(yt=>h(yt))}o(p,"asRanges");function b(J){if(J==null)return l.DiagnosticSeverity.Error;switch(J){case fi.Error:return l.DiagnosticSeverity.Error;case fi.Warning:return l.DiagnosticSeverity.Warning;case fi.Information:return l.DiagnosticSeverity.Information;case fi.Hint:return l.DiagnosticSeverity.Hint}return l.DiagnosticSeverity.Error}o(b,"asDiagnosticSeverity");function ne(J){if(Ai.string(J))return new l.MarkdownString(J);if(S.is(J))return new l.MarkdownString().appendCodeblock(J.value,J.language);if(Array.isArray(J)){const Sn=[];for(const Vr of J){const za=new l.MarkdownString;S.is(Vr)?za.appendCodeblock(Vr.value,Vr.language):za.appendMarkdown(Vr),Sn.push(za)}return Sn}let yt;switch(J.kind){case ki.Markdown:return new l.MarkdownString(J.value);case ki.PlainText:return yt=new l.MarkdownString,yt.appendText(J.value),yt;default:return yt=new l.MarkdownString,yt.appendText(`Unsupported Markup content received. Kind is: ${J.kind}`),yt}}o(ne,"asHoverContent");function A(J){if(Ai.string(J))return J;switch(J.kind){case ki.Markdown:return new l.MarkdownString(J.value);case ki.PlainText:return J.value;default:return`Unsupported Markup content received. Kind is: ${J.kind}`}}o(A,"asDocumentation");function Z(J){if(!!J)return new l.Hover(ne(J.contents),h(J.range))}o(Z,"asHover");function pe(J){if(!!J)return new l.TextEdit(h(J.range),J.newText)}o(pe,"asTextEdit");function X(J){if(!!J)return J.map(pe)}o(X,"asTextEdits");function _e(J){if(!J)return;const yt=new l.SignatureHelp;return Ai.number(J.activeSignature)?yt.activeSignature=J.activeSignature:yt.activeSignature=0,Ai.number(J.activeParameter)?yt.activeParameter=J.activeParameter:yt.activeParameter=0,J.signatures&&(yt.signatures=xe(J.signatures)),yt}o(_e,"asSignatureHelp");function xe(J){return J.map(Ue)}o(xe,"asSignatureInformations");function Ue(J){const yt=new l.SignatureInformation(J.label);return J.documentation!==void 0&&(yt.documentation=A(J.documentation)),J.parameters!==void 0&&(yt.parameters=Qe(J.parameters)),J.activeParameter!==void 0&&(yt.activeParameter=J.activeParameter),yt}o(Ue,"asSignatureInformation");function Qe(J){return J.map(Mt)}o(Qe,"asParameterInformations");function Mt(J){const yt=new l.ParameterInformation(J.label);return J.documentation&&(yt.documentation=A(J.documentation)),yt}o(Mt,"asParameterInformation");function gt(J){if(!!J)return new l.Location(n(J.uri),h(J.range))}o(gt,"asLocation");function Qt(J){if(!!J)return Kt(J)}o(Qt,"asDeclarationResult");function gn(J){if(!!J)return Kt(J)}o(gn,"asDefinitionResult");function rn(J){if(!J)return;const yt={targetUri:n(J.targetUri),targetRange:h(J.targetSelectionRange),originSelectionRange:h(J.originSelectionRange),targetSelectionRange:h(J.targetSelectionRange)};if(!yt.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return yt}o(rn,"asLocationLink");function Kt(J){if(!!J)return Ai.array(J)?J.length===0?[]:Rn.is(J[0])?J.map(Vr=>rn(Vr)):J.map(Sn=>gt(Sn)):Rn.is(J)?[rn(J)]:gt(J)}o(Kt,"asLocationResult");function un(J){if(!!J)return J.map(yt=>gt(yt))}o(un,"asReferences");function Mr(J){if(!!J)return J.map(Ri)}o(Mr,"asDocumentHighlights");function Ri(J){const yt=new l.DocumentHighlight(h(J.range));return Ai.number(J.kind)&&(yt.kind=Ti(J.kind)),yt}o(Ri,"asDocumentHighlight");function Ti(J){switch(J){case ua.Text:return l.DocumentHighlightKind.Text;case ua.Read:return l.DocumentHighlightKind.Read;case ua.Write:return l.DocumentHighlightKind.Write}return l.DocumentHighlightKind.Text}o(Ti,"asDocumentHighlightKind");function oa(J,yt){if(!!J)return J.map(Sn=>il(Sn,yt))}o(oa,"asSymbolInformations");function Ni(J){return J<=Ra.TypeParameter?J-1:l.SymbolKind.Property}o(Ni,"asSymbolKind");function Ea(J){switch(J){case Ta.Deprecated:return l.SymbolTag.Deprecated;default:return}}o(Ea,"asSymbolTag");function Io(J){if(J==null)return;const yt=[];for(const Sn of J){const Vr=Ea(Sn);Vr!==void 0&&yt.push(Vr)}return yt.length===0?void 0:yt}o(Io,"asSymbolTags");function il(J,yt){const Sn=new l.SymbolInformation(J.name,Ni(J.kind),h(J.location.range),J.location.uri?n(J.location.uri):yt);return al(Sn,J),J.containerName&&(Sn.containerName=J.containerName),Sn}o(il,"asSymbolInformation");function Mc(J){if(J!=null)return J.map(Zo)}o(Mc,"asDocumentSymbols");function Zo(J){var yt;const Sn=new l.DocumentSymbol(J.name,(yt=J.detail)!=null?yt:"",Ni(J.kind),h(J.range),h(J.selectionRange));if(al(Sn,J),J.children!==void 0&&J.children.length>0){const Vr=[];for(const za of J.children)Vr.push(Zo(za));Sn.children=Vr}return Sn}o(Zo,"asDocumentSymbol");function al(J,yt){J.tags=Io(yt.tags),yt.deprecated&&(J.tags?J.tags.includes(l.SymbolTag.Deprecated)||(J.tags=J.tags.concat(l.SymbolTag.Deprecated)):J.tags=[l.SymbolTag.Deprecated])}o(al,"fillTags");function es(J){const yt={title:J.title,command:J.command};return J.arguments&&(yt.arguments=J.arguments),yt}o(es,"asCommand");function Ic(J){if(!!J)return J.map(es)}o(Ic,"asCommands");const ta=new Map;ta.set(Qr.Empty,l.CodeActionKind.Empty),ta.set(Qr.QuickFix,l.CodeActionKind.QuickFix),ta.set(Qr.Refactor,l.CodeActionKind.Refactor),ta.set(Qr.RefactorExtract,l.CodeActionKind.RefactorExtract),ta.set(Qr.RefactorInline,l.CodeActionKind.RefactorInline),ta.set(Qr.RefactorRewrite,l.CodeActionKind.RefactorRewrite),ta.set(Qr.Source,l.CodeActionKind.Source),ta.set(Qr.SourceOrganizeImports,l.CodeActionKind.SourceOrganizeImports);function ts(J){if(J==null)return;let yt=ta.get(J);if(yt)return yt;const Sn=J.split(".");yt=l.CodeActionKind.Empty;for(const Vr of Sn)yt=yt.append(Vr);return yt}o(ts,"asCodeActionKind");function Pc(J){if(J!=null)return J.map(yt=>ts(yt))}o(Pc,"asCodeActionKinds");function Lc(J){if(J==null)return;const yt=new l.CodeAction(J.title);return J.kind!==void 0&&(yt.kind=ts(J.kind)),J.diagnostics&&(yt.diagnostics=i(J.diagnostics)),J.edit&&(yt.edit=ol(J.edit)),J.command&&(yt.command=es(J.command)),J.isPreferred!==void 0&&(yt.isPreferred=J.isPreferred),yt}o(Lc,"asCodeAction");function ol(J){if(!J)return;const yt=new l.WorkspaceEdit;return J.documentChanges?J.documentChanges.forEach(Sn=>{if(Ui.is(Sn))yt.createFile(n(Sn.uri),Sn.options);else if(Vn.is(Sn))yt.renameFile(n(Sn.oldUri),n(Sn.newUri),Sn.options);else if(fr.is(Sn))yt.deleteFile(n(Sn.uri),Sn.options);else if(la.is(Sn))yt.set(n(Sn.textDocument.uri),X(Sn.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Sn,void 0,4)}`)}):J.changes&&Object.keys(J.changes).forEach(Sn=>{yt.set(n(Sn),X(J.changes[Sn]))}),yt}o(ol,"asWorkspaceEdit");function sl(J){return new l.Color(J.red,J.green,J.blue,J.alpha)}o(sl,"asColor");function ll(J){return new l.ColorInformation(h(J.range),sl(J.color))}o(ll,"asColorInformation");function xc(J){if(Array.isArray(J))return J.map(ll)}o(xc,"asColorInformations");function cl(J){const yt=new l.ColorPresentation(J.label);return yt.additionalTextEdits=X(J.additionalTextEdits),J.textEdit&&(yt.textEdit=pe(J.textEdit)),yt}o(cl,"asColorPresentation");function kc(J){if(Array.isArray(J))return J.map(cl)}o(kc,"asColorPresentations");function ul(J){if(J)switch(J){case di.Comment:return l.FoldingRangeKind.Comment;case di.Imports:return l.FoldingRangeKind.Imports;case di.Region:return l.FoldingRangeKind.Region}}o(ul,"asFoldingRangeKind");function dl(J){return new l.FoldingRange(J.startLine,J.endLine,ul(J.kind))}o(dl,"asFoldingRange");function Fc(J){if(Array.isArray(J))return J.map(dl)}o(Fc,"asFoldingRanges");function ns(J){return new l.SelectionRange(h(J.range),J.parent?ns(J.parent):void 0)}o(ns,"asSelectionRange");function Nc(J){if(!Array.isArray(J))return[];const yt=[];for(const Sn of J)yt.push(ns(Sn));return yt}return o(Nc,"asSelectionRanges"),{asUri:r,asDiagnostics:i,asDiagnostic:a,asRange:h,asRanges:p,asPosition:f,asDiagnosticSeverity:b,asDiagnosticTag:d,asHover:Z,asTextEdit:pe,asTextEdits:X,asSignatureHelp:_e,asSignatureInformations:xe,asSignatureInformation:Ue,asParameterInformations:Qe,asParameterInformation:Mt,asDeclarationResult:Qt,asDefinitionResult:gn,asLocation:gt,asReferences:un,asDocumentHighlights:Mr,asDocumentHighlight:Ri,asDocumentHighlightKind:Ti,asSymbolKind:Ni,asSymbolTag:Ea,asSymbolTags:Io,asSymbolInformations:oa,asSymbolInformation:il,asDocumentSymbols:Mc,asDocumentSymbol:Zo,asCommand:es,asCommands:Ic,asCodeAction:Lc,asCodeActionKind:ts,asCodeActionKinds:Pc,asWorkspaceEdit:ol,asFoldingRangeKind:ul,asFoldingRange:dl,asFoldingRanges:Fc,asColor:sl,asColorInformation:ll,asColorInformations:xc,asColorPresentation:cl,asColorPresentations:kc,asSelectionRange:ns,asSelectionRanges:Nc}}o(g,"createConverter");var _;(function(t){function e(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(e,"externalUri"),t.externalUri=e;function n(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(n,"externalIndexUri"),t.externalIndexUri=n})(_||(_={}));var x;(function(t){function e(i){if(i.HEAD.type===V.Branch||i.HEAD.type===V.RemoteBranch)return i.HEAD.name}o(e,"getBranchName"),t.getBranchName=e;function n(i){if(i.HEAD.type!==V.Branch)return;if(i.pullRequest!==void 0)return i.HEAD.name;const a=i.HEAD.name;return a===void 0||a.startsWith("refs/heads/")?a:`refs/heads/${a}`}o(n,"getIndexBranchName"),t.getIndexBranchName=n;async function r(i,a,s=Be.timeout){const c=await i.getMetadata(a),u=_.externalIndexUri(i,c),d=t.getIndexBranchName(c);if(!(u===void 0||d===void 0))return Be.getIndexedTip(u,d,{authentication:i.getAuthentication(a)},s)}o(r,"getIndexedTip"),t.getIndexedTip=r})(x||(x={}));var oe;(function(t){const e=new kn(1024);function n(s,c,u){let d=e.get(u);return d!==void 0||(d=s.getCommit(c,u),e.set(u,d)),d}o(n,"get"),t.get=n;async function r(s,c,u){const d=[];for(const h of u)d.push(n(s,c,h));const f=[];for(const h of await Promise.all(d))h!==void 0&&f.push(h);return f}o(r,"all"),t.all=r;function i(s,c){const u=s.commitDate,d=c.commitDate;return u===void 0&&d===void 0?0:u===void 0?1:d===void 0?-1:u<d?1:u>d?-1:0}o(i,"sort"),t.sort=i;function a(s){const c=s.authorName!==void 0?`  \u2022  ${s.authorName}`:"",u=s.commitDate!==void 0?`  \u2022  ${Jn(s.commitDate,{ago:!0})}`:"",d=s.branchName!==void 0?` - ${s.branchName}`:"",f=s.tags!==void 0?typeof s.tags=="string"?`  \u2022  ${s.tags}`:`  \u2022  ${s.tags.join(" ")}`:"";return{author:c,date:u,branch:d,tag:f}}o(a,"getCommitInfo"),t.getCommitInfo=a})(oe||(oe={}));var Se;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(Se||(Se={}));var Ne;(function(t){function e(r){return{workspaceId:r.WorkspaceId,snapshotId:r.SnapshotId,state:r.State,commitId:r.commitId.toLowerCase(),branchName:n(r.BranchName),creationDate:new Date(r._ts*1e3)}}o(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function n(r){if(r!==null)return r.startsWith("refs/heads/")?r.substr(11):r}o(n,"getBranchName")})(Ne||(Ne={}));var Be;(function(t){t.timeout=5*60*1e3;const e=new kn(32),n=new kn(32);async function r(h,p,b,ne=t.timeout){const A=await i(h,p,b,ne);if(!(A===void 0||A.length===0))return A[0]}o(r,"getIndexedTip"),t.getIndexedTip=r;async function i(h,p,b,ne=t.timeout){const A=c(h,p);let Z=e.get(A);if(Z===void 0||Z!==void 0&&Date.now()-Z.time>ne){const pe=st.getAllWorkspaceSnapshots(h,b,p);Z={time:Date.now(),promise:pe,snapshots:void 0},e.set(A,Z)}if(Z.snapshots!==null){if(Z.snapshots===void 0){let pe=await Z.promise;if(pe===void 0){Z.snapshots=null;return}pe.sort((X,_e)=>_e.creationDate.getTime()-X.creationDate.getTime()),pe=pe.filter(X=>X.state===5||X.state===3),Z.snapshots=pe}return Z.snapshots}}o(i,"all"),t.all=i;async function a(h,p,b,ne,A=t.timeout){const Z=s(h,p);let pe=n.get(Z);if(pe===null)return;if(pe!==void 0)return pe;const X=c(h,b),_e=e.get(X);if(_e!==void 0&&Date.now()-_e.time<=A){if(_e.snapshots===null)return;const xe=_e.snapshots!==void 0?_e.snapshots:await i(h,b,ne);if(xe!==void 0){for(const Ue of xe)if(Ue.commitId===p)return n.set(Z,Ue),Ue}return}if(pe=await st.getWorkspaceSnapshot(p,ne),pe===void 0){n.set(Z,null);return}return n.set(Z,pe),pe}o(a,"single"),t.single=a;function s(h,p){return`${h.toString()}/${p}`}o(s,"getSingleCacheKey");function c(h,p){return p!==void 0?`${p}\\${h.toString()}`:h.toString()}o(c,"getAllCacheKey");async function u(h,p,b,ne=t.timeout){return await a(h,p,void 0,b,ne)!==void 0}o(u,"exists"),t.exists=u;async function d(h,p,b,ne=t.timeout){return await i(h,p,b,ne)!==void 0}o(d,"branch"),t.branch=d;async function f(h,p,b){const ne=new Map(b.map(pe=>[pe.commitId,pe])),A=await oe.all(h,p.uri,b.map(pe=>pe.commitId));if(A.length===0)return;const Z=[];for(const pe of A){const X=ne.get(pe.hash);X!==void 0&&Z.push({...X,commit:pe})}if(Z.length!==0)return Z}o(f,"resolve"),t.resolve=f})(Be||(Be={}));var ft;(function(t){function e(n=!1){return{hoverProvider:n,declarationProvider:n,definitionProvider:n,typeDefinitionProvider:n,referencesProvider:n,documentSymbolProvider:n,foldingRangeProvider:n,diagnosticProvider:n,workspaceSymbolProvider:n}}o(e,"create"),t.create=e})(ft||(ft={}));var st;(function(t){const e="v0.1",n="https://prod.richnav.vsengsaas.visualstudio.com/api";async function r(X,_e,xe){var Ue;const Qe=await xt(X,{method:"POST",body:JSON.stringify(_e),headers:{"Content-Type":"application/json",...(await xe.authentication).getRichNavigationHeaders(),"x-correlation-id":(Ue=xe.correlationId)!=null?Ue:bn()}});if(!!Qe.ok)return Qe.json()}o(r,"postRequest");async function i(X,_e,xe){const Ue=await xt(X,{method:"POST",body:_e,headers:(await xe.authentication).getRichNavigationHeaders()});if(!!Ue.ok)return await Ue.json()}o(i,"postForm");function a(X,_e){return`${n}/${e}/HttpLanguageService/${X}/${_e}`}o(a,"makeRequestUrl");async function s(X,_e){const xe=await xt(`${n}/${e}/WorkspaceSnapshot?commitId=${X}`,{headers:(await _e.authentication).getRichNavigationHeaders()});if(xe.ok){const Ue=await xe.json();return{workspaceId:Ue.workspaceId,snapshotId:Ue.snapshotId,state:Ue.state,commitId:X.toLowerCase(),branchName:void 0,creationDate:new Date}}}o(s,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=s;async function c(X,_e,xe){const Ue=new ir;Ue.append("uriString",X.toString(!0)),xe!==void 0&&Ue.append("branchName",xe);try{const Qe=await i(`${n}/${e}/WorkspaceSnapshot/all`,Ue,_e);return Qe===void 0?void 0:Qe.map(Ne.asWorkspaceSnapshot)}catch(Qe){K.error(Qe);return}}o(c,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=c;async function u(X,_e,xe){const Ue=new ir;Ue.append("uriString",X.toString(!0)),xe!==void 0&&Ue.append("branchName",xe);try{const Qe=await i(`${n}/${e}/WorkspaceSnapshot/latest`,Ue,_e);return Qe===void 0?void 0:Ne.asWorkspaceSnapshot(Qe)}catch(Qe){K.error(Qe);return}}o(u,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=u;async function d(X,_e,xe){try{return r(a(X,"textDocument/capabilities"),_e,xe)}catch(Ue){K.error(Ue);return}}o(d,"capabilities"),t.capabilities=d;async function f(X,_e,xe){try{return r(a(X,"textDocument/hover"),_e,xe)}catch(Ue){K.error(Ue);return}}o(f,"provideHover"),t.provideHover=f;async function h(X,_e,xe){try{return r(a(X,"textDocument/definition"),_e,xe)}catch(Ue){K.error(Ue);return}}o(h,"provideDefinition"),t.provideDefinition=h;async function p(X,_e,xe){try{return r(a(X,"textDocument/declaration"),_e,xe)}catch(Ue){K.error(Ue);return}}o(p,"provideDeclaration"),t.provideDeclaration=p;async function b(X,_e,xe){try{return r(a(X,"textDocument/typeDefinition"),_e,xe)}catch(Ue){K.error(Ue);return}}o(b,"provideTypeDefinition"),t.provideTypeDefinition=b;async function ne(X,_e,xe){try{return r(a(X,"textDocument/references"),_e,xe)}catch(Ue){K.error(Ue);return}}o(ne,"provideReferences"),t.provideReferences=ne;async function A(X,_e,xe){try{return r(a(X,"textDocument/foldingRange"),_e,xe)}catch(Ue){K.error(Ue);return}}o(A,"providerFoldingRanges"),t.providerFoldingRanges=A;async function Z(X,_e,xe){if(_e=="")return;const Ue=await xt(`${n}/${e}/Search/${X}/${_e}`,{headers:(await xe.authentication).getRichNavigationHeaders()});if(Ue.ok)return await Ue.json()}o(Z,"provideWorkspaceSymbols"),t.provideWorkspaceSymbols=Z;async function pe(X,_e,xe){const Ue=l.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${X}/${_e}/assets/designtime`,query:`id=${xe}`});try{const Qe=await xt(Ue.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}});return Qe.ok?Qe.text():void 0}catch(Qe){K.error(Qe);return}}o(pe,"getDesignTimeFileContent"),t.getDesignTimeFileContent=pe})(st||(st={}));class kt{constructor(e,n){this.providerService=e,this.telemetryService=n,this.metadata=new Map;const r=[];r.push(this.providerService.onDidChangeRepositories(i=>{var a;for(const s of i.added){const c=s.uri,u=me.getIndexMemento(c);if(u!==void 0){const d=_.externalIndexUri(this.providerService,c);d!==void 0&&(typeof((a=u.branch)==null?void 0:a.name)=="string"?Be.all(d,u.branch.name,{authentication:this.providerService.getAuthentication(c)}).catch(void 0):typeof u.ref=="string"&&N(u.ref)&&Be.single(d,u.ref,void 0,{authentication:this.providerService.getAuthentication(c)}).catch(void 0))}this.providerService.getMetadata(c).then(d=>{const f={},h=d.pullRequest===void 0?x.getIndexBranchName(d):void 0;h!==void 0?f.branch={name:h}:f.ref=d.HEAD.sha,me.setIndexMemento(c,f).then(void 0,void 0)},void 0)}})),r.push(this.providerService.onDidChangeRepository(i=>{const a=i.repository.uri,s=E(a);this.metadata.delete(s),this.getIndexMetadata(a).catch(void 0)})),this.disposable=l.Disposable.from(...r)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,n){const r=await this.providerService.getModeRefType(e),i=Rt.decode(e);if(i!==void 0){if(i.type===tt.Latest)return r===se.Branch?this.getIndexedTip(e,n?0:Be.timeout):void 0;if(i.type===tt.SHA){const s=_.externalIndexUri(this.providerService,e);return s===void 0?void 0:await Be.exists(s,i.sha,{authentication:this.providerService.getAuthentication(e)},n?0:Be.timeout)?i.sha:void 0}}if(this.providerService.getModeConfig(e,r).index===L.Latest)return this.getIndexedTip(e,n?0:Be.timeout)}refresh(e){for(const n of e)this.metadata.delete(n.toString())}getIndexMetadata(e){const n=this.providerService.getVirtualRootUri(e),r=E(n);let i=this.metadata.get(r);return i!==void 0||(i=this.createIndexMetadata(e),this.metadata.set(r,i)),i}async getIndexedTip(e,n=Be.timeout){const r=await x.getIndexedTip(this.providerService,e,n);return r!==void 0?r.commitId:void 0}async createIndexMetadata(e){const n=new bt(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const r=_.externalIndexUri(this.providerService,e);if(r===void 0)return;n.logStep("Getting metadata");const i=this.providerService.getMetadata(e),a=this.providerService.getModeRefType(e,i),s=await i;n.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const c=this.providerService.getAuthentication(e),u=s.pullRequest===void 0?x.getIndexBranchName(s):void 0,d=await Be.single(r,s.HEAD.sha,u,{authentication:this.providerService.getAuthentication(e)});if(s.HEAD.type===V.Branch||s.HEAD.type===V.RemoteBranch){const b=Rt.decode(e);if(b!==void 0)return n.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),d===void 0?b.type===tt.Latest?(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await Be.branch(r,u,{authentication:this.providerService.getAuthentication(e)})?{type:Y.Indexed}:{type:Y.NotIndexed}):{type:Y.NotIndexed}:b.type===tt.Latest||b.type===tt.SHA?{type:Y.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}:{type:Y.Match,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}}n.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const h=this.providerService.getModeConfig(e,await a),p=this.providerService.getVirtualUriMetadata(e);if((h.index===L.Latest||h.index===L.Match)&&d!==void 0)return{type:Y.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(h.index===L.TipPlusLatest&&p.provider.id==="github"){if(d!==void 0&&d.commitId===s.HEAD.sha)return{type:Y.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(s.HEAD.type===V.Branch&&u!==void 0){n.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const b=await Be.all(r,u,{authentication:c});if(b!==void 0&&b.length>0)return{type:Y.Active,sha:this.computeClosestIndex(e,s.HEAD.sha,b),branch:{name:u}}}}return d!==void 0?{type:Y.Indexed}:s.HEAD.type===V.Branch&&(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await Be.branch(r,u,{authentication:c}))?{type:Y.Indexed}:{type:Y.NotIndexed}}finally{n.stop()}}async computeClosestIndex(e,n,r){if(r.length===0)throw new Error("At least on snapshot should exist");const i=new Set(r.map(f=>f.commitId)),a=await this.providerService.getCommits(e,{ref:n,limit:100});if(a===void 0)return;let s;for(const f of a.commits)if(f.hash===n){s=f;break}if(s===void 0)return;const c=new Map(a.commits.map(f=>[f.hash,f])),u=[s];let d;for(;u.length>0;){for(d=u.shift();d!==void 0&&!i.has(d.hash);)if(d.parents.length>0){for(let f=1;f<d.parents.length;f++){const h=c.get(d.parents[f]);h!==void 0&&u.push(h)}d=c.get(d.parents[0])}if(d!==void 0)break}return d!==void 0?d.hash:void 0}async getSnapshots(e,n){const r=_.externalIndexUri(this.providerService,e);if(r===void 0)return[];const i=await Be.all(r,void 0,{authentication:this.providerService.getAuthentication(e)});if(i===void 0)return[];const a=[];for(const s of i)s.branchName!==void 0&&a.push({workspaceId:s.workspaceId,snapshotId:s.snapshotId,hash:s.commitId,branch:{name:s.branchName}});return a}async getStatusBarContributions(e){const n=await this.providerService.getMetadata(e),[r,i]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,n)]),a=this.providerService.getModeConfig(e,i);if(r===void 0)return[];const{HEAD:s}=n,c=[];if(r!==void 0){let u;const d=[`${O(s.sha)}`];if(r.type===Y.Active){const f=await r.sha;a.index===L.Latest||a.index===L.Match?(u=a.display===U.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",d.push(l.l10n.t(`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):a.index===L.TipPlusLatest&&(u="$(layers-dot)",f!==n.HEAD.sha?d.push(l.l10n.t("The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):d.push(l.l10n.t("The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else r.type===Y.Match?(u="$(layers)",d.push(l.l10n.t(`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):r.type===Y.Indexed&&(u="$(layers)",d.push(l.l10n.t(`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));u&&c.push(nr({command:"remoteHub.indexMode.select",title:u,tooltip:d.join(`
`),arguments:[{uri:e}]}))}return c}}o(kt,"RichNavIndexProvider");var nn;(function(t){let e;function n(){return e=l.window.createStatusBarItem(l.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,l.window.onDidChangeActiveTextEditor(()=>{u()}),l.commands.registerCommand("remoteHub.indexMode.select",f=>{d(f).catch(h=>K.log("Selecting index mode failed.",h))})]}o(n,"create"),t.create=n;const r=new Map;function i(f){r.set(f.key(),f)}o(i,"addService"),t.addService=i;function a(f){r.delete(f.key())}o(a,"removeService"),t.removeService=a;function s(f){return r.get(E(f))}o(s,"getService");async function c(f){for(const h of r.values())if(await h.handles(f))return h}o(c,"getServiceForDocument");async function u(){try{let f=o(function(ne){const A=ne.lastIndexOf("/");return A<=0?ne:ne.substr(A+1)},"basename");const h=l.window.activeTextEditor;if(h===void 0){e.hide();return}const p=await c(h.document);if(p===void 0){e.hide();return}const b=await p.isDocumentIndexed(h.document);b===Oe.Indexed?(e.text="$(compass)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",f(h.document.uri.path))),e.show()):b===Oe.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",f(h.document.uri.path))),e.show()):e.hide()}catch(f){e.hide()}}o(u,"updateStatusBarItem"),t.updateStatusBarItem=u;async function d(f){var h;const p=f.uri,b=s(p);if(b===void 0)return;const[ne,A,Z,pe]=await Promise.all([b.getBranchName(),b.getMetadata(),b.getIndexMetadata(),b.getModeRefType(p)]);if(Z===void 0||!Y.hasIndex(Z.type))return;let X,_e=!1;const xe=Rt.decode(p);(xe==null?void 0:xe.type)===tt.Latest||(xe==null?void 0:xe.type)===tt.SHA?(_e=!0,X={display:U.Browse,index:xe.type===tt.Latest?L.Latest:L.Match}):X=(h=b.getCurrentIndexMode())!=null?h:b.getModeConfig(p,pe);const Ue=b.getUriMetadata(),Qe=l.l10n.t("{0} current","$(check)"),Mt={indexKind:"disable",label:l.l10n.t("Disable"),description:X.index===L.None?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Disable rich navigation.")};let gt,Qt;if(pe===se.PullRequestBranch||pe===se.PullRequestRemoteBranch||pe===se.Commit||pe===se.Tag){const gn={indexKind:"match",label:l.l10n.t("Current indexed commit - readonly"),description:X.index===L.Match&&X.display===U.Browse?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be read-only.")},rn={indexKind:"match+writeable",label:l.l10n.t("Current indexed commit - writable"),description:X.index===L.Match&&X.display===U.Edit?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be writable.")};let Kt=Ue.provider.id==="github";Kt&&(Kt=A.HEAD.type===V.RemoteBranch?A.HEAD.branch.remote.accessLevel>=le.Write:!0);const un=Kt?[gn,rn,Mt]:[gn,Mt];Qt=await l.window.showQuickPick(un,{placeHolder:"Pick a rich navigation mode"})}else if(pe===se.Branch||pe===se.RemoteBranch){const gn={indexKind:"latest",label:l.l10n.t("Latest indexed commit"),description:X.index===L.Latest?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation on the latest indexed commit. Files will be read-only.")},rn={indexKind:"tip+latest",label:l.l10n.t("Current commit & latest index"),description:X.index===L.TipPlusLatest?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation on the current commit using the latest index. Files will be writeable.")},Kt=Ue.provider.id==="github"?[gn,rn,Mt]:[gn,Mt];Qt=await l.window.showQuickPick(Kt,{placeHolder:l.l10n.t("Pick a rich navigation mode for branch {0}",ne)})}if(Qt!==void 0&&(Qt.indexKind==="disable"?gt={display:U.Edit,index:L.None}:Qt.indexKind==="match"?gt={display:U.Browse,index:L.Match}:Qt.indexKind==="match+writeable"?gt={display:U.Edit,index:L.Match}:Qt.indexKind==="tip+latest"?gt={display:U.Edit,index:L.TipPlusLatest}:Qt.indexKind==="latest"&&(gt={display:U.Browse,index:L.Latest}),gt!==void 0&&!re.equals(X,gt))){if(await b.hasChanges()&&gt.display===U.Browse){await l.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0});return}if(await b.updateIndexMode(gt),_e){const gn=await b.getNonIndexedWorkspaceDescriptor();gn!==void 0&&wn(b.getProviderService(),gn)}}}o(d,"toggleIndexMode")})(nn||(nn={}));class jn{constructor(e){this.telemetryService=e}static createStatus(){return nn.create()}async createNavigationService(e,n){const r=await e.getIndexMetadata(n.uri);if(!(r===void 0||r.type===Y.NotIndexed))return()=>new Yn(e,n,this.telemetryService)}}o(jn,"RichNavServiceProvider");var ln;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function n(i){const a=e.exec(i);if(a===null||a.length!==5)return;const s={v:1,w:a[1],s:a[2],a:a[3]};return l.Uri.from({scheme:Zn.scheme,authority:P(JSON.stringify(s)),path:a[4]})}o(n,"toVSCode"),t.toVSCode=n;function r(i){if(i.scheme!==Zn.scheme)return;let a;try{return a=JSON.parse(y(i.authority)),a===void 0?void 0:{workspaceId:a.w,snapshotId:a.s,assetId:`${a.a}${i.path}`}}catch{return}}o(r,"toRichNavComponents"),t.toRichNavComponents=r})(ln||(ln={}));const Pn=o(class{constructor(){this._onDidChangeFile=new l.EventEmitter,this.cache=new kn(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return Pn.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return{type:l.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:l.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw l.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return e.content}writeFile(t,e,n){throw l.FileSystemError.NoPermissions()}delete(t,e){throw l.FileSystemError.NoPermissions()}rename(t,e,n){throw l.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==Pn.scheme)return;const n=ln.toRichNavComponents(t);if(n===void 0)return;const r=await st.getDesignTimeFileContent(n.workspaceId,n.snapshotId,n.assetId);if(r!==void 0)return e={content:this.textEncoder.encode(r),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let Zn=Pn;Zn.scheme="vsck-fs",Zn.emptyDisposable={dispose:()=>{}};var Oe;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(Oe||(Oe={}));const Bn=o(class{static registerCapability(t,e,n){var r;const i=this.disabledCapabilities.get(t);if(i==null?void 0:i[e])return!1;const a=this.localCapabilities.get(t);return(a==null?void 0:a[e])?!1:(r=n[e])!=null?r:!1}constructor(t,e,n){this.providerService=t,this.repository=e,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const r=o((a=!1)=>{const s=this.repository.uri;a||(this.metadata=this.providerService.getMetadata(s),this.indexMetadata=this.providerService.getIndexMetadata(s)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(s,this.metadata)]).then(async c=>{var u,d;const[f,h,p]=this.currentlyResolved,[b,ne,A]=c,Z=this.providerService.getModeConfig(s,A);if(f!==void 0&&h!==void 0&&p!==void 0&&f.HEAD.sha===b.HEAD.sha&&ne!==void 0&&h.type===ne.type&&p.index===Z.index&&p.display===Z.display){const X=(h==null?void 0:h.type)===Y.Active?await h.sha:void 0,_e=(ne==null?void 0:ne.type)===Y.Active?await ne.sha:void 0;if(X===_e)return}const pe={newDisplayMode:Z.display,newIndexMode:Z.index,newIndexType:(ne==null?void 0:ne.type)===void 0?"undefined":Y[ne==null?void 0:ne.type],currentDisplayMode:(u=p==null?void 0:p.display)!=null?u:"undefined",currentIndexMode:(d=p==null?void 0:p.index)!=null?d:"undefined",currentIndexType:(h==null?void 0:h.type)===void 0?"undefined":Y[h==null?void 0:h.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",pe),this.currentlyResolved=[b,ne,Z];for(const X of this.registeredFeatures.values())X.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,We.isActive(ne)){const X=_.externalIndexUri(this.providerService,b),_e=await ne.sha;if(X!==void 0&&_e!==void 0){const xe=await Be.single(X,_e,x.getIndexBranchName(b),{authentication:this.providerService.getAuthentication(s)});xe!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:xe.snapshotId}),this.workspaceSnapshot=xe,this.documentListeners=this.installDocumentListeners(),((Z==null?void 0:Z.display)===U.Edit||b.HEAD.sha!==_e)&&(this.mapper=new cn(this.providerService,s,_e,b.HEAD.sha)))}}await nn.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new kn(2048),this.knownDesignTimeFiles=new Set;const i=[];i.push(this.providerService.onDidChangeRepository(a=>{E(a.repository.uri)===E(this.repository.uri)&&r()})),i.push(this.providerService.onDidRefresh(a=>{for(const s of a)if(E(s)===E(this.repository.uri)){r();break}})),this.environmentListeners=l.Disposable.from(...i),r(!0),nn.addService(this),this.indexMetadata.then(async a=>{var s;const c=this.repository.uri;let u=!1;const d=Rt.decode(this.repository.uri);if(d!==void 0&&a!==void 0&&(d.type===tt.Latest&&a.type!==Y.Active||d.type===tt.SHA&&(a.type!==Y.Active||await a.sha!==d.sha))&&(u=!0),!u){await this.metadata;const f=await this.providerService.getModeRefType(c,this.metadata),h=(s=this.currentlyResolved[2])!=null?s:this.providerService.getModeConfig(c,f,!0);h!==void 0&&h.display===U.Browse&&a!==void 0&&h.index!==L.None&&a.type!==Y.Active?u=!0:(a==null?void 0:a.type)===Y.Active&&await a.sha===void 0&&((h==null?void 0:h.display)===U.Browse,u=!0)}u&&l.window.showWarningMessage(l.l10n.t("The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),Bn.fileSystemProvider===void 0&&(Bn.fileSystemProvider=new Zn,l.workspace.registerFileSystemProvider(Zn.scheme,Bn.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],n=t!==void 0;if(t===void 0){const r=this.repository.uri,i=await this.providerService.getModeRefType(r,this.metadata);t=this.providerService.getModeConfig(r,i),await new Promise(a=>setTimeout(a,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===L.Latest){await Promise.all([this.metadata,this.indexMetadata]);const r=await this.getIndexedTip();if(r===void 0)return;await this.sync(r.hash)}else t.index===L.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());n&&await me.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return E(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),nn.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==Xn.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return x.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getProviderService(){return this.providerService}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:n}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:n}),location:Je.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===Y.NotIndexed||this.workspaceSnapshot===void 0)return 0;const n=this.pendingCapabilitiesRequests.get(t.uri.toString());return n!==void 0&&await n,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=_.externalIndexUri(this.providerService,t),n=x.getIndexBranchName(t);if(e===void 0||n===void 0)return;const r=await Be.getIndexedTip(e,n,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(r===void 0)return;const i=await oe.get(this.providerService,this.repository.uri,r.commitId);if(i!==void 0)return{...i,branchName:n}}hasChanges(){return this.providerService.getChangeStore(this.repository.uri).hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,n=_.externalIndexUri(this.providerService,e);if(n===void 0)return;const[r,i]=await Promise.all([oe.get(this.providerService,this.repository.uri,t),Be.single(n,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(r===void 0||i===void 0))return{...r,branchName:i.branchName}}installDocumentListeners(){const t=[],e=o(async n=>{const r=n.uri.scheme;if(Xn.scheme!==r&&Zn.scheme!==r)return;const i=n.uri.toString();if(r===Xn.scheme&&!i.startsWith(this.repositoryRoot)||r===Zn.scheme&&!this.knownDesignTimeFiles.has(i)||this.pendingCapabilitiesRequests.has(i))return;const a=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(a===void 0)return;let s=this.capabilitiesCache.get(i);if(s!==null){if(s===void 0){const c=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(i,c),s=await c,this.pendingCapabilitiesRequests.delete(i),this.capabilitiesCache.set(i,s===void 0?null:s)}s===void 0||!l.workspace.textDocuments.some(c=>c===n)||this.registerProviders(n,s,a)}},"openHandler");return t.push(l.workspace.onDidOpenTextDocument(e)),l.workspace.textDocuments.forEach(e),t.push(l.workspace.onDidCloseTextDocument(n=>{const r=n.uri.toString(),i=this.registeredFeatures.get(r);i!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),i.dispose()),this.pendingCapabilitiesRequests.delete(r)})),l.Disposable.from(...t)}registerProviders(t,e,n){if(this.workspaceSnapshot===void 0)return;const r=this.workspaceSnapshot,i=t.languageId,s=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],c=[],u=new Promise((A,Z)=>{const pe=`/${r.snapshotId}/source/`;this.metadata.then(X=>{A(g(_e=>{const xe=l.Uri.parse(_e);if(X===void 0)return xe;try{if(xe.scheme==="vsck"&&xe.authority===r.workspaceId&&xe.path.startsWith(pe))return this.repository.createRelativeUri(xe.path.substr(pe.length));const Ue=ln.toVSCode(_e);return Ue!==void 0?(this.knownDesignTimeFiles.add(Ue.toString()),Ue):xe}catch(Ue){return xe}}))},Z)}),d=new RegExp(`^vsck:\\/\\/${r.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function f(A){const Z=d.exec(A);return Z===null||Z.length===2}o(f,"designTimeFilter");function h(A){if(A==null)return A;if(Array.isArray(A)){if(A.length===0)return[];const Z=A[0];return typeof Z.uri=="string"?A.filter(_e=>f(_e.uri)):typeof Z.targetUri=="string"?A.filter(_e=>f(_e.targetUri)):[]}return d.exec(A.uri)===null?A:void 0}o(h,"filterDesignTimeFiles");async function p(A,Z,pe){var X,_e,xe;if(pe==null||A===void 0)return pe;const Ue=new Map(l.workspace.textDocuments.map(Mt=>[Mt.uri.toString(!0),Mt]));if(Array.isArray(pe)){const Mt=[],gt=[];if(pe.length===0)return[];for(const Qt of pe){const gn=Qt;if(gn.uri instanceof l.Uri){const rn=await A.mapRangeFromIndexToCode((X=Ue.get(gn.uri.toString()))!=null?X:gn.uri,gn.range);rn!==void 0&&Mt.push(new l.Location(gn.uri,rn))}else{const rn=Qt,Kt=(_e=Ue.get(rn.targetUri.toString()))!=null?_e:rn.targetUri,un=rn.originSelectionRange?await A.mapRangeFromIndexToCode(Z,rn.originSelectionRange):void 0;if(un!==void 0||rn.originSelectionRange===void 0){const Mr=await A.mapRangeFromIndexToCode(Kt,rn.targetRange);if(Mr!==void 0){const Ri=rn.targetSelectionRange?await A.mapRangeFromIndexToCode(Kt,rn.targetSelectionRange):void 0;(Ri!==void 0||rn.targetSelectionRange===void 0)&&gt.push({targetUri:rn.targetUri,targetRange:Mr,targetSelectionRange:Ri,originSelectionRange:un})}}}}return Mt.length>0?Mt:gt}const Qe=await A.mapRangeFromIndexToCode((xe=Ue.get(pe.uri.toString()))!=null?xe:pe.uri,pe.range);if(Qe!==void 0)return new l.Location(pe.uri,Qe)}o(p,"mapLocations");const b=o(A=>({authentication:this.providerService.getAuthentication(A.uri),correlationId:bn()}),"getRestApiOptions"),ne=o((A,Z)=>{const pe={method:A,correlationId:Z.correlationId};this.telemetryService.publicLog2("codex.restAPICall",pe)},"sendTelemetry");Bn.registerCapability(i,"hoverProvider",e)&&c.push(l.languages.registerHoverProvider(s,{provideHover:async(A,Z)=>{const pe=await this.createTextDocumentPositionParams(A,Z);if(pe===void 0)return;const X=b(A);return ne("codex.provideHover",X),(await u).asHover(await st.provideHover(n,pe,X))}})),Bn.registerCapability(i,"definitionProvider",e)&&c.push(l.languages.registerDefinitionProvider(s,{provideDefinition:async(A,Z)=>{const pe=await this.createTextDocumentPositionParams(A,Z);if(pe===void 0)return;const X=b(A);return ne("codex.provideDefinition",X),p(this.mapper,A,(await u).asDefinitionResult(h(await st.provideDefinition(n,pe,X))))}})),Bn.registerCapability(i,"declarationProvider",e)&&c.push(l.languages.registerDeclarationProvider(s,{provideDeclaration:async(A,Z)=>{const pe=await this.createTextDocumentPositionParams(A,Z);if(pe===void 0)return;const X=b(A);return ne("codex.provideDeclaration",X),p(this.mapper,A,(await u).asDeclarationResult(h(await st.provideDeclaration(n,pe,X))))}})),Bn.registerCapability(i,"typeDefinitionProvider",e)&&c.push(l.languages.registerTypeDefinitionProvider(s,{provideTypeDefinition:async(A,Z)=>{const pe=await this.createTextDocumentPositionParams(A,Z);if(pe===void 0)return;const X=b(A);return ne("codex.provideTypeDefinition",X),p(this.mapper,A,(await u).asDefinitionResult(h(await st.provideTypeDefinition(n,pe,X))))}})),Bn.registerCapability(i,"referencesProvider",e)&&c.push(l.languages.registerReferenceProvider(s,{provideReferences:async(A,Z,pe)=>{const X=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(A,Z):Z;if(X===void 0)return;const _e={position:{line:X.line,character:X.character},textDocument:{uri:this.createRichNavDocumentUri(A.uri).toString(!0)},context:{includeDeclaration:pe.includeDeclaration}},xe=b(A);return ne("codex.provideReferences",xe),p(this.mapper,A,(await u).asReferences(h(await st.provideReferences(n,_e,xe))))}})),Bn.registerCapability(i,"foldingRangeProvider",e)&&c.push(l.languages.registerFoldingRangeProvider(s,{provideFoldingRanges:async A=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(A))return;const Z=b(A);return ne("codex.provideFoldingRanges",Z),(await u).asFoldingRanges(await st.providerFoldingRanges(n,this.createTextDocumentParams(A.uri),Z))}})),Bn.registerCapability(i,"workspaceSymbolProvider",e)&&c.push(l.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:async A=>{const Z=b(t),pe=await st.provideWorkspaceSymbols(n,A,Z);if(pe!==void 0)return(await u).asSymbolInformations(pe)}})),this.registeredFeatures.set(t.uri.toString(),l.Disposable.from(...c)),nn.updateStatusBarItem()}async capabilities(t){var e;const n=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(n!==void 0)return(e=await st.capabilities(n,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)}))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const n=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(n!==void 0)return{position:{line:n.line,character:n.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===Zn.scheme){const r=ln.toRichNavComponents(t);return r===void 0?t:l.Uri.file(r.assetId)}const e=this.repository.uri.toString(!0),n=t.toString(!0);return l.Uri.file(n.substr(e.length))}},"_RichNavService");let Yn=Bn;Yn.localCapabilities=new Map([["javascript",Object.assign(ft.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(ft.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(ft.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(ft.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),Yn.disabledCapabilities=new Map([["javascript",Object.assign(ft.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(ft.create(),{declarationProvider:!0})],["typescript",Object.assign(ft.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(ft.create(),{declarationProvider:!0})]]);var Er=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),pr=o((t,e,n)=>(Er(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),Xi=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),uo=o((t,e,n,r)=>(Er(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"__privateSet"),Di;class da{constructor(e){Xi(this,Di,void 0),uo(this,Di,e)}async provideEditSessionIdentity(e,n){await kr(pr(this,Di),e.uri);const r=pr(this,Di).getRepository(e.uri);if(!r||n.isCancellationRequested)return null;const{uri:i,ref:a}=await pr(this,Di).getRepositoryContext(r),s=await pr(this,Di).getMetadata(r.uri);return JSON.stringify({remote:i!=null?i:s.cloneUrl.http,ref:a,sha:s.HEAD.sha})}provideEditSessionIdentityMatch(e,n){try{const r=fo(e),i=fo(n);return r.remote===i.remote&&r.ref===i.ref&&r.sha===i.sha?l.EditSessionIdentityMatch.Complete:r.remote===i.remote&&r.ref===i.ref&&r.sha!==i.sha?l.EditSessionIdentityMatch.Partial:l.EditSessionIdentityMatch.None}catch(r){return l.EditSessionIdentityMatch.Partial}}}o(da,"EditSessionIdentityProvider"),Di=new WeakMap;function fo(t){let{remote:e,ref:n,sha:r}=JSON.parse(t);return typeof e=="string"&&e.endsWith(".git")&&(e=e.slice(0,e.length-4)),{remote:e,ref:n,sha:r}}o(fo,"normalizeEditSessionIdentity");var ho=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"extensionApi_accessCheck"),Xr=o((t,e,n)=>(ho(t,e,"read from private field"),n?n.call(t):e.get(t)),"extensionApi_privateGet"),Fa=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"extensionApi_privateAdd"),Na=o((t,e,n,r)=>(ho(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"extensionApi_privateSet"),Jr;class ya{constructor(e){Fa(this,Jr,void 0),Na(this,Jr,e),this.registerApiCommands()}registerApiCommands(){l.commands.registerCommand("remoteHub.api.getRepositoryContext",async e=>{if(!e)throw new Error("Please specify a repository uri.");await kr(Xr(this,Jr),e);const n=Xr(this,Jr).getRepository(e);if(!n)throw new Error(`Unable to acquire repository context for ${e.toString(!0)}.`);return Xr(this,Jr).getRepositoryContext(n)})}async getMetadata(e){const n=Xr(this,Jr).getVirtualUriMetadata(e);if(n===void 0)return;const{provider:r,repo:i}=n;return{provider:{id:r.id,name:r.name},repo:i,getRevision:async()=>{const{HEAD:a}=await Xr(this,Jr).getMetadata(e);return{type:a.type,name:a.name,revision:a.sha}}}}getProvider(e){return Xr(this,Jr).getRegisteredProvider(e)}getProviderUri(e){return k.getProviderUri(e)}getProviderRootUri(e){return Xr(this,Jr).getProviderRootUri(e)}isProviderUri(e,n){return e.scheme!==Xn.scheme&&Xr(this,Jr).hasProvider(e,n)}getVirtualUri(e){return k.getVirtualUri(e)}getVirtualWorkspaceUri(e){return Xr(this,Jr).getVirtualWorkspaceUri(e)}async loadWorkspaceContents(e){if(e.scheme!==k.scheme)return!1;await kr(Xr(this,Jr),e);const n=Xr(this,Jr).getProviderRootUri(e);if(n.scheme!=="github")return!1;const r=new bt(`RemoteHub.loadWorkspaceContents(${n.toString()})`,{log:!1,logLevel:Ze.Debug}),i=await Xr(this,Jr).loadWorkspaceContents(n);return r.stop(),i}}o(ya,"ExtensionApi"),Jr=new WeakMap;var Oa=Object.defineProperty,go=Object.getOwnPropertyDescriptor,fa=o((t,e,n,r)=>{for(var i=r>1?void 0:r?go(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Oa(e,n,i),i},"fs_decorateClass");const wa=l.FileSystemError.FileNotFound().code;class aa{constructor(e){this.providerService=e,this._onDidChangeFile=new l.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.syncedRootUris=new Set,this.disposable=l.Disposable.from(l.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),l.workspace.registerFileSearchProvider(this.scheme,this),l.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),e.onDidChangeChangeStore(n=>{const r=n.map(i=>{switch(i.type){case D.Created:return{type:l.FileChangeType.Created,uri:i.uri};case D.Changed:return{type:l.FileChangeType.Changed,uri:i.uri};case D.Deleted:return{type:l.FileChangeType.Deleted,uri:i.uri}}});setTimeout(()=>this._onDidChangeFile.fire(r),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return Xn.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(n=>n.scheme===this.scheme),e.length!==0&&(K.log(`fs.onRefreshOrRepositoryChanged(${e.map(n=>n.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const n=k.getOpenUris(this.scheme,e);for(const[i,a]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(s=>te(a,s))&&(this.implicitlyWatchedUris.delete(i),n.set(i,a));K.debug(`fs.updateOpenOrWatchedUris(${e.map(i=>i.toString()).join(", ")}): uris=${n.size}`);for(const i of e)n.set(E(i),i);const r=[...n.values()].map(i=>({type:l.FileChangeType.Changed,uri:i}));setTimeout(()=>{K.debug(`fs.updateOpenOrWatchedUris: Firing events=${r.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(r)},0)}watch(e,n){const r=E(e);this.watchedUris.set(r,e);const i=kr(this.providerService,e).then(()=>this.providerService.watch(k.getProviderUri(e),n));return{dispose:async()=>{this.watchedUris.delete(r),(await i).dispose()}}}async stat(e){const n=new bt(`fs.stat(${e.toString()})`);await kr(this.providerService,e);const r=this.providerService.getVirtualRootUri(e),i=r.toString();this.syncedRootUris.has(i)||(this.syncedRootUris.add(i),await this.providerService.fetchOrSync(r));let a;try{if(this.providerService.changeStoreMaybeHasChanges(r,e)!==!1){if(n.logStep("ChangeStore query"),a=await this.providerService.changeStoreStat(e),a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(E(e),e);return a=await this.providerService.stat(k.getProviderUri(e)),a}finally{a===void 0&&this.implicitlyWatchedUris.delete(E(e)),n.stop()}}async readDirectory(e){const n=new bt(`fs.readDirectory(${e.toString()})`);await kr(this.providerService,e),this.implicitlyWatchedUris.set(E(e),e);try{n.logStep("Provider query");let r=await this.providerService.readDirectory(k.getProviderUri(e));return this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(n.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),r=await this.providerService.changeStoreUpdateDirectoryEntries(e,r)),r}finally{n.stop()}}async createDirectory(e){const n=new bt(`fs.createDirectory(${e.toString()})`);await kr(this.providerService,e);try{await this.providerService.changeStoreCreateDirectory(e)}catch(r){throw K.error(r,n.context),r}finally{n.stop()}}async readFile(e){const n=new bt(`fs.readFile(${e.toString()})`),r=E(e);let i;await kr(this.providerService,e);try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){n.logStep("ChangeStore query");const a=await this.providerService.changeStoreReadFile(e);if(a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(r,e);return i=await this.providerService.readFile(k.getProviderUri(e)),i}catch(a){throw a instanceof tn&&Dn.showProviderNotFoundMessage(a),a}finally{i===void 0&&this.implicitlyWatchedUris.delete(r),n.stop()}}async writeFile(e,n,r){const i=new bt(`fs.writeFile(${e.toString()})`,{},n.length,r);await kr(this.providerService,e);try{let a;try{if(a=await this.stat(e),!r.overwrite)throw l.FileSystemError.FileExists()}catch(s){if(s instanceof l.FileSystemError&&s.code===wa){if(!r.create)throw l.FileSystemError.FileNotFound(e)}else throw s}try{if(a===void 0)await this.providerService.changeStoreCreateFile(e,n);else{i.logStep("Provider original query");let s;try{s=await this.providerService.readFile(k.getProviderUri(e))}catch(c){if(c instanceof l.FileSystemError&&c.code===wa)s=new Uint8Array;else throw c}i.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.providerService.changeStoreWriteFile(e,n,s)}}catch(s){throw K.error(s,i.context),s}}catch(a){throw a instanceof tn&&Dn.showProviderNotFoundMessage(a),a}finally{i.stop()}}async delete(e,n){const r=new bt(`fs.delete(${e.toString()})`,{},n);await kr(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:await this.providerService.changeStoreDeleteFile(e);break;case l.FileType.Directory:{await this.deleteDirectory(e,n);break}default:throw l.FileSystemError.NoPermissions()}}catch(i){throw K.error(i,r.context),i}finally{r.stop()}}async deleteDirectory(e,n){const r=new bt(`fs.deleteDirectory(${e.toString()})`,{},n);try{const i=await this.readDirectory(e);if(i.length!==0){if(!n.recursive&&i.some(([,a])=>a===l.FileType.Directory))throw l.FileSystemError.NoPermissions();for(const[a,s]of i)s===l.FileType.Directory?await this.deleteDirectory(l.Uri.joinPath(e,a),n):await this.providerService.changeStoreDeleteFile(l.Uri.joinPath(e,a))}await this.providerService.changeStoreDeleteDirectory(e)}catch(i){throw K.error(i,r.context),i}finally{r.stop()}}async rename(e,n,r){const i=new bt(`fs.rename(${e.toString()} -> ${n.toString()})`,{},r);await kr(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite}),await this.delete(e,{recursive:!1});break}case l.FileType.Directory:{await this.renameDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw K.error(a,i.context),a}finally{i.stop()}}async renameDirectory(e,n,r){const i=new bt(`fs.renameDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{await this.copyDirectory(e,n,r),await this.delete(e,{recursive:!0})}catch(a){throw K.error(a,i.context),a}finally{i.stop()}}async copy(e,n,r){const i=new bt(`fs.copy(${e.toString()} -> ${n.toString()})`,{},r);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite});break}case l.FileType.Directory:{await this.copyDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw K.error(a,i.context),a}finally{i.stop()}}async copyDirectory(e,n,r){const i=new bt(`fs.copyDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{if(await this.exists(n))throw l.FileSystemError.FileExists();try{await this.createDirectory(n);const a=await this.readDirectory(e);for(const[s,c]of a)c===l.FileType.Directory?await this.copyDirectory(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r):await this.copy(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r)}catch(a){throw K.error(a,i.context),a}}finally{i.stop()}}async exists(e){try{return await this.stat(e),!0}catch(n){if(n instanceof l.FileSystemError&&n.code===wa)return!1;throw n}}async provideFileSearchResults(e,n,r){var i;const a=new bt(`fs.provideFileSearchResults(${e.pattern}, ${n.folder.toString()})`,{logLevel:Ze.Debug});await kr(this.providerService,n.folder);let s;try{return s=await this.providerService.provideFileSearchResults(e,{...n,folder:k.getProviderUri(n.folder)},r),s==null?void 0:s.map(c=>k.getVirtualUri(c))}catch(c){throw K.error(c,a.context),c}finally{a.stop({suffix:` \u2022 ${(i=s==null?void 0:s.length)!=null?i:0} results found`})}}async provideTextSearchResults(e,n,r,i){return await kr(this.providerService,n.folder),this.providerService.provideTextSearchResults(e,{...n,folder:k.getProviderUri(n.folder)},{report:a=>r.report({...a,uri:k.getVirtualUri(a.uri)})},i)}}o(aa,"ChangeTrackingFileSystem"),fa([Gt()],aa.prototype,"stat",1),fa([Gt()],aa.prototype,"readDirectory",1),fa([Gt()],aa.prototype,"readFile",1);const vo=o(class{constructor(t){this.providerService=t,this.lock=new fn("PendingRepositoryOpenActions"),this.disposable=l.Disposable.from(t.onDidChangeRepositories(e=>e.added.length&&this.onRepositoriesOpened(e.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const n=await this.getAndDelete(e);(n==null?void 0:n.applyChangeset)&&await this.applyPendingChangeset(e,n.applyChangeset),(n==null?void 0:n.filesToOpen)&&this.openPendingFiles(e.uri,n.filesToOpen),await this.fetchOrSync(e).then(async()=>{const r=me.getEffective("uncommittedChangesOnEntry");if(r==="none"||!await this.providerService.changeStoreHasChanges(e.uri)||(await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e.uri))).length===0&&r==="promptIfBehind")return;const{state:s}=await this.providerService.getMetadata(e.uri);if(s===void 0||s.behind<1)return;const c=await this.providerService.changeStoreGetChanges(e.uri),u=c.length===1?l.l10n.t("You have {0} file with uncommitted changes from a previous edit session.",c.length.toString()):l.l10n.t("You have {0} files with uncommitted changes from a previous edit session.",c.length.toString());let d="";s.behind===1?d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commit behind.`,s.behind.toString()):s.behind>1&&(d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commits behind.`,s.behind.toString()));const f=[u,d].join(`

`),h={title:l.l10n.t("Sync")},p={title:l.l10n.t("Continue Without Syncing"),isCloseAffordance:!0},b={title:l.l10n.t("Don't Show Again")},ne=await l.window.showInformationMessage(f,{modal:!0},h,p,b);switch(ne==null?void 0:ne.title){case h.title:await l.commands.executeCommand("remoteHub.sync");break;case b.title:await me.updateEffective("uncommittedChangesOnEntry","none");break;default:break}})}}async fetchOrSync(t){await this.providerService.fetchOrSync(t.uri)}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){K.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t.uri);if(n!==void 0)return await this.storeCore(t.uri,void 0),n},"PendingRepositoryOpenActions.getAndDelete")}catch(e){K.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){K.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let n of e){const r=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(n);let i,a;(r==null?void 0:r.groups)!==void 0&&(i=Number(r.groups.start),isNaN(i)&&(i=void 0),a=Number(r.groups.end),isNaN(a)&&(a=void 0),n=n.substring(0,r.index));const s=l.Uri.joinPath(t,n);let c;try{c=await l.workspace.fs.stat(s)}catch{}if((c==null?void 0:c.type)===l.FileType.Directory)l.commands.executeCommand("revealInExplorer",s);else{let u;i!==void 0&&(u={selection:new l.Range(Number(i)-1,0,a!=null?a:i,0)}),l.commands.executeCommand("vscode.open",s,u)}}}}setChangesetToApply(t,e){return K.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return K.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){K.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.providerService.changeStoreApplyChangeset(t.uri,e,{save:!0})}catch(n){K.error(n,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.providerService.getFromStorage(t,this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.providerService.deleteFromStorage(t,this.getStorageKey(t)):this.providerService.storeInStorage(t,this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${E(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&T(r)?l.Uri.from(r):r);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return K.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:vo.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let po=vo;po.storageSchemaVersion=1;function Fi(){}o(Fi,"Diff"),Fi.prototype={diff:o(function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.callback;typeof r=="function"&&(i=r,r={}),this.options=r;var a=this;function s(A){return i?(setTimeout(function(){i(void 0,A)},0),!0):A}o(s,"done"),e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var c=n.length,u=e.length,d=1,f=c+u,h=[{newPos:-1,components:[]}],p=this.extractCommon(h[0],n,e,0);if(h[0].newPos+1>=c&&p+1>=u)return s([{value:this.join(n),count:n.length}]);function b(){for(var A=-1*d;A<=d;A+=2){var Z=void 0,pe=h[A-1],X=h[A+1],_e=(X?X.newPos:0)-A;pe&&(h[A-1]=void 0);var xe=pe&&pe.newPos+1<c,Ue=X&&0<=_e&&_e<u;if(!xe&&!Ue){h[A]=void 0;continue}if(!xe||Ue&&pe.newPos<X.newPos?(Z=Me(X),a.pushComponent(Z.components,void 0,!0)):(Z=pe,Z.newPos++,a.pushComponent(Z.components,!0,void 0)),_e=a.extractCommon(Z,n,e,A),Z.newPos+1>=c&&_e+1>=u)return s(mo(a,Z.components,n,e,a.useLongestToken));h[A]=Z}d++}if(o(b,"execEditLength"),i)o(function A(){setTimeout(function(){if(d>f)return i();b()||A()},0)},"exec")();else for(;d<=f;){var ne=b();if(ne)return ne}},"diff"),pushComponent:o(function(e,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={count:i.count+1,added:n,removed:r}:e.push({count:1,added:n,removed:r})},"pushComponent"),extractCommon:o(function(e,n,r,i){for(var a=n.length,s=r.length,c=e.newPos,u=c-i,d=0;c+1<a&&u+1<s&&this.equals(n[c+1],r[u+1]);)c++,u++,d++;return d&&e.components.push({count:d}),e.newPos=c,u},"extractCommon"),equals:o(function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:o(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:o(function(e){return e},"castInput"),tokenize:o(function(e){return e.split("")},"tokenize"),join:o(function(e){return e.join("")},"join")};function mo(t,e,n,r,i){for(var a=0,s=e.length,c=0,u=0;a<s;a++){var d=e[a];if(d.removed){if(d.value=t.join(r.slice(u,u+d.count)),u+=d.count,a&&e[a-1].added){var h=e[a-1];e[a-1]=e[a],e[a]=h}}else{if(!d.added&&i){var f=n.slice(c,c+d.count);f=f.map(function(b,ne){var A=r[u+ne];return A.length>b.length?A:b}),d.value=t.join(f)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var p=e[s-1];return s>1&&typeof p.value=="string"&&(p.added||p.removed)&&t.equals("",p.value)&&(e[s-2].value+=p.value,e.pop()),e}o(mo,"buildValues");function Me(t){return{newPos:t.newPos,components:t.components.slice(0)}}o(Me,"clonePath");var _t=new Fi;function Pt(t,e,n){return _t.diff(t,e,n)}o(Pt,"diffChars");function Xt(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}o(Xt,"generateOptions");var Tn=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Un=/\S/,Fn=new Fi;Fn.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!Un.test(t)&&!Un.test(e)},Fn.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&Tn.test(e[n])&&Tn.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function Br(t,e,n){return n=Xt(n,{ignoreWhitespace:!0}),Fn.diff(t,e,n)}o(Br,"diffWords");function hi(t,e,n){return Fn.diff(t,e,n)}o(hi,"diffWordsWithSpace");var Tr=new Fi;Tr.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function Hr(t,e,n){return Tr.diff(t,e,n)}o(Hr,"diffLines");function gi(t,e,n){var r=Xt(n,{ignoreWhitespace:!0});return Tr.diff(t,e,r)}o(gi,"diffTrimmedLines");var Pr=new Fi;Pr.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function Sa(t,e,n){return Pr.diff(t,e,n)}o(Sa,"diffSentences");var rs=new Fi;rs.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Bc(t,e,n){return rs.diff(t,e,n)}o(Bc,"diffCss");function yo(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yo=o(function(e){return typeof e},"_typeof"):yo=o(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),yo(t)}o(yo,"_typeof");function Zi(t){return hl(t)||gl(t)||vl(t)||pl()}o(Zi,"_toConsumableArray");function hl(t){if(Array.isArray(t))return xo(t)}o(hl,"_arrayWithoutHoles");function gl(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}o(gl,"_iterableToArray");function vl(t,e){if(!!t){if(typeof t=="string")return xo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xo(t,e)}}o(vl,"_unsupportedIterableToArray");function xo(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}o(xo,"_arrayLikeToArray");function pl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o(pl,"_nonIterableSpread");var ml=Object.prototype.toString,Ca=new Fi;Ca.useLongestToken=!0,Ca.tokenize=Tr.tokenize,Ca.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(a,s){return typeof s=="undefined"?n:s}:r;return typeof t=="string"?t:JSON.stringify(ko(t,null,null,i),i,"  ")},Ca.equals=function(t,e){return Fi.prototype.equals.call(Ca,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Hc(t,e,n){return Ca.diff(t,e,n)}o(Hc,"diffJson");function ko(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return n[a];var s;if(ml.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),n.push(s),a=0;a<t.length;a+=1)s[a]=ko(t[a],e,n,r,i);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),yo(t)==="object"&&t!==null){e.push(t),s={},n.push(s);var c=[],u;for(u in t)t.hasOwnProperty(u)&&c.push(u);for(c.sort(),a=0;a<c.length;a+=1)u=c[a],s[u]=ko(t[u],e,n,r,u);e.pop(),n.pop()}else s=t;return s}o(ko,"canonicalize");var wo=new Fi;wo.tokenize=function(t){return t.slice()},wo.join=wo.removeEmpty=function(t){return t};function Uc(t,e,n){return wo.diff(t,e,n)}o(Uc,"diffArrays");function Ba(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.split(/\r\n|[\n\v\f\r\x85]/),r=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],a=0;function s(){var d={};for(i.push(d);a<n.length;){var f=n[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(f))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(f);h&&(d.index=h[1]),a++}for(c(d),c(d),d.hunks=[];a<n.length;){var p=n[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))d.hunks.push(u());else{if(p&&e.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(p));a++}}}o(s,"parseIndex");function c(d){var f=/^(---|\+\+\+)\s+(.*)$/.exec(n[a]);if(f){var h=f[1]==="---"?"old":"new",p=f[2].split("	",2),b=p[0].replace(/\\\\/g,"\\");/^".*"$/.test(b)&&(b=b.substr(1,b.length-2)),d[h+"FileName"]=b,d[h+"Header"]=(p[1]||"").trim(),a++}}o(c,"parseFileHeader");function u(){var d=a,f=n[a++],h=f.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+h[1],oldLines:typeof h[2]=="undefined"?1:+h[2],newStart:+h[3],newLines:typeof h[4]=="undefined"?1:+h[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var b=0,ne=0;a<n.length&&!(n[a].indexOf("--- ")===0&&a+2<n.length&&n[a+1].indexOf("+++ ")===0&&n[a+2].indexOf("@@")===0);a++){var A=n[a].length==0&&a!=n.length-1?" ":n[a][0];if(A==="+"||A==="-"||A===" "||A==="\\")p.lines.push(n[a]),p.linedelimiters.push(r[a]||`
`),A==="+"?b++:A==="-"?ne++:A===" "&&(b++,ne++);else break}if(!b&&p.newLines===1&&(p.newLines=0),!ne&&p.oldLines===1&&(p.oldLines=0),e.strict){if(b!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(d+1));if(ne!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(d+1))}return p}for(o(u,"parseHunk");a<n.length;)s();return i}o(Ba,"parsePatch");function yl(t,e,n){var r=!0,i=!1,a=!1,s=1;return o(function c(){if(r&&!a){if(i?s++:r=!1,t+s<=n)return s;a=!0}if(!i)return a||(r=!0),e<=t-s?-s++:(i=!0,c())},"iterator")}o(yl,"distanceIterator");function is(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=Ba(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var r=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=e.hunks,s=n.compareLine||function(Ri,Ti,oa,Ni){return Ti===Ni},c=0,u=n.fuzzFactor||0,d=0,f=0,h,p;function b(Ri,Ti){for(var oa=0;oa<Ri.lines.length;oa++){var Ni=Ri.lines[oa],Ea=Ni.length>0?Ni[0]:" ",Io=Ni.length>0?Ni.substr(1):Ni;if(Ea===" "||Ea==="-"){if(!s(Ti+1,r[Ti],Ea,Io)&&(c++,c>u))return!1;Ti++}}return!0}o(b,"hunkFits");for(var ne=0;ne<a.length;ne++){for(var A=a[ne],Z=r.length-A.oldLines,pe=0,X=f+A.oldStart-1,_e=yl(X,d,Z);pe!==void 0;pe=_e())if(b(A,X+pe)){A.offset=f+=pe;break}if(pe===void 0)return!1;d=A.offset+A.oldStart+A.oldLines}for(var xe=0,Ue=0;Ue<a.length;Ue++){var Qe=a[Ue],Mt=Qe.oldStart+Qe.offset+xe-1;xe+=Qe.newLines-Qe.oldLines;for(var gt=0;gt<Qe.lines.length;gt++){var Qt=Qe.lines[gt],gn=Qt.length>0?Qt[0]:" ",rn=Qt.length>0?Qt.substr(1):Qt,Kt=Qe.linedelimiters[gt];if(gn===" ")Mt++;else if(gn==="-")r.splice(Mt,1),i.splice(Mt,1);else if(gn==="+")r.splice(Mt,0,rn),i.splice(Mt,0,Kt),Mt++;else if(gn==="\\"){var un=Qe.lines[gt-1]?Qe.lines[gt-1][0]:null;un==="+"?h=!0:un==="-"&&(p=!0)}}}if(h)for(;!r[r.length-1];)r.pop(),i.pop();else p&&(r.push(""),i.push(`
`));for(var Mr=0;Mr<r.length-1;Mr++)r[Mr]=r[Mr]+i[Mr];return r.join("")}o(is,"applyPatch");function Wc(t,e){typeof t=="string"&&(t=Ba(t));var n=0;function r(){var i=t[n++];if(!i)return e.complete();e.loadFile(i,function(a,s){if(a)return e.complete(a);var c=is(s,i,e);e.patched(i,c,function(u){if(u)return e.complete(u);r()})})}o(r,"processIndex"),r()}o(Wc,"applyPatches");function as(t,e,n,r,i,a,s){s||(s={}),typeof s.context=="undefined"&&(s.context=4);var c=Hr(n,r,s);c.push({value:"",lines:[]});function u(pe){return pe.map(function(X){return" "+X})}o(u,"contextLines");for(var d=[],f=0,h=0,p=[],b=1,ne=1,A=o(function(X){var _e=c[X],xe=_e.lines||_e.value.replace(/\n$/,"").split(`
`);if(_e.lines=xe,_e.added||_e.removed){var Ue;if(!f){var Qe=c[X-1];f=b,h=ne,Qe&&(p=s.context>0?u(Qe.lines.slice(-s.context)):[],f-=p.length,h-=p.length)}(Ue=p).push.apply(Ue,Zi(xe.map(function(Mr){return(_e.added?"+":"-")+Mr}))),_e.added?ne+=xe.length:b+=xe.length}else{if(f)if(xe.length<=s.context*2&&X<c.length-2){var Mt;(Mt=p).push.apply(Mt,Zi(u(xe)))}else{var gt,Qt=Math.min(xe.length,s.context);(gt=p).push.apply(gt,Zi(u(xe.slice(0,Qt))));var gn={oldStart:f,oldLines:b-f+Qt,newStart:h,newLines:ne-h+Qt,lines:p};if(X>=c.length-2&&xe.length<=s.context){var rn=/\n$/.test(n),Kt=/\n$/.test(r),un=xe.length==0&&p.length>gn.oldLines;!rn&&un&&n.length>0&&p.splice(gn.oldLines,0,"\\ No newline at end of file"),(!rn&&!un||!Kt)&&p.push("\\ No newline at end of file")}d.push(gn),f=0,h=0,p=[]}b+=xe.length,ne+=xe.length}},"_loop"),Z=0;Z<c.length;Z++)A(Z);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:a,hunks:d}}o(as,"structuredPatch");function wl(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}o(wl,"formatPatch");function Sl(t,e,n,r,i,a,s){return wl(as(t,e,n,r,i,a,s))}o(Sl,"createTwoFilesPatch");function Cl(t,e,n,r,i,a){return Sl(t,t,e,n,r,i,a)}o(Cl,"createPatch");function bl(t,e){return t.length!==e.length?!1:Fo(t,e)}o(bl,"arrayEqual");function Fo(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}o(Fo,"arrayStartsWith");function _l(t){var e=Oo(t.lines),n=e.oldLines,r=e.newLines;n!==void 0?t.oldLines=n:delete t.oldLines,r!==void 0?t.newLines=r:delete t.newLines}o(_l,"calcLineCount");function $c(t,e,n){t=os(t,n),e=os(e,n);var r={};(t.index||e.index)&&(r.index=t.index||e.index),(t.newFileName||e.newFileName)&&(ss(t)?ss(e)?(r.oldFileName=So(r,t.oldFileName,e.oldFileName),r.newFileName=So(r,t.newFileName,e.newFileName),r.oldHeader=So(r,t.oldHeader,e.oldHeader),r.newHeader=So(r,t.newHeader,e.newHeader)):(r.oldFileName=t.oldFileName,r.newFileName=t.newFileName,r.oldHeader=t.oldHeader,r.newHeader=t.newHeader):(r.oldFileName=e.oldFileName||t.oldFileName,r.newFileName=e.newFileName||t.newFileName,r.oldHeader=e.oldHeader||t.oldHeader,r.newHeader=e.newHeader||t.newHeader)),r.hunks=[];for(var i=0,a=0,s=0,c=0;i<t.hunks.length||a<e.hunks.length;){var u=t.hunks[i]||{oldStart:1/0},d=e.hunks[a]||{oldStart:1/0};if(ls(u,d))r.hunks.push(cs(u,s)),i++,c+=u.newLines-u.oldLines;else if(ls(d,u))r.hunks.push(cs(d,c)),a++,s+=d.newLines-d.oldLines;else{var f={oldStart:Math.min(u.oldStart,d.oldStart),oldLines:0,newStart:Math.min(u.newStart+s,d.oldStart+c),newLines:0,lines:[]};El(f,u.oldStart,u.lines,d.oldStart,d.lines),a++,i++,r.hunks.push(f)}}return r}o($c,"merge");function os(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return Ba(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return as(void 0,void 0,e,t)}return t}o(os,"loadPatch");function ss(t){return t.newFileName&&t.newFileName!==t.oldFileName}o(ss,"fileNameChanged");function So(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}o(So,"selectField");function ls(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}o(ls,"hunkBefore");function cs(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}o(cs,"cloneHunk");function El(t,e,n,r,i){var a={offset:e,lines:n,index:0},s={offset:r,lines:i,index:0};for(ds(t,a,s),ds(t,s,a);a.index<a.lines.length&&s.index<s.lines.length;){var c=a.lines[a.index],u=s.lines[s.index];if((c[0]==="-"||c[0]==="+")&&(u[0]==="-"||u[0]==="+"))Al(t,a,s);else if(c[0]==="+"&&u[0]===" "){var d;(d=t.lines).push.apply(d,Zi(ha(a)))}else if(u[0]==="+"&&c[0]===" "){var f;(f=t.lines).push.apply(f,Zi(ha(s)))}else c[0]==="-"&&u[0]===" "?us(t,a,s):u[0]==="-"&&c[0]===" "?us(t,s,a,!0):c===u?(t.lines.push(c),a.index++,s.index++):No(t,ha(a),ha(s))}fs(t,a),fs(t,s),_l(t)}o(El,"mergeLines");function Al(t,e,n){var r=ha(e),i=ha(n);if(hs(r)&&hs(i)){if(Fo(r,i)&&gs(n,r,r.length-i.length)){var a;(a=t.lines).push.apply(a,Zi(r));return}else if(Fo(i,r)&&gs(e,i,i.length-r.length)){var s;(s=t.lines).push.apply(s,Zi(i));return}}else if(bl(r,i)){var c;(c=t.lines).push.apply(c,Zi(r));return}No(t,r,i)}o(Al,"mutualChange");function us(t,e,n,r){var i=ha(e),a=Dl(n,i);if(a.merged){var s;(s=t.lines).push.apply(s,Zi(a.merged))}else No(t,r?a:i,r?i:a)}o(us,"removal");function No(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}o(No,"conflict");function ds(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r),e.offset++}}o(ds,"insertLeading");function fs(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}o(fs,"insertTrailing");function ha(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var r=t.lines[t.index];if(n==="-"&&r[0]==="+"&&(n="+"),n===r[0])e.push(r),t.index++;else break}return e}o(ha,"collectChange");function Dl(t,e){for(var n=[],r=[],i=0,a=!1,s=!1;i<e.length&&t.index<t.lines.length;){var c=t.lines[t.index],u=e[i];if(u[0]==="+")break;if(a=a||c[0]!==" ",r.push(u),i++,c[0]==="+")for(s=!0;c[0]==="+";)n.push(c),c=t.lines[++t.index];u.substr(1)===c.substr(1)?(n.push(c),t.index++):s=!0}if((e[i]||"")[0]==="+"&&a&&(s=!0),s)return n;for(;i<e.length;)r.push(e[i++]);return{merged:r,changes:n}}o(Dl,"collectContext");function hs(t){return t.reduce(function(e,n){return e&&n[0]==="-"},!0)}o(hs,"allRemoves");function gs(t,e,n){for(var r=0;r<n;r++){var i=e[e.length-n+r].substr(1);if(t.lines[t.index+r]!==" "+i)return!1}return t.index+=n,!0}o(gs,"skipRemoveSuperset");function Oo(t){var e=0,n=0;return t.forEach(function(r){if(typeof r!="string"){var i=Oo(r.mine),a=Oo(r.theirs);e!==void 0&&(i.oldLines===a.oldLines?e+=i.oldLines:e=void 0),n!==void 0&&(i.newLines===a.newLines?n+=i.newLines:n=void 0)}else n!==void 0&&(r[0]==="+"||r[0]===" ")&&n++,e!==void 0&&(r[0]==="-"||r[0]===" ")&&e++}),{oldLines:e,newLines:n}}o(Oo,"calcOldNewLineCount");function Kc(t){for(var e=[],n,r,i=0;i<t.length;i++)n=t[i],n.added?r=1:n.removed?r=-1:r=0,e.push([r,n.value]);return e}o(Kc,"convertChangesToDMP");function Gc(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(Rl(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")}o(Gc,"convertChangesToXML");function Rl(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}o(Rl,"escapeHTML");var vs=/[^a-zA-Z0-9]/,ps=/\s/,ms=/[\r\n]/,Tl=/\n\r?\n$/,Ml=/^\r?\n\r?\n/,ht;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(ht||(ht={}));function Il(t,e){return t<e?t:e}o(Il,"min");function Pl(t,e){return t>e?t:e}o(Pl,"max");var oi=ot,Ha=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return o(t,"PatchObject"),t.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+e+" +"+n+` @@
`],i,a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case ht.DIFF_INSERT:i="+";break;case ht.DIFF_DELETE:i="-";break;case ht.DIFF_EQUAL:i=" ";break}r[a+1]=i+encodeURI(this.diffs[a][1])+`
`}return r.join("").replace(/%20/g," ")},t}(),Ll=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return o(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,n,r,i){typeof i=="undefined"&&(this.diffTimeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.diffTimeout*1e3);var a=i;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e===n)return e?[[ht.DIFF_EQUAL,e]]:[];typeof r=="undefined"&&(r=!0);var s=r,c=this.diff_commonPrefix(e,n),u=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var d=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var f=this.diff_compute_(e,n,s,a);return u&&f.unshift([ht.DIFF_EQUAL,u]),d&&f.push([ht.DIFF_EQUAL,d]),this.diff_cleanupMerge(f),f},t.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var r=0,i=oi.min(e.length,n.length),a=i,s=0;r<a;)e.substring(s,a)===n.substring(s,a)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;for(var r=0,i=oi.min(e.length,n.length),a=i,s=0;r<a;)e.substring(e.length-a,e.length-s)===n.substring(n.length-a,n.length-s)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_cleanupSemantic=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=0,u=0,d=0,f=0;s<e.length;)e[s][0]===ht.DIFF_EQUAL?(r[i++]=s,c=d,u=f,d=0,f=0,a=e[s][1]):(e[s][0]===ht.DIFF_INSERT?d+=e[s][1].length:f+=e[s][1].length,a&&a.length<=oi.max(c,u)&&a.length<=oi.max(d,f)&&(e.splice(r[i-1],0,[ht.DIFF_DELETE,a]),e[r[i-1]+1][0]=ht.DIFF_INSERT,i--,i--,s=i>0?r[i-1]:-1,c=0,u=0,d=0,f=0,a=null,n=!0)),s++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]===ht.DIFF_DELETE&&e[s][0]===ht.DIFF_INSERT){var h=e[s-1][1],p=e[s][1],b=this.diff_commonOverlap_(h,p),ne=this.diff_commonOverlap_(p,h);b>=ne?(b>=h.length/2||b>=p.length/2)&&(e.splice(s,0,[ht.DIFF_EQUAL,p.substring(0,b)]),e[s-1][1]=h.substring(0,h.length-b),e[s+1][1]=p.substring(b),s++):(ne>=h.length/2||ne>=p.length/2)&&(e.splice(s,0,[ht.DIFF_EQUAL,h.substring(0,ne)]),e[s-1][0]=ht.DIFF_INSERT,e[s-1][1]=p.substring(0,p.length-ne),e[s+1][0]=ht.DIFF_DELETE,e[s+1][1]=h.substring(ne),s++),s++}s++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var n=1;n<e.length-1;){if(e[n-1][0]===ht.DIFF_EQUAL&&e[n+1][0]===ht.DIFF_EQUAL){var r=e[n-1][1],i=e[n][1],a=e[n+1][1],s=this.diff_commonSuffix(r,i);if(s){var c=i.substring(i.length-s);r=r.substring(0,r.length-s),i=c+i.substring(0,i.length-s),a=c+a}for(var u=r,d=i,f=a,h=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);i.charAt(0)===a.charAt(0);){r+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var p=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);p>=h&&(h=p,u=r,d=i,f=a)}e[n-1][1]!==u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=d,f?e[n+1][1]=f:(e.splice(n+1,1),n--))}n++}},t.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=!1,u=!1,d=!1,f=!1;s<e.length;)e[s][0]===ht.DIFF_EQUAL?(e[s][1].length<this.diffEditCost&&(d||f)?(r[i++]=s,c=d,u=f,a=e[s][1]):(i=0,a=null),d=f=!1):(e[s][0]===ht.DIFF_DELETE?f=!0:d=!0,a&&(c&&u&&d&&f||a.length<this.diffEditCost/2&&Number(c)+Number(u)+Number(d)+Number(f)===3)&&(e.splice(r[i-1],0,[ht.DIFF_DELETE,a]),e[r[i-1]+1][0]=ht.DIFF_INSERT,i--,a=null,c&&u?(d=f=!0,i=0):(i--,s=i>0?r[i-1]:-1,d=f=!1),n=!0)),s++;n&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([ht.DIFF_EQUAL,""]);for(var n=0,r=0,i=0,a="",s="",c;n<e.length;)switch(e[n][0]){case ht.DIFF_INSERT:i++,s+=e[n][1],n++;break;case ht.DIFF_DELETE:r++,a+=e[n][1],n++;break;case ht.DIFF_EQUAL:r+i>1?(r!==0&&i!==0&&(c=this.diff_commonPrefix(s,a),c!==0&&(n-r-i>0&&e[n-r-i-1][0]===ht.DIFF_EQUAL?e[n-r-i-1][1]+=s.substring(0,c):(e.splice(0,0,[ht.DIFF_EQUAL,s.substring(0,c)]),n++),s=s.substring(c),a=a.substring(c)),c=this.diff_commonSuffix(s,a),c!==0&&(e[n][1]=s.substring(s.length-c)+e[n][1],s=s.substring(0,s.length-c),a=a.substring(0,a.length-c))),n-=r+i,e.splice(n,r+i),a.length&&(e.splice(n,0,[ht.DIFF_DELETE,a]),n++),s.length&&(e.splice(n,0,[ht.DIFF_INSERT,s]),n++),n++):n!==0&&e[n-1][0]===ht.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,a="",s="";break}e[e.length-1][1]===""&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]===ht.DIFF_EQUAL&&e[n+1][0]===ht.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,n){var r=0,i=0,a=0,s=0,c;for(c=0;c<e.length&&(e[c][0]!==ht.DIFF_INSERT&&(r+=e[c][1].length),e[c][0]!==ht.DIFF_DELETE&&(i+=e[c][1].length),!(r>n));c++)a=r,s=i;return e.length!==c&&e[c][0]===ht.DIFF_DELETE?s:s+(n-a)},t.prototype.diff_prettyHtml=function(e){for(var n=[],r=/&/g,i=/</g,a=/>/g,s=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],f=d.replace(r,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(s,"&para;<br>");switch(u){case ht.DIFF_INSERT:n[c]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case ht.DIFF_DELETE:n[c]='<del style="background:#ffe6e6;">'+f+"</del>";break;case ht.DIFF_EQUAL:n[c]="<span>"+f+"</span>";break}}return n.join("")},t.prototype.diff_text1=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==ht.DIFF_INSERT&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==ht.DIFF_DELETE&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_levenshtein=function(e){for(var n=0,r=0,i=0,a=0;a<e.length;a++){var s=e[a][0],c=e[a][1];switch(s){case ht.DIFF_INSERT:r+=c.length;break;case ht.DIFF_DELETE:i+=c.length;break;case ht.DIFF_EQUAL:n+=oi.max(r,i),r=0,i=0;break}}return n+=oi.max(r,i),n},t.prototype.diff_toDelta=function(e){for(var n=[],r=0;r<e.length;r++)switch(e[r][0]){case ht.DIFF_INSERT:n[r]="+"+encodeURI(e[r][1]);break;case ht.DIFF_DELETE:n[r]="-"+e[r][1].length;break;case ht.DIFF_EQUAL:n[r]="="+e[r][1].length;break}return n.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,n){for(var r=[],i=0,a=0,s=n.split(/\t/g),c=0;c<s.length;c++){var u=s[c].substring(1);switch(s[c].charAt(0)){case"+":try{r[i++]=[ht.DIFF_INSERT,decodeURI(u)]}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var f=e.substring(a,a+=d);s[c].charAt(0)==="="?r[i++]=[ht.DIFF_EQUAL,f]:r[i++]=[ht.DIFF_DELETE,f];break;default:if(s[c])throw new Error("Invalid diff operation in diff_fromDelta: "+s[c])}}if(a!==e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+")");return r},t.prototype.diff_linesToChars=function(e,n){var r=[],i={};r[0]="";var a=this.diff_linesToCharsMunge_(e,r,i,4e4),s=this.diff_linesToCharsMunge_(n,r,i,65535);return{chars1:a,chars2:s,lineArray:r}},t.prototype.diff_charsToLines=function(e,n){for(var r=0;r<e.length;r++){for(var i=e[r][1],a=[],s=0;s<i.length;s++)a[s]=n[i.charCodeAt(s)];e[r][1]=a.join("")}},t.prototype.match_main=function(e,n,r){if(e==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=oi.max(0,oi.min(r,e.length)),e===n?0:e.length?e.substring(r,r+n.length)===n?r:this.match_bitap_(e,n,r):-1},t.prototype.patch_make=function(e,n,r){var i,a;if(typeof e=="string"&&typeof n=="string"&&typeof r=="undefined")i=e,a=this.diff_main(i,n,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof n=="undefined"&&typeof r=="undefined")a=e,i=this.diff_text1(a);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof r=="undefined")i=e,a=n;else if(typeof e=="string"&&typeof n=="string"&&r&&typeof r=="object")i=e,a=r;else throw new Error("Unknown call format to patch_make");if(a.length===0)return[];for(var s=[],c=new Ha,u=0,d=0,f=0,h=i,p=i,b=0;b<a.length;b++){var ne=a[b][0],A=a[b][1];switch(!u&&ne!==ht.DIFF_EQUAL&&(c.start1=d,c.start2=f),ne){case ht.DIFF_INSERT:c.diffs[u++]=a[b],c.length2+=A.length,p=p.substring(0,f)+A+p.substring(f);break;case ht.DIFF_DELETE:c.length1+=A.length,c.diffs[u++]=a[b],p=p.substring(0,f)+p.substring(f+A.length);break;case ht.DIFF_EQUAL:A.length<=2*this.patchMargin&&u&&a.length!==b+1?(c.diffs[u++]=a[b],c.length1+=A.length,c.length2+=A.length):A.length>=2*this.patchMargin&&u&&(this.patch_addContext_(c,h),s.push(c),c=new Ha,u=0,h=p,d=f);break}ne!==ht.DIFF_INSERT&&(d+=A.length),ne!==ht.DIFF_DELETE&&(f+=A.length)}return u&&(this.patch_addContext_(c,h),s.push(c)),s},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){for(var i=e[r],a=new Ha,s=0;s<i.diffs.length;s++)a.diffs[s]=[i.diffs[s][0],i.diffs[s][1]];a.start1=i.start1,a.start2=i.start2,a.length1=i.length1,a.length2=i.length2,n[r]=a}return n},t.prototype.patch_apply=function(e,n){if(e.length===0)return[n,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);n=r+n+r,this.patch_splitMax(e);for(var i=0,a=[],s=0;s<e.length;s++){var c=e[s].start2+i,u=this.diff_text1(e[s].diffs),d=void 0,f=-1;if(u.length>this.matchMaxBits?(d=this.match_main(n,u.substring(0,this.matchMaxBits),c),d!==-1&&(f=this.match_main(n,u.substring(u.length-this.matchMaxBits),c+u.length-this.matchMaxBits),(f===-1||d>=f)&&(d=-1))):d=this.match_main(n,u,c),d===-1)a[s]=!1,i-=e[s].length2-e[s].length1;else{a[s]=!0,i=d-c;var h=void 0;if(f===-1?h=n.substring(d,d+u.length):h=n.substring(d,f+this.matchMaxBits),u===h)n=n.substring(0,d)+this.diff_text2(e[s].diffs)+n.substring(d+u.length);else{var p=this.diff_main(u,h,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(p)/u.length>this.patchDeleteThreshold)a[s]=!1;else{this.diff_cleanupSemanticLossless(p);for(var b=0,ne=0,A=0;A<e[s].diffs.length;A++){var Z=e[s].diffs[A];Z[0]!==ht.DIFF_EQUAL&&(ne=this.diff_xIndex(p,b)),Z[0]===ht.DIFF_INSERT?n=n.substring(0,d+ne)+Z[1]+n.substring(d+ne):Z[0]===ht.DIFF_DELETE&&(n=n.substring(0,d+ne)+n.substring(d+this.diff_xIndex(p,b+Z[1].length))),Z[0]!==ht.DIFF_DELETE&&(b+=Z[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,a]},t.prototype.patch_addPadding=function(e){for(var n=this.patchMargin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var a=e[0],s=a.diffs;if(s.length===0||s[0][0]!==ht.DIFF_EQUAL)s.unshift([ht.DIFF_EQUAL,r]),a.start1-=n,a.start2-=n,a.length1+=n,a.length2+=n;else if(n>s[0][1].length){var c=n-s[0][1].length;s[0][1]=r.substring(s[0][1].length)+s[0][1],a.start1-=c,a.start2-=c,a.length1+=c,a.length2+=c}if(a=e[e.length-1],s=a.diffs,s.length===0||s[s.length-1][0]!==ht.DIFF_EQUAL)s.push([ht.DIFF_EQUAL,r]),a.length1+=n,a.length2+=n;else if(n>s[s.length-1][1].length){var c=n-s[s.length-1][1].length;s[s.length-1][1]+=r.substring(0,c),a.length1+=c,a.length2+=c}return r},t.prototype.patch_splitMax=function(e){for(var n=this.matchMaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var i=e[r];e.splice(r--,1);for(var a=i.start1,s=i.start2,c="";i.diffs.length!==0;){var u=new Ha,d=!0;for(u.start1=a-c.length,u.start2=s-c.length,c!==""&&(u.length1=u.length2=c.length,u.diffs.push([ht.DIFF_EQUAL,c]));i.diffs.length!==0&&u.length1<n-this.patchMargin;){var f=i.diffs[0][0],h=i.diffs[0][1];f===ht.DIFF_INSERT?(u.length2+=h.length,s+=h.length,u.diffs.push(i.diffs.shift()),d=!1):f===ht.DIFF_DELETE&&u.diffs.length===1&&u.diffs[0][0]===ht.DIFF_EQUAL&&h.length>2*n?(u.length1+=h.length,a+=h.length,d=!1,u.diffs.push([f,h]),i.diffs.shift()):(h=h.substring(0,n-u.length1-this.patchMargin),u.length1+=h.length,a+=h.length,f===ht.DIFF_EQUAL?(u.length2+=h.length,s+=h.length):d=!1,u.diffs.push([f,h]),h===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}c=this.diff_text2(u.diffs),c=c.substring(c.length-this.patchMargin);var p=this.diff_text1(i.diffs).substring(0,this.patchMargin);p!==""&&(u.length1+=p.length,u.length2+=p.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===ht.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=p:u.diffs.push([ht.DIFF_EQUAL,p])),d||e.splice(++r,0,u)}}},t.prototype.patch_toText=function(e){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return n.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var r=e.split(`
`),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var s=r[i].match(a);if(!s)throw new Error("Invalid patch string: "+r[i]);var c=new Ha;n.push(c),c.start1=parseInt(s[1],10),s[2]===""?(c.start1--,c.length1=1):s[2]==="0"?c.length1=0:(c.start1--,c.length1=parseInt(s[2],10)),c.start2=parseInt(s[3],10),s[4]===""?(c.start2--,c.length2=1):s[4]==="0"?c.length2=0:(c.start2--,c.length2=parseInt(s[4],10)),i++;for(var u=void 0,d=void 0,f=void 0;i<r.length;){u=r[i].charAt(0),f=r[i].substring(1);try{d=decodeURI(f)}catch(h){throw new Error("Illegal escape in patch_fromText: "+f)}if(u==="-")c.diffs.push([ht.DIFF_DELETE,d]);else if(u==="+")c.diffs.push([ht.DIFF_INSERT,d]);else if(u===" ")c.diffs.push([ht.DIFF_EQUAL,d]);else{if(u==="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+d)}i++}}return n},t.prototype.diff_compute_=function(e,n,r,i){var a;if(!e)return[[ht.DIFF_INSERT,n]];if(!n)return[[ht.DIFF_DELETE,e]];var s=e.length>n.length?e:n,c=e.length>n.length?n:e,u=s.indexOf(c);if(u!==-1)return a=[[ht.DIFF_INSERT,s.substring(0,u)],[ht.DIFF_EQUAL,c],[ht.DIFF_INSERT,s.substring(u+c.length)]],e.length>n.length&&(a[0][0]=ht.DIFF_DELETE,a[2][0]=ht.DIFF_DELETE),a;if(c.length===1)return[[ht.DIFF_DELETE,e],[ht.DIFF_INSERT,n]];var d=this.diff_halfMatch_(e,n);if(d){var f=d[0],h=d[1],p=d[2],b=d[3],ne=d[4],A=this.diff_main(f,p,r,i),Z=this.diff_main(h,b,r,i);return A.concat([[ht.DIFF_EQUAL,ne]],Z)}return r&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,i):this.diff_bisect_(e,n,i)},t.prototype.diff_lineMode_=function(e,n,r){var i=this.diff_linesToChars(e,n);e=i.chars1,n=i.chars2;var a=i.lineArray,s=this.diff_main(e,n,!1,r);this.diff_charsToLines(s,a),this.diff_cleanupSemantic(s),s.push([ht.DIFF_EQUAL,""]);for(var c=0,u=0,d=0,f="",h="";c<s.length;){switch(s[c][0]){case ht.DIFF_INSERT:d++,h+=s[c][1];break;case ht.DIFF_DELETE:u++,f+=s[c][1];break;case ht.DIFF_EQUAL:if(u>=1&&d>=1){s.splice(c-u-d,u+d),c=c-u-d;for(var p=this.diff_main(f,h,!1,r),b=p.length-1;b>=0;b--)s.splice(c,0,p[b]);c=c+p.length}d=0,u=0,f="",h="";break}c++}return s.pop(),s},t.prototype.diff_bisect_=function(e,n,r){for(var i=e.length,a=n.length,s=Math.ceil((i+a)/2),c=s,u=2*s,d=new Array(u),f=new Array(u),h=0;h<u;h++)d[h]=-1,f[h]=-1;d[c+1]=0,f[c+1]=0;for(var p=i-a,b=p%2!=0,ne=0,A=0,Z=0,pe=0,X=0;X<s&&!(Date.now()>r);X++){for(var _e=-X+ne;_e<=X-A;_e+=2){var xe=c+_e,Ue=void 0;_e===-X||_e!==X&&d[xe-1]<d[xe+1]?Ue=d[xe+1]:Ue=d[xe-1]+1;for(var Qe=Ue-_e;Ue<i&&Qe<a&&e.charAt(Ue)===n.charAt(Qe);)Ue++,Qe++;if(d[xe]=Ue,Ue>i)A+=2;else if(Qe>a)ne+=2;else if(b){var Mt=c+p-_e;if(Mt>=0&&Mt<u&&f[Mt]!==-1){var gt=i-f[Mt];if(Ue>=gt)return this.diff_bisectSplit_(e,n,Ue,Qe,r)}}}for(var Qt=-X+Z;Qt<=X-pe;Qt+=2){var Mt=c+Qt,gt=void 0;Qt===-X||Qt!==X&&f[Mt-1]<f[Mt+1]?gt=f[Mt+1]:gt=f[Mt-1]+1;for(var gn=gt-Qt;gt<i&&gn<a&&e.charAt(i-gt-1)===n.charAt(a-gn-1);)gt++,gn++;if(f[Mt]=gt,gt>i)pe+=2;else if(gn>a)Z+=2;else if(!b){var xe=c+p-Qt;if(xe>=0&&xe<u&&d[xe]!==-1){var Ue=d[xe],Qe=c+Ue-xe;if(gt=i-gt,Ue>=gt)return this.diff_bisectSplit_(e,n,Ue,Qe,r)}}}}return[[ht.DIFF_DELETE,e],[ht.DIFF_INSERT,n]]},t.prototype.diff_bisectSplit_=function(e,n,r,i,a){var s=e.substring(0,r),c=n.substring(0,i),u=e.substring(r),d=n.substring(i),f=this.diff_main(s,c,!1,a),h=this.diff_main(u,d,!1,a);return f.concat(h)},t.prototype.diff_linesToCharsMunge_=function(e,n,r,i){for(var a="",s=0,c=-1,u=n.length;c<e.length-1;){c=e.indexOf(`
`,s),c===-1&&(c=e.length-1);var d=e.substring(s,c+1);(r.hasOwnProperty?r.hasOwnProperty(d):r[d]!==void 0)?a+=String.fromCharCode(r[d]):(u===i&&(d=e.substring(s),c=e.length),a+=String.fromCharCode(u),r[d]=u,n[u++]=d),s=c+1}return a},t.prototype.diff_commonOverlap_=function(e,n){var r=e.length,i=n.length;if(r===0||i===0)return 0;r>i?e=e.substring(r-i):r<i&&(n=n.substring(0,r));var a=oi.min(r,i);if(e===n)return a;for(var s=0,c=1;;){var u=e.substring(a-c),d=n.indexOf(u);if(d===-1)return s;c+=d,(d===0||e.substring(a-c)===n.substring(0,c))&&(s=c,c++)}},t.prototype.diff_halfMatch_=function(e,n){if(this.diffTimeout<=0)return null;var r=e.length>n.length?e:n,i=e.length>n.length?n:e;if(r.length<4||i.length*2<r.length)return null;var a=this.diff_halfMatchI_(r,i,Math.ceil(r.length/4)),s=this.diff_halfMatchI_(r,i,Math.ceil(r.length/2)),c;if(!a&&!s)return null;s?a?c=a[4].length>s[4].length?a:s:c=s:c=a;var u,d,f,h,p=c[4];return e.length>n.length?(u=c[0],d=c[1],f=c[2],h=c[3]):(f=c[0],h=c[1],u=c[2],d=c[3]),[u,d,f,h,p]},t.prototype.diff_halfMatchI_=function(e,n,r){for(var i=e.substring(r,r+Math.floor(e.length/4)),a="",s,c,u,d,f=n.indexOf(i,0);f!==-1;){var h=this.diff_commonPrefix(e.substring(r),n.substring(f)),p=this.diff_commonSuffix(e.substring(0,r),n.substring(0,f));a.length<p+h&&(a=n.substring(f-p,f)+n.substring(f,f+h),s=e.substring(0,r-p),c=e.substring(r+h),u=n.substring(0,f-p),d=n.substring(f+h)),f=n.indexOf(i,f+1)}return a.length*2>=e.length?[s,c,u,d,a]:null},t.prototype.diff_cleanupSemanticScore_=function(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),a=r.match(vs),s=i.match(vs),c=a&&r.match(ps),u=s&&i.match(ps),d=c&&r.match(ms),f=u&&i.match(ms),h=d&&e.match(Tl),p=f&&n.match(Ml);return h||p?5:d||f?4:a&&!c&&u?3:c||u?2:a||s?1:0},t.prototype.match_bitap_=function(e,n,r){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(n),a=this.matchThreshold,s=e.indexOf(n,r);s!==-1&&(a=oi.min(this.match_bitapScore_(0,s,n,r),a),s=e.lastIndexOf(n,r+n.length),s!==-1&&(a=oi.min(this.match_bitapScore_(0,s,n,r),a)));var c=1<<n.length-1;s=-1;for(var u,d,f=n.length+e.length,h,p=0;p<n.length;p++){for(u=0,d=f;u<d;)this.match_bitapScore_(p,r+d,n,r)<=a?u=d:f=d,d=Math.floor((f-u)/2+u);f=d;var b=oi.max(1,r-d+1),ne=oi.min(r+d,e.length)+n.length,A=Array(ne+2);A[ne+1]=(1<<p)-1;for(var Z=ne;Z>=b;Z--){var pe=i[e.charAt(Z-1)];if(p===0?A[Z]=(A[Z+1]<<1|1)&pe:A[Z]=(A[Z+1]<<1|1)&pe|((h[Z+1]|h[Z])<<1|1)|h[Z+1],A[Z]&c){var X=this.match_bitapScore_(p,Z-1,n,r);if(X<=a)if(a=X,s=Z-1,s>r)b=oi.max(1,2*r-s);else break}}if(this.match_bitapScore_(p+1,r,n,r)>a)break;h=A}return s},t.prototype.match_bitapScore_=function(e,n,r,i){var a=e/r.length,s=Math.abs(i-n);return this.matchDistance?a+s/this.matchDistance:s?1:a},t.prototype.match_alphabet_=function(e){for(var n={},r=0;r<e.length;r++)n[e.charAt(r)]=0;for(var r=0;r<e.length;r++)n[e.charAt(r)]|=1<<e.length-r-1;return n},t.prototype.patch_addContext_=function(e,n){if(n.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!==n.lastIndexOf(r)&&r.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var a=n.substring(e.start2-i,e.start2);a&&e.diffs.unshift([ht.DIFF_EQUAL,a]);var s=n.substring(e.start2+e.length1,e.start2+e.length1+i);s&&e.diffs.push([ht.DIFF_EQUAL,s]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+s.length,e.length2+=a.length+s.length}},t}();function Bo(t,e){let n={};for(let a=0;a<e.length;a++){const s=e[a];n[s]?n[s].push(a):n[s]=[a]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let a=0;a<t.length;a++){const s=t[a],c=n[s]||[];let u=0,d=i[0];for(let f=0;f<c.length;f++){const h=c[f];let p;for(p=u;p<i.length&&!(i[p].buffer2index<h&&(p===i.length-1||i[p+1].buffer2index>h));p++);if(p<i.length){const b={buffer1index:a,buffer2index:h,chain:i[p]};if(u===i.length?i.push(d):i[u]=d,u=p+1,d=b,u===i.length)break}}i[u]=d}return i[i.length-1]}o(Bo,"LCS");function xl(t,e){const n=Bo(t,e);let r=[],i=t.length,a=e.length,s={common:[]};function c(){s.common.length&&(s.common.reverse(),r.push(s),s={common:[]})}o(c,"processCommon");for(let u=n;u!==null;u=u.chain){let d={buffer1:[],buffer2:[]};for(;--i>u.buffer1index;)d.buffer1.push(t[i]);for(;--a>u.buffer2index;)d.buffer2.push(e[a]);(d.buffer1.length||d.buffer2.length)&&(c(),d.buffer1.reverse(),d.buffer2.reverse(),r.push(d)),i>=0&&s.common.push(t[i])}return c(),r.reverse(),r}o(xl,"diffComm");function ys(t,e){const n=Bo(t,e);let r=[],i=t.length,a=e.length;for(let s=n;s!==null;s=s.chain){const c=i-s.buffer1index-1,u=a-s.buffer2index-1;i=s.buffer1index,a=s.buffer2index,(c||u)&&r.push({buffer1:[i+1,c],buffer1Content:t.slice(i+1,i+1+c),buffer2:[a+1,u],buffer2Content:e.slice(a+1,a+1+u)})}return r.reverse(),r}o(ys,"diffIndices");function zc(t,e){const n=Bo(t,e);let r=[],i=t.length,a=e.length;function s(c,u,d){let f=[];for(let h=0;h<d;h++)f.push(c[u+h]);return{offset:u,length:d,chunk:f}}o(s,"chunkDescription");for(let c=n;c!==null;c=c.chain){const u=i-c.buffer1index-1,d=a-c.buffer2index-1;i=c.buffer1index,a=c.buffer2index,(u||d)&&r.push({buffer1:s(t,c.buffer1index+1,u),buffer2:s(e,c.buffer2index+1,d)})}return r.reverse(),r}o(zc,"diffPatch");function kl(t,e,n){let r=[];function i(u,d){r.push({ab:d,oStart:u.buffer1[0],oLength:u.buffer1[1],abStart:u.buffer2[0],abLength:u.buffer2[1]})}o(i,"addHunk"),ys(e,t).forEach(u=>i(u,"a")),ys(e,n).forEach(u=>i(u,"b")),r.sort((u,d)=>u.oStart-d.oStart);let a=[],s=0;function c(u){u>s&&(a.push({stable:!0,buffer:"o",bufferStart:s,bufferLength:u-s,bufferContent:e.slice(s,u)}),s=u)}for(o(c,"advanceTo");r.length;){let u=r.shift(),d=u.oStart,f=u.oStart+u.oLength,h=[u];for(c(d);r.length;){const p=r[0],b=p.oStart;if(b>f)break;f=Math.max(f,b+p.oLength),h.push(r.shift())}if(h.length===1){if(u.abLength>0){const p=u.ab==="a"?t:n;a.push({stable:!0,buffer:u.ab,bufferStart:u.abStart,bufferLength:u.abLength,bufferContent:p.slice(u.abStart,u.abStart+u.abLength)})}}else{let p={a:[t.length,-1,e.length,-1],b:[n.length,-1,e.length,-1]};for(;h.length;){u=h.shift();const X=u.oStart,_e=X+u.oLength,xe=u.abStart,Ue=xe+u.abLength;let Qe=p[u.ab];Qe[0]=Math.min(xe,Qe[0]),Qe[1]=Math.max(Ue,Qe[1]),Qe[2]=Math.min(X,Qe[2]),Qe[3]=Math.max(_e,Qe[3])}const b=p.a[0]+(d-p.a[2]),ne=p.a[1]+(f-p.a[3]),A=p.b[0]+(d-p.b[2]),Z=p.b[1]+(f-p.b[3]);let pe={stable:!1,aStart:b,aLength:ne-b,aContent:t.slice(b,ne),oStart:d,oLength:f-d,oContent:e.slice(d,f),bStart:A,bLength:Z-A,bContent:n.slice(A,Z)};a.push(pe)}s=f}return c(e.length),a}o(kl,"diff3MergeRegions");function Ho(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=typeof t=="string",s=typeof e=="string",c=typeof n=="string";a&&(t=t.split(r.stringSeparator)),s&&(e=e.split(r.stringSeparator)),c&&(n=n.split(r.stringSeparator));let u=[];const d=kl(t,e,n);let f=[];function h(){f.length&&u.push({ok:f}),f=[]}o(h,"flushOk");function p(b,ne){if(b.length!==ne.length)return!1;for(let A=0;A<b.length;A++)if(b[A]!==ne[A])return!1;return!0}return o(p,"isFalseConflict"),d.forEach(b=>{b.stable?f.push(...b.bufferContent):r.excludeFalseConflicts&&p(b.aContent,b.bContent)?f.push(...b.aContent):(h(),u.push({conflict:{a:b.aContent,aIndex:b.aStart,o:b.oContent,oIndex:b.oStart,b:b.bContent,bIndex:b.bStart}}))}),h(),u}o(Ho,"diff3Merge");function Jc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},r);const a=Ho(t,e,n,r);let s=!1,c=[];return a.forEach(u=>{u.ok?c=c.concat(u.ok):u.conflict&&(s=!0,c.push(`<<<<<<<${r.label.a?` ${r.label.a}`:""}`),c=c.concat(u.conflict.a),c.push(`|||||||${r.label.o?` ${r.label.o}`:""}`),c=c.concat(u.conflict.o),c.push("======="),c=c.concat(u.conflict.b),c.push(`>>>>>>>${r.label.b?` ${r.label.b}`:""}`))}),{conflict:s,result:c}}o(Jc,"mergeDiff3");function Fl(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=Ho(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];d.ok?c=c.concat(d.ok):(s=!0,c=c.concat([`
<<<<<<<<<
`],d.conflict.a,[`
=========
`],d.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:s,result:c}}o(Fl,"node_diff3_merge");function Vc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},r);const a=Ho(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];if(d.ok)c=c.concat(d.ok);else{const f=xl(d.conflict.a,d.conflict.b);for(let h=0;h<f.length;h++){let p=f[h];p.common?c=c.concat(p.common):(s=!0,c=c.concat([`
<<<<<<<<<
`],p.buffer1,[`
=========
`],p.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:s,result:c}}o(Vc,"mergeDigIn");function jc(t,e){let n=[],r=0;function i(a){for(;r<a;)n.push(t[r]),r++}o(i,"advanceTo");for(let a=0;a<e.length;a++){let s=e[a];i(s.buffer1.offset);for(let c=0;c<s.buffer2.chunk.length;c++)n.push(s.buffer2.chunk[c]);r+=s.buffer1.length}return i(t.length),n}o(jc,"patch");function Yc(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}o(Yc,"stripPatch");function qc(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}o(qc,"invertPatch");const Uo=new Ll;Uo.diffTimeout=0;function ws(t,e,n){return me.get("experimental.useDiffMatchPatch")===!0?Uo.patch_toText(Uo.patch_make(e,n)):Cl(t,e,n)}o(ws,"diffs_createPatch");function Ss(t,e,n,r){const i=`diff --git a/${t} b/${t}`;switch(r){case"modify":return ws(t,e,n);case"add":{let a;!n.endsWith(`
`)&&!n.endsWith(`\r
`)?a=`
\\ No newline at end of file`:a="";const s=/\r?\n/g,c=n.split(s),u=n.match(s)||[],d=c.length,f=[];for(let h=0;h<d;h+=1)(h<c.length-1||h===c.length-1&&c[h]!=="")&&f.push("+"),f.push(c[h]),h<u.length&&f.push(u[h]);return n=f.join(""),`${i}
new file mode 100644
--- /dev/null
+++ b/${t}
@@ -0,0 +1,${d} @@
${n}${a}`}case"delete":{let a=0;return e=e.replace(/\r?\n/g,s=>(a++,`${s}-`)),`${i}
deleted file mode 100644
--- a/${t}
+++ /dev/null
@@ -1,${a} +0,0 @@
-${e}`}}}o(Ss,"createPatch2");function Cs(t,e,n){return is(t,e,n)}o(Cs,"diffs_applyPatch");function Nl(t,e){const n=[];for(const r of Ba(t,e))n.push({...r,oldFileName:r.newFileName,oldHeader:r.newHeader,newFileName:r.oldFileName,newHeader:r.oldHeader,hunks:r.hunks.map(i=>({...i,oldLines:i.newLines,oldStart:i.newStart,newLines:i.oldLines,newStart:i.oldStart,lines:i.lines.map(a=>a[0]==="-"?`+${a.slice(1)}`:a[0]==="+"?`-${a.slice(1)}`:a)}))}),n.push(r);return n}o(Nl,"reversePatch");function bs(t,e,n,r){let i=`
`;const a=t.match(/(?:\r?\n)/g);if(a!==null&&a.length!==0){const d=a.filter(f=>f===`\r
`).length;i=d>a.length-d?`\r
`:`
`}const s=Fl(t,e,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),c=s.result;let u=s.conflict;for(let d=0;d<c.length;d+=1)c[d]===`
<<<<<<<<<
`?c[d]="<<<<<<< HEAD":c[d]===`
=========
`?c[d]="=======":c[d]===`
>>>>>>>>>
`&&(c[d]=`>>>>>>> ${r}`);return{conflicts:u,mergedContent:c.join(i)}}o(bs,"diffs_merge");var Ol=Object.defineProperty,Bl=Object.getOwnPropertyDescriptor,Hl=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Bl(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Ol(e,n,i),i},"changeStore_decorateClass");const Ul=l.FileSystemError.FileNotFound().code,_s=`===================================================================
`,Gi=new TextDecoder,Wl=new TextEncoder;function $l(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}o($l,"isOperation");function Co(t,e,n){return{type:t.type,rootUri:e,uri:n!=null?n:t.uri}}o(Co,"toEvent");const Ua=o(class{constructor(t,e,n,r,i,a){this.providerService=t,this.storageService=e,this.fileStorageService=n,this.telemetryService=r,this.workspaceId=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new In,this.scopedStores=new Map,a===void 0&&(this.disposable=l.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function n(r){const i=await l.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${r.toString(!0)}

${this.toStorage(await this.getWorkingOperations(r))}`});return void l.window.showTextDocument(i)}if(o(n,"exportCore"),t===void 0)for(const r of(e=l.workspace.workspaceFolders)!=null?e:[])await n.call(this,r.uri);else return n.call(this,t)}async getWorkspacesWithChanges(){var t;const e=new bt("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])r.uri.scheme===k.scheme&&await this.hasChanges(r.uri)&&n.push(r.uri);return n.length>0?n:void 0}finally{e.stop()}}async acceptAll(t,e){const n=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;K.log(n);const r=[];await this.lock.synchronizeWrite(E(t),async()=>{const i=await this.getWorkingOperations(t),a=[];let s=[];const c=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!i.some(u=>u.staged));for(const u of i){if(c&&!u.staged){s.push(u);continue}u.fileType===l.FileType.File&&await this.discardWorkingContent(t,u.uri);let d;if(u.type===D.Created&&u.fileType===l.FileType.Directory&&(i.some(f=>ee(f.uri,u.uri))||(d={type:D.Deleted,rootUri:t,uri:u.uri})),r.push(d!=null?d:Co(u,t)),u.type===D.Created){let f=u.uri;for(;;){const{parent:h}=this.findParent(f,i,p=>p.type===D.Created);if(h){a.push(h),f=h.uri;continue}break}}}s.length>0&&a.length>0&&(s=s.filter(u=>a.includes(u)?(r.push(Co(u,t)),!1):!0)),await this.saveWorkingOperations(t,s)},n),r.length!==0&&this._onDidChange.fire(r)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.discard(${t.toString()})`;K.log(n);const r=[];await this.lock.synchronizeWrite(E(e),async()=>this.discardCore(e,t,r),n),r.length!==0&&this._onDidChange.fire(r)}async discardCore(t,e,n){K.debug(`ChangeStore.discardCore(${e.toString()})`);let r=await this.getWorkingOperations(t);if(r.length===0)return;const i=$(e),a=r.findIndex(u=>$(u.uri)===i);if(a===-1)return;const[s]=r.splice(a,1);let c;switch(s.type){case D.Created:c=D.Deleted;break;case D.Deleted:c=D.Created;break;default:c=s.type;break}if(n.push({type:c,rootUri:t,uri:e}),s.type===D.Created){let u=s.uri;for(;;){const{parent:d,parentIndex:f}=this.findNewParentWithOnlyChild(u,r);if(d){r.splice(f,1),n.push({type:D.Deleted,rootUri:t,uri:d.uri}),u=d.uri;continue}break}}else if(s.type===D.Deleted){let u=s.uri;const d=this.findDeletedParents(u,r);let f=[...r];d.forEach(({parent:h,parentIndex:p})=>{f[p]=void 0,n.push({type:D.Created,rootUri:t,uri:h.uri})}),r=f.filter(h=>h!==void 0)}await this.saveWorkingOperations(t,r),s.fileType===l.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).discardAll(t,e);const r=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;K.log(r);const i=[];await this.lock.synchronizeWrite(E(t),async()=>{const a=await this.getWorkingOperations(t),s=[];let c=[];const u=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!a.some(d=>d.staged));for(const d of a){if(u&&!d.staged){c.push(d);continue}d.fileType===l.FileType.File&&await this.discardWorkingContent(t,d.uri);let f;switch(d.type){case D.Created:f=D.Deleted;break;case D.Deleted:f=D.Created;break;default:f=d.type;break}if(i.push({type:f,rootUri:t,uri:d.uri}),d.type===D.Created){let h=d.uri;for(;;){const{parent:p}=this.findNewParentWithOnlyChild(h,a);if(p){s.push(p),h=p.uri;continue}break}}}c.length>0&&s.length>0&&(c=c.filter(d=>s.includes(d)?(i.push({type:D.Deleted,rootUri:t,uri:d.uri}),!1):!0)),await this.saveWorkingOperations(t,c)},r),i.length!==0&&this._onDidChange.fire(i)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.stage(${t.toString()})`;K.log(n);const r=[];await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.stageCore(e,t,i,r,a)},n),r.length!==0&&this._onDidChange.fire(r)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;K.log(e);const n=[];await this.lock.synchronizeWrite(E(t),async()=>{const r=(await this.getWorkingOperations(t)).filter(i=>!i.staged);if(r.length!==0)for(const i of r){const{index:a}=await this.getWorkingOperation(i.uri,t);if(!await this.stageCore(t,i.uri,i,n,a))return}},e),n.length!==0&&this._onDidChange.fire(n)}async stageCore(t,e,n,r,i){if(n.conflicts){if(!n.conflicts.status.includes(D.Deleted)){const s=l.l10n.t("Yes");if(await l.window.showWarningMessage(l.l10n.t("Are you sure you want to stage {0} with merge conflicts?",j(e)),{modal:!0},s)!==s)return!1}const[,a]=n.conflicts.status;switch(a){case D.Changed:switch(n.type){case D.Created:return!1;case D.Changed:return await this.spliceOperation(e,i,{...n,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0;case D.Deleted:const s=l.l10n.t("Keep Their Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by us and modified by them.

What would you like to do?`,j(e)),{modal:!0},s,c);return u===s?(await this.discardCore(t,e,r),!0):u===c?(await this.spliceOperation(e,i,{...n,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):!1}case D.Created:switch(n.type){case D.Changed:case D.Deleted:return!1;case D.Created:return await this.spliceOperation(e,i,{...n,type:D.Changed,conflicts:void 0,size:n.size,hash:n.hash,originalHash:n.originalHash,staged:!0,timestamp:Date.now()},r),!0}case D.Deleted:switch(n.type){case D.Created:case D.Changed:{const s=l.l10n.t("Keep Our Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by them and modified by us.

What would you like to do?`,j(e)),{modal:!0},s,c);return u===s?(await this.spliceOperation(e,i,{...n,type:D.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):u===c?(await this.discardCore(t,e,r),!0):!1}case D.Deleted:return await this.discardCore(t,e,r),!0}}}return await this.spliceOperation(e,i,{...n,staged:!0,conflicts:void 0,timestamp:Date.now()},r),!0}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.unstage(${t.toString()})`;K.log(n);const r=[];await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.spliceOperation(t,a,{...i,staged:!1,timestamp:Date.now()},r)},n),r.length!==0&&this._onDidChange.fire(r)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;K.log(e);const n=[];await this.lock.synchronizeWrite(E(t),async()=>{const r=(await this.getWorkingOperations(t)).map(i=>({...i,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),n.push(...r.map(i=>Co(i,t))))},e),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const n=E(t),r=this.cache.get(n);return r!==void 0?r.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).maybeHasChanges(t,e);const r=E(t),i=this.cache.get(r);if(i===void 0)return;if(i.length===0)return!1;if(e===void 0)return!0;const a=$(e);return i.some(s=>$(s.uri)===a)}async hasMergeConflicts(t){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const n=this.providerService.getVirtualRootUri(t);if(n!==void 0)return this.lock.synchronizeRead(E(n),async()=>{const{operation:r}=await this.getWorkingOperation(t,n);return r},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getChanges(t,e):this.lock.synchronizeRead(E(t),async()=>{let r=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:i,predicate:a}=e;r=r.filter(s=>{var c;return(!i||s.conflicts===void 0)&&((c=a==null?void 0:a(s))!=null?c:!0)})}return r},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getGroupedChanges(t,e):this.lock.synchronizeRead(E(t),async()=>{var r,i;const a=await this.getWorkingOperations(t),s={conflicts:[],staged:[],working:[]};for(const c of a)!((i=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,c))!=null?i:!0)||(c.conflicts?s.conflicts.push(c):c.staged?s.staged.push(c):s.working.push(c));return s},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const n=E(e),r=this.cache.get(n);if((r==null?void 0:r.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(n,async()=>{const i=Gi.decode(await this.getWorkingContent(e,t));if(i!==void 0)return i;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.conflicts!==void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return!r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,n,r){var i;let a;$l(n)?a=n:r=r!=null?r:n,K.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,a==null?void 0:a.uri,r==null?void 0:r.save);const s=this.getScopedChangeStore(e.workspaceId),c=(i=e.patch)!=null?i:await s.createPatch(e.uri,a==null?void 0:a.uri);await this.applyPatchCore(t,c,{...r,getIncomingContent:async u=>{const d=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId);return Gi.decode(await l.workspace.fs.readFile(d))},merge:async(u,d,f)=>{try{const h=k.getProviderUri(u),p=Gi.decode(await l.workspace.fs.readFile(h)),b=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,d),e.workspaceId),ne=Gi.decode(await l.workspace.fs.readFile(b)),A=await this.providerService.getMetadata(b);return{...bs(f,p,ne,A.HEAD.sha),baseUri:h,incomingUri:b}}catch(h){throw new Error(`Unable to apply patch to ${d}: ${String(h)}`)}}})}async applyPatch(t,e,n){if(K.log(`ChangeStore.applyPatch(${t.toString()})`,n==null?void 0:n.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,n)}async applyPatchCore(t,e,n={}){const r=`ChangeStore.applyPatchCore(${t.toString()})`;K.debug(r,n==null?void 0:n.save);const i=new l.WorkspaceEdit,a=[],s=new Map;async function c(p){var b;const ne=E(p),A=l.workspace.textDocuments.find(Z=>E(Z.uri)===ne);return(b=A==null?void 0:A.getText())!=null?b:Gi.decode(await l.workspace.fs.readFile(p))}o(c,"getContent");async function u(p){try{const b=await l.workspace.fs.stat(p);return Boolean(b)}catch{return!1}}o(u,"exists");async function d(p,b,ne){let A=Cs("",ne,{fuzzFactor:0});if(A===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${b}`);A=await n.getIncomingContent(b)}i.createFile(p,{overwrite:!0}),i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),A)}o(d,"applyCreate");async function f(p,b,ne,A){const Z=await c(p);let pe=Cs(Z,ne,{fuzzFactor:1});if(pe===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${b}; Resulted in conflicts`);const X={title:l.l10n.t("Merge")},_e={title:l.l10n.t("Skip File"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,b),{modal:!0},X,_e)!==X)return;const Ue=await n.merge(p,b,Z);pe=Ue.mergedContent,Ue.conflicts&&s.set(E(p),{type:A,baseUri:Ue.baseUri,incomingUri:Ue.incomingUri})}i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),pe)}o(f,"applyModification");const h=(n==null?void 0:n.reverse)?Nl(e,{}):Ba(e,{});for(const p of h)if(p.oldFileName==="/dev/null"){if(!p.newFileName)continue;const b=p.newFileName.startsWith("b/")?p.newFileName.substr(2):p.newFileName,ne=this.providerService.createRelativeVirtualUri(t,b);a.push(E(ne)),!await u(ne)?await d(ne,b,p):await f(ne,b,p,D.Created)}else if(p.newFileName==="/dev/null"){if(!p.oldFileName)continue;const b=p.oldFileName.startsWith("a/")?p.oldFileName.substr(2):p.oldFileName,ne=this.providerService.createRelativeVirtualUri(t,b);await u(ne)&&i.deleteFile(ne)}else if(p.oldFileName===p.newFileName){if(!p.newFileName)continue;const b=this.providerService.createRelativeVirtualUri(t,p.newFileName);a.push(E(b)),!await u(b)?await d(b,p.newFileName,p):await f(b,p.newFileName,p,D.Changed)}else throw new Error(`Unable to apply patch to ${p.oldFileName}; Renames aren't currently supported`);if(await l.workspace.applyEdit(i),n.save&&a.length)for(const p of a){const b=l.workspace.textDocuments.find(ne=>E(ne.uri)===p);await(b==null?void 0:b.save())}s.size&&setTimeout(async()=>{const p=[];await this.lock.synchronizeWrite(E(t),async()=>{const b=await this.getWorkingOperations(t);if(b.length===0)return;let ne=-1;for(const A of b){ne++;const Z=s.get(E(A.uri));Z!==void 0&&await this.spliceOperation(A.uri,ne,{...A,conflicts:{baseUri:Z.baseUri,incomingUri:Z.incomingUri,status:[A.type,Z.type]},timestamp:Date.now()},p)}},r),p.length!==0&&this._onDidChange.fire(p)},0)}async createChangeset(t){K.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,n){if(K.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let a=await this.getWorkingOperations(t);if((n==null?void 0:n.staged)&&(a=a.filter(c=>c.staged)),a.length===0)return"";const s=[];for(const c of a){const u=await this.createPatchCore(t,c);s.push(u)}return s.join("")}const{operation:r}=await this.getWorkingOperation(e,t);if(r===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(n==null?void 0:n.staged)&&r.staged?"":await this.createPatchCore(t,r)}async createPatchCore(t,e){if(e.fileType!==l.FileType.File)return"";const n=this.providerService.getRelativeFilePath(t,e.uri),r=`diff --git a/${n} b/${n}`;if(e.type===D.Created){let u=await this.getContent(e.uri);return Ss(n,"",u,"add")}if(e.type===D.Deleted){let u=Gi.decode(await l.workspace.fs.readFile(k.getProviderUri(e.uri)));return Ss(n,u,"","delete")}const i=await this.getContent(e.uri),a=Gi.decode(await l.workspace.fs.readFile(k.getProviderUri(e.uri))),s=ws(n,a,i),c=s.indexOf(_s);return`${r}
${s.substr(c+_s.length)}`}async keep(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=`ChangeStore.keep(${t.toString()})`;K.log(r,e);const i=[];await this.lock.synchronizeWrite(E(n),async()=>{const{operation:a,index:s}=await this.getWorkingOperation(t,n);if(a===void 0)return;if(e===void 0&&a.conflicts){const[,u]=a.conflicts.status;switch(u){case D.Changed:switch(a.type){case D.Changed:case D.Created:case D.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break;case D.Created:switch(a.type){case D.Changed:case D.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break;case D.Created:await this.spliceOperation(t,s,{...a,type:D.Changed,size:a.size,hash:a.hash,originalHash:a.originalHash,conflicts:void 0,timestamp:Date.now()},i);break}break;case D.Deleted:switch(a.type){case D.Deleted:await this.discardCore(n,t,i);break;case D.Changed:await this.spliceOperation(t,s,{...a,type:D.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);break;case D.Created:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break}return}if(e===void 0)return;switch(e.type){case D.Changed:switch(a.type){case D.Deleted:await this.spliceOperation(t,s,{...a,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case D.Created:break;case D.Changed:break}break;case D.Created:switch(a.type){case D.Changed:case D.Deleted:return;case D.Created:break}break;case D.Deleted:switch(a.type){case D.Deleted:return this.discardCore(n,t,i);case D.Changed:await this.spliceOperation(t,s,{...a,type:D.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case D.Created:return}}const c=e!==void 0?await l.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,s,{...a,type:D.Changed,originalHash:c!==void 0?await An(c):a.originalHash,conflicts:void 0,timestamp:Date.now()},i)},r),i.length!==0&&this._onDidChange.fire(i)}async merge(t,e,n){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const i=`ChangeStore.merge(${t.toString()})`;K.log(i,e,n);const a=[];await this.lock.synchronizeWrite(E(r),async()=>{const{operation:s,index:c}=await this.getWorkingOperation(t,r);if(s===void 0)return;switch(e.type){case D.Changed:switch(s.type){case D.Deleted:await this.spliceOperation(t,c,{...s,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case D.Created:break;case D.Changed:break}break;case D.Created:switch(s.type){case D.Deleted:case D.Changed:return;case D.Created:const b=await l.workspace.fs.readFile(e.providerUri);await this.spliceOperation(t,c,{...s,originalHash:b!==void 0?await An(b):s.originalHash,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},type:D.Changed,timestamp:Date.now()},a);break}break;case D.Deleted:switch(s.type){case D.Deleted:return this.discardCore(r,t,a);case D.Changed:await this.spliceOperation(t,c,{...s,type:D.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case D.Created:return}}const u=await this.providerService.getMetadata(e.providerUri),d=await this.getWorkingContent(r,t),f=s.type===D.Created?new Uint8Array(0):await l.workspace.fs.readFile(n.providerUri),h=await l.workspace.fs.readFile(e.providerUri),p=bs(Gi.decode(d),Gi.decode(f),Gi.decode(h),u.HEAD.sha);await this.writeFileCore(r,t,a,Wl.encode(p.mergedContent),h!=null?h:new Uint8Array(0),p.conflicts?{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]}:void 0)},i),a.length!==0&&this._onDidChange.fire(a)}async resolveDiffCommand(t,e,n,r){let i;const a=this.providerService.getVirtualRootUri(t);return a!==void 0&&({operation:i}=await this.getWorkingOperation(t,a)),(i==null?void 0:i.type)===D.Deleted?this.resolveOpenCommand(e):((i==null?void 0:i.type)===D.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,n,r]})}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return n===this.workspaceId?t:t.with({fragment:n})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;K.log(`ChangeStore.getScopedChangeStore(${e})`);let n=this.scopedStores.get(e);return n===void 0&&(n=e===this.workspaceId?new Ua.ScopedChangeStore(this,e,this.workspaceId):new Ua.ScopedChangeStore(new Ua(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,n)),n}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const r=E(n),i=this.cache.get(r);if((i==null?void 0:i.length)!==0)return this.lock.synchronizeRead(r,async()=>{var a;const{operation:s}=await this.getWorkingOperation(t,n);if(s!==void 0){if(s.type===D.Deleted)throw l.FileSystemError.FileNotFound(`The ${s.fileType===l.FileType.Directory?"folder":"file"} has been deleted.`);return{type:s.fileType,size:(a=s.size)!=null?a:0,ctime:0,mtime:s.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const n=new bt(`ChangeStore.readFile(${t.toString()})`);try{const r=this.providerService.getVirtualRootUri(t);if(r===void 0)return;const i=E(r),a=this.cache.get(i);return(a==null?void 0:a.length)===0?void 0:await this.lock.synchronizeRead(i,()=>{const s=this.cache.get(i);if((s==null?void 0:s.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(r,t)},n.context)}finally{n.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new bt(`ChangeStore.createDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e),s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,i===void 0?{type:D.Created,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...i,timestamp:Date.now()},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new bt(`ChangeStore.deleteDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===D.Created)return this.discardCore(e,t,r);const s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,{type:D.Deleted,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async updateDirectoryEntries(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return e;const r=new bt(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const i=E(n),a=this.cache.get(i);return(a==null?void 0:a.length)===0?e:await this.lock.synchronizeRead(i,async()=>{const{path:s}=z(n,t),c=await this.getWorkingOperations(n);for(const u of c)switch(u.type){case D.Changed:break;case D.Created:{if(ee(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri);e.push([d,u.fileType])}break}case D.Deleted:{if(ee(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri),f=e.findIndex(([h])=>h===d);f!==-1&&e.splice(f,1)}break}}return e},r.context)}finally{r.stop()}}async writeFile(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=new bt(`ChangeStore.writeFile(${t.toString()})`,{},e.length,r);try{const s=[];if(await this.lock.synchronizeWrite(E(i),async()=>this.writeFileCore(i,t,s,e,n,r),a.context),s.length===0)return;this._onDidChange.fire(s)}finally{a.stop()}}async writeFileCore(t,e,n,r,i,a){const s=new bt(`ChangeStore.writeFileCore(${e.toString()})`,{},r.length,a);try{const[{operation:c,index:u},d,f]=await Promise.all([this.getWorkingOperation(e,t),An(r),An(i)]);if(d===f&&(!c||(c==null?void 0:c.type)===D.Changed))return this.discardCore(t,e,n);if(d===(c==null?void 0:c.hash)&&f===(c==null?void 0:c.originalHash))return;const[{HEAD:h}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,r)]);await this.spliceOperation(e,u,c===void 0?{type:D.Changed,uri:e,fileType:l.FileType.File,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1}:{...c,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1},n)}finally{s.stop()}}async createFile(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=new bt(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const i=[];if(await this.lock.synchronizeWrite(E(n),async()=>{const[{operation:a,index:s},c,u]=await Promise.all([this.getWorkingOperation(t,n),An(e),this.providerService.getMetadata(t),this.saveWorkingContent(n,t,e)]);await this.spliceOperation(t,s,a===void 0?{type:D.Created,uri:t,fileType:l.FileType.File,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c,originalHash:c}:a.type===D.Deleted?{...a,type:D.Changed,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c}:{...a,type:D.Created,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c},i)},r.context),i.length===0)return;this._onDidChange.fire(i)}finally{r.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new bt(`ChangeStore.deleteFile(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===D.Created)return this.discardCore(e,t,r);const[s]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,a,{type:D.Deleted,uri:t,fileType:l.FileType.File,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}findParent(t,e,n){const r=Ee(t),{operation:i,index:a}=this.findWorkingOperation(r,e);return i!==void 0&&n(i,e)?{parent:i,parentIndex:a}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const n=$(t);return this.findParent(t,e,(r,i)=>r.type===D.Created&&!i.some(a=>ee(a.uri,r.uri)&&$(a.uri)!==n))}findDeletedParents(t,e){const n=[];for(let r=0;r<e.length;r+=1){const i=e[r];i.type===D.Deleted&&te(t,i.uri)&&n.push({parent:i,parentIndex:r})}return n}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const n=$(t);let r=-1;const i=e.find((a,s)=>$(a.uri)!==n?!1:(r=s,!0));return i===void 0?{operation:void 0,index:-1}:{operation:i,index:r}}async getWorkingOperations(t){const e=E(t);let n=this.cache.get(e);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,n)),n}async saveWorkingOperations(t,e){K.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const n=E(t);this.cache.set(n,e);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(e))}catch(r){throw this.cache.delete(n),K.error(r,`Failed to save repository changes for ${n}`),r}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(n){throw K.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(t,e){K.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(n){if(n instanceof l.FileSystemError&&n.code===Ul)return;throw K.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(t,e,n){K.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),n)}catch(r){throw K.error(r),this.telemetryService.sendException(r),r}}getFileStorageKey(t,e){return`changestore/${F(e)}`}async spliceOperation(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=await this.getWorkingOperations(i);e!==-1?a.splice(e,1,n):a.push(n),await this.saveWorkingOperations(i,a),r.push(Co(n,i,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&T(r)?typeof r=="string"?l.Uri.parse(r):l.Uri.from(r):r);return Array.isArray(e)?e:e.operations}catch(e){throw K.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:Ua.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let Wo=Ua;Wo.operationsStorageSchemaVersion=1,Wo.ScopedChangeStore=class{constructor(t,e,n){this.changeStore=t,this.scope=e,this.workspaceId=n}createPatch(t,e,n){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),n)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const n=this.changeStore.getUriScope(t)!==this.workspaceId,r=await this.changeStore.stat(this.stripUriScope(t));return r!==void 0&&n&&(r.permissions=l.FilePermission.Readonly),r}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,n,r){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},Hl([$t()],Wo.prototype,"getWorkingOperations",1);function Kl(t){switch(t){case D.Changed:return l.l10n.t("Modified");case D.Created:return l.l10n.t("Added");case D.Deleted:return l.l10n.t("Deleted")}}o(Kl,"getStatusText");function Gl(t){const[e,n]=t;switch(e){case D.Changed:switch(n){case D.Changed:case D.Created:return l.l10n.t("Modified by Both");case D.Deleted:return l.l10n.t("Deleted by Incoming")}case D.Created:switch(n){case D.Changed:case D.Created:return l.l10n.t("Added by Both");case D.Deleted:return l.l10n.t("Deleted by Incoming")}case D.Deleted:switch(n){case D.Changed:case D.Created:return l.l10n.t("Deleted by Current");case D.Deleted:return l.l10n.t("Deleted by Both")}}}o(Gl,"getConflictStatusText");class Es{constructor(e,n){this.providerService=e,this.gitIgnoreFiles=n,this._onDidChangeFileDecorations=new l.EventEmitter,this._decorations=new Map,this._submodules=new Set,this.disposable=l.Disposable.from(l.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),e.onDidChangeRepositories(this.onDidChangeRepositories,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){let n;const r=e.map(({uri:i})=>(this._decorations.delete(E(i)),this.gitIgnoreFiles.isIgnoreFile(i)&&(n=i),i));n?(this.gitIgnoreFiles.getIgnoreFile(n,!0),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)):setTimeout(()=>this._onDidChangeFileDecorations.fire(r),0)}async onDidChangeRepositories(e){for(const n of e.added){this.gitIgnoreFiles.getIgnoreFile(n.uri,!1);const r=await this.providerService.getSubmodules(n.uri);if(!!r)for(const[i,a]of r)this._submodules.add(i)}for(const n of e.removed)this._submodules.delete(E(n.uri))}async provideFileDecoration(e,n){if(e.scheme!==Xn.scheme)return;await kr(this.providerService,e);const r=E(e);let i=this._decorations.get(r);if(i!==void 0)return i!=null?i:void 0;const a=await this.gitIgnoreFiles.getIgnoreFile(e,!1),s=(await l.workspace.fs.stat(e)).type===l.FileType.Directory;if(a==null?void 0:a.isArbitraryPathIgnored(e.path,s))return i={color:new l.ThemeColor("remoteHub.decorations.ignoredResourceForeground")},this._decorations.set(r,i),i;const c=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let u;c.length>0&&(u=c.find(f=>E(f.uri)===r));const d=await this.providerService.changeStoreGetChange(e);if(d===void 0){if(u!==void 0)switch(u.type){case D.Created:i={badge:"\u2193A",color:new l.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Added)")};break;case D.Deleted:i={badge:"\u2193D",color:new l.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Deleted)")};break;case D.Changed:i={badge:"\u2193M",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes")};break}else this._submodules.has(this.providerService.getRelativeFilePath(e))&&(i={badge:"S",color:new l.ThemeColor("remoteHub.decorations.submoduleForegroundColor"),tooltip:"Submodule"});return this._decorations.set(r,i!=null?i:null),i}if(d.conflicts)i={badge:"!",color:new l.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:l.l10n.t("Merge Conflicts ({0})",Gl(d.conflicts.status))};else if(u!==void 0)switch(u.type){case D.Created:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Added)")};break;case D.Deleted:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Deleted)")};break;case D.Changed:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")}}else switch(d.type){case D.Created:i={badge:"A",color:new l.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:l.l10n.t("Added")};break;case D.Changed:i={badge:"M",color:new l.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:l.l10n.t("Modified")};break;case D.Deleted:i={badge:"D",color:new l.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:l.l10n.t("Deleted")};break}return this._decorations.set(r,i!=null?i:null),i}}o(Es,"ScmDecorationProvider");var Qc=gr(919);function Xc(t,e,n){if(!(e==null?void 0:e.length)&&!(n==null?void 0:n.length))return new Set(t);let r;if(e==null?void 0:e.length){const i=new Set([...e,...e.map(s=>`${s}/**`)]),a=micromatch(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}if(n==null?void 0:n.length){const i=new Set([...n,...n.map(a=>`${a}/**`)]);if(r===void 0){const a=micromatch.not(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}else micromatch(t,[...i],{dot:!0,nocase:!0}).forEach(r.delete,r)}return r}o(Xc,"globFilter");function As(t,e={}){if(!t)return Ps;if(typeof t=="string"||rc(t)){const n=Ko(t,e);if(n===zi)return Ps;const r=o(function(i,a){return!!n(i,a)},"resultPattern");return n.allBasenames&&(r.allBasenames=n.allBasenames),n.allPaths&&(r.allPaths=n.allPaths),r}return ac(t,e)}o(As,"parse");function zl(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}o(zl,"equals");function $o(t){return!!t&&typeof t.then=="function"}o($o,"isThenable");function Zc(){return Object.create(null)}o(Zc,"getEmptyExpression");const bo="**",Ds="/",_o="[/\\\\]",Eo="[^/\\\\]",eu=/\//g;function Rs(t,e){switch(t){case 0:return"";case 1:return`${Eo}*?`;default:return`(?:${_o}|${Eo}+${_o}${e?`|${_o}${Eo}+`:""})*?`}}o(Rs,"starsToRegExp");function Ts(t,e){if(!t)return[];const n=[];let r=!1,i=!1,a="";for(const s of t){switch(s){case e:if(!r&&!i){n.push(a),a="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":i=!0;break;case"]":i=!1;break}a+=s}return a&&n.push(a),n}o(Ts,"splitGlobAware");function Ms(t){if(!t)return"";let e="";const n=Ts(t,Ds);if(n.every(r=>r===bo))e=".*";else{let r=!1;n.forEach((i,a)=>{if(i===bo){if(r)return;e+=Rs(2,a===n.length-1)}else{let s=!1,c="",u=!1,d="";for(const f of i){if(f!=="}"&&s){c+=f;continue}if(u&&(f!=="]"||!d)){let h;f==="-"?h=f:(f==="^"||f==="!")&&!d?h="^":f===Ds?h="":h=on(f),d+=h;continue}switch(f){case"{":s=!0;continue;case"[":u=!0;continue;case"}":{e+=`(?:${Ts(c,",").map(b=>Ms(b)).join("|")})`,s=!1,c="";break}case"]":{e+="["+d+"]",u=!1,d="";break}case"?":e+=Eo;continue;case"*":e+=Rs(1);continue;default:e+=on(f)}}a<n.length-1&&(n[a+1]!==bo||a+2<n.length)&&(e+=_o)}r=i===bo})}return e}o(Ms,"parseRegExp");const Jl=/^\*\*\/\*\.[\w\.-]+$/,Vl=/^\*\*\/([\w\.-]+)\/?$/,jl=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Yl=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,ql=/^\*\*((\/[\w\.-]+)+)\/?$/,Ql=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Is=new kn(1e4),Ps=o(function(){return!1},"FALSE"),zi=o(function(){return null},"NULL");function Ko(t,e){if(!t)return zi;let n;typeof t!="string"?n=t.pattern:n=t,n=n.trim();const r=`${n}_${!!e.trimForExclusions}`;let i=Is.get(r);if(i)return Ls(i,t);let a;return Jl.test(n)?i=Zl(n.substr(4),n):(a=Vl.exec(Go(n,e)))?i=ec(a[1],n):(e.trimForExclusions?Yl:jl).test(n)?i=tc(n,e):(a=ql.exec(Go(n,e)))?i=xs(a[1].substr(1),n,!0):(a=Ql.exec(Go(n,e)))?i=xs(a[1],n,!1):i=nc(n),Is.set(r,i),Ls(i,t)}o(Ko,"parsePattern");function Xl(t,e){if(!t||!e)return t;const n=e.length;if(n===0||t.length===0)return t;let r=0;for(;t.indexOf(e,r)===r;)r=r+n;return t.substring(r)}o(Xl,"ltrim");function Ls(t,e){if(typeof e=="string")return t;const n=o(function(r,i){return te(r,e.base)?t(Xl(r.substr(e.base.length),"/"),i):null},"wrappedPattern");return n.allBasenames=t.allBasenames,n.allPaths=t.allPaths,n.basenames=t.basenames,n.patterns=t.patterns,n}o(Ls,"wrapRelativePattern");function Go(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}o(Go,"trimForExclusions");function Zl(t,e){return function(n,r){return typeof n=="string"&&n.endsWith(t)?e:null}}o(Zl,"trivia1");function ec(t,e){const n=`/${t}`,r=`\\${t}`,i=o(function(s,c){return typeof s!="string"?null:c?c===t?e:null:s===t||s.endsWith(n)||s.endsWith(r)?e:null},"parsedPattern"),a=[t];return i.basenames=a,i.patterns=[e],i.allBasenames=a,i}o(ec,"trivia2");function tc(t,e){const n=ks(t.slice(1,-1).split(",").map(c=>Ko(c,e)).filter(c=>c!==zi),t),r=n.length;if(!r)return zi;if(r===1)return n[0];const i=o(function(c,u){for(let d=0,f=n.length;d<f;d++)if(n[d](c,u))return t;return null},"parsedPattern"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(tc,"trivia3");function xs(t,e,n){const r="/"+t;let i;return n?i=o(function(a,s){return typeof a=="string"&&a.endsWith(r)?e:null},"parsedPattern"):i=o(function(a,s){return null},"parsedPattern"),i.allPaths=[(n?"*/":"./")+t],i}o(xs,"trivia4and5");function nc(t){try{const e=new RegExp(`^${Ms(t)}$`);return function(n){return e.lastIndex=0,typeof n=="string"&&e.test(n)?t:null}}catch(e){return zi}}o(nc,"toRegExp");function tu(t,e,n){return!t||typeof e!="string"?!1:As(t)(e,void 0,n)}o(tu,"match");function rc(t){const e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}o(rc,"isRelativePattern");function nu(t){return t.allBasenames||[]}o(nu,"getBasenameTerms");function ru(t){return t.allPaths||[]}o(ru,"getPathTerms");function ic(t){let e=-1,n=0,r=-1,i=!0,a=0;for(let s=t.length-1;s>=0;--s){const c=t.charCodeAt(s);if(c===47){if(!i){n=s+1;break}continue}r===-1&&(i=!1,r=s+1),c===46?e===-1?e=s:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===n+1?"":t.slice(e,r)}o(ic,"extname");function ac(t,e){const n=ks(Object.getOwnPropertyNames(t).map(c=>oc(c,t[c],e)).filter(c=>c!==zi)),r=n.length;if(!r)return zi;if(!n.some(c=>!!c.requiresSiblings)){if(r===1)return n[0];const c=o(function(f,h){let p;for(let b=0,ne=n.length;b<ne;b++){const A=n[b](f,h);if(typeof A=="string")return A;$o(A)&&(p||(p=[]),p.push(A))}return p?(async()=>{for(const b of p){const ne=await b;if(typeof ne=="string")return ne}return null})():null},"resultExpression2"),u=n.find(f=>!!f.allBasenames);u&&(c.allBasenames=u.allBasenames);const d=n.reduce((f,h)=>h.allPaths?f.concat(h.allPaths):f,[]);return d.length&&(c.allPaths=d),c}const i=o(function(c,u,d){let f,h;for(let p=0,b=n.length;p<b;p++){const ne=n[p];ne.requiresSiblings&&d&&(u||(u=j(c)),f||(f=u.substr(0,u.length-ic(c).length)));const A=ne(c,u,f,d);if(typeof A=="string")return A;$o(A)&&(h||(h=[]),h.push(A))}return h?(async()=>{for(const p of h){const b=await p;if(typeof b=="string")return b}return null})():null},"resultExpression"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(ac,"parsedExpression");function oc(t,e,n){if(e===!1)return zi;const r=Ko(t,n);if(r===zi)return zi;if(typeof e=="boolean")return r;if(e){const i=e.when;if(typeof i=="string"){const a=o((s,c,u,d)=>{if(!d||!r(s,c))return null;const f=i.replace("$(basename)",()=>u),h=d(f);return $o(h)?h.then(p=>p?t:null):h?t:null},"result");return a.requiresSiblings=!0,a}}return r}o(oc,"parseExpressionPattern");function ks(t,e){const n=t.filter(c=>!!c.basenames);if(n.length<2)return t;const r=n.reduce((c,u)=>{const d=u.basenames;return d?c.concat(d):c},[]);let i;if(e){i=[];for(let c=0,u=r.length;c<u;c++)i.push(e)}else i=n.reduce((c,u)=>{const d=u.patterns;return d?c.concat(d):c},[]);const a=o(function(c,u){if(typeof c!="string")return null;if(!u){let f;for(f=c.length;f>0;f--){const h=c.charCodeAt(f-1);if(h===47||h===92)break}u=c.substr(f)}const d=r.indexOf(u);return d!==-1?i[d]:null},"aggregate");a.basenames=r,a.patterns=i,a.allBasenames=r;const s=t.filter(c=>!c.basenames);return s.push(a),s}o(ks,"aggregateBasenameMatches");function iu(t,e){return zl(t,e,(n,r)=>typeof n=="string"&&typeof r=="string"?n===r:typeof n!="string"&&typeof r!="string"?n.base===r.base&&n.pattern===r.pattern:!1)}o(iu,"patternsEquals");class Fs{constructor(e,n,r){if(this.location=n,this.parent=r,n[n.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");n[n.length-1]!=="/"&&(n+="/"),this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}updateContents(e){this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}isPathIncludedInTraversal(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);return!this.isPathIgnored(e,n)}isArbitraryPathIgnored(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);const r=e.split("/").filter(s=>s);let i=!1,a="";for(let s=0;s<r.length;s++){const c=s===r.length-1,u=r[s];if(a=a+"/"+u,!this.isPathIncludedInTraversal(a,c?n:!0)){i=!0;break}}return i}gitignoreLinesToExpression(e,n,r){const i=e.map(s=>this.gitignoreLineToGlob(s,n)),a=Object.create(null);for(const s of i)a[s]=!0;return As(a,{trimForExclusions:r})}parseIgnoreFile(e,n,r){const i=e.split(`
`).map(A=>A.trim()).filter(A=>A&&A[0]!=="#"),a=i.filter(A=>!A.endsWith("/")),s=a.filter(A=>!A.includes("!")),c=this.gitignoreLinesToExpression(s,n,!0),u=a.filter(A=>A.includes("!")).map(A=>A.replace(/!/g,"")),d=this.gitignoreLinesToExpression(u,n,!1),f=i.filter(A=>!A.includes("!")),h=this.gitignoreLinesToExpression(f,n,!0),p=i.filter(A=>A.includes("!")).map(A=>A.replace(/!/g,"")),b=this.gitignoreLinesToExpression(p,n,!1);return o((A,Z)=>{if(!A.startsWith(n))return!1;if(Z&&h(A)&&!b(A))return!0;const pe=c(A),X=d(A);return pe&&!X?!0:r?r.isPathIgnored(A,Z):!1},"isPathIgnored")}gitignoreLineToGlob(e,n){const r=e.indexOf("/");return r===-1||r===e.length-1?e="**/"+e:(r===0?n.slice(-1)==="/"&&(e=e.slice(1)):n.slice(-1)!=="/"&&(e="/"+e),e=n+e),e}}o(Fs,"IgnoreFile");const Ns=new TextDecoder;class Os{constructor(e){this.providerService=e,this._gitIgnoreFiles=new Map}isIgnoreFile(e){return this.getIgnoreFileUri(e).toString()===e.toString()}async getIgnoreFile(e,n){const r=this.providerService.getVirtualRootUri(e),i=r.toString(),a=this._gitIgnoreFiles.get(i);if(a&&!n)return a;const s=this.doProcessIgnoreFile(r,a);return this._gitIgnoreFiles.set(i,s),s}getIgnoreFileUri(e){const n=this.providerService.getVirtualRootUri(e);return this.providerService.createRelativeUri(n,".gitignore")}async doProcessIgnoreFile(e,n){const r=this.providerService.createRelativeUri(e,".gitignore");try{if((await l.workspace.fs.stat(r)).type!==l.FileType.File)return;const a=await l.workspace.fs.readFile(r);if(n!==void 0){const s=await n;if(s)return s.updateContents(Ns.decode(a)),s}return new Fs(Ns.decode(a),`${e.path}/`)}catch(i){}}}o(Os,"IgnoreFileService");const Bs=o(t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296},"e");class Hs{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:r,dictionaries:i,style:a,seed:s}=e;this.dictionaries=i,this.separator=r,this.length=n,this.style=a,this.seed=s}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,r)=>{let i;e?(i=(s=>{if(typeof s=="string"){const c=s.split("").map(d=>d.charCodeAt(0)).reduce((d,f)=>d+f,1),u=Math.floor(Number(c));return Bs(u)}return Bs(s)})(e),e=4294967296*i):i=Math.random();let a=r[Math.floor(i*r.length)]||"";if(this.style==="lowerCase")a=a.toLowerCase();else if(this.style==="capital"){const[s,...c]=a.split("");a=s.toUpperCase()+c.join("")}else this.style==="upperCase"&&(a=a.toUpperCase());return n?`${n}${this.separator}${a}`:`${a}`},"")}}o(Hs,"a");const Us={separator:"_",dictionaries:[]},sc=o(t=>{const e=[...t&&t.dictionaries||Us.dictionaries],n={...Us,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new Hs(n).generate()},"n");var lc=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blonde","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","chronic","chubby","circular","civic","civil","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colorful","colossal","coloured","colourful","combined","comfortable","commercial","common","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fatal","favourable","favourite","federal","fellow","few","fierce","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","implicit","important","impossible","impressed","impressive","improved","inadequate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mutual","mysterious","naked","narrow","nasty","national","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","only","open","operational","opposite","optimistic","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],cc=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],uc=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"],au=null,ou=null,su=null;class Ws{static generate(e={}){let n=e.min||1,r=e.max||999;if(e.length){const i=Math.pow(10,e.length);return n=i/10,r=i-1,[`${Math.floor(Math.random()*(r-n))+n}`]}return[`${Math.floor(Math.random()*(r-n))+n}`]}}o(Ws,"y");class ea{constructor(e,n){this.command=e,this.show=n}get label(){return this.command.title}get identifier(){return this.command.command}async execute(){var e;return void await l.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}get alwaysShow(){var e;return(e=this.show)!=null?e:!1}get commandArguments(){return this.command.arguments}set commandArguments(e){this.command.arguments=e}}o(ea,"CommandQuickPickItem");var Ao;(function(t){async function e(n,r,i,a,s,c){let u;Array.isArray(s)?u=s:c===void 0&&(u=[],c=s);const d=l.window.createQuickPick(),f=new wr(500),h=[f],{defaultBranch:p,HEAD:b}=await n.getMetadata(r);async function ne(_e){const[xe,Ue,Qe,Mt]=await Promise.all([n.getBranch(r,p.name),n.getBranches(r,{query:_e,limit:100}),n.getTags(r,{query:_e,limit:100}),n.getSnapshots(r)]),gt=new Set,Qt=new Set;for(const un of Mt)gt.add(un.hash),Qt.add(un.branch.name);const gn=((c==null?void 0:c.filterBranches)?Ue.branches.filter(c==null?void 0:c.filterBranches):Ue.branches).filter(un=>un.name!==p.name).sort((un,Mr)=>un.committedDate&&Mr.committedDate?Mr.committedDate.getTime()-un.committedDate.getTime():0),rn=l.l10n.t("Open indexed commit"),Kt=[{iconPath:new l.ThemeIcon("layers-active"),tooltip:rn}];if(_e!==void 0&&u){for(const un of u)if(un.identifier==="remoteHub.createBranch"||un.identifier==="remoteHub.createBranchFrom"){const Mr=un.commandArguments;if(!Mr)continue;const Ri=Mr.findIndex(oa=>"uri"in oa);let Ti;Ri!==-1&&([Ti]=Mr.splice(Ri,1),Ti.branch=_e,Mr.push(Ti),un.commandArguments=Mr)}}return[...u,{label:"",kind:l.QuickPickItemKind.Separator},...(c==null?void 0:c.showHead)?[{label:"HEAD",description:`\u2022$(git-commit) ${O(b.sha)}${gt.has(b.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:ye.Commit,name:void 0,sha:b.sha,buttons:gt.has(b.sha)?Kt:void 0}]:[],{label:`$(${(xe==null?void 0:xe.locked)?"lock":"git-branch"}) ${p.name} (default)`,description:`\u2022$(git-commit) ${O(p.sha)}${Qt.has(p.name)||gt.has(p.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:ye.Branch,name:void 0,sha:p.sha,buttons:Qt.has(p.name)||gt.has(p.sha)?Kt:void 0},...gn.map(un=>({label:`$(${un.locked?"lock":"git-branch"}) ${un.name}`,description:`\u2022$(git-commit) ${O(un.commit)}${Qt.has(un.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:ye.Branch,name:un.name,sha:un.commit,buttons:Qt.has(un.name)?Kt:void 0})),...Qe.tags.map(un=>({label:`$(tag) ${un.name}`,description:`\u2022$(git-commit) ${O(un.commit)}${gt.has(un.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:ye.Tag,name:un.name,sha:un.commit,buttons:gt.has(un.commit)?Kt:void 0}))]}o(ne,"getItems");const A=ne(void 0);let Z,pe=!1;async function X(_e){Z=void 0;const xe=d.activeItems;d.items=_e!=null?_e:await A,pe&&xe.length!==0&&(d.activeItems=d.items.filter(Ue=>xe.some(Qe=>Qe.label===Ue.label))),d.busy=!1}o(X,"setItems");try{return await new Promise(xe=>{var Ue;h.push(d.onDidHide(()=>xe(void 0)),d.onDidChangeValue(Qe=>{if(pe=!1,Qe=Qe.trim(),(c==null?void 0:c.allowResetToSha)&&b.branch&&N(Qe)){X([{label:`Reset $(git-branch) ${b.branch.name} to $(git-commit) ${Qe}`,name:b.branch.name,sha:Qe,type:ye.Branch}]);return}d.busy=!0;const Mt=f.debounce(Qe?()=>ne(Qe):()=>A);Z===void 0&&(Z=Mt.then(async gt=>X(gt)))}),d.onDidAccept(()=>{if(d.activeItems.length!==0){const[Qe]=d.activeItems;xe(Qe)}}),d.onDidTriggerItemButton(Qe=>{const Mt=Qe.item;!(Mt instanceof ea)&&Mt.kind!==l.QuickPickItemKind.Separator&&(Mt.useIndex=!0),xe(Mt)})),d.title=a,d.placeholder=i,d.matchOnDescription=!0,d.ignoreFocusOut=(Ue=c==null?void 0:c.ignoreFocusOut)!=null?Ue:!0,d.busy=!0,d.show(),Z=f.debounce(async()=>A,0).then(Qe=>X(Qe))})}finally{d.dispose(),h.forEach(_e=>void _e.dispose())}}o(e,"show"),t.show=e})(Ao||(Ao={}));const dc=new TextDecoder;class $s{constructor(e,n,r,i){this.providerService=e,this.openActionsService=n,this.telemetryService=r,this.ignoreFileService=i,this._onDidCloseRepository=new l.EventEmitter,this._onDidOpenRepository=new l.EventEmitter,this._onDidChangeState=new l.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=l.Disposable.from(me.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:s})=>{const c=this.getScmProvider(k.getVirtualUri(s.uri));c!==void 0&&await this.updateStatusBarCommands(c,void 0)}),this.providerService.onDidSyncRepository(async({repository:s,syncing:c})=>{const u=this.getScmProvider(k.getVirtualUri(s.uri));u!==void 0&&(await this.updateStatusBarCommands(u,{syncing:c}),c===!1&&await this.update(s.uri))}),this.providerService.onDidRefresh(s=>{for(const c of s)this.update(c)}),this.providerService.onDidChangeChangeStore(s=>this.update(s[0].rootUri)),...this.registerCommands());const a=this.providerService.repositories;this.onRepositoriesChanged({added:a,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=me.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}onConfigurationChanged(e){me.changed(e,"staging")&&(this._staging=void 0,me.changed(e,"staging.enabled")&&this.refresh()),me.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const n of e.added){const r=await this.update(n.uri);(r==null?void 0:r.repository)&&this._onDidOpenRepository.fire(r.repository)}if(e.removed.length)for(const n of e.removed){const r=this._scmProviders.findIndex(i=>E(i.sourceControl.rootUri)===E(n.uri));if(r!==-1){const i=this._scmProviders[r];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(r,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[l.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createPullRequest"),void this.createPullRequest(e)}),l.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),l.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commit"),void this.commitChanges(e,{empty:!1})}),l.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),l.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if(Ks(e)){const a=this.getSourceControlFrom(e);if((a==null?void 0:a.rootUri)===void 0)return;const c=e.resourceStates.filter(Wa);if(c.length!==0){if(await Jo(c))for(const u of c)await this.providerService.getChangeStore(u.resourceUri).discard(u.resourceUri),await this.closeDiffEditors(a.rootUri,[u.resourceUri]);else this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"});return}}let n=!1;e!==void 0&&"confirmDiscard"in e&&(n=!0,e=void 0);const r=this.getSourceControlFrom(e);if((r==null?void 0:r.rootUri)===void 0)return;this.telemetryService.publicLog2("command.discardAllChanges");const i=await this.providerService.getChangeStore(r.rootUri).getChanges(r.rootUri);n||await Jo(i)?await this.providerService.getChangeStore(r.rootUri).discardAll(r.rootUri):this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"})}),l.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{const n=this.getSourceControlFrom(e[0]);if((n==null?void 0:n.rootUri)!==void 0)for(const r of e)!Wa(r)||(this.telemetryService.publicLog2("command.discardChanges"),await Jo([r])?(await this.providerService.getChangeStore(r.resourceUri).discard(r.resourceUri),await this.closeDiffEditors(n.rootUri,[r.resourceUri])):this.telemetryService.publicLog2("command.discardChanges.abort",{reason:"aborted"}))}),l.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.stageAllChanges"),await this.providerService.getChangeStore(n.rootUri).stageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!Wa(i)||(this.telemetryService.publicLog2("command.stageChanges"),await this.providerService.getChangeStore(i.resourceUri).stage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.unstageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.unstageAllChanges"),await this.providerService.getChangeStore(n.rootUri).unstageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!Wa(i)||(this.telemetryService.publicLog2("command.unstageChanges"),await this.providerService.getChangeStore(i.resourceUri).unstage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const n of e)!Wa(n)||(this.telemetryService.publicLog2("command.keepChanges"),await this.providerService.getChangeStore(n.resourceUri).keep(n.resourceUri))}),l.commands.registerCommand("remoteHub.openChanges",e=>{var n;const{command:r}=e;if(!!r)return this.telemetryService.publicLog2("command.openChanges"),void l.commands.executeCommand(r.command,...(n=r.arguments)!=null?n:[])}),l.commands.registerCommand("remoteHub.openFile",async(...e)=>{var n;for(const r of e)if(zo(r)){const i=r,a=this.providerService.getChangeStore(i.resourceUri).resolveOpenCommand(i.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:l.ViewColumn.Active});this.telemetryService.publicLog2("command.openFile"),await l.commands.executeCommand(a.command,...(n=a.arguments)!=null?n:[])}else if(r instanceof l.Uri){this.telemetryService.publicLog2("command.openFile");const i=r;await l.window.showTextDocument(i)}}),l.commands.registerCommand("remoteHub.createBranch",async e=>{await ri("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),l.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to create a new branch on"));if(r===void 0)return;this.telemetryService.publicLog2("command.createBranchFrom");const i=await this.providerService.getMetadata(r);let a;if(i.accessLevel<le.Write&&(a=await this.providerService.getFork(r),a===void 0)){const A={title:l.l10n.t("Fork Repository")},Z={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You don't have access to create branches on this repository.

Do you want to create a branch on a fork?`),{modal:!0},A,Z)!==A){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"no permissions and declined to fork"});return}if(a=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",i.name)},()=>this.providerService.fork(r)),a===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"aborted fork failed"});return}}let s,c=e==null?void 0:e.branch,u=!1;try{(!c||!w(c))&&(c=await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),void 0,void 0)));let A;if(e==null?void 0:e.fromSha)A=e.fromSha,A==="HEAD"&&(A=i.HEAD.sha);else{const Z=await Ao.show(this.providerService,r,l.l10n.t("Select a ref to create the new branch from"),void 0,{showHead:!0});if(!Z){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}A=Z.sha,u=Boolean(Z.useIndex)}c&&A&&(s=await this.providerService.createBranch(r,c,A,a))}catch(A){K.error(A),l.window.showErrorMessage(l.l10n.t("Unable to create the new branch."));return}if(!s){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const d=await this.providerService.switchTo(a?this.providerService.createVirtualUri(r,a):r,{type:ye.Branch,id:s});if(!d)return;const f=await this.providerService.getChangeStore(r).createChangeset(r);f&&await this.openActionsService.setChangesetToApply(d.uri,f);const h=l.l10n.t("Switch to Branch"),p=l.l10n.t("Open in New Window"),ne=me.get("switchToCreatedBranch")==="always"?h:await l.window.showInformationMessage(l.l10n.t(`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,s),{modal:!0},h,p);!ne||(await this.providerService.getChangeStore(r).discardAll(r),d.location=ne===p?Je.NewWindow:Je.CurrentWindow,u&&await me.setMode(d.uri,de.getIndexDefault(se.Branch)),await wn(this.providerService,d,{skipChangesPrompt:!0}))}),l.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.publicLog2("command.applyPatch");let n;const r=l.window.activeTextEditor;if((r==null?void 0:r.document.languageId)!=="diff"){const i=await l.window.showOpenDialog({openLabel:l.l10n.t("Open Patch"),title:l.l10n.t("Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(i===void 0||i.length===0)return;n=dc.decode(await l.workspace.fs.readFile(i[0]))}else n=r.document.getText();try{await this.providerService.getChangeStore(e.rootUri).applyPatch(e.rootUri,n)}catch{l.window.showErrorMessage(l.l10n.t("Invalid patch file"))}}),l.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const n=Array.isArray(e)?e:[e];for(const r of n){const i=this.getSourceControlFrom(r);if((i==null?void 0:i.rootUri)===void 0)return;let a;zo(r)&&(a=r.resourceUri),this.telemetryService.publicLog2("command.exportPatch");const s=await this.providerService.getChangeStore(i.rootUri).createPatch(i.rootUri,a),c=await l.workspace.openTextDocument({language:"diff",content:s});await l.window.showTextDocument(c)}}),l.commands.registerCommand("remoteHub.switchToBranch",async e=>{var n,r;const i=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to switch branches on"));if(i===void 0)return;this.telemetryService.publicLog2("command.switchToBranch");const a=[],s=await this.providerService.getMetadata(i);if(e==null?void 0:e.commands)switch(a.push(new ea(nr({command:"remoteHub.createBranch",title:l.l10n.t("{0} Create new branch...","$(add)"),arguments:[{uri:i}]}),!0),new ea(nr({command:"remoteHub.createBranchFrom",title:l.l10n.t("{0} Create new branch from...","$(add)"),arguments:[{uri:i}]}),!0)),s.HEAD.type){case V.Branch:a.push(new ea(nr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.branch.name}]})));break;case V.RemoteBranch:a.push(new ea(nr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Remote Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.HEAD.branch.remote.repo,branch:s.HEAD.branch.name}]})));break;case V.Tag:a.push(new ea(nr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Tag on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,tag:s.HEAD.detached.name}]})));break;case V.Commit:a.push(new ea(nr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Commit on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,sha:s.HEAD.sha}]})));break}const c=(r=s.HEAD.branch)==null?void 0:r.name,u=Boolean(c&&!await this.providerService.getChangeStore(i).hasChanges(i)),d=await Ao.show(this.providerService,i,l.l10n.t("Select a branch or tag to checkout"),void 0,a,{allowResetToSha:u,filterBranches:c?f=>f.name!==c:void 0,ignoreFocusOut:!1});if(!d){this.telemetryService.publicLog2("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return d instanceof ea?void d.execute():u&&d.type===ye.Branch&&d.name===c&&d.sha?l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(i,{to:d.sha})}catch(f){K.error(f),l.window.showErrorMessage(l.l10n.t("Unable to reset the repository to commit '{0}'.",O(d.sha)))}}):void l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const f=await this.providerService.switchTo(i,d.name?{type:d.type,id:d.name}:void 0);if(f!==void 0){if(d.useIndex){const h=await this.providerService.getModeRefType(f.uri);await me.setMode(f.uri,de.getIndexDefault(h))}return wn(this.providerService,f)}})}),l.commands.registerCommand("remoteHub.fetch",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to fetch"));if(r!==void 0){this.telemetryService.publicLog2("command.fetch");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.fetch(r,{force:!0}))}catch(i){l.window.showErrorMessage(l.l10n.t("Unable to fetch repository"))}}}),l.commands.registerCommand("remoteHub.fetchAll",async e=>{const n=this.providerService.repositories;if(n.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.publicLog2("command.fetchAll"),(await l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const i=[];for(const a of n)try{await this.providerService.fetch(a.uri)}catch(s){i.push(s)}return i})).length&&!(e==null?void 0:e.automated)&&l.window.showErrorMessage(n.length?l.l10n.t("Unable to fetch repositories"):l.l10n.t("Unable to fetch repository"))}),l.commands.registerCommand("remoteHub.pull",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to pull"));if(r!==void 0){this.telemetryService.publicLog2("command.pull");try{await this.sync(r,{pull:!0})}catch{}}}),l.commands.registerCommand("remoteHub.sync",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to sync"));if(r!==void 0){this.telemetryService.publicLog2("command.sync");try{await this.sync(r)}catch{}}}),l.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.publicLog2("command.disableCommitDirectlyWarning"),me.updateEffective("commitDirectlyWarning",wt.Off)})]}async sync(e,{pull:n,...r}={pull:!1}){this.telemetryService.publicLog2("sync");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,r))}catch(i){if(Xe.asVirtualProviderErrorCode(i)===ie.SyncConflictsError){const a={title:l.l10n.t("Continue")},s={title:l.l10n.t("Cancel"),isCloseAffordance:!0};await l.window.showWarningMessage(n?l.l10n.t(`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):l.l10n.t(`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0},a,s)===a?await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,{conflictResolution:ve.Merge})):this.telemetryService.publicLog2("sync.abort",{reason:"abandoned"})}else if(Xe.asVirtualProviderErrorCode(i)===ie.UnresolvedConflictsError)await l.window.showErrorMessage(n?l.l10n.t("You must resolve any pending conflicts before pulling."):l.l10n.t("You must resolve any pending conflicts before syncing."),{modal:!0});else throw K.error(i),this.telemetryService.sendException(i),l.window.showErrorMessage(l.l10n.t("Unable to sync the repository.")),i}}async commitChanges(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,n))}catch(r){if(Xe.asVirtualProviderErrorCode(r)===ie.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}K.error(r),l.window.showErrorMessage(l.l10n.t("Unable to commit.")),this.telemetryService.sendException(r)}}async commitChangesCore(e,n){const r=e.rootUri;this.telemetryService.publicLog2("commit",{staging:String(this.staging.enabled)});const i=new bt(`VirtualSourceControl.commitChanges(${r.toString()})`);let a;try{const s=await this.providerService.getMetadata(r);let c,u;const d=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const h=e.inputBox.value;if(await this.providerService.getChangeStore(r).hasMergeConflicts(r)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted conflicts"}),a=": Aborted; Unresolved conflicts";return}const p=await this.providerService.getCommitOperations(r,{staged:d});if(p.length===0&&!n.empty){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),a=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted no message"}),a=": Aborted; No message";return}let b,ne;if(s.HEAD.type===V.RemoteBranch?(ne=s.HEAD.branch.remote.accessLevel<le.Write,b=ne&&s.accessLevel<le.Write):(b=s.accessLevel<le.Write,ne=b),u===void 0&&b&&(u=await this.providerService.getFork(r),u===void 0)){const A={title:l.l10n.t("Fork Repository")},Z={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t("You're trying to make changes in a project you don't have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0},A,Z)!==A){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned fork prompt"}),a=": Aborted; Abandoned fork prompt";return}if(u=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",s.name)},()=>this.providerService.fork(r)),u===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("commit.abort",{reason:"aborted fork failed"}),a=": Aborted; Fork failed";return}}if(u||ne){if(u===void 0){const pe={title:l.l10n.t("Commit to a New Branch")},X={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You're trying to make changes to a branch you don't have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0},pe,X)!==pe){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned remote branch prompt"}),a=": Aborted; Abandoned commit to new branch prompt";return}}let A=0;try{const pe=await this.providerService.getBranches(u?this.providerService.createVirtualUri(r,u):r,{query:"patch-"});for(const X of pe.branches){const _e=/^patch-(?<num>\d+)$/.exec(X.name);if(_e==null?void 0:_e.groups){const xe=Number(_e.groups.num);xe>A&&(A=xe)}}}catch{}const Z=await Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name),`patch-${A+1}`);if(Z&&(c=await this.providerService.createBranch(r,Z,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned create branch prompt"}),a=": Aborted; Abandoned create branch prompt";return}}try{await this.providerService.createAndPushCommit(r,h,p,c,n,u),await this.closeDiffEditors(r,void 0)}catch(A){const Z=Xe.asVirtualProviderErrorCode(A);if(Z===ie.DetachedHEADError){const pe={title:l.l10n.t("Commit to a New Branch")},X={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},pe,X)!==pe){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const xe=await Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(xe&&(c=await this.providerService.createBranch(r,xe,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(Z===ie.MergeConflictError){const pe={title:l.l10n.t("Pull")},X={title:l.l10n.t("Sync (Pull & Push)")},_e={title:l.l10n.t("Cancel"),isCloseAffordance:!0},xe=await l.window.showErrorMessage(l.l10n.t(`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},pe,X,_e);if(xe!==pe&&xe!==X){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned conflicts prompt"}),a=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(r,{pull:xe===pe,conflictResolution:ve.Merge}),xe===pe){a=': Aborted; Chose "pull" from merge changes prompt';return}continue}else if(Z===ie.CommitToProtectedBranchError){const pe={title:l.l10n.t("Commit to a New Branch")},X={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if((l.workspace.getConfiguration("git").get("branchProtectionPrompt")==="alwaysCommitToNewBranch"?pe:await l.window.showErrorMessage(l.l10n.t(`You are trying to commit to a protected branch and you do not have permission to push your commits to the remote.

How would you like to proceed?`),{modal:!0},pe,X))!==pe){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const Ue=await Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(Ue&&(c=await this.providerService.createBranch(r,Ue,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(Z===ie.CommitToArchivedRepositoryError){l.window.showErrorMessage(l.l10n.t("The current repository has been archived and is now read-only. Please contact the repository owner."),{modal:!0}),this.telemetryService.publicLog2("commit.abort",{reason:"archived repository"}),a=`: Aborted; ${String(A)}`;return}else throw K.error(A),a=`: Aborted; ${String(A)}`,A}break}if(e.inputBox.value="",u?await this.providerService.getChangeStore(r).discardAll(r,{staged:d}):await this.providerService.getChangeStore(r).acceptAll(r,{staged:d}),Yo(va.HasCommitted,!0),!u&&!c)return;async function f(){if(u){const A={title:l.l10n.t("Switch to Fork")},Z={title:l.l10n.t("Cancel"),isCloseAffordance:!0},pe=await l.window.showInformationMessage(l.l10n.t("Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",s.name),{modal:!0},A,Z);if(this.telemetryService.publicLog2("commit.switchToFork",{confirm:String(pe===A)}),pe===A){let X;c!==void 0?X={type:ye.Branch,id:c}:s.HEAD.branch!==void 0&&(X={type:ye.Branch,id:s.HEAD.branch.name}),wn(this.providerService,{name:u.name,uri:this.providerService.createVirtualUri(r,{repo:u.repo,ref:X}),location:Je.CurrentWindow})}return}const h={title:l.l10n.t("Switch to Branch")},p={title:l.l10n.t("Cancel"),isCloseAffordance:!0},b=me.get("switchToCreatedBranch")==="always",ne=b?h:await l.window.showInformationMessage(l.l10n.t("Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",c),{modal:!0},h,p);this.telemetryService.publicLog2("commit.switchToBranch",{confirm:String(ne===h),autoConfirm:String(b)}),ne===h&&wn(this.providerService,{name:s.name,uri:this.providerService.createVirtualUri(r,{repo:s.repo,ref:c?{type:ye.Branch,id:c}:void 0}),location:Je.CurrentWindow})}o(f,"showSwitchToPrompt"),f.call(this)}finally{i.stop(a?{message:a}:void 0)}}async createPullRequest(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,n))}catch(r){const i=Xe.asVirtualProviderErrorCode(r);if(i===ie.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}if(i===ie.CommitFailedError){l.window.showErrorMessage(l.l10n.t("Unable to commit."));return}K.error(r),l.window.showErrorMessage(l.l10n.t("Unable to open a pull request.")),this.telemetryService.sendException(r)}}async createPullRequestCore(e,n){var r;const i=e.rootUri,a=(r=n==null?void 0:n.draft)!=null?r:!1;this.telemetryService.publicLog2("createPullRequest",{draft:String(a),staging:String(this.staging.enabled)});const s=new bt(`VirtualSourceControl.createPullRequest(${i.toString()})`);let c;try{let u=o(function(){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned branch prompt"}),c=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),d;const f=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(n==null?void 0:n.sha)){if(await this.providerService.getChangeStore(i).hasMergeConflicts(i)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted conflicts"}),c=": Aborted; Unresolved conflicts";return}if(d=await this.providerService.getCommitOperations(i,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),d.length===0){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),c=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const h=e.inputBox.value;if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted no message"}),c=": Aborted; No message";return}const p=await this.providerService.getMetadata(i);let b,ne;p.HEAD.type===V.RemoteBranch?(ne=p.HEAD.branch.remote.accessLevel<le.Write,b=ne&&p.accessLevel<le.Write):(b=p.accessLevel<le.Write,ne=b);let A=n==null?void 0:n.fork;if(A===void 0&&b&&(A=await this.providerService.getFork(i),A===void 0)){const Qe={title:l.l10n.t("Fork Repository")},Mt={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t(`You're trying to make changes in a project you don't have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0},Qe,Mt)!==Qe){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned fork prompt"}),c=": Aborted; Abandoned fork prompt";return}if(A=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",p.name)},()=>this.providerService.fork(i)),A===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted fork failed"}),c=": Aborted; Fork failed";return}}const Z=h.trimStart().split(`
`),pe=await l.window.showInputBox({ignoreFocusOut:!0,placeHolder:l.l10n.t("New pull request title"),prompt:l.l10n.t("Please provide a title for the new pull request"),value:Z[0]});if(!pe){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned title prompt"}),c=": Aborted; Abandoned title prompt";return}async function X(Qe){let Mt=0;try{const gn=await this.providerService.getBranches(A?this.providerService.createVirtualUri(i,A):i,{query:"patch-"});for(const rn of gn.branches){const Kt=/^patch-(?<num>\d+)$/.exec(rn.name);if(Kt==null?void 0:Kt.groups){const un=Number(Kt.groups.num);un>Mt&&(Mt=un)}}}catch{}const gt=await Ka(this.providerService,i,l.l10n.t("Create a new branch for this pull request"),l.l10n.t("New branch name"),l.l10n.t("New Pull Request \u2022 Create Branch \u2022 {0}",A?A.name:p.name),`patch-${Mt+1}`);let Qt;return gt&&(Qt=await this.providerService.createBranch(i,gt,Qe,A)),Qt}o(X,"createBranch");const _e=await X.call(this,p.HEAD.sha);if(!_e){u.call(this);return}(d==null?void 0:d.length)&&await this.providerService.createAndPushCommit(i,h,d,_e,void 0,A);const xe=await this.providerService.createPullRequest(i,_e,pe,Z.slice(1).join(`
`),{draft:a},A);e.inputBox.value="",(d==null?void 0:d.length)&&(A?await this.providerService.getChangeStore(i).discardAll(i,{staged:f}):await this.providerService.getChangeStore(i).acceptAll(i,{staged:f}));async function Ue(){const Qe={title:l.l10n.t("Switch to Pull Request")},Mt={title:l.l10n.t("Cancel"),isCloseAffordance:!0},gt=await l.window.showInformationMessage(l.l10n.t("Created pull request #{0} in {1}. Do you want to switch to the new pull request?",xe.id,p.name),{modal:!0},Qe,Mt);this.telemetryService.publicLog2("commit.switchToPullRequest",{confirm:String(gt===Qe)}),gt===Qe&&wn(this.providerService,{name:p.name,uri:this.providerService.createVirtualUri(i,{repo:p.repo,ref:{type:ye.PullRequest,id:xe.id}}),location:Je.CurrentWindow})}o(Ue,"showSwitchToPrompt"),Ue.call(this)}finally{s.stop(c?{message:c}:void 0)}}async update(e){const n=l.workspace.getWorkspaceFolder(e);if(n===void 0)return;const r=await this.providerService.getMetadata(e),i=await this.createOrUpdateScmProvider(e,n.name),a=await this.ignoreFileService.getIgnoreFile(e,!1),s=await this.providerService.getChangeStore(e).getGroupedChanges(e,{predicate:h=>h.fileType===l.FileType.File}),c=await Promise.all(s.conflicts.filter(h=>a?!a.isArbitraryPathIgnored(h.uri.path,!1):!0).map(async h=>({type:h.type,resourceUri:h.uri,command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,h.conflicts.incomingUri,l.l10n.t("{0} (Incoming Changes \u2194 Current Changes)",j(h.uri)))}))),u=o(h=>this.providerService.createVirtualUri(k.getProviderId(h),{repo:r.repo,ref:{type:ye.Commit,id:r.HEAD.sha}},this.providerService.getRelativeFilePath(h)),"getOriginalVirtualUri"),d=await Promise.all(s.staged.filter(h=>a?!a.isArbitraryPathIgnored(h.uri.path,!1):!0).map(async h=>({type:h.type,resourceUri:h.uri,command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,u(h.uri),l.l10n.t("{0} (Index)",j(h.uri)))}))),f=await Promise.all(s.working.filter(h=>a?!a.isArbitraryPathIgnored(h.uri.path,!1):!0).map(async h=>({type:h.type,resourceUri:h.uri,decorations:{strikeThrough:h.type===D.Deleted},command:await this.providerService.getChangeStore(h.uri).resolveDiffCommand(h.uri,u(h.uri),l.l10n.t("{0} (Working Tree)",j(h.uri)))})));return i.sourceControl.actionButton=this.ensureActionButton(e),this.ensureMergeConflictsGroup(i).resourceStates=c,this.ensureStagedChangesGroup(i).resourceStates=this.staging.enabled?d:[],this.ensureWorkingChangesGroup(i).resourceStates=this.staging.enabled?f:[...d,...f],i}ensureActionButton(e){var n,r;const i=(n=this.providerService.getRegisteredProvider(e))==null?void 0:n.name;return{command:{title:l.l10n.t("Commit & Push"),tooltip:i!==void 0?l.l10n.t("Your changes will be committed and pushed directly to {0}.",i):l.l10n.t("Your changes will be committed and pushed directly to the remote."),command:"remoteHub.commit"},secondaryCommands:[[{title:l.l10n.t("Continue Working On..."),tooltip:l.l10n.t("Bring your working changes with you to a new development environment."),command:"remoteHub.continueOn"}]],enabled:(r=this.providerService.changeStoreMaybeHasChanges(e))!=null?r:!0}}async createOrUpdateScmProvider(e,n){var r,i;const a=await this.providerService.getMetadata(e);let s;const c=a.HEAD.branch?a.HEAD.name:void 0;let u=this.getScmProvider(e);if(u===void 0){n=a.name,s=l.scm.createSourceControl(`remoteHub:${a.provider.id}`,n,e),s.quickDiffProvider={provideOriginalResource:f=>k.getProviderUri(f)};const d=this.providerService.createIGitRepository(e,s,a);u={id:a.provider.id,name:a.provider.name,sourceControl:s,groups:[],repository:d},this.ensureMergeConflictsGroup(u),this.ensureStagedChangesGroup(u),this.ensureWorkingChangesGroup(u),this._scmProviders.push(u)}else s=u.sourceControl;return a.accessLevel>=le.Write||((i=(r=a.HEAD.branch)==null?void 0:r.remote)==null?void 0:i.accessLevel)!==void 0&&a.HEAD.branch.remote.accessLevel>=le.Write?(s.acceptInputCommand={command:"remoteHub.commit",title:l.l10n.t("Commit"),arguments:[s]},c?s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to '{0}' on {1})",c,a.provider.name):s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to {0})",a.provider.name),me.get("commitDirectlyWarning")===wt.Off?s.inputBox.validateInput=void 0:s.inputBox.validateInput=d=>{if(me.get("commitDirectlyWarning")===wt.Auto&&tl(va.HasCommitted))return;const f=new l.MarkdownString(c?l.l10n.t("Your changes will be committed and immediately pushed to the '{0}' branch on {1}.",c,a.provider.name):l.l10n.t("Your changes will be committed and immediately pushed to {0}.",a.provider.name));return f.isTrusted=!0,f.appendMarkdown(`&nbsp; [${l.l10n.t("Don't show again")}](command:remoteHub.disableCommitDirectlyWarning '${l.l10n.t("Hide")}')`),{message:f,type:l.SourceControlInputBoxValidationType.Information}}):(s.acceptInputCommand={command:"remoteHub.createPullRequest",title:l.l10n.t("Create a Pull Request"),arguments:[s]},s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to create a pull request for '{0}')",n)),await this.updateStatusBarCommands(u,{syncing:!1},a),u}async updateStatusBarCommands(e,n,r){var i,a,s,c,u;const d=e.sourceControl.rootUri;r=r!=null?r:await this.providerService.getMetadata(d);const{HEAD:f}=r,h=await this.providerService.getIndexMetadata(d),p=(h==null?void 0:h.type)===Y.Active,b=(h==null?void 0:h.type)===Y.Active,ne=Y.hasIndex(h==null?void 0:h.type),A=await this.providerService.getChangeStore(d).hasChanges(d),Z=(a=f.type===V.Branch&&((i=await this.providerService.getBranch(d,f.branch.name))==null?void 0:i.locked)?"$(lock)":void 0)!=null?a:Ii(f.type),pe=[];if(pe.push(nr({command:"remoteHub.switchToBranch",title:`${Z} ${f.name}${A?"*":""}`,tooltip:`${O(f.sha)}`,arguments:[{uri:d,commands:!0}]})),f.detached||((n==null?void 0:n.syncing)?pe.push(nr({command:"",title:"$(sync~spin)",tooltip:l.l10n.t("Syncing Changes..."),arguments:[]})):pe.push(nr({command:"remoteHub.sync",title:`$(sync)${((c=(s=r.state)==null?void 0:s.behind)!=null?c:0)>0?` ${(u=r.state)==null?void 0:u.behind}\u2193`:""}`,tooltip:p||b?l.l10n.t("Sync to latest indexed commit"):l.l10n.t("Sync (Pull & Push)"),arguments:[{uri:d}]}))),r.pullRequest&&pe.push(nr({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${r.pullRequest.id}`,tooltip:l.l10n.t(`Open Pull Request #{0} on {1}

{2}`,r.pullRequest.id,r.provider.name,r.pullRequest.title),arguments:[{provider:r.provider,repo:r.repo,pullRequest:{id:r.pullRequest.id}}]})),ne){const X=this.providerService.getIndexProvider(d);X&&pe.push(...await X.getStatusBarContributions(d))}e.sourceControl.statusBarCommands=pe}ensureMergeConflictsGroup(e){const n="conflicts";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Merge Conflicts")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureStagedChangesGroup(e){const n="staged";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Staged Changes")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureWorkingChangesGroup(e){const n="changes";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Changes")),e.groups.push(r)),r}getScmProvider(e){const n=E(e);return this._scmProviders.find(r=>E(r.sourceControl.rootUri)===n)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let n;if(fc(e))n=e;else if(Ks(e)){const r=e,i=this._scmProviders.find(a=>a.groups.find(s=>s.id===r.id));n=i==null?void 0:i.sourceControl}else if(zo(e)){const r=e,i=this._scmProviders.find(a=>a.groups.some(s=>s.resourceStates.find(c=>c.resourceUri.toString()===r.resourceUri.toString())));n=i==null?void 0:i.sourceControl}else{if(this._scmProviders.length!==1)return;n=this._scmProviders[0].sourceControl}return n}async closeDiffEditors(e,n){if(!l.workspace.getConfiguration("git",e).get("closeDiffOnOperation",!1))return;const i=[];for(const a of l.window.tabGroups.all.map(s=>s.tabs).flat()){const{input:s}=a;(s instanceof l.TabInputTextDiff||s instanceof l.TabInputNotebookDiff)&&s.modified.scheme===k.scheme&&(!n||n.some(c=>c.path===s.modified.path))&&i.push(a)}await l.window.tabGroups.close(i,!0)}}o($s,"VirtualSourceControl");function fc(t){return"rootUri"in t&&"inputBox"in t}o(fc,"isSourceControl");function Ks(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}o(Ks,"isSourceControlResourceGroup");function zo(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof l.Uri}o(zo,"isSourceControlResourceState");function Wa(t){return"type"in t}o(Wa,"isTrackedChange");async function Jo(t){var e,n,r;if(t.length===0)return!0;let i,a=l.l10n.t("Discard Changes");if(t.length===1){const c=t[0];c.type===D.Created?(i=l.l10n.t(`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,j((e=c.resourceUri)!=null?e:c.uri)),a=l.l10n.t("Delete file")):c.type===D.Deleted?(a=l.l10n.t("Restore file"),i=l.l10n.t("Are you sure you want to restore {0}?",j((n=c.resourceUri)!=null?n:c.uri))):i=l.l10n.t("Are you sure you want to discard changes in {0}?",j((r=c.resourceUri)!=null?r:c.uri))}else t.every(c=>c.type===D.Created)?i=l.l10n.t(`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(c=>c.type===D.Deleted)?(a=l.l10n.t("Restore files"),i=l.l10n.t("Are you sure you want to restore {0} files?",t.length)):i=l.l10n.t("Are you sure you want to discard changes in {0} files?",t.length);return await l.window.showWarningMessage(i,{modal:!0},a)===a}o(Jo,"confirmDiscard");async function $a(t,e,n){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const r=await l.window.showQuickPick(t.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:e,title:n});if(!!r)return r.uri}o($a,"getOrPickRootUri");async function Ka(t,e,n,r,i,a){let s;const c=l.window.createInputBox();c.ignoreFocusOut=!0;try{return await new Promise(u=>{s=l.Disposable.from(c.onDidHide(()=>u(void 0)),c.onDidChangeValue(d=>{if(d=d.trim(),!d){c.validationMessage=l.l10n.t("Please enter a valid branch name");return}if(!w(d)){c.validationMessage=l.l10n.t("'{0}' isn't a valid branch name",d);return}c.validationMessage=void 0}),c.onDidAccept(async()=>{const d=c.value.trim();if((await t.getBranches(e,{query:d,limit:100})).branches.some(h=>h.name===d)){c.validationMessage=l.l10n.t("Branch '{0}' already exists",d);return}c.enabled=!1,c.busy=!0,u(d)})),c.prompt=n,c.placeholder=r,c.title=i,c.value=hc(a),c.show()})}finally{c.dispose(),s==null||s.dispose()}}o(Ka,"getBranchNameWithPrompt");function hc(t){const e=l.workspace.getConfiguration("git"),n=e.get("branchPrefix","");if(!t&&e.get("branchRandomName.enable",!1)===!0){const r=gc();return`${n}${r}`}return`${n}${t!=null?t:""}`}o(hc,"generateBranchName");function gc(){const t=l.workspace.getConfiguration("git"),e=t.get("branchRandomName.dictionary",["adjectives","animals"]),n=[];for(const r of e)r.toLowerCase()==="adjectives"&&n.push(lc),r.toLowerCase()==="animals"&&n.push(cc),r.toLowerCase()==="colors"&&n.push(uc),r.toLowerCase()==="numbers"&&n.push(Ws.generate({length:3}));return n.length===0?"":sc({dictionaries:n,length:n.length,separator:t.get("branchWhitespaceChar","-")})}o(gc,"generateRandomBranchName");class Ji extends l.TimelineItem{static is(e){return e instanceof Ji}constructor(e,n,r,i,{dateType:a,showAuthor:s,dateFormatter:c}){var u;const d=r.message.indexOf(`
`),f=d!==-1?`${r.message.substring(0,d)} \u2026`:r.message,h=a==="authored"?r.authorDate:r.commitDate;super(f,(u=h==null?void 0:h.getTime())!=null?u:0);this.id=r.hash,this.contextValue=`${k.scheme}:${n}:file:commit`,this.command=i,s&&(this.description=r.authorName),this.tooltip=vc(r,c,h),this.iconPath=new l.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=n,this.hash=r.hash,this.parents=r.parents,this.message=r.message}}o(Ji,"CommitTimelineItem");function vc(t,e,n){return t.authorName&&t.authorEmail?l.l10n.t(`{0} ({1}) \u2014 {2}
{3}

{4}`,t.authorName,t.authorEmail,O(t.hash),e.format(n),t.message):t.authorName&&!t.authorEmail?l.l10n.t(`{0} \u2014 {1}
{2}

{3}`,t.authorName,O(t.hash),e.format(n),t.message):l.l10n.t(`{0}
{1}

{2}`,O(t.hash),e.format(n),t.message)}o(vc,"getCommitTooltip");class ga extends l.TimelineItem{static is(e){return e instanceof ga}constructor(e,n,r,i,a,{dateFormatter:s}){const c=l.l10n.t("Staged Changes");super(c,r.timestamp);this.id="index",this.contextValue=`${k.scheme}:${n}:file:${this.id}`,this.command=a,this.iconPath=new l.ThemeIcon("git-commit"),this.tooltip=l.l10n.t(`{0}  \u2014 {1}
{2}

{3}`,l.l10n.t("You"),l.l10n.t("Index"),s.format(new Date(r.timestamp)),Kl(r.type)),this.rootUri=e,this.providerId=n,this.hash="~",this.parents=i,this.message=c}}o(ga,"ChangeOperationTimelineItem");class Gs{constructor(e){this.providerService=e,this._onDidChange=new l.EventEmitter,this.id="github-file-history",this.label=l.l10n.t("GitHub File History"),this.debouncer=new wr(500),this.disposable=l.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),me.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const n=E(this.rootUri);!e.some(r=>E(r)===n)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const n=E(this.rootUri);(e.added.some(r=>E(r.uri)===n)||e.removed.some(r=>E(r.uri)===n))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||E(this.rootUri)!==E(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const n=E(this.rootUri);e.some(r=>E(r.rootUri)===n)&&this.fireChanged()}async provideTimeline(e,n,r){var i;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const ne of this.providerService.repositories)if(ne.uri.path===this.rootUri.path){this.rootUri=ne.uri;break}const a=this.providerService.getRelativeFilePath(this.rootUri,e),s=await this.providerService.getMetadata(this.rootUri);if(!s||r.isCancellationRequested)return{items:[]};const c=await this.providerService.getCommits(this.rootUri,{ref:s.HEAD.sha,path:a||void 0,cursor:n.cursor,limit:typeof n.limit=="number"?n.limit:void 0});if(c===void 0||c.commits.length===0||r.isCancellationRequested)return{items:[]};const u=((i=c.paging)==null?void 0:i.more)?{cursor:c.paging.cursor}:void 0,d=new Intl.DateTimeFormat(l.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),f=me.getAny("git.timeline.date",void 0,"committed"),h=me.getAny("git.timeline.showAuthor",void 0,!0),p=await Promise.all(c.commits.map(async ne=>new Ji(this.rootUri,s.provider.id,ne,await this.resolveDiffCommand(ne,s,e,a),{dateType:f,showAuthor:h,dateFormatter:d}))),b=n.cursor===void 0?await this.providerService.changeStoreGetChange(e):void 0;if(b&&Boolean(b.staged&&me.get("staging.enabled"))){const A=new ga(this.rootUri,s.provider.id,b,[c.commits[0].hash],await this.providerService.changeStoreResolveDiffCommand(b.uri,k.getProviderUri(b.uri),l.l10n.t("{0} (Index)",j(b.uri))),{dateFormatter:d});p.splice(0,0,A)}return{items:p,paging:u}}catch(a){return K.error(a),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=l.workspace.registerTimelineProvider([Xn.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[l.commands.registerCommand("remoteHub.timeline.copyCommitId",(n,r,i)=>{!Ji.is(n)||l.env.clipboard.writeText(n.hash)}),l.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(n,r,i)=>{!Ji.is(n)||l.env.clipboard.writeText(n.message)}),l.commands.registerCommand("remoteHub.timeline.openDiff",async(n,r,i)=>{var a;!Ji.is(n)&&!ga.is(n)||n.command!==void 0&&await l.commands.executeCommand(n.command.command,...(a=n.command.arguments)!=null?a:[])}),l.commands.registerCommand("remoteHub.timeline.openOnGitHub",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.selectForCompare",async(n,r,i)=>{!r||!Ji.is(n)&&!ga.is(n)||(e={uri:r,left:n},await l.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),l.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(n,r,i)=>{if(!r||!e||!Ji.is(n)&&!ga.is(n)||E(r)!==E(e.uri))return;const{left:a}=e,s=this.providerService.getRelativeFilePath(n.rootUri,r),c=await this.providerService.getMetadata(n.rootUri),u=j(r),d=a.parents[0];let f;d===void 0?f=l.l10n.t("{0} ({1})",u,O(n.hash)):a.hash===""?f=l.l10n.t("{0} (Working Tree)",u):a.hash==="~"?f=l.l10n.t("{0} (Index)",u):f=l.l10n.t("{0} ({1})",u,O(a.hash));let h=a.hash===""||a.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:ye.Commit,id:d!=null?d:"0000000000000000000000000000000000000000"}},s);d===void 0&&(h=h.with({query:"~"}));const p=n.parents[0];let b;p===void 0?b=l.l10n.t("{0} ({1})",u,O(n.hash)):p==="~"&&n.hash===""?b=l.l10n.t("{0} (Working Tree)",u):n.hash==="~"?b=l.l10n.t("{0} (Index)",u):b=l.l10n.t("{0} ({1})",u,O(n.hash));const ne=l.l10n.t("{0} \u27F7 {1}",f,b),A=n.hash===""||n.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:ye.Commit,id:n.hash}},s);await l.commands.executeCommand("vscode.diff",h,A,ne)})]}async resolveDiffCommand(e,n,r,i,a){const s=j(r);let c=e.parents[0],u=this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:ye.Commit,id:c!=null?c:"0000000000000000000000000000000000000000"}},i);try{await this.providerService.stat(u)}catch(h){c=void 0}let d;c===void 0?d=l.l10n.t("{0} ({1})",s,O(e.hash)):e.hash===""?d=l.l10n.t("{0} (Working Tree)",s):e.hash==="~"?d=l.l10n.t("{0} (Index)",s):d=l.l10n.t("{0} ({1}) \u27F7  {0} ({2})",s,O(c),O(e.hash)),c===void 0&&(u=u.with({query:"~"}));const f=e.hash===""||e.hash==="~"?r:this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:ye.Commit,id:e.hash}},i);return{command:"vscode.diff",title:"Open Comparison",arguments:[u,f,d,a]}}async openOnRemote(e){if(!Ji.is(e))return;const n=await this.providerService.getMetadata(e.rootUri);await ri("remoteHub.openOnRemote",{provider:n.provider,repo:n.repo,sha:e.hash})}}o(Gs,"VirtualTimelineProvider");class zs{constructor(e,n){this.providerService=e,this.telemetryService=n,this.disposable=l.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var n;const r=new bt(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);await kr(this.providerService,void 0);try{switch(e.path){case"/open":{this.telemetryService.publicLog2("handleUri.open");let i,a;for(const c of e.query.split("&")){const[u,d]=c.split("=");switch(u){case"url":i=decodeURIComponent(d);break;case"location":a=d===Je.CurrentWindow?Je.CurrentWindow:Je.NewWindow;break}}if(!i){r.log({message:": Unable to find url parameter"}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted url not found"});return}i=i.trim(),a=a!=null?a:Je.NewWindow;const s=await this.providerService.createWorkspaceForRemoteUrl(i,void 0,a);if(!s){r.log({message:`: Unable to open workspace for ${i}`}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted invalid url"});const c=l.l10n.t("Show Extensions");l.window.showErrorMessage(l.l10n.t(`Unable to open ${i}.
You may need to install or enable additional extensions.`),c).then(u=>{u===c&&l.commands.executeCommand("workbench.view.extensions",`${qo.join(" ")}`)});return}r.log({message:`: Opening ${i} in ${a}`}),wn(this.providerService,s);break}case"/open-files":{let i;for(const s of e.query.split("&")){const[c,u]=s.split("=");if(c==="url"){i=decodeURIComponent(u);break}}if(!i){r.log({message:": Unable to find url parameter"});return}i=i.trim();const a=await this.providerService.createWorkspaceForRemoteUrl(i);if(!a){r.log({message:`: Unable to open files/folders for ${i}`});return}a.filesToOpen?(r.log({message:`: Opening files/folders for ${i}`}),await((n=To())==null?void 0:n.openPendingFiles(a.uri,a.filesToOpen))):r.log({message:`: No files/folders found to open for ${i}`});break}default:{r.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{r.stop()}}}o(zs,"RemoteUriHandler");var pc=Object.defineProperty,mc=Object.getOwnPropertyDescriptor,yc=o((t,e,n,r)=>{for(var i=r>1?void 0:r?mc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&pc(e,n,i),i},"view_decorateClass"),ba;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(ba||(ba={}));const Js=o(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof Js}get id(){}toString(){return`${K.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,n){return this.splatted&&this.parent!==void 0&&this.parent!==n?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let _a=Js;yc([$t((t=!1,e=!1,n)=>JSON.stringify([t,e,n==null?void 0:n.toString()]))],_a.prototype,"triggerChange",1);class Vs{constructor(e,n,r,i){this.id=e,this.name=n,this.providerService=r,this.telemetryService=i,this._onDidChangeTreeData=new l.EventEmitter,this.disposables=[];const a=!1;if(K.isDebugging&&a){const s=this.getTreeItem;this.getTreeItem=async function(c){var u;const d=await s.apply(this,[c]),f=c.getParent();return d.tooltip===void 0&&(d.tooltip=new l.MarkdownString(d.label!==void 0&&typeof d.label!="string"?d.label.label:(u=d.label)!=null?u:"")),typeof d.tooltip=="string"?d.tooltip=`${d.tooltip}

---
context: ${d.contextValue}
node: ${c.toString()}${f!==void 0?`
parent: ${f.toString()}`:""}`:d.tooltip.appendMarkdown(`

---

context: \`${d.contextValue}\`\\
node: \`${c.toString()}\`${f!==void 0?`\\
parent: \`${f.toString()}\``:""}`),d}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!me.changed(e,`views.${this.configKey}`)}dispose(){l.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=l.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(me.onDidChange(n=>{!this.filterConfigurationChanged(n)||(this._config=void 0,this.onConfigurationChanged(n))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.publicLog2("view.open",{view:this.id}),this.root=this.getRoot()),this.root}async getChildren(e){return e!==void 0?e.getChildren():(await kr(this.providerService,void 0),this.ensureRoot().getChildren())}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var n,r;await((r=(n=this.root)==null?void 0:n.refresh)==null?void 0:r.call(n,e)),this.triggerNodeChange()}async refreshNode(e,n=!1,r=!1){var i;const a=await((i=e.refresh)==null?void 0:i.call(e,n));!r&&a===!0||this.triggerNodeChange(e)}async reveal(e,n){if(this.tree!==void 0)try{await this.tree.reveal(e,n)}catch(r){K.error(r)}}async show(){try{await l.commands.executeCommand(`${this.id}.focus`)}catch(e){K.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=me.get("views")[this.configKey]),this._config}}o(Vs,"View");class js extends _a{constructor(e,n,r,i,a,s,c){super(e,n);this._message=r,this._description=i,this._tooltip=a,this._iconPath=s,this._contextValue=c}getChildren(){return[]}getTreeItem(){var e;const n=new l.TreeItem(this._message,l.TreeItemCollapsibleState.None);return n.contextValue=(e=this._contextValue)!=null?e:ba.Message,n.description=this._description,n.tooltip=this._tooltip,n.iconPath=this._iconPath,n}}o(js,"MessageNode");var wc=Object.defineProperty,Sc=Object.getOwnPropertyDescriptor,Vo=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Sc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&wc(e,n,i),i},"workspaceRepositoriesView_decorateClass");const Ys=o(class extends _a{constructor(t,e,n,r,i,a,s){super(t,e);this.changeStore=n,this.canonical=r,this.workspaceRepository=i,this.operation=a,this.canApplyChanges=s}static getId(t,e,n){return`${Ga.getId(t,e)}:${this.key}(${n.uri.toString()})`}get id(){return Ys.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new l.TreeItem(t,l.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${ba.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const n=Boolean(this.operation.staged&&me.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const r=k.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,r,n?l.l10n.t("{0} (Index)",j(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree)",j(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:r}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),i=this.view.providerService.createProviderUri(this.operation.uri,{repo:r,ref:{type:ye.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,n?l.l10n.t("{0} (Index of {1})",j(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree of {1})",j(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await l.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await l.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){l.window.showErrorMessage(String(e))}}},"_FileChangeNode");let qs=Ys;qs.key=":changes";const Qs=o(class extends _a{constructor(t,e,n,r,i){super(t,e);this.canonical=n,this.workspaceRepository=r,this.root=i}static getId(t,e){return`${Do.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return Qs.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||l.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.providerService.getChangeStore(this.workspaceRepository.uri).getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(n=>new qs(this.view,this,t,this.canonical,this.workspaceRepository,n,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=Hn(this.workspaceRepository),n=Xn.isCanonicalUri(this.workspaceRepository.uri)?l.l10n.t("{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,r=new l.TreeItem(this.root?this.canonical.name:n,e?l.TreeItemCollapsibleState.Collapsed:l.TreeItemCollapsibleState.None);return r.id=this.id,r.contextValue=`${ba.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,r.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${Jn(this.workspaceRepository.timestamp,{ago:!0})}`,r.iconPath=t?new l.ThemeIcon("check"):this.root?el(this.canonical.provider.id):Zr(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),r.tooltip=new l.MarkdownString(void 0,!0).appendMarkdown(l.l10n.t(`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?l.l10n.t(`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",Cc(this.workspaceRepository.ref.type),Ii(this.workspaceRepository.ref.type),n,t?` \u2014 _${l.l10n.t("Active")}_ `:"",Jn(this.workspaceRepository.timestamp,{ago:!0}),sn(this.workspaceRepository.changes,{preamble:`${l.l10n.t("Has Uncommitted Changes")}\\
`}))),e&&(r.resourceUri=l.Uri.parse("remotehub-view://wsrepo/changes")),r}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository)}catch(e){l.window.showErrorMessage(String(e))}}remove(){return this.view.providerService.workspaceRepositoriesRemoveRepository(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let Ga=Qs;Ga.key=":wsrepo",Vo([$t()],Ga.prototype,"refresh",1);const Xs=o(class extends _a{constructor(t,e,n,r){super(t,e);this.canonical=n,this.workspaceRepositories=r}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return Xs.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new js(this.view,this,l.l10n.t("No remote repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new Ga(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(n=>n.workspaceId===this.view.workspaceId),e=new l.TreeItem(this.canonical.name,t?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.Collapsed);return e.contextValue=ba.WorkspaceRepositories,e.iconPath=el(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let Do=Xs;Do.key=":wsrepos",Vo([$t()],Do.prototype,"refresh",1);class jo extends _a{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.providerService.workspaceRepositoriesGetRepositoriesByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const n=[];for(const[r,i]of e){const a=l.Uri.parse(r);try{const{name:s,provider:c}=this.view.providerService.getVirtualUriMetadata(a),u={uri:a,name:s,provider:c,hasActive:i.some(d=>d.workspaceId===this.view.workspaceId)};i.length===1?n.push(new Ga(this.view,this,u,i[0],!0)):n.push(new Do(this.view,this,u,i))}catch(s){if(s instanceof tn)continue;K.error(s)}}this.children=n}return this.children}getTreeItem(){return new l.TreeItem("Repositories",l.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}o(jo,"WorkspaceRepositoriesViewNode"),Vo([$t()],jo.prototype,"refresh",1);class Zs extends Vs{constructor(e,n,r){super("remoteHub.views.workspaceRepositories",l.l10n.t("Remote Repositories"),e,r);this.workspaceId=n,this.configKey="workspaceRepositories",this.disposables.push(this.providerService.onDidChangeWorkspaceRepositories(this.onRepositoriesChanged,this),l.window.registerFileDecorationProvider({provideFileDecoration:(i,a)=>{if(!(i.scheme!=="remotehub-view"||i.authority!=="wsrepo"||!i.path.includes("/changes")))return{badge:"\u25CF",color:new l.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:l.l10n.t("Has Uncommitted Changes")}}}))}getRoot(){return new jo(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[l.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.refresh"),this.providerService.workspaceRepositoriesRefresh(),void this.refresh(!0)),this),l.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.open"),wn(this.providerService,{name:e.name,uri:e.uri,location:Je.CurrentWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openInNewWindow"),wn(this.providerService,{name:e.name,uri:e.uri,location:Je.NewWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.remove"),e.remove()),this),l.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openFile"),e.openFile()),this),l.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const n=E(this.providerService.getVirtualCanonicalRootUri(e.uri)),r=this.providerService.repositories.filter(a=>E(a.canonicalUri)===n);return await bc(r,l.l10n.t("Choose a repository to apply the changeset to"))}}o(Zs,"WorkspaceRepositoriesView");function Cc(t,e){switch(t){case V.Branch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Branch");case V.RemoteBranch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Remote Branch");case V.Tag:return l.l10n.t("Tag");case V.Commit:return l.l10n.t("Commit")}}o(Cc,"headTypeToString");function el(t){switch(t){case"github":return new l.ThemeIcon("github");case"azurerepos":return new l.ThemeIcon("azure-devops");default:return new l.ThemeIcon("vm")}}o(el,"providerToIconPath");async function bc(t,e){if(t.length!==0){if(t.length>1){const n=await l.window.showQuickPick(t.map(r=>({label:r.name,description:r.provider.name,repository:r})),{placeHolder:e});return n?n.repository:void 0}return t[0]}}o(bc,"getRepository");let Ro;function To(){return Ro}o(To,"getOpenActionsService");var va;(function(t){t.HasCommitted="has:committed",t.Version="version"})(va||(va={}));let Mo;function tl(t){return Mo.globalState.get(t)}o(tl,"getState");async function Yo(t,e){return Mo.globalState.update(t,e)}o(Yo,"updateState");let nl=!1;function _c(){return nl}o(_c,"isPreRelease");async function Ec(t){Mo=t,Ve.configure("remoteHub",t),K.configure(t,"Remote Repositories",me.get("logLevel")),bt.start("Time to root directory",{log:!1});const e=_n.configure(t),n=new Pe(t),r=t.extension.packageJSON.version;await Yo(va.Version,r),await t.workspaceState.update(va.Version,r);const[,i]=Mo.extension.packageJSON.version.split(".");nl=Number.parseInt(i)%2==1;try{const a=new Xn(n,t.workspaceState);Ro=new po(a);const s=new Os(a),c=new $s(a,Ro,n,s),u=new ya(a);return typeof l.workspace.registerEditSessionIdentityProvider!==void 0&&t.subscriptions.push(l.workspace.registerEditSessionIdentityProvider(k.scheme,new da(a))),t.subscriptions.push(me.onDidChange(d=>{!me.changed(d,"logLevel")||(K.logLevel=me.get("logLevel"))}),a.onDidChangeRepositories(async d=>{for(const f of d.added)try{const h=await f.getMetadata(),{HEAD:p,defaultBranch:b,name:ne,provider:A,pullRequest:Z}=h,pe=p.name.replace(/\//g,"\u2009\u2215\u2009");let X=" ";if(Z!==void 0)X=` (PR ${Z.id}) `;else if(p.type===V.Tag)X=` (${pe}) `;else if(p.type===V.Commit)X=` (${pe}) `;else if(p.type===V.Branch||p.type===V.RemoteBranch){const xe=p.branch.name.replace(/\//g,"\u2009\u2215\u2009");p.branch.name!==b.name&&(X=` (${xe}) `)}const _e={uri:f.uri,type:"folder",label:`${ne}${X}[${A.name}]`};l.commands.executeCommand("_workbench.addToRecentlyOpened",_e)}catch(h){K.error(h,"Failed to add repository to recently opened")}}),new Es(a,s),new aa(a),new zs(a,n),...Or(a,t.extension.id,n),...Tc(a,n),...await Ac(a,c,t,n),new Gs(a),new Zs(a,e,n),c,Ro,a,n),n.publicLog2("activate"),Promise.resolve(u)}catch(a){throw K.error(a),et(t,a),a}}o(Ec,"activate");async function Ac(t,e,n,r){const i=[];if(rl()){const a=new kt(t,r);t.registerVirtualIndexProvider("github",a),t.registerVirtualIndexProvider("azurerepos",a),i.push(a)}return i.push(Rc(t,e),Dc(e)),i}o(Ac,"registerProviders");function Dc(t){async function e(){let r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps");r||await new Promise(a=>{const s=l.extensions.onDidChange(()=>{r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps"),r&&(s.dispose(),a())})});const i=await r.activate();if(!(!i||typeof i.registerGitProvider!="function"))return i.registerGitProvider(t)}o(e,"registerWithStaticWebApps");const n=e();return l.Disposable.from({dispose:async()=>{var r;return void((r=await n)==null?void 0:r.dispose())}})}o(Dc,"registerStaticWebApps");function Rc(t,e){async function n(){var i;try{let a=(i=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?i:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");a||(K.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(h=>{const p=l.extensions.onDidChange(()=>{var b;a=(b=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?b:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),a&&(p.dispose(),h())})})),K.log("[ GHPR] Registering..."),Dr(er.HasPullRequestExtension,!0);const s=await a.activate();if(!s)throw new Error("Unable to get registration api");const c=s.registerGitProvider(e),u=t.onDidChangeRepositories(h=>d(h));async function d(h){const p=h.added.filter(b=>b.provider.id==="github");if(p.length!==0){K.log("[ GHPR] Checking for opened PRs...");for(const b of p){const ne=await t.getBestRemoteUri(b.uri,I.PullRequest);if(!!ne){u.dispose(),K.log("[ GHPR] Opened PR found; preloading"),l.commands.executeCommand("github.api.preloadPullRequest",ne.toString());return}}K.log("[ GHPR] No opened PRs found")}}o(d,"onRepositoriesChanged"),K.log("[ GHPR] Registration complete");const f=t.repositories;return f.length&&d({added:f,removed:[]}),l.Disposable.from(c,u)}catch(a){return K.error(a,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}o(n,"registerWithGHPR");const r=n();return l.Disposable.from({dispose:async()=>{var i;return void((i=await r)==null?void 0:i.dispose())}})}o(Rc,"registerGitHub");function Tc(t,e){if(!rl())return[];e.publicLog2("codex.enableRichNav",{});const n=new Bt(t);return[n,n.register(new jn(e)),...jn.createStatus()]}o(Tc,"registerNavigationServiceProviders");function rl(){return l.env.uiKind===l.UIKind.Desktop||me.get("richNavigation.enabled")===!0}o(rl,"isRichNavEnabled");const qo=["github.remotehub","ms-vscode.azure-repos"],Qo=new Map,Xo=new Map;async function kr(t,e){var n,r,i;if(e!==void 0&&typeof e!="string"&&(e=Xn.getProviderId(e)),e&&Xo.has(e)){const a=Xo.get(e);if(!a)return;await Qo.get(a);return}for(const a of l.extensions.all){const s=a.id,{contributes:c}=a.packageJSON;if(!c||!qo.includes(s.toLowerCase()))continue;const u=Qo.get(s),d=(r=(n=c.virtualWorkspaces)==null?void 0:n.providers)!=null?r:[],f=d.find(p=>p===e)!==void 0,h=d.length&&e===void 0;if(!u&&(h||f)){const p=(i=l.extensions.getExtension(s))==null?void 0:i.activate().then(b=>b.registerVirtualProviderService(t));if(p===void 0)return;Qo.set(s,p);for(const b of d)Xo.set(b,s);if(await p,e!==void 0&&f)return}else u&&await u}}o(kr,"ensureProvidersRegistered")})(),module.exports=Lo})();
