"use strict";exports.id=225,exports.ids=[225],exports.modules={2502:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},8128:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(2502),exports),__exportStar(__webpack_require__(6903),exports),__exportStar(__webpack_require__(2041),exports)},6903:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestLightClient=void 0;const clients_1=__webpack_require__(6502);class RequestLightClient extends clients_1.AbstractCachedRequest{logger;options;xhr;constructor(xhr,requestOptions,requestLogger){super(requestOptions.caching),this.logger=requestLogger,this.options=requestOptions,this.xhr=xhr}clearCache(){this.cache.clear()}async request(method,baseUrl,query={},headers={}){const url=clients_1.UrlHelpers.createUrl(baseUrl,query),cacheKey=method+"_"+url;if(this.cache.cachingOpts.duration>0&&!1===this.cache.hasExpired(cacheKey)){const cachedResp=this.cache.get(cacheKey);if(cachedResp.rejected)throw cachedResp;return cachedResp}try{const response=await this.xhr({url,type:method,headers,strictSSL:this.options.http.strictSSL});return this.createCachedResponse(cacheKey,response.status,response.responseText,!1)}catch(error){const errorResponse=error;throw this.createCachedResponse(cacheKey,errorResponse.status,errorResponse.responseText,!0)}}}exports.RequestLightClient=RequestLightClient},2041:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createJsonClient=exports.createHttpClient=void 0;const clients_1=__webpack_require__(6502),RequireLight=__importStar(__webpack_require__(6283)),requestLightClient_1=__webpack_require__(6903);function createHttpClient(options,logger){return new requestLightClient_1.RequestLightClient(RequireLight.xhr,options,logger)}exports.createHttpClient=createHttpClient,exports.createJsonClient=function(options,logger){return new clients_1.JsonHttpClient(createHttpClient(options,logger))}},4225:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(5768),exports),__exportStar(__webpack_require__(7974),exports),__exportStar(__webpack_require__(3127),exports),__exportStar(__webpack_require__(7563),exports),__exportStar(__webpack_require__(683),exports)},5566:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PubContributions=void 0,function(PubContributions){PubContributions.Caching="pub.caching",PubContributions.Http="pub.http",PubContributions.DependencyProperties="pub.dependencyProperties",PubContributions.ApiUrl="pub.apiUrl",PubContributions.FilePatterns="pub.files",PubContributions.OnSaveChangesTask="pub.onSaveChanges",PubContributions.PrereleaseTagFilter="pub.prereleaseTagFilter"}(exports.PubContributions||(exports.PubContributions={}))},5768:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PubClient=void 0;const clients_1=__webpack_require__(6502),packages_1=__webpack_require__(7074),suggestions_1=__webpack_require__(804);exports.PubClient=class{constructor(config,jsonClient,logger){this.config=config,this.jsonClient=jsonClient,this.logger=logger}config;jsonClient;logger;async fetchPackage(request){const requestedPackage=request.dependency.package,pathDesc=request.dependency.packageDesc.getType(packages_1.PackageDescriptorType.path);if(pathDesc)return packages_1.ClientResponseFactory.createDirectory(requestedPackage.name,pathDesc.path);if(request.dependency.packageDesc.getType(packages_1.PackageDescriptorType.git))return packages_1.ClientResponseFactory.createGit();const semverSpec=packages_1.VersionUtils.parseSemver(requestedPackage.version),hosted=request.dependency.packageDesc.getType(packages_1.PackageDescriptorType.hosted),url=hosted?`${hosted.hostUrl}/api/documentation/${requestedPackage.name}`:`${this.config.apiUrl}/api/documentation/${requestedPackage.name}`;try{return await this.createRemotePackageDocument(url,requestedPackage.name,semverSpec)}catch(error){const errorResponse=error;this.logger.debug("Caught exception from %s: %O",packages_1.PackageClientSourceType.Registry,errorResponse);const suggestion=suggestions_1.SuggestionFactory.createFromHttpStatus(errorResponse.status);if(null!=suggestion)return packages_1.ClientResponseFactory.create(packages_1.PackageClientSourceType.Registry,errorResponse,[suggestion]);throw errorResponse}}async createRemotePackageDocument(url,packageName,semverSpec){const httpResponse=await this.jsonClient.request(clients_1.HttpClientRequestMethods.get,url,{},{}),packageInfo=httpResponse.data,versionRange=semverSpec.rawVersion,resolved={name:packageName,version:versionRange},responseStatus={source:httpResponse.source,status:httpResponse.status},rawVersions=packages_1.VersionUtils.extractVersionsFromMap(packageInfo.versions),{releases,prereleases}=packages_1.VersionUtils.splitReleasesFromArray(rawVersions,this.config.prereleaseTagFilter),suggestions=(0,suggestions_1.createSuggestions)(versionRange,releases,prereleases);return{source:packages_1.PackageClientSourceType.Registry,responseStatus,type:semverSpec.type,resolved,suggestions}}}},7974:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PubConfig=void 0;const clients_1=__webpack_require__(6502),abstractProviderConfig_1=__webpack_require__(5141),ePubContributions_1=__webpack_require__(5566);class PubConfig extends abstractProviderConfig_1.AbstractProviderConfig{constructor(config,caching,http){super("pub",config,caching,http)}get fileMatcher(){return{language:"yaml",scheme:"file",pattern:this.filePatterns}}get filePatterns(){return this.config.get(ePubContributions_1.PubContributions.FilePatterns)}get dependencyProperties(){return this.config.get(ePubContributions_1.PubContributions.DependencyProperties)}get apiUrl(){return clients_1.UrlHelpers.ensureEndSlash(this.config.get(ePubContributions_1.PubContributions.ApiUrl))}get onSaveChangesTask(){return this.config.get(ePubContributions_1.PubContributions.OnSaveChangesTask)}get prereleaseTagFilter(){return this.config.get(ePubContributions_1.PubContributions.PrereleaseTagFilter)}}exports.PubConfig=PubConfig},683:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.configureContainer=void 0;const serviceUtils_1=__webpack_require__(1285);exports.configureContainer=async function(serviceProvider,services){return(0,serviceUtils_1.addCachingOptions)(services),(0,serviceUtils_1.addHttpOptions)(services),(0,serviceUtils_1.addPubConfig)(services),(0,serviceUtils_1.addJsonClient)(services),(0,serviceUtils_1.addPubClient)(services),(0,serviceUtils_1.addSuggestionProvider)(services),await services.buildChild("pub",serviceProvider)}},3127:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.PubSuggestionProvider=void 0;const packages_1=__webpack_require__(7074),providers_1=__webpack_require__(6424),pubUtils_1=__webpack_require__(7563),complexTypeHandlers={[packages_1.PackageDescriptorType.version]:packages_1.createVersionDescFromYamlNode,[packages_1.PackageDescriptorType.path]:packages_1.createPathDescFromYamlNode,[packages_1.PackageDescriptorType.hosted]:packages_1.createHostedDescFromYamlNode,[packages_1.PackageDescriptorType.git]:packages_1.createGitDescFromYamlNode};class PubSuggestionProvider extends providers_1.SuggestionProvider{constructor(client,logger){super(client,logger),this.config=client.config,this.suggestionReplaceFn=pubUtils_1.pubReplaceVersion}config;suggestionReplaceFn;clearCache(){this.client.jsonClient.clearCache()}parseDependencies(packagePath,packageText){const options={includePropNames:this.config.dependencyProperties,complexTypeHandlers},packageDescriptors=(0,packages_1.extractPackageDependenciesFromYaml)(packageText,options),packageDependencies=[];for(const packageDesc of packageDescriptors)if(packageDesc.hasType(packages_1.PackageDescriptorType.version)){const versionType=packageDesc.getType(packages_1.PackageDescriptorType.version);packageDependencies.push(new packages_1.PackageDependency((0,packages_1.createPackageResource)(packageDesc.name,versionType.version,packagePath),packageDesc.nameRange,versionType.versionRange,packageDesc))}else{if(packageDesc.hasType(packages_1.PackageDescriptorType.path)){const pathType=packageDesc.getType(packages_1.PackageDescriptorType.path);packageDependencies.push(new packages_1.PackageDependency((0,packages_1.createPackageResource)(packageDesc.name,pathType.path,packagePath),packageDesc.nameRange,pathType.pathRange,packageDesc))}if(packageDesc.hasType(packages_1.PackageDescriptorType.git)){const gitType=packageDesc.getType(packages_1.PackageDescriptorType.git);packageDependencies.push(new packages_1.PackageDependency((0,packages_1.createPackageResource)(packageDesc.name,gitType.gitUrl,packagePath),packageDesc.nameRange,packageDesc.nameRange,packageDesc))}else;}return packageDependencies}}exports.PubSuggestionProvider=PubSuggestionProvider},7563:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.pubReplaceVersion=void 0;const suggestions_1=__webpack_require__(804);exports.pubReplaceVersion=function(packageInfo,newVersion){const charAt=this.substr(packageInfo.versionRange.start,1);return(0,suggestions_1.defaultReplaceFn)(packageInfo,"#"===charAt?newVersion+" ":newVersion)}},1285:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.addSuggestionProvider=exports.addPubClient=exports.addJsonClient=exports.addPubConfig=exports.addHttpOptions=exports.addCachingOptions=void 0;const clients_1=__webpack_require__(6502),utils_1=__webpack_require__(7130),http_1=__webpack_require__(8128),ePubContributions_1=__webpack_require__(5566),pubClient_1=__webpack_require__(5768),pubConfig_1=__webpack_require__(7974),pubSuggestionProvider_1=__webpack_require__(3127);exports.addCachingOptions=function(services){services.addSingleton((0,utils_1.nameOf)().pubCachingOpts,(container=>new clients_1.CachingOptions(container.appConfig,ePubContributions_1.PubContributions.Caching,"caching")))},exports.addHttpOptions=function(services){services.addSingleton((0,utils_1.nameOf)().pubHttpOpts,(container=>new clients_1.HttpOptions(container.appConfig,ePubContributions_1.PubContributions.Http,"http")))},exports.addPubConfig=function(services){services.addSingleton((0,utils_1.nameOf)().pubConfig,(container=>new pubConfig_1.PubConfig(container.appConfig,container.pubCachingOpts,container.pubHttpOpts)))},exports.addJsonClient=function(services){services.addSingleton((0,utils_1.nameOf)().pubJsonClient,(container=>(0,http_1.createJsonClient)({caching:container.pubCachingOpts,http:container.pubHttpOpts},container.logger.child({namespace:"pub request"}))))},exports.addPubClient=function(services){services.addSingleton((0,utils_1.nameOf)().pubClient,(container=>new pubClient_1.PubClient(container.pubConfig,container.pubJsonClient,container.logger.child({namespace:"pub client"}))))},exports.addSuggestionProvider=function(services){services.addScoped((0,utils_1.nameOf)().suggestionProvider,(container=>new pubSuggestionProvider_1.PubSuggestionProvider(container.pubClient,container.logger.child({namespace:"pub provider"}))))}}};
//# sourceMappingURL=225.bundle.js.map